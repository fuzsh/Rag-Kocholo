{
    "id": "dbpedia_2537_2",
    "rank": 20,
    "data": {
        "url": "https://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2019/msg00642.html",
        "read_more_link": "",
        "language": "en",
        "title": "Re: [ferret_users] vertical formula embedded in netcdf file",
        "top_image": "",
        "meta_img": "",
        "images": [],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "",
        "meta_lang": "",
        "meta_favicon": "",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "To: ferret_users@xxxxxxxx\n\nSubject: Re: [ferret_users] vertical formula embedded in netcdf file\n\nFrom: \"Ansley C. Manke\" <ansley.b.manke@xxxxxxxx>\n\nDate: Tue, 12 May 2020 10:51:31 -0700\n\nArc-authentication-results: i=2; mx.google.com; dkim=pass header.i=@noaa.gov header.s=google header.b=N+j6Dkza; spf=pass (google.com: domain of ansley.b.manke@xxxxxxxx designates 209.85.220.41 as permitted sender) smtp.mailfrom=ansley.b.manke@xxxxxxxx; dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov\n\nArc-authentication-results: i=1; mx.google.com; dkim=pass header.i=@noaa.gov header.s=google header.b=N+j6Dkza; spf=pass (google.com: domain of ansley.b.manke@xxxxxxxx designates 209.85.220.41 as permitted sender) smtp.mailfrom=ansley.b.manke@xxxxxxxx; dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov\n\nArc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=list-archive:list-help:list-post:list-id:mailing-list:precedence :content-language:in-reply-to:mime-version:user-agent:date :message-id:from:references:to:subject:dkim-signature; bh=8O2Zpf+ay2gV63x6l2+SMXk3CjtKr351dRXj6LFHo78=; b=MUkUfwunzp/Z3euPH/OwqX4ga4qmn0yscTpD0YO85VGFKh9VpMTnQ/Z+kZdneqCiID g539jyJ2s1wJLR5GwDFenXyNbssf8xCJ09dC4YhgUH2A3jL+pCvBhoUIs6qZlGsm9Qsq ulbV3Tjg224o2oRaVXepqW9XyIqJW6OH7LeM+hMSvZJtpGuPNuGTtm0ev7D4D2WJaW/p TLUwcjkZhSHzTse+DYV0KuhKyu4aNgFRT3E9wrBcGUw0E32QbB6OUjn/FlEVtLvrN5p6 oYHq798t86Zrr2CbK0YDmkUytMlNP82jrpilWRCYvpf0z1aJO+BhpufDuzA2Hh2PTabG jREg==\n\nArc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816; h=content-language:in-reply-to:mime-version:user-agent:date :message-id:from:references:to:subject:dkim-signature; bh=8O2Zpf+ay2gV63x6l2+SMXk3CjtKr351dRXj6LFHo78=; b=HtLtncjuoNEv94/RmQJhkuuPZ7p7eLizlFVJ6GRI/0xKLbupc2ampEzHbei4tNddt1 WT9aO6H0FiN8po/aZvbsuySKpjHtJG+GcRTZzl1QUFznwmBrYSS3b+X3P5IKsCHG56dU cDOCczcNhPSM46UECfCHZIKWfR2AF5R4ciNxQmcbJqgYi41uilXJgKwxEKcQ4PwyegcS 8kJQOPXAW+fYeqMj3T9hPxEXoNzqg+pGhs+Oq10Seg2RXEjzSda2bbUDQeMHEQAU/SKM ZqGW4Snp5veP1dQYsi6iSzLxD1rIcl99cuLCawv/qD1z+Usg6qeq2N5u2ZmC6K8skicD Q3IA==\n\nArc-seal: i=2; a=rsa-sha256; t=1589305894; cv=pass; d=google.com; s=arc-20160816; b=aVEQvAmZAN0p4ZyDvXjDYsUzcEOITRqJd1JBQYsYiYne1iU4YcAD4dqaU7NhDo7cY0 9RidaFqKM87GwLzftSzJIVmuvHu8h2hBEvzPSK56UuYQ/+VYvGaV+us2b/bIY92jL/LI BOXf0YB7A+i+PTVclR29eHagCAzwf4YfiWVRs238l3IMQgTMmXfKRBbQ64DAsu55o4UB LFWcgf/+ssjuA+4sSIYOhESUABvqAYjP5kBXtwpP3hSRNADWzBr5LWNB+/fa+WYKAHNZ lKKJO1aPDTLjq2zNTck3iIKaNl9wCBIA1O2OuCpGw4TqtmrEl72Hnlx2b/0GROxc57kp EM5w==\n\nArc-seal: i=1; a=rsa-sha256; t=1589305893; cv=none; d=google.com; s=arc-20160816; b=LvWyYSjkxoJ9DiEzB7/41Lkb4QX/pd5IXGG0v8ekOgoUpx8Q5HKY+BED8lNsUT1QCQ O9UiqkUzS/9l9xakV66VDq90qX8j0yTsUlXlJFY8ECmIDFbO8VBUF4th5k1uZMNbBSVe QPcZ226hfQxC1gcMtW6M038JtQajJACPGnCVQseVF5hdj5v5ehi9XBQ0GRH5nw7G2uvK +A6LvfHRs+EIq+n3Fqg1wP3IDAeLfpyr4TqfFvLPpZAJKntJr7hSKWZ3WfBHU53//TDO n6AGpU0cYup8tt4tIdLwmLQJRY+ubUpa9LeaxViSLWBvIHXD2uioudrx0eMtJdivs+MH fWyg==\n\nDkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=noaa.gov; s=google; h=subject:to:references:from:message-id:date:user-agent:mime-version :in-reply-to:content-language:x-original-sender :x-original-authentication-results:precedence:mailing-list:list-id :list-post:list-help:list-archive; bh=8O2Zpf+ay2gV63x6l2+SMXk3CjtKr351dRXj6LFHo78=; b=ekG8hMc4MKL76G50FLseDjyVzupVqi9MjfC8FvxfQQtH2pPWn9uZkOc30P0C4pEjYA fs2kJ6r6G83lUiVhwsafo03mt34gBKcUhU+5EabA0EGKoghO9IcC57ZrfVTt6Pu/6ROB nuGN3WvTlvkf71+/G3bSnw2XNptdbL5vydQj72MWJZ4+eBs7vPoiD7mFujGITRTUyLdL HfowypCb1WT4Dg+x0WYaDmXmEewzC/d1zsjF1zmyYnqIpJzq6HzoVFQPrtdH6zoi8dvA yFBuKjE9jsFboAlDl7SZ7qEVVOUqVMFUXsrbajFSCtvBE+c8pE3Jcqd/4+rwCGoClSIv cKSw==\n\nIn-reply-to: <CAEsMs0Te1dGAar94TwVO8fDL3Ug8Y8big6B47okNf3AwzMVCUw@mail.gmail.com>\n\nList-archive: <https://groups.google.com/a/noaa.gov/group/ferret_users/>\n\nList-help: <https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838>, <mailto:ferret_users+help@noaa.gov>\n\nList-id: <ferret_users.noaa.gov>\n\nList-post: <https://groups.google.com/a/noaa.gov/group/ferret_users/post>, <mailto:ferret_users@noaa.gov>\n\nMailing-list: list ferret_users@xxxxxxxx; contact ferret_users+owners@xxxxxxxx\n\nReferences: <CAEsMs0RwdG0dBUMfHDc+qH=P0Omw49LJ-_AvEJ3qZrs05r5moA@mail.gmail.com> <CAEwQpaJ5858d-T370e39D86H7sA6HQQeu-ApXKe=L5QfJrPMfA@mail.gmail.com> <CAEsMs0Te1dGAar94TwVO8fDL3Ug8Y8big6B47okNf3AwzMVCUw@mail.gmail.com>\n\nSender: owner-ferret_users@xxxxxxxx\n\nUser-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101 Thunderbird/68.8.0\n\nHi Al,\n\nNo, Ferret/PyFerret doesn't automatically apply formula terms for z-regridding, nor does it automatically handle curvilinear coordinates in the horizontal direction.\n\nI wonder if we'd do well to alert the user to these elements of the file. When there are attributes in the file that indicate these grid types, a **NOTE on opening the file pointing to the PyFerret terminology for working with these grids might be helpful.\n\n-Ansley\n\nOn 5/8/2020 11:25 AM, Albert Hermann - NOAA Affiliate wrote:\n\nThanks much Ryo,\n\nI'm familiar with ZAXREPLACE; I guess my question is whether ferret is already doing this replacement internally (since that was the intention of this particular CF standard, to allow software to \"automatically\" regrid, or at least to calculate the z-array for the user). Any thoughts on this from the ferret developers? As it stands, it is difficult to know whether ferret is presenting me with raw or regridded values. If the former, I could attempt the regridding with ZAXREPLACE, as Ryo suggests.\n\nBest,\n\nAl Hermann\n\nOn Thu, May 7, 2020 at 9:09 PM Ryo Furue <furue@xxxxxxxxxx> wrote:\n\nHi Albert,\n\nI'm not super familiar with the issue, I've seen this discussed on this mailing list, and somebody else must have a better answer, but anyway . . .\n\nOn Fri, May 8, 2020 at 8:58 AM Albert Hermann - NOAA Affiliate <albert.j.hermann@xxxxxxxx> wrote:\n\nHi group,\n\nI am reading in a file created from one of the CMIP6 models. It appears to have a coordinate transformation embedded as metadata, which one might think would yield different z-levels for the 4D variable (vo) at each horizontal location. However, when I read the file into ferret v7.5, I get vo appearing on a single z-axis (which ferret labels as \"lev\"), ranging from 1 to 7250. That axis has the same values as the \"zlev\" variable in the original file. Now, \"zlev\" is in fact used in the depth formula, but it is *not* the only term - other terms in the equation suggest that z-levels should vary by location and time (see the formula listed in the ncdump below). Is ferret in fact regridding to a uniform z-axis based on zlev, or is it erroneously assuming all is uniform?\n\nFerret just shows information contained in your netCDF file. It doesn't automatically regrid the data for you.\n\nYour 4D variable seems to be defined on the sigma coordinates for levels k = 1, 2, 3, . . . , nsigma\n\nand on the level coordinates for the deeper levels (k = nsigma + 1, . . . ).\n\nfor k <= nsigma:\n\nz(n,k,j,i) = eta(n,j,i) + sigma(k)*(min(depth_c,depth(j,i))+eta(n,j,i))\n\nfor k > nsigma:\n\nz(n,k,j,i) = zlev(k)\n\nIn the netCDF file, your 4D variable is defined at zlev(k) for all k just for convenience, I guess. For k <= nsigma, therefore, zlev(k) doesn't indicate the actual depth at which your variable is defined. (For a model that uses the sigma coordinates for all depth, the vertical coordinate is usually sigma in [0, 1].)\n\nSo, to use your data on Ferret, you first construct z(n,k,j,i) as described above for all k, and use it to regrid your variable onto the level coordinates with the ZAXREPLACE function. There have been discussions about that in this mailing list and I think there is an entry in Ferret's FAQ, in Ferret's official manual, or both.\n\nHope this helps,\n\nRegards,\n\nRyo\n\n--\n\nalbert.j.hermann@xxxxxxxx\n\nPacific Marine Environmental Laboratory\n\n7600 Sand Point Way NE\n\nSeattle WA 98115\n\n206-526-6495\n\n-- Ansley Manke Science Data Integration Group NOAA Pacific Marine Environmental Laboratory 7600 Sand Point Way NE Seattle WA 98115 I am currently teleworking and am available Tue-Wed-Thu.\n\nReferences:\n\n[ferret_users] vertical formula embedded in netcdf file\n\nFrom: Albert Hermann - NOAA Affiliate\n\nRe: [ferret_users] vertical formula embedded in netcdf file\n\nFrom: Ryo Furue\n\nRe: [ferret_users] vertical formula embedded in netcdf file\n\nFrom: Albert Hermann - NOAA Affiliate\n\nPrevious by thread: Re: [ferret_users] vertical formula embedded in netcdf file\n\nNext by thread: [ferret_users] white space in latitude-time cross-section plot (Hovemuller plot)\n\n[Thread Prev][Thread Next][Index] Contact Us"
    }
}