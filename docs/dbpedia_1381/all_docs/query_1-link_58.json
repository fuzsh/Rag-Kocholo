{
    "id": "dbpedia_1381_1",
    "rank": 58,
    "data": {
        "url": "https://github.com/argoproj/argo/issues/1128",
        "read_more_link": "",
        "language": "en",
        "title": "Running workflow results in wait container \"no space left on device\" · Issue #1128 · argoproj/argo-workflows",
        "top_image": "https://opengraph.githubassets.com/f85e71220b49786983a5e4d04a5d36e0fa2fe9c315069ad9b5811d51230304d1/argoproj/argo-workflows/issues/1128",
        "meta_img": "https://opengraph.githubassets.com/f85e71220b49786983a5e4d04a5d36e0fa2fe9c315069ad9b5811d51230304d1/argoproj/argo-workflows/issues/1128",
        "images": [
            "https://avatars.githubusercontent.com/u/34320559?s=80&u=8b1daab2937d0174c953379c3fd05bb2f89bab2c&v=4",
            "https://avatars.githubusercontent.com/u/2452105?s=80&u=09324d3f92ca20533119258c28333fa18e572f6c&v=4",
            "https://avatars.githubusercontent.com/u/12677113?s=40&u=0094b361933133ea2af1ee342805b7777fe5fb6a&v=4",
            "https://avatars.githubusercontent.com/u/12677113?s=40&u=0094b361933133ea2af1ee342805b7777fe5fb6a&v=4",
            "https://avatars.githubusercontent.com/u/33231851?s=80&u=5a1ebcd1cccd0ac9dbc4955c37d8492e4a7489a9&v=4",
            "https://avatars.githubusercontent.com/u/2452105?s=80&u=09324d3f92ca20533119258c28333fa18e572f6c&v=4",
            "https://avatars.githubusercontent.com/u/12677113?s=80&u=0094b361933133ea2af1ee342805b7777fe5fb6a&v=4",
            "https://avatars.githubusercontent.com/u/33231851?s=80&u=5a1ebcd1cccd0ac9dbc4955c37d8492e4a7489a9&v=4",
            "https://avatars.githubusercontent.com/u/426437?s=80&u=fa4394a0bc2d8d083d91a7f31efdfb73a21cb9eb&v=4",
            "https://avatars.githubusercontent.com/u/426437?s=40&u=fa4394a0bc2d8d083d91a7f31efdfb73a21cb9eb&v=4",
            "https://avatars.githubusercontent.com/u/33231851?s=80&u=5a1ebcd1cccd0ac9dbc4955c37d8492e4a7489a9&v=4",
            "https://avatars.githubusercontent.com/u/33231851?s=80&u=5a1ebcd1cccd0ac9dbc4955c37d8492e4a7489a9&v=4",
            "https://avatars.githubusercontent.com/u/426437?s=80&u=fa4394a0bc2d8d083d91a7f31efdfb73a21cb9eb&v=4",
            "https://avatars.githubusercontent.com/u/33231851?s=80&u=5a1ebcd1cccd0ac9dbc4955c37d8492e4a7489a9&v=4",
            "https://avatars.githubusercontent.com/u/426437?s=40&u=fa4394a0bc2d8d083d91a7f31efdfb73a21cb9eb&v=4",
            "https://avatars.githubusercontent.com/u/426437?s=80&u=fa4394a0bc2d8d083d91a7f31efdfb73a21cb9eb&v=4",
            "https://avatars.githubusercontent.com/u/426437?s=40&u=fa4394a0bc2d8d083d91a7f31efdfb73a21cb9eb&v=4",
            "https://avatars.githubusercontent.com/u/455324?s=40&v=4",
            "https://avatars.githubusercontent.com/u/455324?s=40&v=4",
            "https://avatars.githubusercontent.com/u/455324?s=40&v=4",
            "https://avatars.githubusercontent.com/u/455324?s=40&v=4",
            "https://avatars.githubusercontent.com/u/455324?s=40&v=4",
            "https://avatars.githubusercontent.com/u/455324?s=40&v=4",
            "https://avatars.githubusercontent.com/u/1162120?s=40&u=63151aba2882cd5923e8a73588cf71bd394cb99b&v=4",
            "https://avatars.githubusercontent.com/u/13398326?s=40&u=f145cc0567e992adebb6740a18d8f557b5c1e79a&v=4",
            "https://avatars.githubusercontent.com/u/1576438?s=40&u=58f94cd099da12d47e3e1f40e07d47bb43401864&v=4",
            "https://avatars.githubusercontent.com/u/426437?s=40&u=fa4394a0bc2d8d083d91a7f31efdfb73a21cb9eb&v=4",
            "https://avatars.githubusercontent.com/u/4497837?s=40&u=4ee4aec199742d1d46ac402cf58ce31354191594&v=4",
            "https://avatars.githubusercontent.com/u/12677113?s=40&u=0094b361933133ea2af1ee342805b7777fe5fb6a&v=4",
            "https://avatars.githubusercontent.com/u/1194156?s=40&u=1cd5b8402ee94166cb2683b0b0c5d7baeacc952d&v=4",
            "https://avatars.githubusercontent.com/u/8568896?s=40&u=4176b89987fd27a2e91e10cedaf8fc03aad4c524&v=4",
            "https://avatars.githubusercontent.com/u/3526523?s=40&u=618bcf92cc7afd980af76e9cc510b44b736d65c5&v=4",
            "https://avatars.githubusercontent.com/u/14970053?s=40&u=3a058fd00ee657ffbd746f6d9268a54e4a982983&v=4",
            "https://avatars.githubusercontent.com/u/43558452?s=40&v=4",
            "https://avatars.githubusercontent.com/u/343415?s=40&u=d42c1013436ef4546c7371a07f535f3b7126ed32&v=4",
            "https://avatars.githubusercontent.com/u/5533565?s=40&v=4",
            "https://avatars.githubusercontent.com/u/20877?s=40&v=4",
            "https://avatars.githubusercontent.com/u/805695?s=40&u=aa4658ceea9da029f7801877b6a3dc22593a78f9&v=4",
            "https://avatars.githubusercontent.com/u/33908564?s=40&u=890015e0d271258251a0f4f6ce1a1d590e586db1&v=4",
            "https://avatars.githubusercontent.com/u/412325?s=40&u=be62679a05b9c7328e8e4c3d80051015ff20afcd&v=4",
            "https://avatars.githubusercontent.com/u/9372594?s=40&u=24d7279d0075332d012ecce3d83687cd2e098d07&v=4",
            "https://avatars.githubusercontent.com/u/6504718?s=40&u=95df81a4e8489b163f02030da4da1c093d73b38f&v=4",
            "https://avatars.githubusercontent.com/u/10422579?s=40&u=ff9c375b5ee2c41b4bdd20b1e32a6fc40bd6ad0f&v=4",
            "https://avatars.githubusercontent.com/u/169247?s=40&u=dd77db632754be5248e7275029435f33e7f2f85a&v=4",
            "https://avatars.githubusercontent.com/u/275966?s=40&v=4",
            "https://avatars.githubusercontent.com/u/13746446?s=40&u=6dc40ac85714d62c001a3d192516fdc61a398673&v=4",
            "https://avatars.githubusercontent.com/u/39540637?s=40&u=1b48b64710147c8a4e8c1b7169d93d8efe79b2ed&v=4",
            "https://avatars.githubusercontent.com/u/1829149?s=40&u=cbdf5d25f549d114a16f01ba1c5df49b1718c2eb&v=4",
            "https://avatars.githubusercontent.com/u/5270053?s=40&u=9e420176580917ed9c776ebcddeb4427bbd8bcb1&v=4",
            "https://avatars.githubusercontent.com/u/6810256?s=40&v=4",
            "https://avatars.githubusercontent.com/u/13478110?s=40&u=0fdb69924a214f2dcabc1fe948b797f11ab4f939&v=4",
            "https://avatars.githubusercontent.com/u/28508110?s=40&u=7d785ead45be8bbf736f691416ace222f7e0fed7&v=4",
            "https://avatars.githubusercontent.com/u/4113414?s=40&v=4",
            "https://avatars.githubusercontent.com/u/6713233?s=40&u=5907f1e09765de114665c641f85627da021befc1&v=4",
            "https://avatars.githubusercontent.com/u/31719294?s=40&u=be00247d494cab1d5bcb675f5384eb08a3471390&v=4",
            "https://avatars.githubusercontent.com/u/22873967?s=40&v=4",
            "https://avatars.githubusercontent.com/u/554135?s=40&v=4",
            "https://avatars.githubusercontent.com/u/32115552?s=40&v=4",
            "https://avatars.githubusercontent.com/u/6420214?s=40&u=18d2eaf4f21f507e079454b738a34b8be138404c&v=4",
            "https://avatars.githubusercontent.com/u/1142830?s=40&u=c893f99c152727beb204caea70ed45ee936b20b2&v=4",
            "https://avatars.githubusercontent.com/u/50969109?s=40&v=4",
            "https://avatars.githubusercontent.com/u/690878?s=40&u=bd65cc1f228ce6455e56dfaca3ef47c33bc7c3b0&v=4",
            "https://avatars.githubusercontent.com/u/2772268?s=40&v=4",
            "https://avatars.githubusercontent.com/u/70605?s=40&v=4",
            "https://avatars.githubusercontent.com/u/31151721?s=40&v=4",
            "https://avatars.githubusercontent.com/u/16039800?s=40&u=57bc4d8328e6e63a598b190a370b7fbc525cb4d5&v=4",
            "https://avatars.githubusercontent.com/u/8053949?s=40&u=96d7f39e3823c25e39db68f15095c884061583a3&v=4",
            "https://avatars.githubusercontent.com/u/39952205?s=40&u=c765dc4e9a6da38ac0264c712ab2daa1e20ba06f&v=4",
            "https://avatars.githubusercontent.com/u/15387460?s=40&u=1f163153829b3c4306d00b7f6458dab8b58bf45a&v=4",
            "https://avatars.githubusercontent.com/u/192430?s=40&v=4",
            "https://avatars.githubusercontent.com/u/2915573?s=40&u=5c029624fc4e974a0107193218595b0e365a188c&v=4",
            "https://avatars.githubusercontent.com/u/37178563?s=40&u=158fdc5cfdea5b961333fef1a8e30b8d6e30fc27&v=4",
            "https://avatars.githubusercontent.com/u/25306803?s=40&u=13fc2289598cfe561b68f2e5370fbb54d857cc10&v=4",
            "https://avatars.githubusercontent.com/u/239740?s=40&u=6319054f0b4cde2c39bddb9954bc71611a31068c&v=4",
            "https://avatars.githubusercontent.com/u/27914730?s=40&u=dd4067d92c43c1ce2a105f5e8f75b41c64442580&v=4",
            "https://avatars.githubusercontent.com/u/146378?s=40&u=a8f07db1dc640cc093fbe7ec95a1cb72fb648b19&v=4",
            "https://avatars.githubusercontent.com/u/3986668?s=40&u=bef14f9f4acbf7234aecd02869eaf43048af1ca2&v=4",
            "https://avatars.githubusercontent.com/u/587955?s=40&u=a6336869fb893ad4788db4c2eef7b38067da8f46&v=4",
            "https://avatars.githubusercontent.com/u/2306904?s=40&v=4",
            "https://avatars.githubusercontent.com/u/7700969?s=40&u=744532e148e55d65bac8a1195b58551c276a3d01&v=4",
            "https://avatars.githubusercontent.com/u/15869774?s=40&u=b9420a62c42e97350a1fc7886c438dbf187996db&v=4",
            "https://avatars.githubusercontent.com/u/1545372?s=40&u=7b3a2ee1c5f4c27cd06cfe3ed94e14e47800b068&v=4",
            "https://avatars.githubusercontent.com/u/16101770?s=40&u=8b2bcde851b4bfb60a3971e25ad470bf9963827e&v=4",
            "https://avatars.githubusercontent.com/u/5047750?s=40&u=ae1425376db405de8e9c20078eb71e7c4b1f15e0&v=4",
            "https://avatars.githubusercontent.com/u/56155326?s=40&u=eff5f60c031557426b2390def18182733d70e04d&v=4",
            "https://avatars.githubusercontent.com/u/614838?s=40&u=c26ef0ef75aab80d84d62df97b755ca3b869eddc&v=4",
            "https://avatars.githubusercontent.com/u/225698?s=40&v=4",
            "https://avatars.githubusercontent.com/u/22003700?s=40&u=c18336f0c3849b497000a8a3c0686e2a35aff047&v=4",
            "https://avatars.githubusercontent.com/u/6372675?s=40&u=f06c94905168cf4ef4da9f94330fb6aa16759236&v=4",
            "https://avatars.githubusercontent.com/u/1563884?s=40&u=2fdd407f12aec1d5719318efe66d650607741708&v=4",
            "https://avatars.githubusercontent.com/u/20436635?s=40&u=4a78ed780116d5550260327c4601dd71ee7528b4&v=4",
            "https://avatars.githubusercontent.com/u/37865635?s=40&v=4",
            "https://avatars.githubusercontent.com/u/4301873?s=80&v=4",
            "https://avatars.githubusercontent.com/u/426437?s=52&v=4",
            "https://avatars.githubusercontent.com/u/2452105?s=52&v=4",
            "https://avatars.githubusercontent.com/u/4301873?s=52&v=4",
            "https://avatars.githubusercontent.com/u/12677113?s=52&v=4",
            "https://avatars.githubusercontent.com/u/33231851?s=52&v=4",
            "https://avatars.githubusercontent.com/u/34320559?s=52&v=4"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "Is this a BUG REPORT or FEATURE REQUEST?: BUG What happened: When running a workflow, a step fails. the wait container throws an error but the main container still runs successfully. When looking at the wait containers logs it has: kubec...",
        "meta_lang": "en",
        "meta_favicon": "https://github.com/fluidicon.png",
        "meta_site_name": "GitHub",
        "canonical_link": "https://github.com/argoproj/argo-workflows/issues/1128",
        "text": "* Updated ARTIFACT_REPO.md (argoproj#1049) * Updated examples/README.md (argoproj#1051) * Support for K8s API based Executor (argoproj#1010) * Submodules are dirty after checkout -- need to update (argoproj#1052) * Parameter and Argument names should support snake case (argoproj#1048) * Add namespace explicitly to pod metadata (argoproj#1059) * Update dependencies to K8s v1.12 and client-go 9.0 * Adding SAP Hybris in Who uses Argo (argoproj#1064) * Add Cratejoy to list of users (argoproj#1063) * Raise not implemented error when artifact saving is unsupported (argoproj#1062) * Adding native GCS support for artifact storage and retrieval * Support nested steps workflow parallelism (argoproj#1046) * Auto-complete workflow names (argoproj#1061) * Auto-complete workflow names * Use cobra revision at fe5e611709b0c57fa4a89136deaa8e1d4004d053 * Fix string format arguments in workflow utilities. (argoproj#1070) * fix argoproj#1078 Azure AKS authentication issues (argoproj#1079) * Issue argoproj#740 - System level workflow parallelism limits & priorities (argoproj#1065) * Issue argoproj#740 - System level workflow parallelism limits & priorities * Apply reviewer notes * Add new article and minor edits. (argoproj#1083) * Update docs to outline bare minimum set of privileges for a workflow * Use relative links on README file (argoproj#1087) * Fix typo in demo.md (argoproj#1089) Fix a small typo in demo.md that I encounted when reading through the getting started guide. * Drop reference to removed `argo install` command. (argoproj#1074) * Initialize child node before marking phase. Fixes panic on invalid `When` (argoproj#1075) * argoproj#1081 added retry logic to s3 load and save function (argoproj#1082) * adding logo to be used by the OS Site (argoproj#1099) * Update ROADMAP.md * Update docs with examples using the K8s REST API * Issue argoproj#1114 - Set FORCE_NAMESPACE_ISOLATION env variable in namespace install manifests (argoproj#1116) * Fix examples docs of parameters. (argoproj#1110) * Remove docker_lib mount volume which is not needed anymore (argoproj#1115) * Remove docker_lib mount volume which is not needed anymore * Remove unused hostPathDir * add support for ppc64le and s390x (argoproj#1102) * Install mime-support in argoexec to set proper mime types for S3 artifacts (resolves argoproj#1119) * Adding Quantibio in Who uses Argo (argoproj#1111) * Adding Quantibio in Who uses Argo * fix spelling mistake * Fix output artifact and parameter conflict (argoproj#1125) `SaveArtifacts` deletes the files that `SaveParameters` might still need, so we're calling `SaveParameters` first. Fixes argoproj#1124 * Update generated swagger to fix verify-codegen (argoproj#1131) * Allow owner reference to be set in submit util (argoproj#1120) * Issue argoproj#1104 - Remove container wait timeout from 'argo logs --follow' (argoproj#1142) * Issue argoproj#1132 - Fix panic in ttl controller (argoproj#1143) * Issue argoproj#1040 - Kill daemoned step if workflow consist of single daemoned step (argoproj#1144) * Fix global artifact overwriting in nested workflow (argoproj#1086) * Fix issue where steps with exhausted retires would not complete (argoproj#1148) * add support for other archs (argoproj#1137) * Reflect minio chart changes in documentation (argoproj#1147) * Issue argoproj#1136 - Fix metadata for DAG with loops (argoproj#1149) * Issue argoproj#1136 - Fix metadata for DAG with loops * Add slack badge to README (argoproj#1164) * Fix failing TestAddGlobalArtifactToScope unit test * Fix tests compilation error (argoproj#1157) * Replace exponential retry with poll (argoproj#1166) * add support for hostNetwork & dnsPolicy config (argoproj#1161) * Support HDFS Artifact (argoproj#1159) Support HDFS Artifact (argoproj#1159) * Update codegen for network config (argoproj#1168) * Add GitHub to users in README.md (argoproj#1151) * Add Preferred Networks to users in README.md (argoproj#1172) * Add missing patch in namespace kustomization.yaml (argoproj#1170) * Validate ArchiveLocation artifacts (argoproj#1167) * Update README and preview notice in CLA. * Update README. (argoproj#1173) (argoproj#1176) * Argo users: Equinor (argoproj#1175) * Do not mount unnecessary docker socket (argoproj#1178) * Issue argoproj#1113 - Wait for daemon pods completion to handle annotations (argoproj#1177) * Issue argoproj#1113 - Wait for daemon pods completion to handle annotations * Add output artifacts to influxdb-ci example * Increased S3 artifact retry time and added log (argoproj#1138) * Issue argoproj#1123 - Fix 'kubectl get' failure if resource namespace is different from workflow namespace (argoproj#1171) * Refactor Makefile/Dockerfile to remove volume binding in favor of build stages (argoproj#1189) * Add Docker Hub build hooks * Add documentation how to use parameter-file's (argoproj#1191) * Issue argoproj#988 - Submit should not print logs to stdout unless output is 'wide' (argoproj#1192) * Fix missing docker binary in argoexec image. Improve reuse of image layers * Fischerjulian adds ruby to rest docs (argoproj#1196) * Adds link to ruby kubernetes library. * Links to a ruby example on how to start a workflow * Updated OWNERS (argoproj#1198) * Update community/README (argoproj#1197) * Issue argoproj#1128 - Use polling instead of fs notify to get annotation changes (argoproj#1194) * Minor spelling, formatting, and style updates. (argoproj#1193) * Dockerfile: argoexec base image correction (fixes argoproj#1209) (argoproj#1213) * Set executor image pull policy for resource template (argoproj#1174) * Add schedulerName to workflow and template spec (argoproj#1184) * Issue argoproj#1190 - Fix incorrect retry node handling (argoproj#1208) * fix dag retries (argoproj#1221) * Executor can access the k8s apiserver with a out-of-cluster config file (argoproj#1134) Executor can access the k8s apiserver with a out-of-cluster config file * Update README with typo fixes (argoproj#1220) * Update README.md (argoproj#1236) * Remove extra quotes around output parameter value (argoproj#1232) Ensure we do not insert extra single quotes when using valueFrom: jsonPath to set the value of an output parameter for resource templates. Signed-off-by: Ilias Katsakioris <elikatsis@arrikto.com> * Update README.md (argoproj#1224) * Include stderr when retrieving docker logs (argoproj#1225) * Add Gardener to \"Who uses Argo\" (argoproj#1228) * Add feature to continue workflow on failed/error steps/tasks (argoproj#1205) * Fix the Prometheus address references (argoproj#1237) * Fixed Issue#1223 Kubernetes Resource action: patch is not supported (argoproj#1245) * Fixed Issue#1223 Kubernetes Resource action: patch is not supported This PR is fixed the Issue#1223 reported by @shanesiebken . Argo kubernetes resource workflow failed on patch action. --patch or -p option is required for kubectl patch action. This PR is including the manifest yaml as patch argument for kubectl. This Fix will support the Patch action in Argo kubernetes resource workflow. This Fix will support only JSON merge strategic in patch action * udpated formating * typo, executo -> executor (argoproj#1243) * Issue#1165 fake outputs don't notify and task completes successfully (argoproj#1247) * Issue#1165 fake outputs don't notify and task completes successfully This PR is addressing the Issue#1165 reported by @alexfrieden. Issue/Bug: Argo is finishing the task successfully even artifact /file does exist. Fix: Validate the created gzip contains artifact or file. if file/artifact doesn't exist, Current step/stage/task will be failed with log message . Sample Log: ''' INFO[0029] Updating node artifact-passing-lkvj8[0].generate-artifact (artifact-passing-lkvj8-1949982165) status Running -> Error INFO[0029] Updating node artifact-passing-lkvj8[0].generate-artifact (artifact-passing-lkvj8-1949982165) message: failed to save outputs: File or Artifact does not exist. /tmp/hello_world.txt INFO[0029] Step group node artifact-passing-lkvj8[0] (artifact-passing-lkvj8-1067333159) deemed failed: child 'artifact-passing-lkvj8-1949982165' failed namespace=default workflow=artifact-passing-lkvj8 INFO[0029] node artifact-passing-lkvj8[0] (artifact-passing-lkvj8-1067333159) phase Running -> Failed namespace=default workflow=artifact-passing-lkvj8 ''' * fixed gometalinter errcheck issue * Git cloning via SSH was not verifying host public key (argoproj#1261) * Update versions (argoproj#1218) * Proxy Priority and PriorityClassName to pods (argoproj#1179) * Error running 1000s of tasks: \"etcdserver: request is too large\" argoproj#1186 (argoproj#1264) * Error running 1000s of tasks: \"etcdserver: request is too large\" argoproj#1186 This PR is addressing the feature request argoproj#1186. Issue: Nodestatus element keeps growing for big workflow. Workflow will fail once the workflow total size reachs 1 MB (maz size limit in ETCD) . Solution: Compressing the Nodestatus once size reachs the 1 MB which increasing 60% to 80% more steps to execute in compress mode. Latest: Argo cli and Argo UI will able to decode and print nodestatus from compressednoode. Limitation: Kubectl willl not decode the compressedNode element * added Operator.go * revert the testing yaml * Fixed the lint issue * fixed * fixed lint * Fixed Testcase * incorporated the review comments * Reverted the change * incorporated review comments * fixing gometalinter checks * incorporated review comments * Update pod-limits.yaml * updated few comments * updated error message format * reverted unwanted files * Reduce redundancy pod label action (argoproj#1271) * Add the `mergeStrategy` option to resource patching (argoproj#1269) * This adds the ability to pass a mergeStrategy to a patch resource. this is valuable because the default merge strategy for kubernetes is 'strategic', which does not work with Custom Resources. * This also updates the resource example to demonstrate how it is used * Fix bug with DockerExecutor's CopyFile (argoproj#1275) The check to see if the source path was in the tgz archive was wrong when source path was a folder, the arguments to strings.Contains were inverted. * Add workflow labels and annotations global vars (argoproj#1280) * Argo CI is current inactive (argoproj#1285) * Issue#896 Workflow steps with non-existant output artifact path will succeed (argoproj#1277) * Issue#896 Workflow steps with non-existant output artifact path will succeed Issue: argoproj#897 Solution: Added new element \"optional\" in Artifact. The default is false. This flag will make artifact as optional and existence check will be ignored if input/output artifact has optional=true. Output Artifact ( optional=true ): Artifact existence check will be ignored during the save artifact in destination and continued workflow Input Artifact ( optional=true ): Artifact exist check will be ignored during load artifact from source and continued workflow * added end of line * removed unwanted whitespace * Deleted test code * go formatted * added formatting directives * updated Codegen * Fixed format on merge conflict * format fix * updated comments * improved error case * Fix for Resource creation where template has same parameter templating (argoproj#1283) * Fix for Resource creation where template has same parameter templating This PR will enable to support the custom template variable reference. Soulltion: Workflow variable reference resolve will check the Workflow variable prefix. * added test * fixed gofmt issue * fixed format * fixed gofmt on common.go * fixed testcase * fixed gofmt * Added unit testcase and documented * fixed Gofmt format * updated comments * Admiralty: add link to blog post, add user (argoproj#1295) * Add dns config support (argoproj#1301) * Speed up podReconciliation using parallel goroutine (argoproj#1286) * Speed up podReconciliation using parallel goroutine * Fix make lint issue * put checkandcompress back * Add community meeting notes link (argoproj#1304) * Add Karius to users in README.md (argoproj#1305) * Added support for artifact path references (argoproj#1300) * Added support for artifact path references Adds new `{{inputs.artifacts.<NAME>.path}}` and `{{outputs.artifacts.<NAME>.path}}` placeholders. * Add support for init containers (argoproj#1183) * Secrets should be passed to pods using volumes instead of API calls (argoproj#1302) * Secrets should be passed to pods using downward API instead of API calls * Fixed Gogfmt format * fixed file close Gofmt * updated review comments * fixed gofmt * updated review comments * CheckandEstimate implementation to optimize podReconciliation (argoproj#1308) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Update operator.go * Update operator.go * Add alibaba cloud to officially using argo list (argoproj#1313) * Refactor checkandEstimate to optimize podReconciliation (argoproj#1311) * Refactor checkandEstimate to optimize podReconciliation * Move compress function to persistUpdates * Fix formatting issues in examples documentation (argoproj#1310) * Fix nil pointer dereference with secret volumes (argoproj#1314) * Archive location should conditionally be added to template only when needed * Fix SIGSEGV in watch/CheckAndDecompress. Consolidate duplicate code (resolves argoproj#1315) * Implement support for PNS (Process Namespace Sharing) executor (argoproj#1214) * Implements PNS (Process Namespace Sharing) executor * Adds limited support for Kubelet/K8s API artifact collection by mirroring volume mounts to wait sidecar * Adds validation to detect when output artifacts are not supported by the executor * Adds ability to customize executor from workflow-controller-configmap (e.g. add environment variables, append command line args such as loglevel) * Fixes an issue where daemon steps were not getting terminated properly * Reorganize manifests to kustomize 2 and update version to v2.3.0-rc1 * Update v2.3.0 CHANGELOG.md * Export the methods of `KubernetesClientInterface` (argoproj#1294) All calls to these methods previously generated a panic at runtime because the calls resolved to the default, panic-always implementation, not to the overrides provided by `k8sAPIClient` and `kubeletClient`. Embedding an exported interface with unexported methods into a struct is the only way to implement that interface in another package. When doing this, the compiler generates default, panic-always implementations for all methods from the interface. Implementors can override exported methods, but it's not possible to override an unexported method from the interface. All invocations that go through the interface will come to the default implementation, even if the struct tries to provide an override. * Update README.md (argoproj#1321) * Issue1316 Pod creation with secret volumemount (argoproj#1318) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Fixed the duplicate mountpath issue * Support parameter substitution in the volumes attribute (argoproj#1238) * `argo list` was not displaying non-zero priorities correctly * Fix regression where argoexec wait would not return when podname was too long * wait will conditionally become privileged if main/sidecar privileged (resolves argoproj#1323) * Update version to v2.3.0-rc2. Update changelog * Add documentation on releasing * use a secret selector for getting credentials * fixing build issues * linter issues * fixing jenkinsfile(?) * jenkins * jenkins * jenkins * jenkins * jenkins? * jenkins :( * jenkins :( * jenkins * jenkins * jenkins * jenkins * gopkg * use GetSecretFromVolMount instead of GetSecrets * actually build argoexec * Fix argoproj#1340 parameter substitution bug Signed-off-by: Ilias Katsakioris <elikatsis@arrikto.com>\n\n* Updated ARTIFACT_REPO.md (argoproj#1049) * Updated examples/README.md (argoproj#1051) * Support for K8s API based Executor (argoproj#1010) * Submodules are dirty after checkout -- need to update (argoproj#1052) * Parameter and Argument names should support snake case (argoproj#1048) * Add namespace explicitly to pod metadata (argoproj#1059) * Update dependencies to K8s v1.12 and client-go 9.0 * Adding SAP Hybris in Who uses Argo (argoproj#1064) * Add Cratejoy to list of users (argoproj#1063) * Raise not implemented error when artifact saving is unsupported (argoproj#1062) * Adding native GCS support for artifact storage and retrieval * Support nested steps workflow parallelism (argoproj#1046) * Auto-complete workflow names (argoproj#1061) * Auto-complete workflow names * Use cobra revision at fe5e611709b0c57fa4a89136deaa8e1d4004d053 * Fix string format arguments in workflow utilities. (argoproj#1070) * fix argoproj#1078 Azure AKS authentication issues (argoproj#1079) * Issue argoproj#740 - System level workflow parallelism limits & priorities (argoproj#1065) * Issue argoproj#740 - System level workflow parallelism limits & priorities * Apply reviewer notes * Add new article and minor edits. (argoproj#1083) * Update docs to outline bare minimum set of privileges for a workflow * Use relative links on README file (argoproj#1087) * Fix typo in demo.md (argoproj#1089) Fix a small typo in demo.md that I encounted when reading through the getting started guide. * Drop reference to removed `argo install` command. (argoproj#1074) * Initialize child node before marking phase. Fixes panic on invalid `When` (argoproj#1075) * argoproj#1081 added retry logic to s3 load and save function (argoproj#1082) * adding logo to be used by the OS Site (argoproj#1099) * Update ROADMAP.md * Update docs with examples using the K8s REST API * Issue argoproj#1114 - Set FORCE_NAMESPACE_ISOLATION env variable in namespace install manifests (argoproj#1116) * Fix examples docs of parameters. (argoproj#1110) * Remove docker_lib mount volume which is not needed anymore (argoproj#1115) * Remove docker_lib mount volume which is not needed anymore * Remove unused hostPathDir * add support for ppc64le and s390x (argoproj#1102) * Install mime-support in argoexec to set proper mime types for S3 artifacts (resolves argoproj#1119) * Adding Quantibio in Who uses Argo (argoproj#1111) * Adding Quantibio in Who uses Argo * fix spelling mistake * Fix output artifact and parameter conflict (argoproj#1125) `SaveArtifacts` deletes the files that `SaveParameters` might still need, so we're calling `SaveParameters` first. Fixes argoproj#1124 * Update generated swagger to fix verify-codegen (argoproj#1131) * Allow owner reference to be set in submit util (argoproj#1120) * Issue argoproj#1104 - Remove container wait timeout from 'argo logs --follow' (argoproj#1142) * Issue argoproj#1132 - Fix panic in ttl controller (argoproj#1143) * Issue argoproj#1040 - Kill daemoned step if workflow consist of single daemoned step (argoproj#1144) * Fix global artifact overwriting in nested workflow (argoproj#1086) * Fix issue where steps with exhausted retires would not complete (argoproj#1148) * add support for other archs (argoproj#1137) * Reflect minio chart changes in documentation (argoproj#1147) * Issue argoproj#1136 - Fix metadata for DAG with loops (argoproj#1149) * Issue argoproj#1136 - Fix metadata for DAG with loops * Add slack badge to README (argoproj#1164) * Fix failing TestAddGlobalArtifactToScope unit test * Fix tests compilation error (argoproj#1157) * Replace exponential retry with poll (argoproj#1166) * add support for hostNetwork & dnsPolicy config (argoproj#1161) * Support HDFS Artifact (argoproj#1159) Support HDFS Artifact (argoproj#1159) * Update codegen for network config (argoproj#1168) * Add GitHub to users in README.md (argoproj#1151) * Add Preferred Networks to users in README.md (argoproj#1172) * Add missing patch in namespace kustomization.yaml (argoproj#1170) * Validate ArchiveLocation artifacts (argoproj#1167) * Update README and preview notice in CLA. * Update README. (argoproj#1173) (argoproj#1176) * Argo users: Equinor (argoproj#1175) * Do not mount unnecessary docker socket (argoproj#1178) * Issue argoproj#1113 - Wait for daemon pods completion to handle annotations (argoproj#1177) * Issue argoproj#1113 - Wait for daemon pods completion to handle annotations * Add output artifacts to influxdb-ci example * Increased S3 artifact retry time and added log (argoproj#1138) * Issue argoproj#1123 - Fix 'kubectl get' failure if resource namespace is different from workflow namespace (argoproj#1171) * Refactor Makefile/Dockerfile to remove volume binding in favor of build stages (argoproj#1189) * Add Docker Hub build hooks * Add documentation how to use parameter-file's (argoproj#1191) * Issue argoproj#988 - Submit should not print logs to stdout unless output is 'wide' (argoproj#1192) * Fix missing docker binary in argoexec image. Improve reuse of image layers * Fischerjulian adds ruby to rest docs (argoproj#1196) * Adds link to ruby kubernetes library. * Links to a ruby example on how to start a workflow * Updated OWNERS (argoproj#1198) * Update community/README (argoproj#1197) * Issue argoproj#1128 - Use polling instead of fs notify to get annotation changes (argoproj#1194) * Minor spelling, formatting, and style updates. (argoproj#1193) * Dockerfile: argoexec base image correction (fixes argoproj#1209) (argoproj#1213) * Set executor image pull policy for resource template (argoproj#1174) * Add schedulerName to workflow and template spec (argoproj#1184) * Issue argoproj#1190 - Fix incorrect retry node handling (argoproj#1208) * fix dag retries (argoproj#1221) * Executor can access the k8s apiserver with a out-of-cluster config file (argoproj#1134) Executor can access the k8s apiserver with a out-of-cluster config file * Update README with typo fixes (argoproj#1220) * Update README.md (argoproj#1236) * Remove extra quotes around output parameter value (argoproj#1232) Ensure we do not insert extra single quotes when using valueFrom: jsonPath to set the value of an output parameter for resource templates. Signed-off-by: Ilias Katsakioris <elikatsis@arrikto.com> * Update README.md (argoproj#1224) * Include stderr when retrieving docker logs (argoproj#1225) * Add Gardener to \"Who uses Argo\" (argoproj#1228) * Add feature to continue workflow on failed/error steps/tasks (argoproj#1205) * Fix the Prometheus address references (argoproj#1237) * Fixed Issue#1223 Kubernetes Resource action: patch is not supported (argoproj#1245) * Fixed Issue#1223 Kubernetes Resource action: patch is not supported This PR is fixed the Issue#1223 reported by @shanesiebken . Argo kubernetes resource workflow failed on patch action. --patch or -p option is required for kubectl patch action. This PR is including the manifest yaml as patch argument for kubectl. This Fix will support the Patch action in Argo kubernetes resource workflow. This Fix will support only JSON merge strategic in patch action * udpated formating * typo, executo -> executor (argoproj#1243) * Issue#1165 fake outputs don't notify and task completes successfully (argoproj#1247) * Issue#1165 fake outputs don't notify and task completes successfully This PR is addressing the Issue#1165 reported by @alexfrieden. Issue/Bug: Argo is finishing the task successfully even artifact /file does exist. Fix: Validate the created gzip contains artifact or file. if file/artifact doesn't exist, Current step/stage/task will be failed with log message . Sample Log: ''' INFO[0029] Updating node artifact-passing-lkvj8[0].generate-artifact (artifact-passing-lkvj8-1949982165) status Running -> Error INFO[0029] Updating node artifact-passing-lkvj8[0].generate-artifact (artifact-passing-lkvj8-1949982165) message: failed to save outputs: File or Artifact does not exist. /tmp/hello_world.txt INFO[0029] Step group node artifact-passing-lkvj8[0] (artifact-passing-lkvj8-1067333159) deemed failed: child 'artifact-passing-lkvj8-1949982165' failed namespace=default workflow=artifact-passing-lkvj8 INFO[0029] node artifact-passing-lkvj8[0] (artifact-passing-lkvj8-1067333159) phase Running -> Failed namespace=default workflow=artifact-passing-lkvj8 ''' * fixed gometalinter errcheck issue * Git cloning via SSH was not verifying host public key (argoproj#1261) * Update versions (argoproj#1218) * Proxy Priority and PriorityClassName to pods (argoproj#1179) * Error running 1000s of tasks: \"etcdserver: request is too large\" argoproj#1186 (argoproj#1264) * Error running 1000s of tasks: \"etcdserver: request is too large\" argoproj#1186 This PR is addressing the feature request argoproj#1186. Issue: Nodestatus element keeps growing for big workflow. Workflow will fail once the workflow total size reachs 1 MB (maz size limit in ETCD) . Solution: Compressing the Nodestatus once size reachs the 1 MB which increasing 60% to 80% more steps to execute in compress mode. Latest: Argo cli and Argo UI will able to decode and print nodestatus from compressednoode. Limitation: Kubectl willl not decode the compressedNode element * added Operator.go * revert the testing yaml * Fixed the lint issue * fixed * fixed lint * Fixed Testcase * incorporated the review comments * Reverted the change * incorporated review comments * fixing gometalinter checks * incorporated review comments * Update pod-limits.yaml * updated few comments * updated error message format * reverted unwanted files * Reduce redundancy pod label action (argoproj#1271) * Add the `mergeStrategy` option to resource patching (argoproj#1269) * This adds the ability to pass a mergeStrategy to a patch resource. this is valuable because the default merge strategy for kubernetes is 'strategic', which does not work with Custom Resources. * This also updates the resource example to demonstrate how it is used * Fix bug with DockerExecutor's CopyFile (argoproj#1275) The check to see if the source path was in the tgz archive was wrong when source path was a folder, the arguments to strings.Contains were inverted. * Add workflow labels and annotations global vars (argoproj#1280) * Argo CI is current inactive (argoproj#1285) * Issue#896 Workflow steps with non-existant output artifact path will succeed (argoproj#1277) * Issue#896 Workflow steps with non-existant output artifact path will succeed Issue: argoproj#897 Solution: Added new element \"optional\" in Artifact. The default is false. This flag will make artifact as optional and existence check will be ignored if input/output artifact has optional=true. Output Artifact ( optional=true ): Artifact existence check will be ignored during the save artifact in destination and continued workflow Input Artifact ( optional=true ): Artifact exist check will be ignored during load artifact from source and continued workflow * added end of line * removed unwanted whitespace * Deleted test code * go formatted * added formatting directives * updated Codegen * Fixed format on merge conflict * format fix * updated comments * improved error case * Fix for Resource creation where template has same parameter templating (argoproj#1283) * Fix for Resource creation where template has same parameter templating This PR will enable to support the custom template variable reference. Soulltion: Workflow variable reference resolve will check the Workflow variable prefix. * added test * fixed gofmt issue * fixed format * fixed gofmt on common.go * fixed testcase * fixed gofmt * Added unit testcase and documented * fixed Gofmt format * updated comments * Admiralty: add link to blog post, add user (argoproj#1295) * Add dns config support (argoproj#1301) * Speed up podReconciliation using parallel goroutine (argoproj#1286) * Speed up podReconciliation using parallel goroutine * Fix make lint issue * put checkandcompress back * Add community meeting notes link (argoproj#1304) * Add Karius to users in README.md (argoproj#1305) * Added support for artifact path references (argoproj#1300) * Added support for artifact path references Adds new `{{inputs.artifacts.<NAME>.path}}` and `{{outputs.artifacts.<NAME>.path}}` placeholders. * Add support for init containers (argoproj#1183) * Secrets should be passed to pods using volumes instead of API calls (argoproj#1302) * Secrets should be passed to pods using downward API instead of API calls * Fixed Gogfmt format * fixed file close Gofmt * updated review comments * fixed gofmt * updated review comments * CheckandEstimate implementation to optimize podReconciliation (argoproj#1308) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Update operator.go * Update operator.go * Add alibaba cloud to officially using argo list (argoproj#1313) * Refactor checkandEstimate to optimize podReconciliation (argoproj#1311) * Refactor checkandEstimate to optimize podReconciliation * Move compress function to persistUpdates * Fix formatting issues in examples documentation (argoproj#1310) * Fix nil pointer dereference with secret volumes (argoproj#1314) * Archive location should conditionally be added to template only when needed * Fix SIGSEGV in watch/CheckAndDecompress. Consolidate duplicate code (resolves argoproj#1315) * Implement support for PNS (Process Namespace Sharing) executor (argoproj#1214) * Implements PNS (Process Namespace Sharing) executor * Adds limited support for Kubelet/K8s API artifact collection by mirroring volume mounts to wait sidecar * Adds validation to detect when output artifacts are not supported by the executor * Adds ability to customize executor from workflow-controller-configmap (e.g. add environment variables, append command line args such as loglevel) * Fixes an issue where daemon steps were not getting terminated properly * Reorganize manifests to kustomize 2 and update version to v2.3.0-rc1 * Update v2.3.0 CHANGELOG.md * Export the methods of `KubernetesClientInterface` (argoproj#1294) All calls to these methods previously generated a panic at runtime because the calls resolved to the default, panic-always implementation, not to the overrides provided by `k8sAPIClient` and `kubeletClient`. Embedding an exported interface with unexported methods into a struct is the only way to implement that interface in another package. When doing this, the compiler generates default, panic-always implementations for all methods from the interface. Implementors can override exported methods, but it's not possible to override an unexported method from the interface. All invocations that go through the interface will come to the default implementation, even if the struct tries to provide an override. * Update README.md (argoproj#1321) * Issue1316 Pod creation with secret volumemount (argoproj#1318) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Fixed the duplicate mountpath issue * Support parameter substitution in the volumes attribute (argoproj#1238) * `argo list` was not displaying non-zero priorities correctly * Fix regression where argoexec wait would not return when podname was too long * wait will conditionally become privileged if main/sidecar privileged (resolves argoproj#1323) * Update version to v2.3.0-rc2. Update changelog * Add documentation on releasing * use a secret selector for getting credentials * fixing build issues * linter issues * fixing jenkinsfile(?) * jenkins * jenkins * jenkins * jenkins * jenkins? * jenkins :( * jenkins :( * jenkins * jenkins * jenkins * jenkins * gopkg * use GetSecretFromVolMount instead of GetSecrets * actually build argoexec * Fix argoproj#1340 parameter substitution bug Signed-off-by: Ilias Katsakioris <elikatsis@arrikto.com> * fixing gcs upload method\n\n* wip * wip * initial working version of gcs artifact storage * addressing pr feedback * updating codegen * wip * fixing issue with workflow saving * check to see if stat result is nil * adding a jenkinsfile * a small change which will hopefully speed up jenkins builds a lot * cleanup of docker push logic * cleanup of docker push logic * cleanup of docker push logic * cleanup of docker push logic * cleanup of docker push logic * changing the import path * preserving original link in a readme * use semantic version tagging (#9) * [CSE-11] adding config file loader (#10) * adding configmap loader * PR #10 should have been a minor version not a patch (#11) * adding autodeploy to jenkinsfile (#12) * fixing autodeployments (#13) * [CSE-13] extended error handling for workflows (#16) * wip * mixed case imports cause all sorts of problems, switch to lowercase * fixing build issu * fixing error deserialization * fixing error deserialization * unmatched string logic * make workflows fail on error trigger * properly evaluate workflow failures * dev version bump * serialize errors and warnings into wf crd * ugh go types * rewriting error handling to support file sources * temporarily commenting out a test * fixing warning handler * fixing error handling fixing executor fixing executor Fixing executor fixing executor fixing executor fixing executor asdf fixing executor fixing operator operator fixing executor cleanup * cleaning up types * updating codegen * fixing version * updating codegen * add podname and stage name to error result * version 2.5.0->2.4.0 * ErrorCondition->ExceptionCondition * codegen * [CS-14] merging UI update into rc (#18) * update node * UI tweaks * fixing a comment * versionbump * fixing build errors * [CSE-57] Upgrade argo (#24) * Updated ARTIFACT_REPO.md (argoproj#1049) * Updated examples/README.md (argoproj#1051) * Support for K8s API based Executor (argoproj#1010) * Submodules are dirty after checkout -- need to update (argoproj#1052) * Parameter and Argument names should support snake case (argoproj#1048) * Add namespace explicitly to pod metadata (argoproj#1059) * Update dependencies to K8s v1.12 and client-go 9.0 * Adding SAP Hybris in Who uses Argo (argoproj#1064) * Add Cratejoy to list of users (argoproj#1063) * Raise not implemented error when artifact saving is unsupported (argoproj#1062) * Adding native GCS support for artifact storage and retrieval * Support nested steps workflow parallelism (argoproj#1046) * Auto-complete workflow names (argoproj#1061) * Auto-complete workflow names * Use cobra revision at fe5e611709b0c57fa4a89136deaa8e1d4004d053 * Fix string format arguments in workflow utilities. (argoproj#1070) * fix argoproj#1078 Azure AKS authentication issues (argoproj#1079) * Issue argoproj#740 - System level workflow parallelism limits & priorities (argoproj#1065) * Issue argoproj#740 - System level workflow parallelism limits & priorities * Apply reviewer notes * Add new article and minor edits. (argoproj#1083) * Update docs to outline bare minimum set of privileges for a workflow * Use relative links on README file (argoproj#1087) * Fix typo in demo.md (argoproj#1089) Fix a small typo in demo.md that I encounted when reading through the getting started guide. * Drop reference to removed `argo install` command. (argoproj#1074) * Initialize child node before marking phase. Fixes panic on invalid `When` (argoproj#1075) * argoproj#1081 added retry logic to s3 load and save function (argoproj#1082) * adding logo to be used by the OS Site (argoproj#1099) * Update ROADMAP.md * Update docs with examples using the K8s REST API * Issue argoproj#1114 - Set FORCE_NAMESPACE_ISOLATION env variable in namespace install manifests (argoproj#1116) * Fix examples docs of parameters. (argoproj#1110) * Remove docker_lib mount volume which is not needed anymore (argoproj#1115) * Remove docker_lib mount volume which is not needed anymore * Remove unused hostPathDir * add support for ppc64le and s390x (argoproj#1102) * Install mime-support in argoexec to set proper mime types for S3 artifacts (resolves argoproj#1119) * Adding Quantibio in Who uses Argo (argoproj#1111) * Adding Quantibio in Who uses Argo * fix spelling mistake * Fix output artifact and parameter conflict (argoproj#1125) `SaveArtifacts` deletes the files that `SaveParameters` might still need, so we're calling `SaveParameters` first. Fixes argoproj#1124 * Update generated swagger to fix verify-codegen (argoproj#1131) * Allow owner reference to be set in submit util (argoproj#1120) * Issue argoproj#1104 - Remove container wait timeout from 'argo logs --follow' (argoproj#1142) * Issue argoproj#1132 - Fix panic in ttl controller (argoproj#1143) * Issue argoproj#1040 - Kill daemoned step if workflow consist of single daemoned step (argoproj#1144) * Fix global artifact overwriting in nested workflow (argoproj#1086) * Fix issue where steps with exhausted retires would not complete (argoproj#1148) * add support for other archs (argoproj#1137) * Reflect minio chart changes in documentation (argoproj#1147) * Issue argoproj#1136 - Fix metadata for DAG with loops (argoproj#1149) * Issue argoproj#1136 - Fix metadata for DAG with loops * Add slack badge to README (argoproj#1164) * Fix failing TestAddGlobalArtifactToScope unit test * Fix tests compilation error (argoproj#1157) * Replace exponential retry with poll (argoproj#1166) * add support for hostNetwork & dnsPolicy config (argoproj#1161) * Support HDFS Artifact (argoproj#1159) Support HDFS Artifact (argoproj#1159) * Update codegen for network config (argoproj#1168) * Add GitHub to users in README.md (argoproj#1151) * Add Preferred Networks to users in README.md (argoproj#1172) * Add missing patch in namespace kustomization.yaml (argoproj#1170) * Validate ArchiveLocation artifacts (argoproj#1167) * Update README and preview notice in CLA. * Update README. (argoproj#1173) (argoproj#1176) * Argo users: Equinor (argoproj#1175) * Do not mount unnecessary docker socket (argoproj#1178) * Issue argoproj#1113 - Wait for daemon pods completion to handle annotations (argoproj#1177) * Issue argoproj#1113 - Wait for daemon pods completion to handle annotations * Add output artifacts to influxdb-ci example * Increased S3 artifact retry time and added log (argoproj#1138) * Issue argoproj#1123 - Fix 'kubectl get' failure if resource namespace is different from workflow namespace (argoproj#1171) * Refactor Makefile/Dockerfile to remove volume binding in favor of build stages (argoproj#1189) * Add Docker Hub build hooks * Add documentation how to use parameter-file's (argoproj#1191) * Issue argoproj#988 - Submit should not print logs to stdout unless output is 'wide' (argoproj#1192) * Fix missing docker binary in argoexec image. Improve reuse of image layers * Fischerjulian adds ruby to rest docs (argoproj#1196) * Adds link to ruby kubernetes library. * Links to a ruby example on how to start a workflow * Updated OWNERS (argoproj#1198) * Update community/README (argoproj#1197) * Issue argoproj#1128 - Use polling instead of fs notify to get annotation changes (argoproj#1194) * Minor spelling, formatting, and style updates. (argoproj#1193) * Dockerfile: argoexec base image correction (fixes argoproj#1209) (argoproj#1213) * Set executor image pull policy for resource template (argoproj#1174) * Add schedulerName to workflow and template spec (argoproj#1184) * Issue argoproj#1190 - Fix incorrect retry node handling (argoproj#1208) * fix dag retries (argoproj#1221) * Executor can access the k8s apiserver with a out-of-cluster config file (argoproj#1134) Executor can access the k8s apiserver with a out-of-cluster config file * Update README with typo fixes (argoproj#1220) * Update README.md (argoproj#1236) * Remove extra quotes around output parameter value (argoproj#1232) Ensure we do not insert extra single quotes when using valueFrom: jsonPath to set the value of an output parameter for resource templates. Signed-off-by: Ilias Katsakioris <elikatsis@arrikto.com> * Update README.md (argoproj#1224) * Include stderr when retrieving docker logs (argoproj#1225) * Add Gardener to \"Who uses Argo\" (argoproj#1228) * Add feature to continue workflow on failed/error steps/tasks (argoproj#1205) * Fix the Prometheus address references (argoproj#1237) * Fixed Issue#1223 Kubernetes Resource action: patch is not supported (argoproj#1245) * Fixed Issue#1223 Kubernetes Resource action: patch is not supported This PR is fixed the Issue#1223 reported by @shanesiebken . Argo kubernetes resource workflow failed on patch action. --patch or -p option is required for kubectl patch action. This PR is including the manifest yaml as patch argument for kubectl. This Fix will support the Patch action in Argo kubernetes resource workflow. This Fix will support only JSON merge strategic in patch action * udpated formating * typo, executo -> executor (argoproj#1243) * Issue#1165 fake outputs don't notify and task completes successfully (argoproj#1247) * Issue#1165 fake outputs don't notify and task completes successfully This PR is addressing the Issue#1165 reported by @alexfrieden. Issue/Bug: Argo is finishing the task successfully even artifact /file does exist. Fix: Validate the created gzip contains artifact or file. if file/artifact doesn't exist, Current step/stage/task will be failed with log message . Sample Log: ''' INFO[0029] Updating node artifact-passing-lkvj8[0].generate-artifact (artifact-passing-lkvj8-1949982165) status Running -> Error INFO[0029] Updating node artifact-passing-lkvj8[0].generate-artifact (artifact-passing-lkvj8-1949982165) message: failed to save outputs: File or Artifact does not exist. /tmp/hello_world.txt INFO[0029] Step group node artifact-passing-lkvj8[0] (artifact-passing-lkvj8-1067333159) deemed failed: child 'artifact-passing-lkvj8-1949982165' failed namespace=default workflow=artifact-passing-lkvj8 INFO[0029] node artifact-passing-lkvj8[0] (artifact-passing-lkvj8-1067333159) phase Running -> Failed namespace=default workflow=artifact-passing-lkvj8 ''' * fixed gometalinter errcheck issue * Git cloning via SSH was not verifying host public key (argoproj#1261) * Update versions (argoproj#1218) * Proxy Priority and PriorityClassName to pods (argoproj#1179) * Error running 1000s of tasks: \"etcdserver: request is too large\" argoproj#1186 (argoproj#1264) * Error running 1000s of tasks: \"etcdserver: request is too large\" argoproj#1186 This PR is addressing the feature request argoproj#1186. Issue: Nodestatus element keeps growing for big workflow. Workflow will fail once the workflow total size reachs 1 MB (maz size limit in ETCD) . Solution: Compressing the Nodestatus once size reachs the 1 MB which increasing 60% to 80% more steps to execute in compress mode. Latest: Argo cli and Argo UI will able to decode and print nodestatus from compressednoode. Limitation: Kubectl willl not decode the compressedNode element * added Operator.go * revert the testing yaml * Fixed the lint issue * fixed * fixed lint * Fixed Testcase * incorporated the review comments * Reverted the change * incorporated review comments * fixing gometalinter checks * incorporated review comments * Update pod-limits.yaml * updated few comments * updated error message format * reverted unwanted files * Reduce redundancy pod label action (argoproj#1271) * Add the `mergeStrategy` option to resource patching (argoproj#1269) * This adds the ability to pass a mergeStrategy to a patch resource. this is valuable because the default merge strategy for kubernetes is 'strategic', which does not work with Custom Resources. * This also updates the resource example to demonstrate how it is used * Fix bug with DockerExecutor's CopyFile (argoproj#1275) The check to see if the source path was in the tgz archive was wrong when source path was a folder, the arguments to strings.Contains were inverted. * Add workflow labels and annotations global vars (argoproj#1280) * Argo CI is current inactive (argoproj#1285) * Issue#896 Workflow steps with non-existant output artifact path will succeed (argoproj#1277) * Issue#896 Workflow steps with non-existant output artifact path will succeed Issue: argoproj#897 Solution: Added new element \"optional\" in Artifact. The default is false. This flag will make artifact as optional and existence check will be ignored if input/output artifact has optional=true. Output Artifact ( optional=true ): Artifact existence check will be ignored during the save artifact in destination and continued workflow Input Artifact ( optional=true ): Artifact exist check will be ignored during load artifact from source and continued workflow * added end of line * removed unwanted whitespace * Deleted test code * go formatted * added formatting directives * updated Codegen * Fixed format on merge conflict * format fix * updated comments * improved error case * Fix for Resource creation where template has same parameter templating (argoproj#1283) * Fix for Resource creation where template has same parameter templating This PR will enable to support the custom template variable reference. Soulltion: Workflow variable reference resolve will check the Workflow variable prefix. * added test * fixed gofmt issue * fixed format * fixed gofmt on common.go * fixed testcase * fixed gofmt * Added unit testcase and documented * fixed Gofmt format * updated comments * Admiralty: add link to blog post, add user (argoproj#1295) * Add dns config support (argoproj#1301) * Speed up podReconciliation using parallel goroutine (argoproj#1286) * Speed up podReconciliation using parallel goroutine * Fix make lint issue * put checkandcompress back * Add community meeting notes link (argoproj#1304) * Add Karius to users in README.md (argoproj#1305) * Added support for artifact path references (argoproj#1300) * Added support for artifact path references Adds new `{{inputs.artifacts.<NAME>.path}}` and `{{outputs.artifacts.<NAME>.path}}` placeholders. * Add support for init containers (argoproj#1183) * Secrets should be passed to pods using volumes instead of API calls (argoproj#1302) * Secrets should be passed to pods using downward API instead of API calls * Fixed Gogfmt format * fixed file close Gofmt * updated review comments * fixed gofmt * updated review comments * CheckandEstimate implementation to optimize podReconciliation (argoproj#1308) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Update operator.go * Update operator.go * Add alibaba cloud to officially using argo list (argoproj#1313) * Refactor checkandEstimate to optimize podReconciliation (argoproj#1311) * Refactor checkandEstimate to optimize podReconciliation * Move compress function to persistUpdates * Fix formatting issues in examples documentation (argoproj#1310) * Fix nil pointer dereference with secret volumes (argoproj#1314) * Archive location should conditionally be added to template only when needed * Fix SIGSEGV in watch/CheckAndDecompress. Consolidate duplicate code (resolves argoproj#1315) * Implement support for PNS (Process Namespace Sharing) executor (argoproj#1214) * Implements PNS (Process Namespace Sharing) executor * Adds limited support for Kubelet/K8s API artifact collection by mirroring volume mounts to wait sidecar * Adds validation to detect when output artifacts are not supported by the executor * Adds ability to customize executor from workflow-controller-configmap (e.g. add environment variables, append command line args such as loglevel) * Fixes an issue where daemon steps were not getting terminated properly * Reorganize manifests to kustomize 2 and update version to v2.3.0-rc1 * Update v2.3.0 CHANGELOG.md * Export the methods of `KubernetesClientInterface` (argoproj#1294) All calls to these methods previously generated a panic at runtime because the calls resolved to the default, panic-always implementation, not to the overrides provided by `k8sAPIClient` and `kubeletClient`. Embedding an exported interface with unexported methods into a struct is the only way to implement that interface in another package. When doing this, the compiler generates default, panic-always implementations for all methods from the interface. Implementors can override exported methods, but it's not possible to override an unexported method from the interface. All invocations that go through the interface will come to the default implementation, even if the struct tries to provide an override. * Update README.md (argoproj#1321) * Issue1316 Pod creation with secret volumemount (argoproj#1318) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Fixed the duplicate mountpath issue * Support parameter substitution in the volumes attribute (argoproj#1238) * `argo list` was not displaying non-zero priorities correctly * Fix regression where argoexec wait would not return when podname was too long * wait will conditionally become privileged if main/sidecar privileged (resolves argoproj#1323) * Update version to v2.3.0-rc2. Update changelog * Add documentation on releasing * use a secret selector for getting credentials * fixing build issues * linter issues * fixing jenkinsfile(?) * jenkins * jenkins * jenkins * jenkins * jenkins? * jenkins :( * jenkins :( * jenkins * jenkins * jenkins * jenkins * gopkg * use GetSecretFromVolMount instead of GetSecrets * actually build argoexec * Fix argoproj#1340 parameter substitution bug Signed-off-by: Ilias Katsakioris <elikatsis@arrikto.com> * fixing gcs upload method * disable autodeploy\n\n* adding logo to be used by the OS Site (argoproj#1099) * Update ROADMAP.md * Update docs with examples using the K8s REST API * Issue argoproj#1114 - Set FORCE_NAMESPACE_ISOLATION env variable in namespace install manifests (argoproj#1116) * Fix examples docs of parameters. (argoproj#1110) * Remove docker_lib mount volume which is not needed anymore (argoproj#1115) * Remove docker_lib mount volume which is not needed anymore * Remove unused hostPathDir * add support for ppc64le and s390x (argoproj#1102) * Install mime-support in argoexec to set proper mime types for S3 artifacts (resolves argoproj#1119) * Adding Quantibio in Who uses Argo (argoproj#1111) * Adding Quantibio in Who uses Argo * fix spelling mistake * Fix output artifact and parameter conflict (argoproj#1125) `SaveArtifacts` deletes the files that `SaveParameters` might still need, so we're calling `SaveParameters` first. Fixes argoproj#1124 * Update generated swagger to fix verify-codegen (argoproj#1131) * Allow owner reference to be set in submit util (argoproj#1120) * Issue argoproj#1104 - Remove container wait timeout from 'argo logs --follow' (argoproj#1142) * Issue argoproj#1132 - Fix panic in ttl controller (argoproj#1143) * Issue argoproj#1040 - Kill daemoned step if workflow consist of single daemoned step (argoproj#1144) * Fix global artifact overwriting in nested workflow (argoproj#1086) * Fix issue where steps with exhausted retires would not complete (argoproj#1148) * add support for other archs (argoproj#1137) * Reflect minio chart changes in documentation (argoproj#1147) * Issue argoproj#1136 - Fix metadata for DAG with loops (argoproj#1149) * Issue argoproj#1136 - Fix metadata for DAG with loops * Add slack badge to README (argoproj#1164) * Fix failing TestAddGlobalArtifactToScope unit test * Fix tests compilation error (argoproj#1157) * Replace exponential retry with poll (argoproj#1166) * add support for hostNetwork & dnsPolicy config (argoproj#1161) * Support HDFS Artifact (argoproj#1159) Support HDFS Artifact (argoproj#1159) * Update codegen for network config (argoproj#1168) * Add GitHub to users in README.md (argoproj#1151) * Add Preferred Networks to users in README.md (argoproj#1172) * Add missing patch in namespace kustomization.yaml (argoproj#1170) * Validate ArchiveLocation artifacts (argoproj#1167) * Update README and preview notice in CLA. * Update README. (argoproj#1173) (argoproj#1176) * Argo users: Equinor (argoproj#1175) * Do not mount unnecessary docker socket (argoproj#1178) * Issue argoproj#1113 - Wait for daemon pods completion to handle annotations (argoproj#1177) * Issue argoproj#1113 - Wait for daemon pods completion to handle annotations * Add output artifacts to influxdb-ci example * Increased S3 artifact retry time and added log (argoproj#1138) * Issue argoproj#1123 - Fix 'kubectl get' failure if resource namespace is different from workflow namespace (argoproj#1171) * Refactor Makefile/Dockerfile to remove volume binding in favor of build stages (argoproj#1189) * Add Docker Hub build hooks * Add documentation how to use parameter-file's (argoproj#1191) * Issue argoproj#988 - Submit should not print logs to stdout unless output is 'wide' (argoproj#1192) * Fix missing docker binary in argoexec image. Improve reuse of image layers * Fischerjulian adds ruby to rest docs (argoproj#1196) * Adds link to ruby kubernetes library. * Links to a ruby example on how to start a workflow * Updated OWNERS (argoproj#1198) * Update community/README (argoproj#1197) * Issue argoproj#1128 - Use polling instead of fs notify to get annotation changes (argoproj#1194) * Minor spelling, formatting, and style updates. (argoproj#1193) * Dockerfile: argoexec base image correction (fixes argoproj#1209) (argoproj#1213) * Set executor image pull policy for resource template (argoproj#1174) * Add schedulerName to workflow and template spec (argoproj#1184) * Issue argoproj#1190 - Fix incorrect retry node handling (argoproj#1208) * fix dag retries (argoproj#1221) * Executor can access the k8s apiserver with a out-of-cluster config file (argoproj#1134) Executor can access the k8s apiserver with a out-of-cluster config file * Update README with typo fixes (argoproj#1220) * Update README.md (argoproj#1236) * Remove extra quotes around output parameter value (argoproj#1232) Ensure we do not insert extra single quotes when using valueFrom: jsonPath to set the value of an output parameter for resource templates. Signed-off-by: Ilias Katsakioris <elikatsis@arrikto.com> * Update README.md (argoproj#1224) * Include stderr when retrieving docker logs (argoproj#1225) * Add Gardener to \"Who uses Argo\" (argoproj#1228) * Add feature to continue workflow on failed/error steps/tasks (argoproj#1205) * Fix the Prometheus address references (argoproj#1237) * Fixed Issue#1223 Kubernetes Resource action: patch is not supported (argoproj#1245) * Fixed Issue#1223 Kubernetes Resource action: patch is not supported This PR is fixed the Issue#1223 reported by @shanesiebken . Argo kubernetes resource workflow failed on patch action. --patch or -p option is required for kubectl patch action. This PR is including the manifest yaml as patch argument for kubectl. This Fix will support the Patch action in Argo kubernetes resource workflow. This Fix will support only JSON merge strategic in patch action * udpated formating * typo, executo -> executor (argoproj#1243) * Issue#1165 fake outputs don't notify and task completes successfully (argoproj#1247) * Issue#1165 fake outputs don't notify and task completes successfully This PR is addressing the Issue#1165 reported by @alexfrieden. Issue/Bug: Argo is finishing the task successfully even artifact /file does exist. Fix: Validate the created gzip contains artifact or file. if file/artifact doesn't exist, Current step/stage/task will be failed with log message . Sample Log: ''' INFO[0029] Updating node artifact-passing-lkvj8[0].generate-artifact (artifact-passing-lkvj8-1949982165) status Running -> Error INFO[0029] Updating node artifact-passing-lkvj8[0].generate-artifact (artifact-passing-lkvj8-1949982165) message: failed to save outputs: File or Artifact does not exist. /tmp/hello_world.txt INFO[0029] Step group node artifact-passing-lkvj8[0] (artifact-passing-lkvj8-1067333159) deemed failed: child 'artifact-passing-lkvj8-1949982165' failed namespace=default workflow=artifact-passing-lkvj8 INFO[0029] node artifact-passing-lkvj8[0] (artifact-passing-lkvj8-1067333159) phase Running -> Failed namespace=default workflow=artifact-passing-lkvj8 ''' * fixed gometalinter errcheck issue * Git cloning via SSH was not verifying host public key (argoproj#1261) * Update versions (argoproj#1218) * Proxy Priority and PriorityClassName to pods (argoproj#1179) * Error running 1000s of tasks: \"etcdserver: request is too large\" argoproj#1186 (argoproj#1264) * Error running 1000s of tasks: \"etcdserver: request is too large\" argoproj#1186 This PR is addressing the feature request argoproj#1186. Issue: Nodestatus element keeps growing for big workflow. Workflow will fail once the workflow total size reachs 1 MB (maz size limit in ETCD) . Solution: Compressing the Nodestatus once size reachs the 1 MB which increasing 60% to 80% more steps to execute in compress mode. Latest: Argo cli and Argo UI will able to decode and print nodestatus from compressednoode. Limitation: Kubectl willl not decode the compressedNode element * added Operator.go * revert the testing yaml * Fixed the lint issue * fixed * fixed lint * Fixed Testcase * incorporated the review comments * Reverted the change * incorporated review comments * fixing gometalinter checks * incorporated review comments * Update pod-limits.yaml * updated few comments * updated error message format * reverted unwanted files * Reduce redundancy pod label action (argoproj#1271) * Add the `mergeStrategy` option to resource patching (argoproj#1269) * This adds the ability to pass a mergeStrategy to a patch resource. this is valuable because the default merge strategy for kubernetes is 'strategic', which does not work with Custom Resources. * This also updates the resource example to demonstrate how it is used * Fix bug with DockerExecutor's CopyFile (argoproj#1275) The check to see if the source path was in the tgz archive was wrong when source path was a folder, the arguments to strings.Contains were inverted. * Add workflow labels and annotations global vars (argoproj#1280) * Argo CI is current inactive (argoproj#1285) * Issue#896 Workflow steps with non-existant output artifact path will succeed (argoproj#1277) * Issue#896 Workflow steps with non-existant output artifact path will succeed Issue: argoproj#897 Solution: Added new element \"optional\" in Artifact. The default is false. This flag will make artifact as optional and existence check will be ignored if input/output artifact has optional=true. Output Artifact ( optional=true ): Artifact existence check will be ignored during the save artifact in destination and continued workflow Input Artifact ( optional=true ): Artifact exist check will be ignored during load artifact from source and continued workflow * added end of line * removed unwanted whitespace * Deleted test code * go formatted * added formatting directives * updated Codegen * Fixed format on merge conflict * format fix * updated comments * improved error case * Fix for Resource creation where template has same parameter templating (argoproj#1283) * Fix for Resource creation where template has same parameter templating This PR will enable to support the custom template variable reference. Soulltion: Workflow variable reference resolve will check the Workflow variable prefix. * added test * fixed gofmt issue * fixed format * fixed gofmt on common.go * fixed testcase * fixed gofmt * Added unit testcase and documented * fixed Gofmt format * updated comments * Admiralty: add link to blog post, add user (argoproj#1295) * Add dns config support (argoproj#1301) * Speed up podReconciliation using parallel goroutine (argoproj#1286) * Speed up podReconciliation using parallel goroutine * Fix make lint issue * put checkandcompress back * Add community meeting notes link (argoproj#1304) * Add Karius to users in README.md (argoproj#1305) * Added support for artifact path references (argoproj#1300) * Added support for artifact path references Adds new `{{inputs.artifacts.<NAME>.path}}` and `{{outputs.artifacts.<NAME>.path}}` placeholders. * Add support for init containers (argoproj#1183) * Secrets should be passed to pods using volumes instead of API calls (argoproj#1302) * Secrets should be passed to pods using downward API instead of API calls * Fixed Gogfmt format * fixed file close Gofmt * updated review comments * fixed gofmt * updated review comments * CheckandEstimate implementation to optimize podReconciliation (argoproj#1308) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Update operator.go * Update operator.go * Add alibaba cloud to officially using argo list (argoproj#1313) * Refactor checkandEstimate to optimize podReconciliation (argoproj#1311) * Refactor checkandEstimate to optimize podReconciliation * Move compress function to persistUpdates * Fix formatting issues in examples documentation (argoproj#1310) * Fix nil pointer dereference with secret volumes (argoproj#1314) * Archive location should conditionally be added to template only when needed * Fix SIGSEGV in watch/CheckAndDecompress. Consolidate duplicate code (resolves argoproj#1315) * Implement support for PNS (Process Namespace Sharing) executor (argoproj#1214) * Implements PNS (Process Namespace Sharing) executor * Adds limited support for Kubelet/K8s API artifact collection by mirroring volume mounts to wait sidecar * Adds validation to detect when output artifacts are not supported by the executor * Adds ability to customize executor from workflow-controller-configmap (e.g. add environment variables, append command line args such as loglevel) * Fixes an issue where daemon steps were not getting terminated properly * Reorganize manifests to kustomize 2 and update version to v2.3.0-rc1 * Update v2.3.0 CHANGELOG.md * Export the methods of `KubernetesClientInterface` (argoproj#1294) All calls to these methods previously generated a panic at runtime because the calls resolved to the default, panic-always implementation, not to the overrides provided by `k8sAPIClient` and `kubeletClient`. Embedding an exported interface with unexported methods into a struct is the only way to implement that interface in another package. When doing this, the compiler generates default, panic-always implementations for all methods from the interface. Implementors can override exported methods, but it's not possible to override an unexported method from the interface. All invocations that go through the interface will come to the default implementation, even if the struct tries to provide an override. * Update README.md (argoproj#1321) * Issue1316 Pod creation with secret volumemount (argoproj#1318) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Fixed the duplicate mountpath issue * Support parameter substitution in the volumes attribute (argoproj#1238) * `argo list` was not displaying non-zero priorities correctly * Fix regression where argoexec wait would not return when podname was too long * wait will conditionally become privileged if main/sidecar privileged (resolves argoproj#1323) * Update version to v2.3.0-rc2. Update changelog * Add documentation on releasing * Fix missing template local volumes, Handle volumes only used in init containers (argoproj#1342) * Fix argoproj#1340 parameter substitution bug (argoproj#1345) Also create podParams map in substitutePodParams Signed-off-by: Ilias Katsakioris <elikatsis@arrikto.com> * add / test (argoproj#1240) * Fix input artifacts with multiple ssh keys (argoproj#1338) * Fixed : Validate the secret credentials name and key (argoproj#1358) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Fixed Issue1355 * fixed style * Delete e2e_temp.tmp * Fix: # 1328 argo submit --wait and argo wait quits while workflow is running (argoproj#1347) * CheckandEstimate implementation * fixed variable rename * fixed gofmt * fixed feedbacks * Fixed argo submit --wait and argo wait quits while workflow is running * fixed Style * Update version to v2.3.0-rc3 * Update release instructions * Fix issue where a DAG with exhausted retries would get stuck Running (argoproj#1364) * Update VERSION to v2.3.0, changelog, and manifests * reverting unintentional change to dockerfile * fixing vendor problems"
    }
}