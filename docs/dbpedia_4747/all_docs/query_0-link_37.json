{
    "id": "dbpedia_4747_0",
    "rank": 37,
    "data": {
        "url": "https://www.statalist.org/forums/forum/general-stata-discussion/general/1508433-question-about-reshape",
        "read_more_link": "",
        "language": "en",
        "title": "Question about reshape",
        "top_image": "",
        "meta_img": "",
        "images": [
            "https://www.statalist.org/forums/forum/general-stata-discussion/general/images/statalist-forums-logo3.png",
            "https://www.statalist.org/forums/forum/general-stata-discussion/general/core/image.php?userid=37324&thumb=1&dateline=1563548261",
            "https://www.statalist.org/forums/forum/general-stata-discussion/general/core/images/default/default_avatar_medium.png",
            "https://www.statalist.org/img/stata-footer-icon.png",
            "https://www.statalist.org/img/standardized-fb-icon-rnav.png",
            "https://www.statalist.org/img/standardized-tw-icon-rnav.png",
            "https://www.statalist.org/img/standardized-in-icon-rnav.png",
            "https://www.statalist.org/img/standardized-youtube-icon-rnav.png",
            "https://www.statalist.org/img/standardized-blog-icon-rnav.png"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2019-07-19T10:18:29",
        "summary": "",
        "meta_description": "I am currently working with data on different universities' metrics over time and need to change my data from long to wide format. So for each university, I",
        "meta_lang": "en",
        "meta_favicon": "images/favicon.ico",
        "meta_site_name": "",
        "canonical_link": "https://www.statalist.org/forums/forum/general-stata-discussion/general/1508433-question-about-reshape",
        "text": "I am currently working with data on different universities' metrics over time and need to change my data from long to wide format. So for each university, I currently have hundreds of rows, each of which has a university, which metric is measured, the year of the measurement, and its value. I am running into a couple of problems which I'm hoping to get some help on.\n\nFirst I tried the reshape command of course, but because the year and metric name are not unique (i.e. each university also has the same year and metric name), I am unable to use the reshape command as together year and metric name do not uniquely identify observations. Is there a way to fix this?\n\nTo get around the first problem, I realized I could just isolate each university (by copying them into a new session of Stata, for example) and then simply reshape each university's data individually because once a single university is isolated, the metric name and year do uniquely identify observations. I've run into a couple of problems with this method, too, however. First, because the university names were encoded string values, I am losing the string part of the data when I reshape (Harvard University becomes just a 1, or whatever the encoded value was). Second, this process obviously will take a lot of time given the number of universities I have in the data set.\n\nHope this is clear!\n\nHere is a very small sample of my current data: (sorry the formatting isn't perfect I didn't know the command to export it here cleanly)\n\nName Value Metricdescription Issueyear SchoolID PublicPrivate\n\nWashington and Lee University 10.6 Student/faculty ratio 2002 3163 Private\n\nWashington and Lee University 11.1 Student/faculty ratio 2003 3163 Private\n\nWashington and Lee University 10.8 Student/faculty ratio 2004 3163 Private\n\nWashington and Lee University 10.4 Student/faculty ratio 2005 3163 Private\n\nWashington and Lee University 11.7 Student/faculty ratio 2006 3163 Private\n\nWashington and Lee University 10.5 Student/faculty ratio 2007 3163 Private\n\nWashington and Lee University 9.8 Student/faculty ratio 2008 3163 Private\n\nWashington and Lee University 10.6 Student/faculty ratio 2009 3163 Private\n\nWashington and Lee University 9.5 Student/faculty ratio 2010 3163 Private\n\nWashington and Lee University 9.4 Student/faculty ratio 2011 3163 Private\n\nWashington and Lee University 9.5 Student/faculty ratio 2012 3163 Private\n\nWashington and Lee University 9.5 Student/faculty ratio 2013 3163 Private\n\nWashington and Lee University 10.2 Student/faculty ratio 2014 3163 Private\n\nWashington and Lee University 10.7 Student/faculty ratio 2015 3163 Private\n\nWashington and Lee University 8.5 Student/faculty ratio 2016 3163 Private\n\nWashington and Lee University 8.9 Student/faculty ratio 2017 3163 Private\n\nWashington and Lee University 8.7 Student/faculty ratio 2018 3163 Private\n\nWashington and Lee University 5.7 Student/faculty ratio 2019 3163 Private\n\nWashington and Lee University 6.9 Student/faculty ratio 2020 3163 Private\n\nWashington and Lee University Bar Passage rank 1994 3163 Private\n\nWashington and Lee University Bar Passage rank 1995 3163 Private\n\nWashington and Lee University Bar Passage rank 1996 3163 Private\n\nWashington and Lee University Bar Passage rank 1997 3163 Private\n\nWashington and Lee University Bar Passage rank 1998 3163 Private\n\nWashington and Lee University Bar Passage rank 1999 3163 Private\n\nWashington and Lee University Bar Passage rank 2000 3163 Private\n\nWashington and Lee University Bar Passage rank 2001 3163 Private\n\nWashington and Lee University Bar Passage rank 2002 3163 Private\n\nWashington and Lee University Bar Passage rank 2003 3163 Private\n\nWashington and Lee University Bar Passage rank 2004 3163 Private\n\nWashington and Lee University Bar Passage rank 2005 3163 Private\n\nWashington and Lee University Bar Passage rank 2006 3163 Private\n\nWashington and Lee University Bar Passage rank 2007 3163 Private\n\nWashington and Lee University Bar Passage rank 2008 3163 Private\n\nWashington and Lee University Bar Passage rank 2009 3163 Private\n\nWashington and Lee University 52 Bar Passage rank 2010 3163 Private\n\nWashington and Lee University 117 Bar Passage rank 2011 3163 Private\n\nWashington and Lee University 93 Bar Passage rank 2012 3163 Private\n\nWashington and Lee University 175 Bar Passage rank 2013 3163 Private\n\nWashington and Lee University 21 Bar Passage rank 2014 3163 Private\n\nWashington and Lee University 177 Bar Passage rank 2015 3163 Private\n\nWashington and Lee University 113 Bar Passage rank 2016 3163 Private\n\nWashington and Lee University 26 Bar Passage rank 2017 3163 Private\n\nWashington and Lee University 29 Bar Passage rank 2018 3163 Private\n\nWashington and Lee University 66 Bar Passage rank 2019 3163 Private\n\nWashington and Lee University 59 Bar Passage rank 2020 3163 Private\n\nYale University Acceptance rate 1994 3027 Private\n\nYale University Acceptance rate 1995 3027 Private\n\nYale University Acceptance rate 1996 3027 Private\n\nYale University Acceptance rate 1997 3027 Private\n\nYale University Acceptance rate 1998 3027 Private\n\nYale University Acceptance rate 1999 3027 Private\n\nYale University Acceptance rate 2000 3027 Private\n\nYale University Acceptance rate 2001 3027 Private\n\nYale University Acceptance rate 2002 3027 Private\n\nYale University Acceptance rate 2003 3027 Private\n\nYale University Acceptance rate 2004 3027 Private\n\nYale University Acceptance rate 2005 3027 Private\n\nYale University Acceptance rate 2006 3027 Private\n\nYale University Acceptance rate 2007 3027 Private\n\nYale University Acceptance rate 2008 3027 Private\n\nYale University Acceptance rate 2009 3027 Private\n\nYale University 7.6551946 Acceptance rate 2010 3027 Private\n\nYale University 8.0285459 Acceptance rate 2011 3027 Private\n\nYale University 6.7158283 Acceptance rate 2012 3027 Private\n\nYale University 7.9420107 Acceptance rate 2013 3027 Private\n\nYale University 8.3248386 Acceptance rate 2014 3027 Private\n\nYale University 9.3667046 Acceptance rate 2015 3027 Private\n\nYale University 8.9192025 Acceptance rate 2016 3027 Private\n\nYale University 9.7217203 Acceptance rate 2017 3027 Private\n\nYale University 9.4698355 Acceptance rate 2018 3027 Private\n\nYale University 8.3857442 Acceptance rate 2019 3027 Private\n\nYale University 6.852865 Acceptance rate 2020 3027 Private\n\nYale University Bar Passage rank 1994 3027 Private\n\nYale University Bar Passage rank 1995 3027 Private\n\nYale University Bar Passage rank 1996 3027 Private\n\nYale University Bar Passage rank 1997 3027 Private\n\nYale University Bar Passage rank 1998 3027 Private\n\nYale University Bar Passage rank 1999 3027 Private\n\nYale University Bar Passage rank 2000 3027 Private\n\nYale University Bar Passage rank 2001 3027 Private\n\nYale University Bar Passage rank 2002 3027 Private\n\nYale University Bar Passage rank 2003 3027 Private\n\nYale University Bar Passage rank 2004 3027 Private\n\nYale University Bar Passage rank 2005 3027 Private\n\nYale University Bar Passage rank 2006 3027 Private\n\nYale University Bar Passage rank 2007 3027 Private\n\nYale University Bar Passage rank 2008 3027 Private\n\nYale University Bar Passage rank 2009 3027 Private\n\nYale University 20 Bar Passage rank 2010 3027 Private\n\nYale University 16 Bar Passage rank 2011 3027 Private\n\nYale University 20 Bar Passage rank 2012 3027 Private\n\nYale University 8 Bar Passage rank 2013 3027 Private\n\nYale University 8 Bar Passage rank 2014 3027 Private\n\nYale University 12 Bar Passage rank 2015 3027 Private\n\nYale University 7 Bar Passage rank 2016 3027 Private\n\nYale University 10 Bar Passage rank 2017 3027 Private\n\nYale University 5 Bar Passage rank 2018 3027 Private\n\nYale University 8 Bar Passage rank 2019 3027 Private\n\nYale University 12 Bar Passage rank 2020 3027 Private\n\nArizona Summit Law School Acceptance rate 1994 3197 Private\n\nArizona Summit Law School Acceptance rate 1995 3197 Private\n\nArizona Summit Law School Acceptance rate 1996 3197 Private\n\nArizona Summit Law School Acceptance rate 1997 3197 Private\n\nArizona Summit Law School Acceptance rate 1998 3197 Private\n\nArizona Summit Law School Acceptance rate 1999 3197 Private\n\nArizona Summit Law School Acceptance rate 2000 3197 Private\n\nArizona Summit Law School Acceptance rate 2001 3197 Private\n\nArizona Summit Law School Acceptance rate 2002 3197 Private\n\nArizona Summit Law School Acceptance rate 2003 3197 Private\n\nArizona Summit Law School Acceptance rate 2004 3197 Private\n\nArizona Summit Law School Acceptance rate 2005 3197 Private\n\nArizona Summit Law School Acceptance rate 2006 3197 Private\n\nArizona Summit Law School Acceptance rate 2007 3197 Private\n\nArizona Summit Law School Acceptance rate 2008 3197 Private\n\nArizona Summit Law School Acceptance rate 2009 3197 Private\n\nArizona Summit Law School 67.445365 Acceptance rate 2010 3197 Private\n\nArizona Summit Law School Acceptance rate 2011 3197 Private\n\nArizona Summit Law School 69.650817 Acceptance rate 2012 3197 Private\n\nArizona Summit Law School 72.944759 Acceptance rate 2013 3197 Private\n\nArizona Summit Law School 84.96945 Acceptance rate 2014 3197 Private\n\nArizona Summit Law School 84.96945 Acceptance rate 2015 3197 Private\n\nArizona Summit Law School 68.858655 Acceptance rate 2016 3197 Private\n\nArizona Summit Law School 73.397717 Acceptance rate 2017 3197 Private\n\nArizona Summit Law School 64.090909 Acceptance rate 2018 3197 Private\n\nArizona Summit Law School Acceptance rate 2019 3197 Private\n\nArizona Summit Law School Acceptance rate 2020 3197 Private\n\nArizona Summit Law School Bar Passage rank 1994 3197 Private\n\nArizona Summit Law School Bar Passage rank 1995 3197 Private\n\nArizona Summit Law School Bar Passage rank 1996 3197 Private\n\nArizona Summit Law School Bar Passage rank 1997 3197 Private\n\nArizona Summit Law School Bar Passage rank 1998 3197 Private\n\nArizona Summit Law School Bar Passage rank 1999 3197 Private\n\nArizona Summit Law School Bar Passage rank 2000 3197 Private\n\nHi Harold, welcome to the Statalist.\n\nPlease take some time to read the FAQ, especially the sections about how to ask questions and provide a data example. Specifically, you are asked to provide a usable Stata example using the -dataex- command, which is already included as part of your fully updated version 14.2, 15.1 and 16 of Stata.\n\nNext, it would be instructive to read the PDF documentation for the -reshape- command. You may access this by typing -help reshape- and then clicking on \"View complete PDF manual entry\". Clear examples are given on how to use strings as key variables.\n\nUnfortunately, you do not clearly describe what you want your resulting dataset to look like (how wide will it be?). I will make a guess and provide untested code (for your data). Beware of typos and if it doesn't meet your specifications, you may use it as an exercise to learn by modification.\n\nCode:\n\n. input str2 name str1 metric name metric 1. AA a 2. AA a 3. AA b 4. AA b 5. BB a 6. BB a 7. BB b 8. BB b 9. CC a 10. CC a 11. CC b 12. CC b 13. end . gen double value = runiformint(1, 100) . gen byte private = 1 . by name metric, sort : gen int year = 2016 + _n . . reshape wide value , i(name metric) j(year) (note: j = 2017 2018) Data long -> wide ----------------------------------------------------------------------------- Number of obs. 12 -> 6 Number of variables 5 -> 5 j variable (2 values) year -> (dropped) xij variables: value -> value2017 value2018 ----------------------------------------------------------------------------- . list, clean name metric val~2017 val~2018 private 1. AA a 93 25 1 2. AA b 50 31 1 3. BB a 45 100 1 4. BB b 96 30 1 5. CC a 22 41 1 6. CC b 10 82 1 . . reshape wide value* , i(name ) j(metric) string (note: j = a b) Data long -> wide ----------------------------------------------------------------------------- Number of obs. 6 -> 3 Number of variables 5 -> 6 j variable (2 values) metric -> (dropped) xij variables: value2017 -> value2017a value2017b value2018 -> value2018a value2018b ----------------------------------------------------------------------------- . list, clean name va~2017a va~2018a va~2017b va~2018b private 1. AA 93 25 50 31 1 2. BB 45 100 96 30 1 3. CC 22 41 10 82 1"
    }
}