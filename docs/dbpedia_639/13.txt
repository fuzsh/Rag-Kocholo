Q: Are the two uses of “Frau” in “Frau Hauptfrau” redundant?

No. It's not redundant:

Frau is a form of address: like madam or mister, in this case the standard German female form of address.

Hauptfrau is a form of title: probably a word play on function, either alluding to (mock/pseudo) polygamous relationship, or derived from an analogon to Hauptmann, (with a pseudo feminist or mock-progressive undertone) although that specific word is currently not really en vogue for that scenario. It doesn't need to be a military context, but is in the case of OP just indicating something like "this female is authorised to give orders".

As Rudy Velthuis commented:

Think of "Mr. Sandman". Neither "Mr." nor "-man" are redundant.

To which I'd like to expand, suppose the name of a male is Liebherr:

Lieber Herr Liebherr, (Dear Mr Liebherr)

Looks awfully redundant, but no part can be left out without changing the meaning quite significantly.

And since "Jawohl" attracts so much attention here, another example illustrating a strictly non-military, but hierarchical context:

Jawohl, Herr Unterkammerherr. (Yes sir, Mr under chamberlain.)

The corresponding Herr Hauptmann is equally not redundant, despite Herr and -mann also both indicating male.

As redundancy implies that one part might be superfluous: leaving out the second part of Hauptfrau makes no sense. Leaving out the first Frau, the honorific address, changes the meaning.

In response to comments: "Jawohl, Herr Hauptmann/Frau Hauptfrau!" is not such much (or even strongly?) indicative of a real military context, but very probably just alluding to one –– or a similar situation; more often jokingly playful than really Prussian militaristic tone.

Or as @schmuddi has put it:

It's not just the jawohl that suggests the military context but the whole construction Jawohl, Herr [Rang], where [Rang] refers to the position in a strict hierarchy, and no last name follows. Granted, something like Jawohl, Herr Professor might be used in a non-military context, but it appears horribly old-fashioned to me, especially if contrasted with a much more appropriate Jawohl, Herr Professor Schmuddi which you'd still encounter in contemporary use. Note: This may be different in Austrian and Swiss German.

But "military context" is strictly not what the situation in question describes: "a friend writing occasionally to a female with that form of address". As emphasised elsewhere on this page, "Hauptfrau" *is not the correct form of address in the German army anyway, and this is not alternated with the correct form, to make the joke.

In any case: the meaning and context of "Hauptfrau" or "Jawohl" is interesting in it self, but hardly applicable to this question and almost totally irrelevant to the question of whether this is redundant or not.

"Hauptfrau" seems to be a feminized version of "Hauptmann", a rank in the German army equivalent to a Captain in the US Army. However, the term "Hauptfrau" is incorrect. Military ranks do not get gendered. So a woman holding the rank of Hauptmann in the German army is addressed with "Frau Hauptmann".

"Jawohl" is the preferred way to affirm an order in the German army.

So the military correct way to respond to an order from a female Hauptmann and/or to mock a woman who is acting like one would be "Jawohl, Frau Hauptmann". Next time your friend writes this, I recommend to establish your military authority by responding with: "Es heißt 'Jawohl Frau Hauptmann', Gefreiter [surname]! Wegtreten!".

(Gefreiter = lowest rank in the German army, Wegtreten = order to leave and execute the orders the soldier just received)

Source: I used to be a soldier in the German army and got scolded for making this mistake once.

The word "Hauptfrau" can have different meanings.

Normally when I hear the word "Hauptfrau" I would translate it as "first wife" or "head wife". In some cultures (Germany not included), a man can have multiple wives, with the "Hauptfrau" being the first or most important wife.

In this context, however, I would interpret it as the female form of "Hauptmann", which translates to "captain" in the military sense.

So as "Jawohl, Herr Hauptmann." translates to "Yes, captain." or "Yes, sir." I would say that "Jawohl, Frau Hauptfrau." translates to "Yes, captain." or "Yes, ma'am."

I do think it sounds a bit funny because of the word "Frau" appearing twice, but it is still correct.

Edit:

A quick google search reveals that there is no official female form of "Hauptmann":

Dienstgrade in der Bundeswehr – Keine "Hauptfrau" als Kompaniechefin, n-tv, 02. Juli 2001:

Im täglichen Sprachgebrauch wird lediglich der übliche Dienstgrad mit der weiblichen Anrede versehen. So wird die "Frau Hauptmann" ebenso normal sein wie die "Frau Bootsmann", die es bei den Sanitäterinnen schon seit 25 Jahren gibt.

So a woman would be called "Frau Hauptmann" if she was the captain of a company.

Anyway, I still think that your friend wanted to call you "captain" and tried to be politically correct by using what he thought was the female form of the word.

I believe this to be a variant of the somewhat more common ‘Jawohl, Herr Hauptmann!’ It is a phrase associated with accepting the order of your superior in the military. (As I have never been in the military, I cannot tell you how high up a Hauptmann is and whether it would be considered the correct reply or not. I do note that for non-soldiers it is immediately recognisable as such.)

In this male form, Herr is the same title that would be added before one’s name in sufficiently formal contexts: Herr Müller, Herr Schneider. Using Herr together with a function is possible (sometimes preferable) if one doesn’t know the person’s surname or if there is precedence in protocol: Herr Schaffner, Herr Bundeskanzler, Herr Präsident. For women, this Herr becomes Frau in all contexts: Frau Müller, Frau Schaffnerin, Frau Bundeskanzlerin.

Hauptmann is one of the German job descriptions ending in -mann which corresponds to the English ending -man. Another example is Kaufmann, in English this compares e.g. to policeman, congressman. Where the person performing this job is not male but female, it is common to replace the final -mann with -frau in German as you would replace -man with -woman in English: Kaufmann becomes Kauffrau and congressman becomes congresswoman. (As the other answer notes, military grades may follow different rules.)

In the combination of both, we have the title (which happens to be Frau) and the job (which happens to end in Frau) and we put the two together to give:

Frau Hauptfrau

It does seem a little comical even to German speakers but it is undoubtedly grammatically correct.