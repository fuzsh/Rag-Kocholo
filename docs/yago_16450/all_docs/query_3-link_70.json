{
    "id": "yago_16450_3",
    "rank": 70,
    "data": {
        "url": "https://experienceleaguecommunities.adobe.com/t5/adobe-experience-manager/dispatcher-flush-issue-stat-file-creation/td-p/592849",
        "read_more_link": "",
        "language": "en",
        "title": "Adobe Experience League Community",
        "top_image": "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/57590i4ACF844EDEFB8D2D?v=v2",
        "meta_img": "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/57590i4ACF844EDEFB8D2D?v=v2",
        "images": [
            "https://experienceleaguecommunities.adobe.com/html/@229E721641C8C1F94D55A6B668635DCA/assets/adobe-red-logo.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@EEA75F610B0BED1D86A5963B9CEC9687/assets/globegrid.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@A08A1519786BFCEFFBBBC5DA00795826/assets/chevron-right.svg",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/Level1.svg",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/Level2.svg",
            "https://experienceleaguecommunities.adobe.com/html/@90915363EAC70A10BA983A1570B6E1D9/assets/header-marquee-left.png",
            "https://experienceleaguecommunities.adobe.com/html/@615A8B8828B3312EF097B9F975778911/assets/header-marquee-right.png",
            "https://experienceleaguecommunities.adobe.com/html/@CE1A4F059251EE3629D73FC5A4AE716F/assets/header-marquee-mobile.png",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/59101i7B3736D53580545E/image-dimensions/40x40/image-coordinates/57%2C34%2C443%2C420?v=v2",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/ec_appicon_RGB_noshadow_20.svg",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/57590i4ACF844EDEFB8D2D/image-size/large?v=v2&px=999",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/57593iEE0A15EB3D12A8EB/image-size/large?v=v2&px=999",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/57591i72ED0AFBE8B32579/image-size/large?v=v2&px=999",
            "https://experienceleaguecommunities.adobe.com/html/assets/CA_Signature2.png",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/59101i7B3736D53580545E/image-dimensions/40x40/image-coordinates/57%2C34%2C443%2C420?v=v2",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/ec_appicon_RGB_noshadow_20.svg",
            "https://experienceleaguecommunities.adobe.com/html/assets/CA_Signature2.png",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/57773iC2C87B94216C58A5/image-dimensions/40x40/image-coordinates/504%2C0%2C3528%2C3024?v=v2",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/ec_appicon_RGB_noshadow_20.svg",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/59101i7B3736D53580545E/image-dimensions/40x40/image-coordinates/57%2C34%2C443%2C420?v=v2",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/ec_appicon_RGB_noshadow_20.svg",
            "https://experienceleaguecommunities.adobe.com/html/assets/CA_Signature2.png",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/57773iC2C87B94216C58A5/image-dimensions/40x40/image-coordinates/504%2C0%2C3528%2C3024?v=v2",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/ec_appicon_RGB_noshadow_20.svg",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/59101i7B3736D53580545E/image-dimensions/40x40/image-coordinates/57%2C34%2C443%2C420?v=v2",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/ec_appicon_RGB_noshadow_20.svg",
            "https://experienceleaguecommunities.adobe.com/html/assets/CA_Signature2.png",
            "https://experienceleaguecommunities.adobe.com/legacyfs/online/avatars/a875412_user-5482052-avatar",
            "https://experienceleaguecommunities.adobe.com/i/rank_icons/admin.gif",
            "https://experienceleaguecommunities.adobe.com/html/assets/CM_Signature.png",
            "https://experienceleaguecommunities.adobe.com/t5/image/serverpage/image-id/59101i7B3736D53580545E/image-dimensions/40x40/image-coordinates/57%2C34%2C443%2C420?v=v2",
            "https://experienceleaguecommunities.adobe.com/html/rank_icons/ec_appicon_RGB_noshadow_20.svg",
            "https://experienceleaguecommunities.adobe.com/html/assets/CA_Signature2.png",
            "https://experienceleaguecommunities.adobe.com/skins/images/C5F0078A9C023384C058D4C96F5CF68D/responsive_peak/images/icon_anonymous_message.png",
            "https://experienceleaguecommunities.adobe.com/html/@C54173F3E0029BA75D85E8C7B6BAAB66/assets/checkmark-circle-green.svg",
            "https://experienceleaguecommunities.adobe.com/html/@C54173F3E0029BA75D85E8C7B6BAAB66/assets/checkmark-circle-green.svg",
            "https://experienceleaguecommunities.adobe.com/html/@C54173F3E0029BA75D85E8C7B6BAAB66/assets/checkmark-circle-green.svg",
            "https://experienceleaguecommunities.adobe.com/html/@C54173F3E0029BA75D85E8C7B6BAAB66/assets/checkmark-circle-green.svg",
            "https://experienceleaguecommunities.adobe.com/html/@C54173F3E0029BA75D85E8C7B6BAAB66/assets/checkmark-circle-green.svg",
            "https://experienceleaguecommunities.adobe.com/html/@06512E5C9755636BEDFDECAC1BC3EA88/assets/home.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3D367B1ECAB63FF2D8889C54765A5AFA/assets/chevron_right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3D367B1ECAB63FF2D8889C54765A5AFA/assets/chevron_right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3D367B1ECAB63FF2D8889C54765A5AFA/assets/chevron_right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3D367B1ECAB63FF2D8889C54765A5AFA/assets/chevron_right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3D367B1ECAB63FF2D8889C54765A5AFA/assets/chevron_right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3D367B1ECAB63FF2D8889C54765A5AFA/assets/chevron_right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3D367B1ECAB63FF2D8889C54765A5AFA/assets/chevron_right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@EEA75F610B0BED1D86A5963B9CEC9687/assets/globegrid.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3D367B1ECAB63FF2D8889C54765A5AFA/assets/chevron_right.svg",
            "https://experienceleaguecommunities.adobe.com/html/@D3C5F5F998C467C19E6B7E13574D3046/assets/social-icon-facebook.svg",
            "https://experienceleaguecommunities.adobe.com/html/@0686CAA8FFEFA5A35B6EFFA57986264A/assets/social-icon-twitter.svg",
            "https://experienceleaguecommunities.adobe.com/html/@BD5B2D422AB6E5FB62A698C1192233A8/assets/social-icon-linkedin.svg",
            "https://experienceleaguecommunities.adobe.com/html/@3B44308DA5967033A36FFACC5CEA6216/assets/social-icon-instagram.svg",
            "https://experienceleaguecommunities.adobe.com/html/@86E253B9A844473A8831551E3A9347F9/assets/choices-small.svg"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "experienceleaguecommunities.adobe.com",
            "user-id"
        ],
        "publish_date": "2023-05-12T14:10:56.497000+00:00",
        "summary": "",
        "meta_description": "Solved: Hi, I am seeing an odd behavior while flushing cache, I am using AEM 6.5.16 with the wknd site for testing, also I am using a - 592849",
        "meta_lang": "en",
        "meta_favicon": "https://experienceleaguecommunities.adobe.com/html/@8B9DD8A101C500A7A3BA864A09686523/assets/favicon.ico",
        "meta_site_name": "",
        "canonical_link": "https://experienceleaguecommunities.adobe.com/t5/adobe-experience-manager/dispatcher-flush-issue-stat-file-creation/m-p/592849#M147963",
        "text": "Hi,\n\nI am seeing an odd behavior while flushing cache, I am using AEM 6.5.16 with the wknd site for testing, also I am using a dispatcher in a Centos machine and it was set using the default configs from the AEM Project archetype (v41).\n\nSo, the statfilelevel is set to 2 by default as shown below:\n\n/cache {\n\n# The cacheroot must be equal to the document root of the webserver\n\n/docroot \"${PUBLISH_DOCROOT}\"\n\n# sets the level upto which files named \".stat\" will be created in the\n\n# document root of the webserver. when an activation request for some\n\n# handle is received, only files within the same subtree are affected\n\n# by the invalidation.\n\n/statfileslevel \"2\"\n\nAccording to this documentation https://experienceleague.adobe.com/docs/experience-manager-learn/ams/dispatcher/disp-flushing.html?l... my expectation would be to have .stat 3 files when a flush event is triggered, like below:\n\n- /var/www/html/.stat (statfilelevel 0) - /var/www/html/content/.stat (statfilelevel 1) - /var/www/html/content/wknd/.stat (statfilelevel 2)\n\nBut actually, I see in the logs there are only 2 .stat files being created. These files are being touched correctly, if i re-flush the cache, those are being updated correctly (timestamp), so the cache \"should\" invalidate.\n\nThe problem is when I request again a page such as: [/content/wknd/us/en.html], the dispatcher is looking for a .stat file at a deeper level\n\n[/mnt/var/www/html/content/wknd/.stat], which does not exist as explained above, and thus the cache is not invalidated.\n\nSo here are my questions:\n\n1) Is really expected that only 2 .stat files should be created when the statfilelevel is set to 2? If not, how can I troubleshoot further?\n\n2) Even if the file .stat does not exist at the deeper level, was not supposed that the dispatcher should look up the nearest .stat file? Which I understand is the one located at [/content/.stat] level and thus invalidates the whole [/content/wkn] path.\n\nThings that I've tried so far that gave the same result:\n\n- I made sure the dispatcher config is correctly set and restarted the Apache server several times,\n\n- I made sure the directories have the proper write access and I have disabled SELinux security just in case is messing with the folder.\n\n- Flush via CURL command or via ACS Flush Feature, the same result, only 2 files are created\n\n- Increased the statfilelevel to 3, the .stat files are still only 2, what changes is that the dispatcher will look for a .stat file in a deeper level to validate against the previous invalidation process e.g: [/mnt/var/www/html/content/wknd/us/.stat]\n\nHope someone can provide some hints to understand what's going on.\n\nThanks in advance"
    }
}