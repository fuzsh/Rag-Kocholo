{
    "id": "dbpedia_2924_3",
    "rank": 39,
    "data": {
        "url": "https://docs.amplify.aws/gen1/javascript/build-a-backend/more-features/analytics/analytics-migration-guide/",
        "read_more_link": "",
        "language": "en",
        "title": "Migrate from v5 to v6",
        "top_image": "https://docs.amplify.aws/assets/classic-og.png",
        "meta_img": "https://docs.amplify.aws/assets/classic-og.png",
        "images": [],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "Learn more about the migration steps to upgrade Analytics APIs for Amplify JavaScript v5 to v6 AWS Amplify Documentation",
        "meta_lang": "en",
        "meta_favicon": "/assets/icon/apple-icon-57x57.png",
        "meta_site_name": "",
        "canonical_link": "https://docs.amplify.aws/gen1/javascript/build-a-backend/more-features/analytics/analytics-migration-guide/",
        "text": "This guide will help you migrate Amplify JavaScript v5's Analytics APIs to the new v6's Analytics APIs.\n\nAs of v6 of Amplify, you will now import APIs directly from the aws-amplify/analytics path when using the Pinpoint provider. If you are using the Personalize, Kinesis, or Kinesis (Firehose) provider, you will need to import separate APIs from the appropriate subpath (ie import { record } from 'aws-amplify/analytics/personalize' when using the record API with the AmazonPersonalize provider) instead of passing in the provider or options.provider parameter.\n\nNote: we have removed the startSession API in v6. In v6, we recommend you to use the record API with the event { name: '_session.start' } instead.\n\nEnable and Disable\n\nIn both v5 and v6, Analytics is enabled by default. You can disable and enable all Analytics providers using the enable and disable APIs exported from the aws-amplify/analytics path.\n\nPinpoint\n\nIn v6, provider is determined by import path. To use Pinpoint APIs you will import them directly from aws-amplify/analytics. These APIs no longer accept parameters specific to Kinesis or Personalize.\n\nAnalytics.record\n\nThe record API in v6 has not changed in behavior, however, there are a couple of changes to be aware of in v6:\n\nThe record API is now synchronous and no longer returns a Promise as events are always buffered.\n\nThe immediate option was removed from the record API in v6. Instead, you can now use the flushEvents API to clear all events from the buffer before calling record.\n\nThe provider parameter has been removed and provider will be determined by import path. The Pinpoint record API does not accept Personalize or Kinesis events in v6.\n\nInput\n\nV5\n\nevent:AnalyticsEvent|PersonalizeAnalyticsEvent|KinesisAnalyticsEvent\n\nprovider?: string\n\nAnalyticsEvent{\n\nname: string;\n\nattributes?:EventAttributes;\n\nmetrics?:EventMetrics;\n\nimmediate?: boolean;\n\n}\n\nV6\n\ninput:{\n\nname: string;\n\nattributes?:Record<string, string>;\n\nmetrics?:Record<string, number>;\n\n}\n\nAnalytics.autoTrack\n\nThe autoTrack API has been renamed to configureAutoTrack in v6 to make the purpose of this API more clear. In v6, provider is determined by import path. To use the Pinpoint configureAutoTrack API you will import directly from aws-amplify/analytics.\n\nThe functionality of this API has not changed, however the input structure has been altered in the following ways:\n\nWe have transitioned from positional parameters to named parameters.\n\nThe opts property has been renamed to options.\n\nThe required enable property has been moved outside of the options field.\n\ntrackerType has been renamed to type.\n\nOptional tracker options have been moved into the options field for all tracker types.\n\nThe type parameter in the pageView input type has been renamed ot appType to differentiate from the tracker type.\n\nThe appType values SPA and multiPageApp have been renamed to singlePage and multiPage respectively.\n\nInput\n\nV5\n\ntrackerType:'pageView'|'event'|'session'\n\nopts:{\n\nprovider: string;\n\nenable: boolean;\n\nattributes?:\n\n|(()=>[key: string]: string |Promise<[key: string]: string>)\n\n|[key: string]: string;\n\neventName?: string;\n\ntype?:'SPA'|'multiPageApp';\n\ngetUrl?:()=> string;\n\nevents?: string[];\n\nselectorPrefix?: string;\n\n}\n\nV6\n\ninput {\n\nenable: boolean;\n\ntype:'session'|'pageView'|'event'\n\noptions?:{\n\nattributes?:Record<string, string>;\n\neventName?: string;\n\nurlProvider?:(()=> string);\n\nappType?:'multiPage'|'singlePage';\n\nevents?:(keyof GlobalEventHandlersEventMap)[];\n\nselectorPrefix?: string;\n\n};\n\n}\n\nThis API has been renamed to identifyUser in v6 to align with other platforms. The functionality is the same, although the type definition is more specific.\n\nThe address, optOut, and channelType options are no longer available as they do not affect Analytics endpoints.\n\nattributes has been renamed to customProperties.\n\nThe provider parameter has been removed and provider will be determined by import path.\n\nInput\n\nV5\n\nattrs:{[key: string]: any;}\n\nprovider?: string\n\nattrs:{\n\naddress?: string;\n\nattributes?:{[key: string]: any;};\n\nchannelType?: string;\n\ndemographic?:{\n\nappVersion?: string;\n\nlocale?: string;\n\nmake?: string;\n\nmodel?: string;\n\nmodelVersion?: string;\n\nplatform?: string;\n\nplatformVersion?: string;\n\ntimezone?: string;\n\n},\n\nlocation?:{\n\ncity?: string;\n\ncountry?: string;\n\nlatitude?: number;\n\nlongitude?: number;\n\npostalCode?: string;\n\nregion?: string;\n\n},\n\nmetrics?:{[key: string]: any;};\n\noptOut?: string;\n\nuserId: string;\n\nuserAttributes?:{[key: string]: any;};\n\n}\n\nV6\n\ninput:{\n\nuserId: string;\n\nuserProfile:{\n\ncustomProperties?:Record<string, string[]>;\n\ndemographic?:{\n\nappVersion?: string;\n\nlocale?: string;\n\nmake?: string;\n\nmodel?: string;\n\nmodelVersion?: string;\n\nplatform?: string;\n\nplatformVersion?: string;\n\ntimezone?: string;\n\n};\n\nemail?: string;\n\nlocation?:{\n\ncity?: string;\n\ncountry?: string;\n\nlatitude?: number;\n\nlongitude?: number;\n\npostalCode?: string;\n\nregion?: string;\n\n};\n\nmetrics?:Record<string, number>;\n\nname?: string;\n\nplan?: string;\n\n};\n\noptions?:{ userAttributes?:Record<string, string[]>;};\n\n}\n\nKinesis and Kinesis (Firehose)\n\nIn v6, provider is determined by import path. To use Kinesis APIs you will import them from aws-amplify/analytics/kinesis and to use Kinesis (Firehose) APIs you will import them from aws-amplify/analytics/kinesis-firehose. These APIs no longer accept parameters specific to Pinpoint or Personalize.\n\nAnalytics.record\n\nThe Kinesis and Kinesis (Firehose) record APIs in v6 have not changed in behavior, however, there are a couple of changes to be aware of in v6:\n\nThe record API is now synchronous and no longer returns a Promise as events are always buffered.\n\nThe immediate option was removed from the record API in v6. Alternatively in v6 you can use the flushEvents API to clear all events from the buffer before calling record.\n\nThe partitionKey option has been removed from the Kinesis (Firehose) record API in v6.\n\nThe provider parameter has been removed and provider will be determined by import path.\n\nInput\n\nV5\n\nevent:AnalyticsEvent|PersonalizeAnalyticsEvent|KinesisAnalyticsEvent\n\nprovider?: string\n\nKinesisAnalyticsEvent{\n\ndata: object | string;\n\npartitionKey: string;\n\nstreamName: string;\n\nimmediate?: boolean;\n\n}\n\nV6\n\ninput:{\n\nstreamName: string;\n\ndata:Record<string, unknown>|Uint8Array;\n\npartitionKey: string;\n\n}\n\nPersonalize\n\nTo use the personalize provider in v5, you had to pass in an additional parameter to Analytics API's with the string value AmazonPersonalize. In v6, however, you will import the APIs from the aws-amplify/analytics/personalize subpath instead.\n\nAnalytics.record\n\nThe Personalize record API in v6 has not changed in behavior, however, there are a couple of changes to be aware of in v6:\n\nThe record API is now synchronous and no longer returns a Promise as events are always buffered.\n\nThe provider parameter has been removed and provider will be determined by import path."
    }
}