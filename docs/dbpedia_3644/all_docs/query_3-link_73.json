{
    "id": "dbpedia_3644_3",
    "rank": 73,
    "data": {
        "url": "https://community.qlik.com/t5/Qlik-Sense-Documents/Mapping-Postal-codes/ta-p/1586891",
        "read_more_link": "",
        "language": "en",
        "title": "Mapping Postal codes",
        "top_image": "https://community.qlik.com/t5/image/serverpage/image-id/12979iACB5A6B5D0823252?v=v2",
        "meta_img": "https://community.qlik.com/t5/image/serverpage/image-id/12979iACB5A6B5D0823252?v=v2",
        "images": [
            "https://community.qlik.com/html/assets/qlik-logo-new.svg",
            "https://community.qlik.com/legacyfs/online/avatars/a260956_PatricNordströmIdevio2.png.png",
            "https://community.qlik.com/html/@E7F9BD652722B5A6D7594D1629117D66/rank_icons/Community_Gamification-Ranking-Icons_16x16-Employee-2.png",
            "https://community.qlik.com/t5/image/serverpage/image-id/12979iACB5A6B5D0823252/image-size/large?v=v2&px=999",
            "https://community.qlik.com/t5/image/serverpage/image-id/12977i6371CCD6E25857FA/image-size/large?v=v2&px=999",
            "https://community.qlik.com/t5/image/serverpage/image-id/12987i59F8DEB887C94644/image-size/medium?v=v2&px=400",
            "https://community.qlik.com/t5/image/serverpage/image-id/12988i308F6780600EA7D3/image-size/medium?v=v2&px=400",
            "https://community.qlik.com/t5/image/serverpage/image-id/12989i6559AD2E9F066A20/image-size/large?v=v2&px=999",
            "https://community.qlik.com/t5/image/serverpage/avatar-name/zombie/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/message/version/2?xdesc=1.0",
            "https://community.qlik.com/html/@562DE2FD3BDF4C5A187D4B54CF586957/rank_icons/Community_Gamification-Ranking-Icons_16x16-Contributor.png",
            "https://community.qlik.com/legacyfs/online/avatars/a260956_PatricNordströmIdevio2.png.png",
            "https://community.qlik.com/html/@E7F9BD652722B5A6D7594D1629117D66/rank_icons/Community_Gamification-Ranking-Icons_16x16-Employee-2.png",
            "https://community.qlik.com/t5/image/serverpage/image-id/25936i7F0F2EA68DC65891/image-size/large?v=v2&px=999",
            "https://community.qlik.com/t5/image/serverpage/avatar-name/violin/avatar-theme/candy/avatar-collection/music/avatar-display-size/message/version/2?xdesc=1.0",
            "https://community.qlik.com/html/@562DE2FD3BDF4C5A187D4B54CF586957/rank_icons/Community_Gamification-Ranking-Icons_16x16-Contributor.png",
            "https://community.qlik.com/legacyfs/online/avatars/a260956_PatricNordströmIdevio2.png.png",
            "https://community.qlik.com/html/@E7F9BD652722B5A6D7594D1629117D66/rank_icons/Community_Gamification-Ranking-Icons_16x16-Employee-2.png",
            "https://community.qlik.com/legacyfs/online/avatars/a1245_4TCBOZ9AMWWU.jpg",
            "https://community.qlik.com/html/@EB2E38D48DFFE77551B583102F650204/rank_icons/Community_Gamification-Ranking-Icons_16x16-Partner.png",
            "https://community.qlik.com/t5/image/serverpage/image-id/89357iFE90F84770102382/image-size/medium?v=v2&px=400",
            "https://community.qlik.com/t5/image/serverpage/image-id/55791i0847182B9E327C0F/image-dimensions/50x50/constrain-image/false?v=v2",
            "https://community.qlik.com/html/@E7F9BD652722B5A6D7594D1629117D66/rank_icons/Community_Gamification-Ranking-Icons_16x16-Employee-2.png",
            "https://community.qlik.com/legacyfs/online/avatars/a1245_4TCBOZ9AMWWU.jpg",
            "https://community.qlik.com/html/@EB2E38D48DFFE77551B583102F650204/rank_icons/Community_Gamification-Ranking-Icons_16x16-Partner.png",
            "https://community.qlik.com/t5/image/serverpage/image-id/55791i0847182B9E327C0F/image-dimensions/50x50/constrain-image/false?v=v2",
            "https://community.qlik.com/html/@E7F9BD652722B5A6D7594D1629117D66/rank_icons/Community_Gamification-Ranking-Icons_16x16-Employee-2.png",
            "https://community.qlik.com/t5/image/serverpage/image-id/89479i9F5230D0D42A1237/image-size/medium?v=v2&px=400",
            "https://community.qlik.com/legacyfs/online/avatars/a1245_4TCBOZ9AMWWU.jpg",
            "https://community.qlik.com/html/@EB2E38D48DFFE77551B583102F650204/rank_icons/Community_Gamification-Ranking-Icons_16x16-Partner.png",
            "https://community.qlik.com/t5/image/serverpage/image-id/55791i0847182B9E327C0F/image-dimensions/50x50/constrain-image/false?v=v2",
            "https://community.qlik.com/html/@E7F9BD652722B5A6D7594D1629117D66/rank_icons/Community_Gamification-Ranking-Icons_16x16-Employee-2.png",
            "https://community.qlik.com/html/@E7F9BD652722B5A6D7594D1629117D66/rank_icons/Community_Gamification-Ranking-Icons_16x16-Employee-2.png",
            "https://www.adasitecompliance.com/img/APolicy.png"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "community.qlik.com",
            "user-id"
        ],
        "publish_date": "2019-05-30T20:28:15.693000+00:00",
        "summary": "",
        "meta_description": "Mapping data based on postal code areas or center points is a common task. However postal codes is not a one global standard and there is lot of - 1586891",
        "meta_lang": "en",
        "meta_favicon": "https://community.qlik.com/html/@C0F5D3F647A7CDEC19BE35D6A4BA1F39/assets/favicon2024.ico",
        "meta_site_name": "",
        "canonical_link": "https://community.qlik.com/t5/Qlik-Sense-Documents/Mapping-Postal-codes/ta-p/1586891",
        "text": "cancel\n\nTurn on suggestions\n\nAuto-suggest helps you quickly narrow down your search results by suggesting possible matches as you type.\n\nShowing results for\n\nSearch instead for\n\nDid you mean:\n\nMapping Postal codes\n\nAttachments\n\nMappingPostalCodes.zip\n\nMapping data based on postal code areas or center points is a common task. However postal codes is not a one global standard and there is lot of variation between countries in format and structure that makes the task challenging.\n\nAlso the availability of postal code areas varies, many countries are included in the Qlik Location database, but for others postal code areas need to be purchased separately.\n\nWorkflow\n\nHere's the high level workflow, the bulk is data preparation before rendering\n\n1. Prepare the data\n\n- Make the postal codes unique\n\n- Pad with zeroes\n\n- Some countries are special\n\n- Check coverage\n\n- Build overview layers when possible\n\nThis app will show how to map postal code areas for five European countries: France, Great Britain, Germany and Italy. The indata is not clean and contains errors like in most uses cases.\n\nPrepare the data\n\nMake the postal codes unique\n\nWhen mapping postal codes for several countries the first step is to make the postal code unique. The easiest way to do this is to add country code prefixed with a comma after the postal code.\n\n=Postal & ',' & CountryCode as zip\n\nPad with zeroes\n\nIn many cases Excel drops leading zeroes in numerical postal codes. I can see that when looking at the max and min lengths. Note that not all postal codes are numeric though and UK is special so we fix that later. Pad with leading zeroes for France, Germany and Italy like this:\n\n=Num(PostalCode,'00000')\n\nGreat Britain is special\n\nThe postcodes are alphanumeric, and are variable in length: ranging from six to eight characters (including a space) long. Each post code is divided into two parts separated by a single space. More info at Wikipedia. Here's the three levels comparable to 2,3 and 4 digit numeric postal codes:\n\nArea: 1 or 2 letters\n\nDistrict: 1 or 2 digits or a digit followed by a letter\n\nSector: 1 digit\n\nCan be parsed like this if the the space is in the right place:\n\n=If(IsNum(Mid(zip,2,1)),Left(zip,1),Left(zip,2)) & ',' & cc // Area\n\n=subfield(zip,' ',1) & ',' & cc // District\n\n=subfield(zip,' ',1) & ' ' & left(subfield(zip,' ',2),1) & ',' & cc // Sector\n\nCheck coverage\n\nBy checking the table at Qlik GeoAnalytics Coverage I can tell that there is built support for postal code areas for most of the countries I am interested. However:\n\n(1) Postal code areas are missing for Italy.\n\n(2) France doesn't support 2,3,4 level postal code areas.\n\n(3) Northern Ireland is not included in the areas for Great Britain.\n\nTruncate for 2 and 3 digit postal code levels\n\nGermany and Switzerland are easy, just truncate the zip code and add the country code. Add the following before the load:\n\nload *,\n\nleft(zip,2) & ',' & cc as zip2,\n\nleft(zip,3) & ',' & cc as zip3;\n\nFrance, IntersectsMost\n\nFor France we will use administrative areas level 1 and level 2 as replacement of the non-existing postal code areas of 2 and 3 digit.\n\nUsing the QGA connector operation IntersectMosts will construct the hierarchy between postal code and admin boundaries: Adm1>Adm2>Zip. For details see the load script.\n\nItaly, Within\n\nFor Italy we will also use admin 1 and 2, and use a point layer for the postal code level.\n\nUsing the QGA connector operation Within we can link postal code center points to the administrative boundary level 2: Adm1>Adm2>Zip. For details see the load script.\n\nCreate map view\n\nAfter that it's easy to put together a map view.\n\n1. Create a drill down group Country > zip2 > zip3 > zip\n\n2. Add map chart and a area layer, drill down group as dimension, color by Sum(Sales)\n\n3. Add a point layer only visible on level \"zip\", add a set expression for location: only({<cc={'IT'}>}zip)\n\nSee the attached app and data for more details."
    }
}