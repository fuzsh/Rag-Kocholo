{
    "id": "dbpedia_5484_0",
    "rank": 54,
    "data": {
        "url": "https://help.jasmin.ac.uk/docs/getting-started/storage/",
        "read_more_link": "",
        "language": "en",
        "title": "Access to storage",
        "top_image": "https://help.jasmin.ac.uk/logo.png",
        "meta_img": "https://help.jasmin.ac.uk/logo.png",
        "images": [
            "https://help.jasmin.ac.uk/img/jasmin-logo-light.svg",
            "https://help.jasmin.ac.uk/img/jasmin-logo-dark.svg",
            "https://help.jasmin.ac.uk/img/logos/UKRI_STF_Council-Logo_Horiz-RGB_h80.png",
            "https://help.jasmin.ac.uk/img/logos/UKRI_NER_Council-Logo_Horiz-RGB_h80.png",
            "https://help.jasmin.ac.uk/img/logos/ncas-logo-light.png",
            "https://help.jasmin.ac.uk/img/logos/nceo-logo-light.svg"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2024-07-31T15:31:47+01:00",
        "summary": "",
        "meta_description": "This article provides an overview of JASMIN storage.",
        "meta_lang": "en",
        "meta_favicon": "/img/favicon_hu6049450981217700720.png",
        "meta_site_name": "JASMIN Help Site",
        "canonical_link": "https://help.jasmin.ac.uk/docs/getting-started/storage/",
        "text": "This article provides an overview of JASMIN storage.\n\nIMPORTANT: Please see also Understanding new JASMIN storage which explains more about the different types of storage as of Phase 4 of JASMIN’s history.\n\nHome directory\n\nEvery JASMIN user is allocated a HOME directory located at /home/users/<username>. This directory is available across most of the interactive and batch computing resources, including the JASMIN login and transfer servers.\n\nEach home directory has a default quota of 100 GB. Although you can’t directly check usage against your quota, you can find out the current size of your home directory as follows (the pdu command is a parallel variant of the du command, designed to work with the particular storage used for home directories on JASMIN).\n\nBackups of your home directory\n\nYour home directory is backed up using a daily snapshot which provides a quick, self-service method for you to restore files or directories that have been accidentally deleted. Snapshot backups are kept for 1-2 weeks before being deleted.\n\nRecovering snapshots of your home directory data\n\nUsers can access snapshots to recover files/directories that have been accidentally deleted. These are stored in /home/users/.snapshot/homeusers.<snapshotid>/<username>\n\nThe most recent backup is the one with the highest snapshot id number.\n\nFind the ones relevant to your username with a command line this:\n\nThere should be up to 14 directories like this:\n\nEach of these snapshot directories effectively contains your home directory as it was on that date. You can copy files back from them (yourself) to their original location.\n\nA snapshot backup is also provided for /gws/smf volumes (similar allocations of SSD storage for GWS groups to share): snapshots in this case are made hourly and kept for 10 hours, then daily snapshots are kept for 2 weeks. These can be retrieved in a similar manner to that shown above. In this case the relevant directories should be found at\n\n(where NN = 04 or 07 depending on where the volume is located)\n\nPlease also note the advice on inter-volume symlinks, below: these are to be avoided.\n\nJASMIN disk mounts\n\nThere is a common file system layout that underpins most of the JASMIN infrastructure. However, access to different parts of the file system will depend on where you are logged in. Table 1 outlines the key disk mounts, where they are accessible from and the type of access (read and/or write).\n\nTable 1. List of common disk mounts, types of storage and their availability on JASMIN\n\nDisk mount\n\nlocation login sci transfer LOTUS Type Parallel-write /home/users R/W R/W R/W R/W SSD no /gws/pw/j07\n\n/gws/nopw/j04 (see note 1 below)\n\n/gws/smf/j0[4,7] no\n\nno\n\nno R/W\n\nR/W\n\nR/W R/W\n\nR/W\n\nR/W R/W\n\nR/W\n\nR/W PFS\n\nSOF\n\nSSD yes (hence “pw”)\n\nno (hence “nopw”)\n\nno /work/xfc/volX (see note 2 below) no\n\nno R/W R/W R/W PFS yes /work/scratch-pw[2,3]\n\n/work/scratch-nopw no\n\nno R/W\n\nR/W no\n\nno R/W\n\nR/W PFS\n\nSSD yes\n\nno /apps/contrib No RO No RO n/a n/a /badc, /neodc (archives) No RO RO RO n/a n/a\n\nlogin = login servers: login[1-4].jasmin.ac.uk\n\nsci = scientific analysis servers: sci[1-6,8].jasmin.ac.uk\n\ntransfer = data transfer servers: xfer[1-2].jasmin.ac.uk\n\nLOTUS = LOTUS batch processing cluster(all cluster nodes)\n\nDisks are mounted read/write (\" R/W “) or read-only (” RO “).\n\nNote 1: Please refer to issues related to writing small files and NetCDF3 to SOF storage here\n\nNote 2: For details of how to use the Transfer Cache (XFC) service please see here\n\nWhere to write data\n\nAs indicated in table 1 there are three main disk mounts where data can be written. Please follow these general principles when deciding where to write your data:\n\nHOME directories (/home/users) are relatively small (100GB) and should NOT be used for storing large data volumes or for sharing data with other users. 0 Group Workspaces (mostly /gws/nopw/*/<project> but some /gws/pw/*/<project) are usually the correct place to write your data, although they are not backed up. Please refer to the Group Workspace documentation for details.\n\n/gws/pw/j07 volumes are parallel-write-capable storage from Phase 7 (onwards) of JASMIN\n\n/gws/nopw/j04 volumes are “Scale out Filesystem” (SOF) from Phase 4 (onwaards) of JASMIN: this storage is not parallel-write-capable\n\nThe “scratch” areas (/work/scratch-pw2, /work/scratch-pw3 and /work/scratch-nopw) are available as a temporary file space for jobs running on LOTUS (see next section below).\n\nThe (/tmp) directory is not usually an appropriate location to write your data (see next section below).\n\nHow to use the temporary disk space\n\nScratch\n\nThe scratch areas /work/scratch-pw2, /work/scratch-pw3 and /work/scratch-nopw are a temporary file space shared across the entire LOTUS cluster and the scientific analysis servers.\n\nThese scratch areas are ideal for processes that generate intermediate data files that are consumed by other parts of the processing before being deleted. Please remember that these volumes are resources shared between all users, so consider other users and remember to clean up after your jobs. **** Any data that you wish to keep should be written to a Group Workspace (but remember to change the group-ownership of the data if you do).\n\nThere are 2 types of scratch storage available:\n\nPFS scratch (lots of it, fast, less good for small files) as 2 x 1 PB volumes /work/scratch-pw[2,3] and particularly suitable for users with a need for storage capabale of shared-file writes with MPI-IO, but good for most purposes.\n\nSSD scratch (less of it, very fast, good for small files) /work/scratch-nopw2 as 1 x 220 TB volume. Do not use for operations that attempt to write to multiple parts of a file simultaneously. Please be aware of this if your code (perhaps inadvertently?) writes to a shared log file.\n\nWhen using the “scratch” areas, please create a sub-directory (e.g. /work/scratch-????/<username>) labelled with your username and write your data there.\n\n/tmp\n\nIn contrast to the “scratch” space, /tmp directories on LOTUS nodes and physical sci machines are all local to the machine. These can be used to store small volumes of temporary data for a job that only needs to be read by the local process. But /tmp on virtual sci machines, are not local and therefore should not usually be used by users.\n\nCleaning up the scratch and tmp directories\n\nPlease make sure that your jobs delete any files under the /tmpand scratch directories when they are complete ( especially if jobs have not been completed normally!).\n\nPlease do this yourself so that you are not taken by surprise when automated deletion processes clear up any residual data:\n\nAny important data for keeping should be written to a group workspace or to your home directory if appropriate.**\n\nThe /work/scratch-pw[2,3] and /work/scratch-nopw areas are not available on the xfer, login or nx-login servers.\n\nAvoid inadvertently writing to /tmp\n\nSometimes software is configured by default to write to /tmp. Where possible, you should over-ride this and use your group workspace or a username-labelled directory within the scratch space instead.\n\nTo do this, please add the following lines (or similar) to your $HOME/.bashrc file:\n\n&mldr;but please check that location regularly to clear it out!\n\nAccess to the CEDA archive\n\nThe CEDA Archive is mounted read-only under paths refleting the NERC data centres which merged to form CEDA, i.e.\n\n/badc (British Atmospheric Data Centre)\n\n/neodc (NERC Earth Observation Data Centre).\n\n(other data centre paths now also exist at that level: see CEDA Help docs for more info)\n\nThe Archive includes a range of data sets that are provided under varying licences. Access to these groups is managed through standard Unix groups. Information about the data and their access restrictions is available from the CEDA Catalogue .\n\nTape access\n\nGroup workspace managers also have access to a tape library (Elastic Tape service) for making secondary copies and managing storage between online and near-line storage.\n\nNumber of files in a single directory\n\nIt is highly recommended that you do not exceed more than 100,000 files in a single directory on any type of storage on JASMIN. Large numbers of files place unnecessary load on components of the file system and can be the source of slow performance for you and other storage volumes in the system. To count the number of files, please note the advice in slow ls response below, or use an alternative command e.g. find.\n\nSlow ’ls’ response\n\nThis can be due to a number of reasons (see above advice regarding number of files in a single directory, and below regarding inter-volume symlinks). To speed up the response (useful if you want to count the number of files) it often helps to un-alias ls, e.g. by placing a backslash in front of the command: \\ls.\n\nWe highly recommend users not to use symbolic links in their home directories to other parts of the JASMIN file systems, such as GWSs or scratch areas. There are a number of conditions when the petabyte-scale JASMIN storage can become unusable for all users due to these links. There is a more technical explanation below. We would advise path substitutions using environment variables instead.\n\nSymlinks in users’ home directories that point to other volumes (for example group workspaces) make matters worse when there are problems on the sci*.jasmin.ac.uk servers and other shared machines, and/or when the metadata servers responsible for particular storage volumes themselves become overloaded. The simplest advice we can currently give is to avoid using symlinks.\n\nIn more detail:\n\nThis issue is particularly apparent when ls is aliassed to ls --color (as is the default on 99% of JASMIN systems) AND one of the colorisation options specified is for an orphaned link. The ls on symlinks causes the metadata servers at the end of the symlink to be called (to provided the stat filesystem metadata), in addition to the metadata server for the home directory. If those metadata servers at the far end are under load, or have some other problem, the ls to the home directory can hang, but this also hangs other users who may be trying to ls their own home directory (even if theirs contains no symlinks). The situation can then escalate out of control as more and more users try and fail.\n\nThis is happens especially where one or more of the volumes involved contains large numbers of small files."
    }
}