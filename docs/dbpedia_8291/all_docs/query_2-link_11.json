{
    "id": "dbpedia_8291_2",
    "rank": 11,
    "data": {
        "url": "https://forums.gentoo.org/viewtopic-t-986532-start-0.html",
        "read_more_link": "",
        "language": "en",
        "title": "Gentoo Forums :: View topic",
        "top_image": "",
        "meta_img": "",
        "images": [
            "https://forums.gentoo.org/templates/gentoo/images/header_01_top.jpg",
            "https://forums.gentoo.org/templates/gentoo/images/header_01_bottom.jpg",
            "https://forums.gentoo.org/templates/gentoo/images/header_02.jpg",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/reply.gif",
            "https://forums.gentoo.org/images/forumpointer.gif",
            "https://forums.gentoo.org/images/ranks/rank_rect_0.gif",
            "https://forums.gentoo.org/images/avatars/1725822223518ffd4e48319.jpg",
            "https://forums.gentoo.org/templates/gentoo/images/icon_minipost.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_quote.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_profile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_pm.gif",
            "https://forums.gentoo.org/templates/gentoo/images/spacer.gif",
            "https://forums.gentoo.org/images/ranks/rank-G-2-watchman.gif",
            "https://forums.gentoo.org/images/avatars/9397496074fd0189143bb7.png",
            "https://forums.gentoo.org/templates/gentoo/images/icon_minipost.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_quote.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_profile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_pm.gif",
            "https://forums.gentoo.org/templates/gentoo/images/spacer.gif",
            "https://forums.gentoo.org/images/ranks/rank_rect_0.gif",
            "https://forums.gentoo.org/images/avatars/1725822223518ffd4e48319.jpg",
            "https://forums.gentoo.org/templates/gentoo/images/icon_minipost.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_quote.gif",
            "https://forums.gentoo.org/images/smiles/icon_smile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_profile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_pm.gif",
            "https://forums.gentoo.org/templates/gentoo/images/spacer.gif",
            "https://forums.gentoo.org/images/ranks/rank-G-2-watchman.gif",
            "https://forums.gentoo.org/images/avatars/9397496074fd0189143bb7.png",
            "https://forums.gentoo.org/templates/gentoo/images/icon_minipost.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_quote.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_profile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_pm.gif",
            "https://forums.gentoo.org/templates/gentoo/images/spacer.gif",
            "https://forums.gentoo.org/images/ranks/rank_rect_0.gif",
            "https://forums.gentoo.org/images/avatars/1725822223518ffd4e48319.jpg",
            "https://forums.gentoo.org/templates/gentoo/images/icon_minipost.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_quote.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_profile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_pm.gif",
            "https://forums.gentoo.org/templates/gentoo/images/spacer.gif",
            "https://forums.gentoo.org/images/ranks/rank_rect_0.gif",
            "https://forums.gentoo.org/images/avatars/1725822223518ffd4e48319.jpg",
            "https://forums.gentoo.org/templates/gentoo/images/icon_minipost.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_quote.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_profile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_pm.gif",
            "https://forums.gentoo.org/templates/gentoo/images/spacer.gif",
            "https://forums.gentoo.org/images/ranks/rank-G-2-watchman.gif",
            "https://forums.gentoo.org/images/avatars/9397496074fd0189143bb7.png",
            "https://forums.gentoo.org/templates/gentoo/images/icon_minipost.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_quote.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_profile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_pm.gif",
            "https://forums.gentoo.org/templates/gentoo/images/spacer.gif",
            "https://forums.gentoo.org/images/ranks/rank_rect_0.gif",
            "https://forums.gentoo.org/images/avatars/1725822223518ffd4e48319.jpg",
            "https://forums.gentoo.org/templates/gentoo/images/icon_minipost.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_quote.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_profile.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/icon_pm.gif",
            "https://forums.gentoo.org/templates/gentoo/images/spacer.gif",
            "https://forums.gentoo.org/templates/gentoo/images/lang_english/reply.gif",
            "https://forums.gentoo.org/images/forumpointer.gif"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "",
        "meta_lang": "",
        "meta_favicon": "",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "I've tried it on three Gentoo machines.\n\nParticipants:\n\nCode: [ebuild R ] sys-apps/xinetd-2.3.15-r1 USE=\"perl tcpd -rpc\" 0 kB\n\n[ebuild R ] net-ftp/tftp-hpa-5.2-r1 USE=\"ipv6 readline tcpd (-selinux)\" 0 kB\n\ntftp-hpa's configuration\n\nCode: squirrel:9:0:/root# cat /etc/xinetd.d/tftp\n\nservice tftp\n\n{\n\ndisable = no\n\nsocket_type = dgram\n\nprotocol = udp\n\nwait = yes\n\nuser = root\n\nserver = /usr/sbin/in.tftpd\n\nserver_args = -R 4096:32767 -s /tftpboot\n\n}\n\nxinetd is running.\n\nIf I try to download a file I get no response.\n\nCode: squirrel:8:0:/root# tftp localhost\n\ntftp> get fie\n\nTransfer timed out.\n\ntftp>\n\nWireshark says the clients requests is accepted by the network stack (meaning that the port is being indeed listened to) but there is no response after it.\n\n/var/log/messages:\n\nCode: Mar 17 00:21:20 squirrel xinetd[2331]: START: tftp pid=3724 from=192.168.1.9\n\nMar 17 00:21:20 squirrel xinetd[3724]: FAIL: tftp address from=192.168.1.9\n\nMar 17 00:21:20 squirrel xinetd[2331]: EXIT: tftp status=0 pid=3724 duration=0(sec)\n\nIf I launch tftp-hpa as a daemon independently of xinetd it works perfectly fine.\n\nWhat may be wrong?\n\n_________________\n\nVitaly\n\nLast edited by krokoziabla on Mon Mar 17, 2014 7:16 am; edited 1 time in total Vitaly ...\n\n(wild guess) as you have the tcpd useflag set on xinetd tcp-wrappers will be used, what is in your hosts access files? You can check the current access rules with 'tcpdchk -v' ... my guess is there are no rules allowing tftp (it would also explain why tftp works outside if xinetd).\n\nHTH & best ... khay Yes, it is my name\n\ntcpdchk hasn't reported anything wrong.\n\nCode: squirrel:4:0:/root# tcpdchk -v -i /etc/xinetd.conf\n\nUsing network configuration file: /etc/xinetd.conf\n\nsquirrel:5:0:/root#\n\nThere's no such files in my /etc\n\nYou, know the same behaviour I have even on a clean setup of Gentoo.\n\n_________________\n\nVitaly Vitaly ... yes, I know, its in your sig :)\n\nThe \"hosts access files\" are /etc/hosts.allow and /etc/hosts.deny. The fact that 'tcpdchk -v' reports no rules means there are none defined, which will equate to \"deny all\".\n\n/etc/hosts.allow\n\nCode: in.tftpd: LOCAL, .my.domain\n\n... see: 'man hosts.allow'\n\nHTH & best ... khay Indeed, the problem was in the access rules!\n\nI made something like this to make it work:\n\nCode: echo 'in.tftpd: ALL' > /etc/hosts.allow\n\nI need to learn more about tcp-wrappers feature.\n\nThank you very much, khayyam!\n\n_________________\n\nVitaly Hm, I was a little hasty.\n\nI've learned also that xinetd has it's own access control mechanism which is influenced by only_from and no_access options of xinetd.conf. By default the global only_from equals localhost so only \"tftp localhost\" session would work.\n\nSo I have overridden only_from option in my /etc/xinetd.d/tftp file to value 0. And now I can download files from other hosts.\n\nAnd also I think the absence of /etc/hosts.allow and /etc/hosts.deny files results in allowing any connection on tcp-wrappers layer. From man 5 hosts_access.\n\nCode: ACCESS CONTROL FILES\n\nThe access control software consults two files. The search stops at the first match:\n\n· Access will be granted when a (daemon,client) pair matches an entry in the /etc/hosts.allow file.\n\n· Otherwise, access will be denied when a (daemon,client) pair matches an entry in the /etc/hosts.deny file.\n\n· Otherwise, access will be granted.\n\nA non-existing access control file is treated as if it were an empty file. Thus, access control can be turned off by\n\nproviding no access control files.\n\nkhayyam, do I understand correctly that support of tcp-wrappers by xinetd is mainly used for painless migration from inetd?\n\n_________________\n\nVitaly"
    }
}