{
    "id": "dbpedia_8290_0",
    "rank": 4,
    "data": {
        "url": "https://stackoverflow.com/questions/31001002/running-script-over-ssh-works-but-over-xinetd-or-after-switching-user-it-wont-w",
        "read_more_link": "",
        "language": "en",
        "title": "Running script over SSH works. But over xinetd or after switching user it wont work",
        "top_image": "https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded",
        "meta_img": "https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded",
        "images": [
            "https://lh4.googleusercontent.com/-2iKyLlOkTHk/AAAAAAAAAAI/AAAAAAAAABI/KfsChXnt2_k/photo.jpg?sz=64",
            "https://www.gravatar.com/avatar/b4d93e08b2830786a7992e8af35514c6?s=64&d=identicon&r=PG",
            "https://stackoverflow.com/posts/31001002/ivc/0c39?prg=80a62d6a-ae5c-4bba-9179-a76609a6c3d7"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2015-06-23T11:01:45",
        "summary": "",
        "meta_description": "im running a 7Days to Die server.\nUsually i connect via ssh with user \"linux\" and run the command:\n\n/home/linux/start\r\nThis works, server is running.\n\nBut when i switch user to root (su root) and r...",
        "meta_lang": "en",
        "meta_favicon": "https://cdn.sstatic.net/Sites/stackoverflow/Img/favicon.ico?v=ec617d715196",
        "meta_site_name": "Stack Overflow",
        "canonical_link": "https://stackoverflow.com/questions/31001002/running-script-over-ssh-works-but-over-xinetd-or-after-switching-user-it-wont-w",
        "text": "im running a 7Days to Die server. Usually i connect via ssh with user \"linux\" and run the command:\n\n/home/linux/start\n\nThis works, server is running.\n\nBut when i switch user to root (su root) and run:\n\nsudo -u linux /home/linux/start\n\nor\n\nsudo -u linux -i bash -c '/home/linux/start'\n\nthe server is shutting down after 5 min and i get this in the logfile:\n\nFailed to create secure directory (/run/user/0/pulse): Permission denied Failed to create secure directory (/run/user/0/pulse): Permission denied Failed to create secure directory (/run/user/0/pulse): Permission denied\n\nand after some lines i also get:\n\n2015-06-23T12:12:15 17,008 INF Disconnect 2015-06-23T12:12:15 17,008 INF NET: Stopping server protocols Platform assembly: /home/linux/7daysded/7DaysToDie_Data/Managed/Mono.Security.dll (this message is harmless) 2015-06-23T12:12:15 17,054 INF NET: Untiy NW server stopped 2015-06-23T12:12:15 17,055 INF [Steamworks.NET] NET: Server stopped 2015-06-23T12:12:15 17,055 INF [NET] ServerShutdown\n\nSame goes for xinetd. When the xinetd server trys to run the script, it crashes too.\n\nI guess when i run it via sudo or xinetd, the User ID is still 0 (root) instead of 1000 (linux). How can i solve the problem?\n\nThe Startscript:\n\n#!/bin/bash if pgrep \"7DaysToDie.\" > /dev/null then exit else cd /home/linux screen -A -m -d -S 7DaysServer /home/linux/7daysded/startserver.sh -configfile=serverconfig.xml screen -ls fi\n\nSome info about my System:\n\nDebian Version 8.1 Linux version 3.16.0-4-amd64 ([email protected]) (gcc version 4.8.4 (Debian 4.8.4-1) ) #1 SMP Debian 3.16.7-ckt11-1 (2015-05-24)\n\nThanks and Regards,\n\nPatrick\n\nUPDATE:\n\ni tried to run as root:\n\nssh -t linux@localhost -p 1111 \"/home/linux/restart\"\n\nI hoped it would be the same as doing it over ssh with putty. But it still doesnt work."
    }
}