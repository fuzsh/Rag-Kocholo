{
    "id": "dbpedia_8290_0",
    "rank": 72,
    "data": {
        "url": "https://unix.stackexchange.com/questions/203173/linux-as-a-network-printer-device-raw-port-9100",
        "read_more_link": "",
        "language": "en",
        "title": "Linux as a network printer device (Raw, port 9100)",
        "top_image": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png?v=32fb07f7ce26",
        "meta_img": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png?v=32fb07f7ce26",
        "images": [
            "https://cdn.sstatic.net/Sites/unix/Img/logo.svg?v=eb6eb2b9e73c",
            "https://i.sstatic.net/8Oig6.png?s=64",
            "https://www.gravatar.com/avatar/879e79284efb4639584574a5fc46c9e4?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/20fb2f35495cb9594a770bb0d6397da6?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://i.sstatic.net/aM1zi.png",
            "https://i.sstatic.net/8Oig6.png?s=64",
            "https://www.gravatar.com/avatar/aaa528c7d7890c61658bea6cf4e57735?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/704e2473131d78ecd8f50b6634a20aaf?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/cb1f6dd356cd93eb6d49c24f311a98a2?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://www.gravatar.com/avatar/0a27a3c28af6e1bf4a0b19d7ba739d3a?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://www.gravatar.com/avatar/6ccce6d343d6076ec7b805c65ad0aaa5?s=64&d=identicon&r=PG",
            "https://unix.stackexchange.com/posts/203173/ivc/0c39?prg=892e3e51-ea4c-476b-a885-0399bb1372a1"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2015-05-13T12:46:41",
        "summary": "",
        "meta_description": "Is possible to configure a Linux computer to work as a \"network printer device\" ? I have an USB printer that I intend to share in the network like a native network printer device.\n\nIs that possible...",
        "meta_lang": "en",
        "meta_favicon": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico?v=fb86ccabb921",
        "meta_site_name": "Unix & Linux Stack Exchange",
        "canonical_link": "https://unix.stackexchange.com/questions/203173/linux-as-a-network-printer-device-raw-port-9100",
        "text": "I understand that network printers use a protocol called RAW (or Jetdirect), is that correct?\n\nYes. There are two network protocols for print jobs that are still relevant today: LPD, running on TCP port 515, and JetDirect, running on TCP port 9100. LPD was designed by Berkeley for BSD UNIX in the old days. It's pretty much obsolete now, but it's still available on many printers, presumably for compatibility with old servers. JetDirect was designed by HP in the early 1990's, and it's simpler and somewhat faster than LPD. You should probably use JetDirect whenever available.\n\nI have a RS/6000 with AIX 5 that finds and works with any kind of 'native' network printer. And I would like to expose in the network a USB printer like a network printer (autonomous device), using Linux (preferably Debian) to do that.\n\nInstall CUPS on a Linux machine, and connect the printer to it. You don't even need a full machine for that, a Raspberry Pi or similar, or a home router with an USB port and running OpenWRT or DD-WRT, would work just fine.\n\nCUPS allows you to share printer with (at least) IPP, LPD and samba protocols out of the box. IPP is supported by most operation systems and IBM was part of the Printing Working Group which came up with IPP so it's likely supported in AIX as well.\n\nAlso, samba has AIX protocol so one or the other should work. search for AIX\n\nBut none of the documents I came across referenced AIX version so I can't be sure if AIX 5 is supported or not.\n\nThe way it works anyhow is that you plug the printer to server with CUPS installed and select the method of sharing, broadcast settings etc. It's straightforward. Then clients can connect to it and it'll show up as network printer.\n\nAfter some researches and tries...\n\nThese \"network printers devices\", could implement some protocols, being one of them the one called \"HP JetDirect\", also known as \"Raw\", \"JetDirect\", either just \"9100\". It seems to be the most common protocol supported by network printers.\n\nA network printer configuration sample:\n\nThe JetDirect protocol is just an ordinary network stream, and not a real protocol, at least in my tests. So, you don't need CUPS neither any kind of printer engine to have a Linux behaving like a network printer, all you need is a 'network stream server' like inetd (or xinetd), to listen to the port 9100 and redirect this stream to the printer stream.\n\nConsider a printer stream in the port /dev/lp0, where we could do something like that:\n\n$ echo \"Hi local legacy printer !\" >/dev/lp0\n\nNow we could redirect the stream coming in the port 9100 to the /dev/lp0, just using the old school inetd:\n\n9100 stream tcp nowait cat > /dev/lp0\n\nSo, in any other remote system (like AIX), we could get the legacy parallel (or USB) printer plugged in a Linux to work like a network printer:\n\n$ netcat linux_ip 9100 $ Hello remote Parallel printer plugged in a Linux ! $ <Ctrl+D>\n\nOf course, there are concurrency issues which beyond others solutions could be handled by CUPS configuring the local printer under a spooler.\n\nIt worked for me !\n\nYou'll probably want to install CUPS; according to this page it's definitely available for AIX as well.\n\nOnce you've configured it to recognize and use your printer, you probably want to check here for instructions on how to share it across the network.\n\nAlternately, you can use samba to share the printer; nowadays most OSes speak the protocol.\n\nOP- And I would like to expose through Linux (preferably Debian) an USB printer in the network, like any ordinary network printer\n\nHere is the help from lp_server:\n\nlp_server [-n port] [-w] [-d device] [-t stty_cmds] Version lp_server-1.1.6 Export a printer by simulating an HP JetDirect interface. -n connection port (default 9100) -w open output device write only (default r/w) -d device (default /dev/lp) -t stty_cmds - stty commands to apply if device is serial port -r remote_list - remote hosts allowed, in IP/netmask or hostname separated by commas. i.e. - 130.191.20.10/24,dickory would allow connections from subnet 130.191.20.0 (24 bit netmask) and host dickory -D level - set debug level\n\nEdit:\n\nThe lp_server will bind to the connection port, and wait for an incoming connection. After accepting a connection, it opens the output device, (rw or write only as specified), applys the stty options, and then copies the connection output to the device input and vice versa.\n\nThe USB printer would appear as a character device /dev file on the linux server and then get exported to the network IP address port 9100 by lp_server where the AIX computer can find the simulated Jet Direct print service. This should be very similar to the minimalist inetd answer and just provide another choice.\n\nAfter fighting a bit to get my Gentoo box to talk to a Raspberry Pi running CUPS, I stumbled upon this thread. It didn't provide any answers directly, but it gave me an idea for something that will do what the OP wants.\n\nThis is, I suspect, the simplest JetDirect-compatible print server around:\n\n#!/usr/bin/env bash nc -kl 9100 | sudo tee /dev/usb/lp0 >/dev/null\n\nRun it as root and you could simplify it further:\n\n#!/usr/bin/env bash nc -kl 9100 >/dev/usb/lp0\n\nChange the device node to wherever your printer lives (if you have multiple printers connected), and change the port (default is 9100) if you want to run multiple instances to support multiple printers.\n\nThe script depends on netcat, so you'll want to install it by whatever means your system provides (sudo apt install -y netcat on a Raspberry Pi, for instance).\n\nYou could even have your system's init system start it for you. If you saved the above script as /usr/local/bin/jetdirect.sh, this systemd service could be used to manage it:\n\n[Unit] Description=JetDirect-compatible server After=network.target [Service] Type=simple ExecStart=/usr/local/bin/jetdirect.sh KillMode=process Restart=on-failure [Install] WantedBy=multi-user.target\n\nI have it running on an OG Raspberry Pi Model B; this script basically turns it into the equivalent of a print server such as this."
    }
}