{
    "id": "dbpedia_8290_3",
    "rank": 25,
    "data": {
        "url": "https://hackernoon.com/a-web-service-written-in-pure-bash-2af847902df1",
        "read_more_link": "",
        "language": "en",
        "title": "A Web Service Written in Pure Bash.",
        "top_image": "https://hackernoon.imgix.net/fallback-feat.png",
        "meta_img": "https://hackernoon.imgix.net/fallback-feat.png",
        "images": [
            "https://hackernoon.imgix.net/search-new.png?w=19&h=19",
            "https://hackernoon.imgix.net/hn-logo.png?auto=format&fit=max&w=256 1x, https://hackernoon.imgix.net/hn-logo.png?auto=format&fit=max&w=640 2x",
            "https://hackernoon.imgix.net/hn-icon.png?auto=format&fit=max&w=48 1x, https://hackernoon.imgix.net/hn-icon.png?auto=format&fit=max&w=96 2x",
            "https://hackernoon.imgix.net/unread-bell.png?w=40",
            "https://hackernoon.imgix.net/hn-icon.png?auto=format&fit=max&w=96 1x, https://hackernoon.imgix.net/hn-icon.png?auto=format&fit=max&w=96 2x",
            "https://hackernoon.imgix.net/icons/SVG/awesome/Window%20Close.svg",
            "https://hackernoon.com/hn-logo.png",
            "https://hackernoon.imgix.net/brush2.png?w=25&auto=format&fit=max 1x, https://hackernoon.imgix.net/brush2.png?w=25&auto=format&fit=max 2x",
            "https://cdn.hackernoon.com/avatars/robot-a3.png?auto=format&fit=max&w=32 1x, https://cdn.hackernoon.com/avatars/robot-a3.png?auto=format&fit=max&w=64 2x",
            "https://hackernoon.imgix.net/computer.png?auto=format&fit=max&w=32 1x, https://hackernoon.imgix.net/computer.png?auto=format&fit=max&w=48 2x",
            "https://hackernoon.imgix.net/images/Lite%20Icon%20%4025px.png?auto=format&fit=max&w=32 1x, https://hackernoon.imgix.net/images/Lite%20Icon%20%4025px.png?auto=format&fit=max&w=48 2x",
            "https://hackernoon.imgix.net/tl;dr-dark.png?auto=format&fit=max&w=64 1x, https://hackernoon.imgix.net/tl;dr-dark.png?auto=format&fit=max&w=128 2x",
            "https://hackernoon.imgix.net/arrow-dark.png",
            "http://logo.bigpicture.io/logo/amazon.com",
            "http://logo.bigpicture.io/logo/twitter.com",
            "https://hackernoon.imgix.net/fallback-feat.png?auto=format&fit=max&w=1080 1x, https://hackernoon.imgix.net/fallback-feat.png?auto=format&fit=max&w=2048 2x",
            "https://hackernoon.imgix.net/avatars/robot-a3.png?w=100&auto=format&fit=max 640w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=100&auto=format&fit=max 750w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=100&auto=format&fit=max 828w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=100&auto=format&fit=max 1080w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=100&auto=format&fit=max 1200w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=100&auto=format&fit=max 1920w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=100&auto=format&fit=max 2048w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=100&auto=format&fit=max 3840w",
            "https://hackernoon.imgix.net/hn-images/1*BjfbUgYTSEfvWHADL0BZbg.png?auto=format&fit=max&w=1920 1x, https://hackernoon.imgix.net/hn-images/1*BjfbUgYTSEfvWHADL0BZbg.png?auto=format&fit=max&w=3840 2x",
            "https://hackernoon.imgix.net/hn-images/1*CjRaDtxR90tRpwUZRACZ9g.png?auto=format&fit=max&w=1920 1x, https://hackernoon.imgix.net/hn-images/1*CjRaDtxR90tRpwUZRACZ9g.png?auto=format&fit=max&w=3840 2x",
            "https://hackernoon.imgix.net/hn-images/1*l1ZOLZGu4ccHiYb4UCydYQ.png?auto=format&fit=max&w=64 1x, https://hackernoon.imgix.net/hn-images/1*l1ZOLZGu4ccHiYb4UCydYQ.png?auto=format&fit=max&w=128 2x",
            "https://hackernoon.imgix.net/images/img-du23d5v.png?auto=format&fit=max&w=640 640w, https://hackernoon.imgix.net/images/img-du23d5v.png?auto=format&fit=max&w=750 750w, https://hackernoon.imgix.net/images/img-du23d5v.png?auto=format&fit=max&w=828 828w, https://hackernoon.imgix.net/images/img-du23d5v.png?auto=format&fit=max&w=1080 1080w, https://hackernoon.imgix.net/images/img-du23d5v.png?auto=format&fit=max&w=1200 1200w, https://hackernoon.imgix.net/images/img-du23d5v.png?auto=format&fit=max&w=1920 1920w, https://hackernoon.imgix.net/images/img-du23d5v.png?auto=format&fit=max&w=2048 2048w, https://hackernoon.imgix.net/images/img-du23d5v.png?auto=format&fit=max&w=3840 3840w",
            "https://hackernoon.imgix.net/avatars/robot-a3.png?w=200&auto=format&fit=max 640w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=200&auto=format&fit=max 750w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=200&auto=format&fit=max 828w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=200&auto=format&fit=max 1080w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=200&auto=format&fit=max 1200w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=200&auto=format&fit=max 1920w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=200&auto=format&fit=max 2048w, https://hackernoon.imgix.net/avatars/robot-a3.png?w=200&auto=format&fit=max 3840w",
            "https://cdn.hackernoon.com/icons/SVG/Programming.svg?auto=format&fit=max&w=32 1x, https://cdn.hackernoon.com/icons/SVG/Programming.svg?auto=format&fit=max&w=48 2x",
            "https://hackernoon.imgix.net/images/arweave.png?auto=format&fit=max&w=32 1x, https://hackernoon.imgix.net/images/arweave.png?auto=format&fit=max&w=48 2x",
            "https://hackernoon.imgix.net/computer.png?auto=format&fit=max&w=32 1x, https://hackernoon.imgix.net/computer.png?auto=format&fit=max&w=48 2x",
            "https://hackernoon.imgix.net/images/Lite%20Icon%20%4025px.png?auto=format&fit=max&w=32 1x, https://hackernoon.imgix.net/images/Lite%20Icon%20%4025px.png?auto=format&fit=max&w=48 2x",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://buzzsumo.com/journalist/henry-snopek-23592476/&size=16",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://www.linuxquestions.org/questions/linux-software-2/simple-http-server-for-linux-4175600009/&size=16",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://h-deb.clg.qc.ca/Sujets/Web/Developpement-Web.html&size=16",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://techrights.org/o/2017/01/15/debian-8-7-released/&size=16",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://ng-tech.icu/books/awesome-lists/00.specials/weekly/2017/1/1.2/&size=16",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://wx-chevalier.github.io/books/awesome-lists/00.specials/weekly/2017/1/1.2/&size=16",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://ngte-al.gitbook.io/i/specials-43/weekly/2017/1/1.2&size=16",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://techrights.org/2017/01/15/debian-8-7-released/&size=16",
            "https://t0.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://reddit-programming-top-archive.blogspot.com/2017/01/reddit-programming-top-weekly-20172.html&size=16",
            "https://hackernoon.imgix.net/images/img-vl33dqg.png?auto=format&fit=max&w=500 1x, https://hackernoon.imgix.net/images/img-vl33dqg.png?auto=format&fit=max&w=500 2x",
            "https://hackernoon.imgix.net/images/fLBpU5b6gad8W2kzAp0BnpycjhT2-57b37kg.jpeg?auto=format&fit=max&w=260 1x, https://hackernoon.imgix.net/images/fLBpU5b6gad8W2kzAp0BnpycjhT2-57b37kg.jpeg?auto=format&fit=max&w=260 2x",
            "https://hackernoon.imgix.net/images/github/bash-51.png?auto=format&fit=max&w=260 1x, https://hackernoon.imgix.net/images/github/bash-51.png?auto=format&fit=max&w=260 2x",
            "https://hackernoon.imgix.net/images/ZFT8ypYqRcQGo0NU17QYMPRU2zK2-udb3p3u.jpeg?auto=format&fit=max&w=260 1x, https://hackernoon.imgix.net/images/ZFT8ypYqRcQGo0NU17QYMPRU2zK2-udb3p3u.jpeg?auto=format&fit=max&w=260 2x",
            "https://hackernoon.imgix.net/images/rZMCE2UpBzcfW27eMzbfUXKV7Tv1-mq92kdn.jpeg?auto=format&fit=max&w=260 1x, https://hackernoon.imgix.net/images/rZMCE2UpBzcfW27eMzbfUXKV7Tv1-mq92kdn.jpeg?auto=format&fit=max&w=260 2x",
            "https://hackernoon.imgix.net/images/mFiFXvbhc7UdRVonkxLCfR2Qgq13-x1s36jj.jpeg?auto=format&fit=max&w=260 1x, https://hackernoon.imgix.net/images/mFiFXvbhc7UdRVonkxLCfR2Qgq13-x1s36jj.jpeg?auto=format&fit=max&w=260 2x",
            "https://hackernoon.com/watch-gif.gif?auto=format&fit=max&w=96 1x, https://hackernoon.com/watch-gif.gif?auto=format&fit=max&w=256 2x"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "Henry Snopek"
        ],
        "publish_date": "2016-12-28T00:00:00",
        "summary": "",
        "meta_description": "At <a href=\"http://twitter.com/carrot\" title=\"Twitter profile for @carrot\" target=\"_blank\">@carrot</a> we build out many APIs using Go and Node some of which are hosted on DigitalOcean and take advantage of Docker containers, but we also use the <a href=\"https://hackernoon.com/tagged/amazon\" target=\"_blank\">Amazon</a> Stack, like Lambda, S3, and Cloudfront with Apex &amp; Serverless. We have many tools to help us startup projects, like <a href=\"https://github.com/static-dev/spike\" target=\"_blank\">Spike</a> when developing static sites or <a href=\"https://github.com/carrot/ash-github\" target=\"_blank\">ash-github</a> when setting up a repository on <a href=\"https://hackernoon.com/tagged/github\" target=\"_blank\">Github</a>. While working on ash-github I joked about how <strong>everything</strong> should be written in bash. The more my coworkers and I joked about it, the more the idea grew in my head and soon the idea came to fruition.",
        "meta_lang": "en",
        "meta_favicon": "",
        "meta_site_name": "",
        "canonical_link": "https://hackernoon.com/a-web-service-written-in-pure-bash-2af847902df1",
        "text": "Is it beer o’clock yet?\n\nAt @carrot we build out many APIs using Go and Node some of which are hosted on DigitalOcean and take advantage of Docker containers, but we also use the Amazon Stack, like Lambda, S3, and Cloudfront with Apex & Serverless. We have many tools to help us startup projects, like Spike when developing static sites or ash-github when setting up a repository on Github. While working on ash-github I joked about how everything should be written in bash. The more my coworkers and I joked about it, the more the idea grew in my head and soon the idea came to fruition.\n\nThe Dirt\n\nThe service itself is currently running on a Ubuntu 16.10 droplet on DigitalOcean. To expose my service I needed to open a connection with the outside world and initially played with netcat as it’s preinstalled on most *nix machines. This task wasn’t familiar to me at all, but I couldn’t read the incoming request and I couldn’t handle two users connecting at the same time. I explored inetd which lacked of documentation beyond the man page. Continuing with my research I found xinetd which is a more secure version of inetd. I also found a lot more sufficient documentation and user guides on creating a service. After installing xinetd I began building a primitive version of my pure bash service called beeroclock.\n\nxinetd man page\n\nCode Digestion\n\nWhen a request is made it is consumed, the headers are parsed until we find the a carriage return signaling that we’ve hit the body, and then properly assign each piece to a variable. In this case we only care about GET requests and if pathname is correct. The service responds to two paths and one query parameter.\n\n# route based response/ock — text/plain/ock.html — text/html/ock.json — application/json\n\n# query param based response/ock?type=plain — text/plain/ock?type=html — text/html/ock?type=json — application/json\n\n# favicon/favicon — Beer Emoji/favicon.ico — Beer Emoji\n\nIf you request any other route than one listed above you’ll get redirected to /ock. You’ll also have seen that there’s three content-types: text/plain, text/html, and application/json. The logic for the routing and query parameter consumption was originally simple and purely used regular expressions, though the response time was sluggish. I created a performance script for regular expressions & conditionals and tested it out locally and on the server. There was a significant difference, if/else conditionals were ~52.7% faster than regular expressions! Because of this I refactored using conditionals, but sadly there’s no noticeable performance boost with only a 100–200 millisecond difference in the request time.\n\nBash Performance Test — Regex vs If/Else\n\nThe response itself is constructed using a handful of functions, a few of them are: beertime and respond. The beertime function handles the time calculations and message to be used in the body. The latter constructs and replies with the appropriate response while only consuming two parameters: content-type & body. To calculate your timezone, for proper beer consumption of course, I send a request to a separate service that contains the requestors IP Address which responds with your timezone. I then set the environment variable TZ in the subshell I spawn when executing beertime. The output from beertime is consumed by another function called respond which sets the headers and echoes the whole response back to the client.\n\nTo Recap…"
    }
}