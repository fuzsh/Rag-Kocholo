{
    "id": "dbpedia_7610_3",
    "rank": 86,
    "data": {
        "url": "https://earthobservatory.nasa.gov/blogs/elegantfigures/2013/10/22/how-to-make-a-true-color-landsat-8-image/",
        "read_more_link": "",
        "language": "en",
        "title": "Color Landsat 8 Image",
        "top_image": "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/00_mtjefferson_oli_2013225_crop.jpg",
        "meta_img": "",
        "images": [
            "https://earthobservatory.nasa.gov/img/topics/topic-snowIce.svg",
            "https://earthobservatory.nasa.gov/img/logo-meatball2.png",
            "https://earthobservatory.nasa.gov/img/logo-meatball1.png",
            "https://earthobservatory.nasa.gov/img/logoWhite.png",
            "https://earthobservatory.nasa.gov/img/logo.png",
            "https://earthobservatory.nasa.gov/img/icon-search.svg",
            "https://earthobservatory.nasa.gov/img/icon-search.svg",
            "https://earthobservatory.nasa.gov/img/logo-meatball1.png",
            "https://earthobservatory.nasa.gov/img/logo.png",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/00_mtjefferson_oli_2013225_crop.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/01.5_ISS037-E-001180.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/01_landsat_tutorial_3bands.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/02_landsat_merge_channels.png",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/03_landsat_rgb_composite.png",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/04_landsat_uncorrected_rgb_composite.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/05_landsat_add_levels_layer.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/06_landsat_levels_layer_example.png",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/07_landsat_white_point.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/08_rgb_levels_histogram.png",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/09_mtjefferson_oli_2013225_lighter.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/10_first_curve.png",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/11_rgb_curves_blackpoint.png",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/12_mtjefferson_oli_2013225_blackpoint.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/12.5_three_sisters_photo.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/13_curves_histogram_final.png",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/14_mtjefferson_oli_2013225_final.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/15_mtjefferson_oli_2013225_crop.jpg",
            "https://earthobservatory.nasa.gov/blogs/elegantfigures/wp-content/uploads/sites/4/2013/10/16_mtjefferson_oli_2013225_desert_crop.jpg",
            "https://earthobservatory.nasa.gov/img/logo-mark.svg",
            "https://earthobservatory.nasa.gov/img/social-facebook.svg",
            "https://earthobservatory.nasa.gov/img/social-twitter.svg",
            "https://earthobservatory.nasa.gov/img/social-instagram.svg",
            "https://earthobservatory.nasa.gov/img/social-subscribe.svg",
            "https://earthobservatory.nasa.gov/img/social-rss.svg"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2013-10-22T00:00:00",
        "summary": "",
        "meta_description": "climate change, global climate change, global warming, natural hazards, Earth, environment, remote sensing, atmosphere, land processes, oceans, volcanoes, land cover, Earth science data, NASA, environmental processes, Blue Marble, global maps",
        "meta_lang": "en",
        "meta_favicon": "/favicon.ico",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "Since its launch in February 2013, Landsat 8 has collected about 400 scenes of the Earth’s surface per day. Each of these scenes covers an area of about 185 by 185 kilometers (115 by 115 miles)—34,200 square km (13,200 square miles)—for a total of 13,690,000 square km (5,290,000 square miles) per day. An area about 40% larger than the united states. Every day.\n\nAlthough it’s possible to process all that data automatically, it’s best to process each scene individually to bring out the detail in a specific region. Believe it or not, this doesn’t require any tools more specialized than Photoshop (or any other image editing program that supports 16-bit TIFF images, along with curve and level adjustments).\n\nThe first step, of course, is to download some data. Either use this sample data (184 MB ZIP archive) of the Oregon Cascades, or dip into the Landsat archive with my tutorial for Earth Explorer. The data are comprised of 11 separate image files, along with a quality assurance file (BQA) and a text file with metadata (date and time, corner points—that sort of thing). These arrive in a ZIPped and TARred archive. (Windows does not natively support TAR, so you may need to use something like 7-Zip to unpack the files. OS X can automatically uncompress the files (with default settings) when the archive is downloaded—double-click to unpack the TAR.) Inexplicably, the TIFFs aren’t compressed. [The patent on the LZW lossless compression algorithm (which is transparently supported by Photoshop and many other TIFF readers) expired about a decade ago.]\n\nAfter you’ve extracted the files, you’ll have a somewhat cryptically-named directory [i.e. “LC80450292013225LGN00” (download sample data) (184 MB ZIP archive)] with the three band files in it (B2, B3, B4):\n\nLC80450292013225LGN00_B1.TIF\n\nLC80450292013225LGN00_B2.TIF\n\nLC80450292013225LGN00_B3.TIF\n\nLC80450292013225LGN00_B4.TIF\n\nLC80450292013225LGN00_B5.TIF\n\nLC80450292013225LGN00_B6.TIF\n\nLC80450292013225LGN00_B7.TIF\n\nLC80450292013225LGN00_B8.TIF\n\nLC80450292013225LGN00_B9.TIF\n\nLC80450292013225LGN00_B10.TIF\n\nLC80450292013225LGN00_B11.TIF\n\nLC80450292013225LGN00_BQA.TIF\n\nLC80450292013225LGN00_MTL.txt\n\nI’ve highlighted the three bands needed for natural-color (also called true-color, or photo-like) imagery: B4 is red (0.64–0.67 µm), B3 is green (0.53–0.59 µm), B2 is blue (0.45–0.51 µm). (The complete scene data can be downloaded using Earth Explorer.)\n\nI prefer using the red, green, and blue bands because natural-color imagery takes advantage of what we already know about the natural world: trees are green, snow and clouds are white, water is (sorta) blue, etc. False-color images, which incorporate wavelengths of light invisible to humans, can reveal fascinating information—but they’re often misleading to people without formal training in remote sensing. The USGS also distributes imagery they call “natural color,” using shortwave infrared, near infrared, and green light. Although the USGS imagery superficially resembles an RGB picture, it is (in my opinion) inappropriate to call it natural-color. In particular, vegetation appears much greener than it actually is, and water is either black or a wholly unnatural electric blue.\n\nEven natural-color satellite imagery can be deceptive due to the unfamiliar perspective. Eduard Imhof, a Swiss cartographer active in the mid Twentieth Century, wrote*:\n\n(A)erial photographs from great heights, even in color, are often quite misleading, the Earth’s surface relief usually appearing too flat and the vegetation mosaic either full of contrasts and everchanging (sic) complexities, or else veiled in a gray-blue haze. Colors and color elements in vertical photographs taken from high altitudes vary by a greater or lesser extent from those that we perceive as natural from day to day visual experience at ground level.\n\nBecause of this, satellite imagery needs to be processed with care. I try to create imagery that matches what I see in my mind’s eye, as much or more than a literal depiction of the data. Our eyes and brains are inextricably linked, after all, and what we see (or think we see) is shaped by context.\n\nEnough theory. To build a natural-color image, open the three separate files in Photoshop:\n\nYou’ll end up with three grayscale images, which need to be combined to make a color image. From the Channels Palette (accessed through Photoshop’s Windows menu item) select the Merge Channels command (click on the small downward-pointing triangle in the upper-right corner of the palette).\n\nThen change the mode from Multichannel to RGB Color in the dialog box that appears. Set band B4 as red, B3 as green, and B2 as blue.\n\nThis will create a single RGB image, which will be dark. Very dark:\n\nThe raw Landsat 8 scene is so dark because it’s data, not merely an image: the numbers represent the precise amount of light reflected from the Earth’s surface (or a cloud) in each wavelength, a quantity called reflectance. To encode this information in an image format, the reflectance is scaled, and the range of values found in the data are smaller than the full range of values in a 16-bit image. As a result the images have low contrast, and only the brightest areas are visible (much of the Earth is also quite dark relative to snow or clouds—I’ll explain why that matters later).\n\nAs a result, the images need to be contrast enhanced (or stretched) with Photoshop’s levels and curves functions. I use adjustment layers, a feature in Photoshop that applies enhancements to a displayed image without modifying the underlying data. This allows a flexible, iterative approach to contrast stretching.\n\nThe first thing to do after creating the RGB composite (after saving the file, at least) is to add both a Levels adjustment layer, and a Curves adjustment layer. You add both adjustment layers from the Layer Menu (just hit OK to create the layer): Layer > New Adjustment Layer > Levels… and Layer > New Adjustment Layer > Curves…\n\nLevels and curves adjustments both allow manipulation of the brightness and contrast of an image, just in slightly different ways. I use both together for 16-bit imagery since the combination gives maximum flexibility. Levels provides the initial stretch, expanding the data to use the full range of values. Then I use curves to fine-tune the image, matching it to our nonlinear perception of light.\n\nThis screenshot shows Photoshop’s layers palette (on the left) and a levels adjustment layer (right). From top to bottom: the adjustment menu allows you to save and load presets; the channel menu allows you to select the individual red, green, and blue bands; the histogram shows the relative distribution of light and dark pixels (the higher the bar the more pixels share that specific brightness level); the white eyedropper sets the white point of the red, green, and blue channels to the values of a selected pixel (select a pixel by clicking on it); and the black point and white point sliders adjust the contrast of the image.\n\nMove the black point slider right to make the image darker, move the white point slider left to make the image lighter. (Important: any parts of the histogram that lie to the left of the black point slider or to the right of the white point slider will be solid black or solid white. Large areas of solid color don’t look natural, so make sure only a small number of pixels are 100% black or white). Combined black point and white point adjustments make the dark parts of an image darker, and the light parts lighter. The process is called a “contrast stretch” or “histogram stretch” (since it spreads out the histogram).\n\nWith a Landsat image, we want to do a contrast stretch to make the image brighter and reveal detail. The first step is to select the white eyedropper (the bottom of the three eyedropper icons on the left edge of the Levels Palette), and find an area of the brightest area of the image that we know is white: a puffy cloud, or even better, pristine snow. In general the brightest side of a cloud (or mountain, if you have snow) will be facing southeast in the Northern Hemisphere, east in the tropics, and northeast in the Southern Hemisphere. (This is simply because Landsat collects imagery at about 10:30 in the morning, and the Sun is still slightly to the east of the satellite.) If there are no clouds or snow, a salt pan or even a white rooftop would be a good alternative.\n\nSetting the white point does two things: the brightest handful of pixels in the image are now as light as possible, and the scene is partially white balanced. This means that the white clouds appear pure white, and not slightly tinted. Slight differences in the characteristics of the different color bands, combined with scattering of blue light by the atmosphere, can add an overall tint to the image. Ordinarily our brain does this for us (a white piece of paper looks white whether it’s lit by the sun at noon, a fluorescent light, or a candle), but satellite imagery needs to be adjusted. As do photographs: digital cameras have white balance settings, and film type effects the white balance in an analog camera.\n\nIt’s possible to automate white balancing (Photoshop has a handful of algorithms, accessed by option-clicking the auto button in the levels and curves adjustment layer windows) but I find hand-selecting an appropriate area to work best.\n\nAfter white balancing, the histograms of the red, green, and blue channels in the Mount Shasta image look like this:\n\nNotice that the value of white in each channel is slightly different (213, 202, and 201), and that there’s a small number of pixels above the white point in each channel. The combined RGB histogram makes it easier to see the differences between channels.\n\nThe histogram also shows that most of the image is still dark: there’s a sharp peak from about 10 to 20 percent brightness, with few values in the middle tones, and even fewer bright pixels. This is typical in a heavily forested region like the Cascades. The next step is to brighten the entire image (at least brighten it enough to make further adjustments).\n\nIn the curves adjustment layer, click near the center of the line that runs at a 45˚ angle from lower left to upper right. This will add an adjustment point with which to modify the curve. When it’s straight, no adjustments are made. When it’s above 45˚ the image will be brighter, and when it’s below it will be darker. Steeper parts of the line result in more contrast in those tones, while where the line is flatter it will compress the brightness range of the image. Dragging the curve to the left and down brightens the image overall, but dark areas are brightened more than lighter ones. This reveals details in the land surface, and makes clouds look properly white, instead of gray.\n\nTake a look at the combined histogram (open the Histogram Palette by selecting Window > Histogram from Photoshop’s menu bar): it’s easy to see that the darkest areas of the image aren’t black, and that the minimum red values are lower than the minimum green values, which are lower than the minimum blue values.\n\nThere’s no true black in a Landsat 8 image for three reasons. First, Landsat reflectance data are offset—a pixel with zero reflectance is represented by a slightly higher 16-bit integer (details: Using the USGS Landsat 8 Product). That is, if there were any pixels with zero reflectance. Very little (if any at all) of the Earth’s surface is truly black. Even if there was, light scattered from the atmosphere would likely lighten the pixel, giving it some brightness. (Landsat 8 reflectance data are “top of atmosphere”—the effects of the atmosphere are included. It’s possible, but very difficult in practice, to remove all the influence of the atmosphere.)\n\nShorter wavelengths (blue) are scattered more strongly than longer wavelengths (red), so the satellite images have an overall blue cast. This is especially apparent in shadowed regions, where the atmosphere (i.e. blue light from the sky) is lighting the surface, not the sun. We think of shadows as black, however, so I think it’s best to remove most of the influence of scattered light (a little bit of the atmospheric influence was already removed by choosing a white point) by adjusting the black points in each channel.\n\nYou can change the curves separately for each channel by selecting “Red”, “Green”, or “Blue” from a drop-down menu (initially labelled “RGB”) in the Curves adjustments palette. Starting with the red channel, drag the point at the lower-left towards the right, until it’s 2 or 3 pixels away from the base of the histogram. Repeat with green and blue, but leave a bit more space (an additional 1 or 2 pixels for green, and 3 or 4 for blue) between the black point and base of the histogram. This will prevent shadows from becoming pure black, with no visible details, and leave a slight blue cast, which appears natural.\n\nLike so:\n\nThe image is now reasonably well color balanced, and the clouds look good, but the surface is (again) dark. At this point it’s a matter of iteration. Tweak the RGB curve, maybe with an additional point or three, then adjust the black points as necessary. Look at the image, repeat. I find it helpful to walk away every once in a while to let my eyes relax, and reset my innate color balance: if you stare at one image for too long it will begin to look “right”, even with a pronounced color cast.\n\nI sometimes find it helpful to find photographs of a location to double-check my corrections, either with a generic image search or through a photography archive like flickr. It helps give me a sense of what the ground should look like, especially for places I’ve never been. Keep in mind, however, that things look different for above. In an arid, scrub-covered landscape, for example, a ground-level photograph will show what appears to be nearly continuous vegetation cover. From above, the spaces between individual bushes and trees are much more apparent.\n\nTry to end up with an RGB curve that forms a smooth arch: any abrupt changes in slope will cause discontinuities in the contrast of the image. Don’t be surprised if the curve is almost vertical near the black point, and almost flat near the white point. That stretches the values in the shadows and in dark regions, and compresses them in the highlights. This enhances details of the surface, and makes clouds look properly white. (If there’s too much contrast in clouds they’ll look gray.)\n\nNotice how each of the bands have two distinct peaks, and most of the histogram (select All Channels View to see separate red, green, and blue channels) is packed into the lower half of the range. The bimodal distribution is a result of the eastern Oregon landscape being split into two distinct types: the dark green forests of the Cascades, and the lighter, high-altitude desert in the mountain’s rain shadow. The skew towards dark values is a compromise. I sacrificed some detail in the forest and left the desert a little dark, to bring out features in the clouds. If I was focusing exclusively on a cloud-free region, the peaks in the histogram would be more widely distributed. Fortunately Landsat 8’s 12-bit data provides a lot of flexibility—adjustments can be quite aggressive before there’s noticeable banding in the image.\n\nThe full image has a challenging range of features: smoke, haze, water, irrigated fields (both crop-covered and fallow), clearcuts, snow, and barren lava flows, in addition to forest, desert, and clouds. The color adjustments are a compromise, my attempt to make the image as a whole look appealing.\n\nSome areas of the image (the Three Sisters) look good, even close up (half-resolution, in this case). But others are washed-out:\n\nI’d use a different set of corrections if I was focused on this area (and probably select a scene without smoke, which is visible in the center of this crop).\n\nThese techniques can also be applied to data from other satellites: older Landsats, high-resolution commercial satellites, Terra and Aqua, even aerial photography and false-color imagery. Each sensor is slightly (or more than slightly) different, so you’ll probably use different techniques for each one.\n\nTo practice, download a true color TIFF of this Landsat scene [(450 MB) right-click to download, you do not want to open it in your browser] with my levels and curves, or pick your own scene from the USGS Earth Explorer (use my guide if you need help ordering the data).\n\nIf you’re interested in different perspectives on creating Landsat images, Tom Patterson, a cartographer with the National Park Service, has an excellent tutorial. Charlie Loyd, of MapBox, has a pair of posts detailing Landsat 8’s bands, and a method for using open-source tools to make Landsat images.\n\n* Here’s the full Eduard Imhof quotation:\n\nComplete fidelity to natural color can not be achieved in a map. Indeed, how can it be when there is no real consistency in the natural landscape, which offers endless variations of color? For example, one could consider the colors seen while looking straight down from an aircraft flying at great altitude as the model for a naturalistic map image. But aerial photographs from great heights, even in color, are often quite misleading, the Earth’s surface relief usually appearing too flat and the vegetation mosaic either full of contrasts and everchanging complexities, or else veiled in a gray-blue haze. Colors and color elements in vertical photographs taken from high altitudes vary by a greater or lesser extent from those that we perceive as natural from day to day visual experience at ground level.\n\nThe faces of nature are extremely variable, whether viewed from an aircraft or from the ground. They change with the seasons and the time of day, with the weather, the direction of views, and with the distance from which they are observed, etc. If the completely “lifelike” map were produced it would contain a class of ephemeral—even momentary—phenomena; it would have to account for seasonal variation, the time of day and those things which are influenced by changing weather conditions. Maps of this type have been produced on occasion and include excursion maps for tourists, which seek to reproduce the impression of a winter landscape by white and blue terrain and shading tones. Such seasonal maps catch a limited period of time in their colors.\n\n—Eduard Imhof, Cartographic Relief Presentation, 1965 (English translation 1982)."
    }
}