{
    "id": "dbpedia_3947_1",
    "rank": 60,
    "data": {
        "url": "https://community.cloudera.com/t5/Support-Questions/How-to-read-an-email-using-Apache-Nifi-and-extract/m-p/181251",
        "read_more_link": "",
        "language": "en",
        "title": "Solved: How to read an email using Apache Nifi and extrac...",
        "top_image": "https://community.cloudera.com/t5/image/serverpage/image-id/19225i2C58339F91A4502B?v=v2",
        "meta_img": "https://community.cloudera.com/t5/image/serverpage/image-id/19225i2C58339F91A4502B?v=v2",
        "images": [
            "https://community.cloudera.com/html/@16E70050D2B8D3041ABA8F4C81267394/assets/my-cloudera-logo_2.png",
            "https://community.cloudera.com/t5/image/serverpage/image-id/27656i83042414DF31B0B6/image-dimensions/150x150/image-coordinates/9%2C0%2C257%2C248?v=v2",
            "https://community.cloudera.com/html/rank_icons/Rank-7-Expert-Contributor.svg",
            "https://community.cloudera.com/t5/image/serverpage/avatar-name/laptop/avatar-theme/chrome/avatar-collection/Technology/avatar-display-size/profile/version/2?xdesc=1.0",
            "https://community.cloudera.com/html/rank_icons/Rank-12-Master-Guru.svg",
            "https://community.cloudera.com/t5/image/serverpage/image-id/19225i2C58339F91A4502B/image-size/medium?v=v2&px=400",
            "https://community.cloudera.com/t5/image/serverpage/image-id/19226i480EDC2AEDCF8972/image-size/medium?v=v2&px=400",
            "https://community.cloudera.com/t5/image/serverpage/avatar-name/laptop/avatar-theme/chrome/avatar-collection/Technology/avatar-display-size/profile/version/2?xdesc=1.0",
            "https://community.cloudera.com/html/rank_icons/Rank-12-Master-Guru.svg",
            "https://community.cloudera.com/t5/image/serverpage/image-id/19225i2C58339F91A4502B/image-size/medium?v=v2&px=400",
            "https://community.cloudera.com/t5/image/serverpage/image-id/19226i480EDC2AEDCF8972/image-size/medium?v=v2&px=400",
            "https://community.cloudera.com/t5/image/serverpage/avatar-name/sportscar/avatar-theme/chrome/avatar-collection/Transit/avatar-display-size/profile/version/2?xdesc=1.0",
            "https://community.cloudera.com/html/rank_icons/Rank-3-New-Contributor.svg",
            "https://community.cloudera.com/t5/image/serverpage/image-id/27656i83042414DF31B0B6/image-dimensions/150x150/image-coordinates/9%2C0%2C257%2C248?v=v2",
            "https://community.cloudera.com/html/rank_icons/Rank-7-Expert-Contributor.svg",
            "https://community.cloudera.com/t5/image/serverpage/avatar-name/robogolem/avatar-theme/chrome/avatar-collection/Robots/avatar-display-size/profile/version/2?xdesc=1.0",
            "https://community.cloudera.com/html/rank_icons/Rank-3-New-Contributor.svg",
            "https://community.cloudera.com/t5/image/serverpage/image-id/27656i83042414DF31B0B6/image-dimensions/150x150/image-coordinates/9%2C0%2C257%2C248?v=v2",
            "https://community.cloudera.com/html/rank_icons/Rank-7-Expert-Contributor.svg",
            "https://community.cloudera.com/t5/image/serverpage/avatar-name/laptop/avatar-theme/chrome/avatar-collection/Technology/avatar-display-size/profile/version/2?xdesc=1.0",
            "https://community.cloudera.com/html/rank_icons/Rank-12-Master-Guru.svg",
            "https://community.cloudera.com/t5/image/serverpage/image-id/27656i83042414DF31B0B6/image-dimensions/150x150/image-coordinates/9%2C0%2C257%2C248?v=v2",
            "https://community.cloudera.com/html/rank_icons/Rank-7-Expert-Contributor.svg",
            "https://community.cloudera.com/t5/image/serverpage/avatar-name/toychance/avatar-theme/chrome/avatar-collection/Toys/avatar-display-size/profile/version/2?xdesc=1.0",
            "https://community.cloudera.com/html/rank_icons/Rank-3-New-Contributor.svg",
            "https://community.cloudera.com/skins/images/B2583439D42E816B5703336A014CCA6D/responsive_peak/images/icon_anonymous_message.png",
            "https://community.cloudera.com/t5/image/serverpage/image-id/41471i3780408DEFFB0FC4/image-size/large/is-moderation-mode/true?v=v2&px=999",
            "https://community.cloudera.com/t5/image/serverpage/image-id/37814iB521D26E327605A7/image-size/large/is-moderation-mode/true?v=v2&px=999"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "community.cloudera.com",
            "user-id"
        ],
        "publish_date": "2018-04-27T10:28:05+00:00",
        "summary": "",
        "meta_description": "Solved: Hi , I have a requirement where by I need to read a specific email in my inbox , extract the - 181251",
        "meta_lang": "en",
        "meta_favicon": "https://community.cloudera.com/html/@DFB26D5343C654D4358F3D86648AFA25/assets/favicon-196x196.png",
        "meta_site_name": "",
        "canonical_link": "https://community.cloudera.com/t5/Support-Questions/How-to-read-an-email-using-Apache-Nifi-and-extract/m-p/181251#M143477",
        "text": "@Abhinav Joshi\n\nTo filter out specific email use RouteonAttribute Processor.\n\nFlow:-\n\nConsume Imap/ConsumePop3 processors --> ExtractEmailHeader Processor --> RouteOnAttribute(filter required email) -->ExtractEmailAttachment(use attachments relation to feed) --> PutHDFS\n\nExample:-\n\nConsume Pop3 Processors:-\n\nConfigure username,password,change the required settings in gmail and add properties to the processor as\n\nmail.pop3.socketFactory.class\n\njavax.net.ssl.SSLSocketFactory\n\nmail.pop3.socketFactory.fallback\n\nfalse\n\nuse this link for more details about configurations.\n\nConsume Imap processor:-\n\nConfigure the processor as shown above\n\nuse this link for more details about configurations.\n\nExtract Email Headers:-\n\nChange the configs of the processor if you want to add additional headers.\n\nOnce the flowfile processed by this processor then below list of attributes will be added to the flowfile.\n\nNameDescriptionemail.headers.bcc.*Each individual BCC recipient (if available)email.headers.cc.*Each individual CC recipient (if available)email.headers.from.*Each individual mailbox contained in the From of the Email (array as per RFC-2822)email.headers.message-idThe value of the Message-ID header (if available)email.headers.received_dateThe Received-Date of the message (if available)email.headers.sent_dateDate the message was sentemail.headers.subjectSubject of the message (if available)email.headers.to.*Each individual TO recipient (if available)email.attachment_countNumber of attachments of the message\n\nRouteOnAttribute:-\n\nAdd new property\n\nRequired mail\n\n${anyMatchingAttribute(\"email.headers.from.*\"):contains(\"test\"):and(${email.attachment_count:gt(0)})}//if any of theattribute contains(i.e substring) test in it and email.attachment_count greater than 0\n\n(or)\n\n${anyMatchingAttribute(\"email.headers.from.*\"):equals(\"test <test@gmail.com>\"):and(${email.attachment_count:gt(0)})} //we are comparing from.* with equals in this case we are checking with exact email from value and attachement count is greater than 0\n\nwhat is anyMatchingAttribute(\"email.headers.from.*\")? Checks to see if any of the given attributes, match the given condition is email.headers.from.0, email.headers.from.1..etc\n\nAs per your requirement you can add condition to filter out the specific email.\n\nRefer this link for more details about NiFi expression language.\n\nExtractEmailAttachements:-\n\nUse this process to extract the email attachements and each attachement will be splitted into individual flowfiles.\n\nThen use put hdfs processor to store the attachement into HDFS directory.\n\nIn addition\n\nif you want to even filter out only the required filenames then use any of the below attributes in RouteOnAttribute processor.\n\nBelow are the list of attributes that are added by ExtractEmailAttachements processor\n\nNameDescriptionfilenameThe filename of the attachmentemail.attachment.parent.filenameThe filename of the parent FlowFileemail.attachment.parent.uuidThe UUID of the original FlowFile.mime.typeThe mime type of the attachment.\n\n@Shu_ashu @abhinav_joshi Could you please help me on what processor to be used for only extract limited items from flow file after Extract from header processor processed. My purpose is to get only limited items like from, to subject, attachment count and body (word cloud)\n\nCould you please provide the Flow file if possible ?\n\nI did not below steps. should i create new processor to fetch details from each flow file ?\n\nExtract Email Headers:-\n\nChange the configs of the processor if you want to add additional headers.\n\nOnce the flowfile processed by this processor then below list of attributes will be added to the flowfile.\n\nName Description\n\nemail.headers.bcc.*Each individual BCC recipient (if available)email.headers.cc.*Each individual CC recipient (if available)email.headers.from.*Each individual mailbox contained in the From of the Email (array as per RFC-2822)email.headers.message-idThe value of the Message-ID header (if available)email.headers.received_dateThe Received-Date of the message (if available)email.headers.sent_dateDate the message was sentemail.headers.subjectSubject of the message (if available)email.headers.to.*Each individual TO recipient (if available)email.attachment_countNumber of attachments of the message\n\nHi @Shu_ashu\n\nWe have an issue with our Consume Imap Processor. While this has been running good for the last 2 years , these days we see that we have an email that has an attachment that is of size 5 MB. The consume IMAP processor seems to take ages to read this file almost 3 hours . We have observed that if the attachment is less than 5 MB , the reading is quick however for 5 MB and greater it seems to get stuck.\n\nWe have increased the JVM memory as well. Added Java tuning parameters to the bootstrap conf file . However nothing is helping. Can you suggest an improvement tweak here please"
    }
}