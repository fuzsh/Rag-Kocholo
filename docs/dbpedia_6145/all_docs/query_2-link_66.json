{
    "id": "dbpedia_6145_2",
    "rank": 66,
    "data": {
        "url": "https://wix-users.narkive.com/kOEJk5ej/creating-patches",
        "read_more_link": "",
        "language": "en",
        "title": "users] Creating patches",
        "top_image": "https://narkive.net/favicon.ico",
        "meta_img": "https://narkive.net/favicon.ico",
        "images": [],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "",
        "meta_lang": "",
        "meta_favicon": "https://narkive.net/favicon.ico",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "I have now modified my build script to use a locally build msi installer and comparing it with a version build on my build server yesterday.\n\nThere is no practical difference between the two msi files except the version numbers.\n\nIs that why I keep getting errors?\n\nI get the following error from Torch:\n\nerror TRCH0279 : The table definition of 'WixVariable' in the target database does not match the table definition in the updated database. A transform requires that the target database schema match the updated database schema.\n\nAnd I get this from Pyro:\n\nUpdating file information.\n\nCreating cabinet files.\n\nThere will be '8' threads used to produce CAB files.\n\nMinorUpdate\\Patch.wxs(13) : warning PYRO1079 : The cabinet Patch.cab' does not contain any files. If this patch contains no files, this warning can likely be safely ignored. Otherwise, try passing -p to torch.exe when first building the transforms, or add a ComponentRef to your PatchFamily authoring to pull changed files into the cabinet.\n\nCreating cabinet 'AppData\\Local\\Temp\\q0qw3fj2\\#Patch.cab'.\n\nGenerating database.\n\npyro.exe : error PYRO0001 : Cannot set column 'Protocol' with value 1 because it is less than the minimum allowed value for this column, 6.\n\nException Type: System.InvalidOperationException\n\nStack Trace:\n\nat Microsoft.Tools.WindowsInstallerXml.ColumnDefinition.ValidateValue(Object value)\n\nat Microsoft.Tools.WindowsInstallerXml.Row.set_Item(Int32 field, Object value)\n\nat Microsoft.Tools.WindowsInstallerXml.Binder.BindTransform(Output transform, String transformFile)\n\nat Microsoft.Tools.WindowsInstallerXml.Binder.GenerateDatabase(Output output, String databaseFile, Boolean keepAddedColumns, Boolean useSubdirectory)\n\nat Microsoft.Tools.WindowsInstallerXml.Binder.BindDatabase(Output output, String databaseFile)\n\nat Microsoft.Tools.WindowsInstallerXml.Binder.Bind(Output output, String file)\n\nat Microsoft.Tools.WindowsInstallerXml.Tools.Pyro.Run(String[] args)\n\nAny help will be appreciated.\n\n/Thomas Due\n\n-----Original Message-----\n\nSent: 2. maj 2013 12:07\n\nTo: General discussion for Windows Installer XML toolset.\n\nSubject: Re: [WiX-users] Creating patches\n\nPost by Thomas Due\n\nHello,\n\nI am trying to grasp the concept of minor and small upgrades, but I am\n\nhaving some trouble with getting it to work.\n\nPost by Thomas Due\n\nFirst of all, it doesn't seem to work at all with 3.7.\n\nI have downgraded my WiX to 3.5, and there something happens at least,\n\nbut my msp seems to be empty when I examine it with instead\n\n(http://www.instedit.com/).\n\nPost by Thomas Due\n\nI have a fairly complex installer with a couple of hundred files total, divided\n\namong 4 features. I build this with TeamCity, and I have two separate\n\ninstallers (no real changes, except for the version nummer - 1.2.0.22679 and\n\n1.2.5.22754). I imagine that this should be enough to generate something.\n\nPost by Thomas Due\n\nI have a build script, a simple batch file, which executes the four steps\n\ndescribed in both the WiX doc and Nick Ramirez' book.\n\nPost by Thomas Due\n\nMy patch.wxs then includes a couple of file components, as I want these\n\nreplaces (mind you, I am still in the testing phase, trying to understand the\n\nconcept).\n\nPost by Thomas Due\n\n=======================================\n\n\"%wixdir%bin\\torch.exe\" -p -xi %oldmsi% %newmsi% -v -out diff.wixmst\n\n\"%wixdir%bin\\candle.exe\" -v Patch.wxs \"%wixdir%bin\\Light.exe\" -v\n\nPatch.wixobj -out patch.wixmsp \"%wixdir%bin\\pyro.exe\" -v \"patch.wixmsp\n\n-out patch.msp -t Patch diff.wixmst\n\n%oldmsi% and %newmsi\" are complete paths to the wixpdb files for\n\nrespectively old and new installer.\n\nPost by Thomas Due\n\n=======================================\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?> <Wix\n\nxmlns=\"http://schemas.microsoft.com/wix/2006/wi\" >\n\n<?include BuildVariables.wxi ?>\n\n<Patch AllowRemoval=\"yes\"\n\nClassification=\"Update\"\n\nManufacturer=\"$(var.Manufacturer)\"\n\nDescription=\"Patch\"\n\nDisplayName=\"Patch $(var.CurVersion)\">\n\n<Media Id=\"1000\" Cabinet=\"´Patch.cab\" EmbedCab=\"yes\">\n\n<PatchBaseline Id=\"Patch\" />\n\n</Media>\n\n<PatchFamily Id=\"ScanXNETPatchFamily\"\n\nVersion=\"$(var.CurVersion)\"\n\nSupersede=\"yes\">\n\n<ComponentRef Id=\"ComponentCommonExtensions\" />\n\n<ComponentRef Id=\"ComponentMainClient\"/>\n\n</PatchFamily>\n\n</Patch>\n\n</Wix>\n\nBuildVariables.wxi is simply a number of preprocessor variables, which is\n\nshared with the installer project.\n\nPost by Thomas Due\n\nUpdating file information.\n\nCreating cabinet files.\n\nThere will be '8' threads used to produce CAB files.\n\nPatch.wxs(20) : warning PYRO1079 : The cabinet 'ïPatch.cab' does not\n\ncontain any files. If this patch contains no files, this warning can likely be\n\nsafely ignored. Otherwise, try passing -p to torch.exe when first building the\n\ntransforms, or add a ComponentRef to your PatchFamily authoring to pull\n\nchanged files into the cabinet.\n\nPost by Thomas Due\n\nCreating cabinet '\\Local\\Temp\\kvov1bbk\\#ïPatch.cab'.\n\nGenerating database.\n\ndiff.wixmst : error PYRO0227 : The transform being built did not contain any\n\ndifferences so it could not be created.\n\nPost by Thomas Due\n\nWhich is probably an indication of what is actually wrong. With 3.5 I get an\n\nempty msp.\n\nPost by Thomas Due\n\nWhat am I doing wrong?\n\n----------------------------------------------------------------------\n\n-------- Introducing AppDynamics Lite, a free troubleshooting tool for\n\nJava/.NET Get 100% visibility into your production application - at no\n\ncost.\n\nCode-level diagnostics for performance bottlenecks with <2% overhead\n\nDownload for free and get started troubleshooting in minutes.\n\nhttp://p.sf.net/sfu/appdyn_d2d_ap1\n\n_______________________________________________\n\nWiX-users mailing list\n\nhttps://lists.sourceforge.net/lists/listinfo/wix-users\n\nSounds wixpdb files only contain infomation about where to find the files.\n\nFor example,\n\n1,You have a \".\\a.txt\" file,it's content is \"old version\".\n\n2,After you build the old version,\"old.wixpdb\" refer to \".\\a.txt\".\n\n3,You change the \".\\a.txt\"'s content to \"new version\".\n\n4,You build the new version,now \"new.wixpdb\" also refer to \".\\a.txt\".\n\n5,You use torch.exe to calculate the difference between the \"old.wixpdb\"\n\nand \"new.wixpdb\", they both refer to \".\\a.txt\" and the content is \"new\n\nversion\".\n\nMaybe you can put the old version files and new version files in different\n\ndirectory and try.\n\nThomas Due\n\nHello,\n\nI am still looking for an answer to this problem. I have two versions of my MSI installer, the only true difference is the version number.\n\nI have a patch.wxs script which identitifies a couple of components which are supposedly changed. In reality no file have been changed, except for their version number.\n\nWhen I execute the tools sequence described in Nick Ramirez' book and the WiX manual, nothing constructive happens.\n\nBoth Torch and Pyro gives me errors, shown below.\n\nI am pretty much clueless as to what I am doing wrong, mainly because neither the manual or the book properly explains WHAT I need to do, and WHY.\n\nMainly they just show me HOW.\n\nIs any able to help get past this issue?\n\n/Thomas Due\n\n-----Original Message-----\n\nSent: 3. maj 2013 09:40\n\nTo: General discussion for Windows Installer XML toolset.\n\nSubject: Re: [WiX-users] Creating patches\n\nI have now modified my build script to use a locally build msi installer and\n\ncomparing it with a version build on my build server yesterday.\n\nThere is no practical difference between the two msi files except the version numbers.\n\nIs that why I keep getting errors?\n\nerror TRCH0279 : The table definition of 'WixVariable' in the target database\n\ndoes not match the table definition in the updated database. A transform\n\nrequires that the target database schema match the updated database\n\nschema.\n\nUpdating file information.\n\nCreating cabinet files.\n\nThere will be '8' threads used to produce CAB files.\n\nMinorUpdate\\Patch.wxs(13) : warning PYRO1079 : The cabinet Patch.cab'\n\ndoes not contain any files. If this patch contains no files, this warning can\n\nlikely be safely ignored. Otherwise, try passing -p to torch.exe when first\n\nbuilding the transforms, or add a ComponentRef to your PatchFamily\n\nauthoring to pull changed files into the cabinet.\n\nCreating cabinet 'AppData\\Local\\Temp\\q0qw3fj2\\#Patch.cab'.\n\nGenerating database.\n\npyro.exe : error PYRO0001 : Cannot set column 'Protocol' with value 1\n\nbecause it is less than the minimum allowed value for this column, 6.\n\nException Type: System.InvalidOperationException\n\nat\n\nMicrosoft.Tools.WindowsInstallerXml.ColumnDefinition.ValidateValue(Objec\n\nt value)\n\nat Microsoft.Tools.WindowsInstallerXml.Row.set_Item(Int32 field, Object value)\n\nat Microsoft.Tools.WindowsInstallerXml.Binder.BindTransform(Output\n\ntransform, String transformFile)\n\nat Microsoft.Tools.WindowsInstallerXml.Binder.GenerateDatabase(Output\n\noutput, String databaseFile, Boolean keepAddedColumns, Boolean\n\nuseSubdirectory)\n\nat Microsoft.Tools.WindowsInstallerXml.Binder.BindDatabase(Output\n\noutput, String databaseFile)\n\nat Microsoft.Tools.WindowsInstallerXml.Binder.Bind(Output output, String file)\n\nat Microsoft.Tools.WindowsInstallerXml.Tools.Pyro.Run(String[] args)\n\nAny help will be appreciated.\n\n/Thomas Due\n\n-----Original Message-----\n\nSent: 2. maj 2013 12:07\n\nTo: General discussion for Windows Installer XML toolset.\n\nSubject: Re: [WiX-users] Creating patches\n\nPost by Thomas Due\n\nHello,\n\nI am trying to grasp the concept of minor and small upgrades, but I am\n\nhaving some trouble with getting it to work.\n\nPost by Thomas Due\n\nFirst of all, it doesn't seem to work at all with 3.7.\n\nI have downgraded my WiX to 3.5, and there something happens at least,\n\nbut my msp seems to be empty when I examine it with instead\n\n(http://www.instedit.com/).\n\nPost by Thomas Due\n\nI have a fairly complex installer with a couple of hundred files total, divided\n\namong 4 features. I build this with TeamCity, and I have two separate\n\ninstallers (no real changes, except for the version nummer -\n\n1.2.0.22679 and 1.2.5.22754). I imagine that this should be enough to\n\ngenerate something.\n\nPost by Thomas Due\n\nI have a build script, a simple batch file, which executes the four steps\n\ndescribed in both the WiX doc and Nick Ramirez' book.\n\nPost by Thomas Due\n\nMy patch.wxs then includes a couple of file components, as I want these\n\nreplaces (mind you, I am still in the testing phase, trying to\n\nunderstand the concept).\n\nPost by Thomas Due\n\n=======================================\n\n\"%wixdir%bin\\torch.exe\" -p -xi %oldmsi% %newmsi% -v -out diff.wixmst\n\n\"%wixdir%bin\\candle.exe\" -v Patch.wxs \"%wixdir%bin\\Light.exe\" -v\n\nPatch.wixobj -out patch.wixmsp \"%wixdir%bin\\pyro.exe\" -v\n\n\"patch.wixmsp -out patch.msp -t Patch diff.wixmst\n\n%oldmsi% and %newmsi\" are complete paths to the wixpdb files for\n\nrespectively old and new installer.\n\nPost by Thomas Due\n\n=======================================\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?> <Wix\n\nxmlns=\"http://schemas.microsoft.com/wix/2006/wi\" >\n\n<?include BuildVariables.wxi ?>\n\n<Patch AllowRemoval=\"yes\"\n\nClassification=\"Update\"\n\nManufacturer=\"$(var.Manufacturer)\"\n\nDescription=\"Patch\"\n\nDisplayName=\"Patch $(var.CurVersion)\">\n\n<Media Id=\"1000\" Cabinet=\"´Patch.cab\" EmbedCab=\"yes\">\n\n<PatchBaseline Id=\"Patch\" />\n\n</Media>\n\n<PatchFamily Id=\"ScanXNETPatchFamily\"\n\nVersion=\"$(var.CurVersion)\"\n\nSupersede=\"yes\">\n\n<ComponentRef Id=\"ComponentCommonExtensions\" />\n\n<ComponentRef Id=\"ComponentMainClient\"/>\n\n</PatchFamily>\n\n</Patch>\n\n</Wix>\n\nBuildVariables.wxi is simply a number of preprocessor variables, which is\n\nshared with the installer project.\n\nPost by Thomas Due\n\nUpdating file information.\n\nCreating cabinet files.\n\nThere will be '8' threads used to produce CAB files.\n\nPatch.wxs(20) : warning PYRO1079 : The cabinet 'ïPatch.cab' does not\n\ncontain any files. If this patch contains no files, this warning can\n\nlikely be safely ignored. Otherwise, try passing -p to torch.exe when\n\nfirst building the transforms, or add a ComponentRef to your\n\nPatchFamily authoring to pull changed files into the cabinet.\n\nPost by Thomas Due\n\nCreating cabinet '\\Local\\Temp\\kvov1bbk\\#ïPatch.cab'.\n\nGenerating database.\n\ndiff.wixmst : error PYRO0227 : The transform being built did not contain any\n\ndifferences so it could not be created.\n\nPost by Thomas Due\n\nWhich is probably an indication of what is actually wrong. With 3.5 I get an\n\nempty msp.\n\nPost by Thomas Due\n\nWhat am I doing wrong?\n\n--------------------------------------------------------------------\n\n--\n\n-------- Introducing AppDynamics Lite, a free troubleshooting tool\n\nfor Java/.NET Get 100% visibility into your production application -\n\nat no cost.\n\nCode-level diagnostics for performance bottlenecks with <2% overhead\n\nDownload for free and get started troubleshooting in minutes.\n\nhttp://p.sf.net/sfu/appdyn_d2d_ap1\n\n_______________________________________________\n\nWiX-users mailing list\n\nhttps://lists.sourceforge.net/lists/listinfo/wix-users\n\nSounds wixpdb files only contain infomation about where to find the files.\n\nFor example,\n\n1,You have a \".\\a.txt\" file,it's content is \"old version\".\n\n2,After you build the old version,\"old.wixpdb\" refer to \".\\a.txt\".\n\n3,You change the \".\\a.txt\"'s content to \"new version\".\n\n4,You build the new version,now \"new.wixpdb\" also refer to \".\\a.txt\".\n\n5,You use torch.exe to calculate the difference between the \"old.wixpdb\"\n\nand \"new.wixpdb\", they both refer to \".\\a.txt\" and the content is \"new\n\nversion\".\n\nMaybe you can put the old version files and new version files in\n\ndifferent directory and try."
    }
}