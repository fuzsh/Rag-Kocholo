{
    "id": "dbpedia_5486_1",
    "rank": 12,
    "data": {
        "url": "https://techdocs.broadcom.com/us/en/ca-mainframe-software/performance-and-storage/ca-1-tape-management-system/14-0/utilities-and-reports/tmsclean-utility-list-scratch-clean-and-scratch-inventory-volumes.html",
        "read_more_link": "",
        "language": "en",
        "title": "TMSCLEAN Utility -- List Scratch, Clean and Scratch Inventory Volumes",
        "top_image": "https://techdocs.broadcom.com/us/en/ca-mainframe-software/performance-and-storage/ca-1-tape-management-system/14-0/utilities-and-reports/favicon.ico",
        "meta_img": "https://techdocs.broadcom.com/us/en/ca-mainframe-software/performance-and-storage/ca-1-tape-management-system/14-0/utilities-and-reports/favicon.ico",
        "images": [],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "CA Inc"
        ],
        "publish_date": "2024-04-05T19:22:25.465000+00:00",
        "summary": "",
        "meta_description": "Use the TMSCLEAN multipurpose program to perform scratch functions based on parameters specified in the JCL.",
        "meta_lang": "en",
        "meta_favicon": "favicon.ico",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "Scratch and Clean Listing\n\nThe Scratch and Clean Listing reports on all volumes that were scratched during the execution of TMSCLEAN with the SCRATCHLIST parameter and without the TEST parameter. A volume is considered eligible for scratch if the expiration date for File 1 is less than or equal to the execution date and the OUTCODE field contains hexadecimal zeros or a blank in the first position (but\n\nnot\n\n(blank)LIB).\n\nAll multivolume pointers (1STVOL, NEXTVOL and PREVVOL) are cleared when volumes are scratched. Multi-data set pointers (1STDSNB, LSTDSNB and NUMDSNB) are cleared from the Volume record, and the DSNB records associated with the secondary files are cleared of information and returned to the\n\nfree chain\n\nof available DSNBs.\n\nExecution of various\n\nCA 1\n\nutilities might be required prior to TMSCLEAN, depending on the\n\nCA 1\n\nkeyword dates in use.\n\nTMSEXPDT can be executed to reset the expiration criteria for eligible data sets. This utility is necessary only if you are using a Retention Data Set (RDS). Normally, TMSEXPDT overrides expiration dates only for data sets that used the\n\nCA 1\n\ndefault (specified to the RP parameter in the TMOOPTxx member of\n\nhlq\n\n.CTAPOPTN). Optionally, JCL-supplied values can be overridden if the RO parameter in TMOOPTxx is set to YES or if the DEFAULT indicator was turned on when the TMC was initially formatted.\n\nTMSCTLG must be executed if you have data sets using Catalog Control on systems not yet running r5.2 or above. The program determines which Catalog Controlled data sets no longer have an entry in the MVS catalog and resets the expiration date to the current date plus any catalog extension (the number of days specified to the R9 parameter in the TMOOPTxx member of\n\nhlq\n\n.CTAPOPTN). Once all systems have been upgraded to r5.2 or higher and the TMSOSCAT utility has been run with the SYNC parameter, TMSCTLG no longer needs to be run.\n\nTMSCYCLE must be executed if you have data sets using Cycle Control. The program determines which data sets should be removed from Cycle Control, and resets the expiration date to the current date plus any cycle extension (the number of days specified to the RC parameter in the TMOOPTxx member of\n\nhlq\n\n.CTAPOPTN).\n\nTMSCLEAN can issue a return code four (RC=4). The possible causes are listed, refer to the report to diagnose the cause:\n\nSMS was unable to obtain MGMTCLAS definitions.\n\nSMS was unable to calculate the maximum retention period.\n\nTape volume was not scratched due to chaining errors.\n\nUncatalog or locate error occurred on a tape file.\n\nJob Control Statements\n\n//stepname EXEC PGM=TMSCLEAN,PARM='[TEST,]SCRATCHLIST[,F][,HOLDDAYS=n]' //STEPLIB DD DSN=CAI.CTAPLINK,DISP=SHR //TMSRPT DD SYSOUT=A //TMSOPTNS DD DSN=hlq.CTAPOPTN(TMSOPTNS),DISP=SHR //SYSUDUMP DD SYSOUT=A //ABNLIGNR DD DUMMY //EARLOUT DD DSN=scratch.list.earlout, *NOTES // DISP=(NEW,CATLG,DELETE), // UNIT=SYSDA, // VOL=SER=VOLSER, // SPACE=(CYL,5), // DCB=RECFM=FB,LRECL=376,BLKSIZE=15416) *NOTES //ERREPORT DD SYSOUT=* [//SCRACCT DD DSN=tape.acctng.info,UNIT=TAPE,DISP=(NEW,KEEP) ] [// [,DCB=BLKSIZE=n*340] *NOTES ] [//TMSRPT89 DD SYSOUT=A] [//SYSIN DD *] [VOL=ssssss-eeeeee] [EXCLUDE=ssssss-eeeeee] [SCRPOOL=xxxxx] [FILE1DSN=pattern]\n\nConsider the following:\n\nIf the EARLOUT data set is used with TMSUNCAT to uncatalog data sets on other systems, catalog and save the data set. Use the EARLOUT data set as input to TMECLNxx to produce the reports for TMSCLEAN. The sample JCL provided has a step to execute\n\nEarl\n\n.\n\nThe BLKSIZE can be any multiple of 376.\n\nThe BLKSIZE can be any multiple of the LRECL, which is 340. If no BLKSIZE is specified and the release of the operating system supports system determined blocksize, the operating system selects the blocksize. Otherwise the BLKSIZE for SCRACCT and OUTAREA defaults to 32640 for tape or 8840 for DASD devices.\n\nParameter Definitions\n\nThe parameters must be specified in this order. All parameters except SCRATCHLIST are optional.\n\nTEST\n\nProcess normally, but do not update any TMC records. The records processed are written to EARLOUT to subsequently produce the Scratch and Clean Listing, but the TMC is not updated.When the TEST parameter is used, the Scratch and Clean Listing does not include tapes expired from CATALOG, CATLG/ddd or LDATE/ddd control.\n\nSCRATCHLIST\n\nIndicates that tapes eligible for scratch are to be output to the EARLOUT data set, and subsequently used to produce the Scratch and Clean Listing.\n\nF\n\nThe FAST paremeter can be used if tapes are under CATALOG control and the OCTLG option is set to NO in TMOOPTnn in CTAPOPTN. This parameter causes TMSCLEAN to stop processing on a DSNB chain as soon as it finds a DSNB that is still cataloged to the OS catalog. Without this parameter, TMSCLEAN processing will continue through the entire DSNB chain checking the OS catalog for all of them and expiring them if not found. This parameter is not recommended if you use\n\nCA 1\n\nCopycat's FILECOPY with a control statement of FILES=ACTIVE. This will cause files to be copied that would have otherwise been expired.\n\nHOLDDAYS=n\n\nThe HOLDDAYS parameter can be used if tapes are under CATALOG control and the OCTLG option is set to NO in TMOOPTnn in CTAPOPTN. This parameter indicates the minimum protection time of tape data sets under catalog control which were never cataloged. TMSCLEAN keeps these data sets n days before checking their catalog status, to protect long-running tape jobs. Valid values for n are 2 through 9. The default is HOLDDAYS=2.\n\nJCL Considerations\n\nSCRACCT DD\n\nA TMC record image is written for every tape being scratched. You can use this information to determine the elapsed time of ownership for accounting and billing purposes (assuming\n\nCA 1\n\nhas been directed to capture accounting data). This DD statement is optional.\n\nSYSIN DD\n\nIf the SYSIN DD is found, the TMC is processed based on the volumes that are specified in the range control statements. If no control statements are coded, the complete TMC is processed. A maximum of 20,000 range control statements is allowed. If the SYSIN DD is not found, then TMSCLEAN processes the complete TMC.\n\nExample\n\n//SYSIN DD *¨ VOL=ssssss-eeeeee¨ EXCLUDE=ssssss-eeeeee¨ SCRPOOL=xxxxx¨\n\nTMSRPT89 DD\n\nIf the SYSIN DD is used, this DD must be coded. The range control statements are printed to this DD and any errors that found in the control statements are printed to this DD.\n\nERREPORT DD\n\nThis DD statement is an optional error report. If this DD statement is coded in a TMSCLEAN job, the errors printed to the TMSRPT and EARLOUT files will also be added to this report for easier review.\n\nRange Control Statements\n\nVOL=ssssss-eeeeee\n\nThe VOL statement is used to select the volumes to be processed based on a starting and ending volume number. You can specify a single volume by only coding a start volume.\n\nExample:\n\nThis control card processes volumes 001500-001524 and 001531-001550:\n\n//SYSIN DD * VOL=001500-001550 EXCLUDE=001525-001530 //\n\nStart and end volumes must be six digit numbers. If the volume number has five or fewer digits, it must be padded with 0 s, such as VOL=001500-001575.\n\nWhen using a Range Control statement in TMSCLEAN where the first volume (VOLSEQ=1) is NOT included or is excluded using the EXCLUDE control statement, not all volumes in the chain are included in the counts of the TMS REPORT-85.\n\nSCRPOOL=xxxxx\n\nThe SCRPOOL statement is used to select the volumes to be processed based on a scratch subpool name.\n\nFILE1DSN=pattern\n\nThe FILE1DSN statement is used to select the volumes based on the DSN of the first file on the volume, using standard\n\nCA 1\n\npattern masking. When the FILE1DSN statement is the only selection statement that is used, the complete TMC is processed and only volumes that match the specified pattern are processed. If FILE1DSN= statement is used with VOL and/or SCRPOOL statements, then only volumes within the requested ranges that match the pattern are processed.\n\nEXCLUDE=ssssss-eeeeee\n\nThe EXCLUDE statement selects the volumes you want to exclude from processing based on a starting and ending volume number. To specify a single volume, code only a start volume.\n\nStart and end volumes must be six digit numbers. If the volume number has five or fewer digits, it must be padded with 0s.\n\nEXCLUDE=001500-001575\n\nThe EXCLUDE control statement can be used without a VOL control statement.\n\nExample: The control statement excludes the volser range of 001500-001550 from being processed by TMSCLEAN.\n\nEXCLUDE=001500-001550\n\nIf the volumes included match the volumes excluded, the exclude control statement overrides the include control statement.\n\nScratch and Clean Relist\n\nThe SCRATCHRELIST parameter outputs Retention Records to the EARLOUT data set for all available scratch tapes. The EARLOUT data set can be used in a subsequent step to produce TMS Report 06 - Scratch and Clean Relist. All scratch tapes are listed regardless of when they became scratched.\n\nThe Scratch and Clean Relist, as provided in the TMECLN04 member, lists records by volume serial number and label type within each tape scratch pool. The type of media (CRTG for cartridge or REEL) is identified. Scratch tapes with a future expiration date (which is an abnormal condition) have an asterisk (*) in front of the volume serial number.\n\nCA 1\n\ndoes not allow these tapes to be used as scratch tapes.\n\nJob Control Statements\n\n//stepname EXEC PGM=TMSCLEAN,PARM='[TEST,][SCRATCHRELIST]' //STEPLIB DD DSN=CAI.CTAPLINK,DISP=SHR //TMSRPT DD SYSOUT=A //EARLOUT DD DSN=scratch.list.earlout, // DISP=(NEW,PASS,DELETE), // UNIT=SYSDA, // SPACE=(CYL,5), // DCB=(RECFM=FB,LRECL=376,BLKSIZE=15416) *NOTE [//TMSRPT89 DD SYSOUT=A] [//SYSIN DD *] [VOL=ssssss-eeeeee] [EXCLUDE=ssssss-eeeeee] [SCRPOOL=xxxxx] [FILE1DSN=pattern]\n\nThe BLKSIZE can be any multiple of 376.\n\nParameter Definitions\n\nSCRATCHRELIST\n\nIndicates that all available scratch tapes are to be output to the EARLOUT data set, and subsequently used to produce the Scratch and Clean Relist.\n\nJCL Considerations\n\nSYSIN DD\n\nIf the SYSIN DD is found, the TMC is processed based on the volumes specified in the range control statements. If no control statements are coded, the complete TMC is processed. A maximum of 20,000 range control statements is allowed. If the SYSIN DD is not found, then TMSCLEAN processes the complete TMC.\n\nTMSRPT89 DD\n\nIf the SYSIN DD is used, this DD must be coded. The range control statements are printed to this DD and any errors that found in the control statements are printed to this DD.\n\nRange Control Statements\n\nVOL=ssssss-eeeeee\n\nThe VOL statement is used to select the volumes to be processed based on a starting and ending volume number. A single volume may be specified by only coding a start volume.\n\nSCRPOOL=xxxxx\n\nThe SCRPOOL statement is used to select the volumes to be processed based on a scratch subpool name.\n\nFILE1DSN=pattern\n\nThe FILE1DSN statement is used to select volumes based on the DSN of the first file on the volume, using standard\n\nCA 1\n\npattern masking. When the FILE1DSN statement is the only selection statement used, the complete TMC will be processed and only volumes that match the specified pattern are processed. If FILE1DSN= statement is used with VOL and/or SCRPOOL statements, then only volumes within the requested ranges that match the pattern are processed.\n\nEXCLUDE=ssssss-eeeeee\n\nThe EXCLUDE statement selects the volumes you want to exclude from processing based on a starting and ending volume number. To specify a single volume, code only a start volume.\n\nStart and end volumes must be six digit numbers. If the volume number has five or fewer digits, it must be padded with 0s.\n\nEXCLUDE=001500-001575\n\nThe EXCLUDE control statement can be used without a VOL control statement.\n\nExample:\n\nThe control statement excludes the volser range of 001500-001550 from being processed by TMSCLEAN.\n\nEXCLUDE=001500-001550\n\nIf the volumes included match the volumes excluded, the exclude control statement overrides the include control statement.\n\nExtend Expiration Dates\n\nAnother parameter associated with TMSCLEAN is EXTEND. This option extends expiration dates, and outputs Retention Records to the EARLOUT data set to subsequently produce TMS Report 27 - Extend Expiration Dates. This parameter can also extend the last used date by the number of days specified in the EXTEND parameter for volumes using the keyword, LDATE. This is done by defining the criteria in the EXTEND parameter. The ddd value in the LDATE/ddd keyword is updated.\n\nEarl\n\nsample TMECLN03 can be used to print this report.\n\nJob Control Statements\n\n//stepname EXEC PGM=TMSCLEAN, // PARM='[TEST,]EXTEND[,LDATE],nn,xx,aaaaaa' //STEPLIB DD DSN=CAI.CTAPLINK,DISP=SHR //TMSRPT DD SYSOUT=A //EARLOUT DD DSN=extend.earlout, // DISP=(NEW,PASS,DELETE), // UNIT=SYSDA, // SPACE=(CYL,5), // DCB=(RECFM=FB,LRECL=376,BLKSIZE=15416) *NOTE [//TMSRPT89 DD SYSOUT=A] [//SYSIN DD *] [VOL=ssssss-eeeeee] [EXCLUDE=ssssss-eeeeee] [SCRPOOL=xxxxx] [FILE1DSN=pattern]\n\nThe BLKSIZE can be any multiple of 376.\n\nParameter Definitions\n\nTEST\n\nProcess normally, but do not update any TMC records. The records processed are written to EARLOUT to subsequently produce the Extend Expiration Dates report, but the TMC is not updated. This parameter is optional, and, if used, must be specified before EXTEND.\n\nEXTEND\n\nExtends the expiration dates on qualified TMC records.\n\nLDATE\n\nAllows LDATE/ddd expirations to be extended with all other qualified tapes.\n\nnn\n\nIs the number of days to extend the expiration date. If the tape has an expiration date less than the current date, it may still be eligible for scratch after adding the extension.\n\nxx\n\nIs the range of days from the current date within which the existing expiration date must fall to qualify for extension, that is, tapes expiring within xx days from the current date are to be extended nn days.\n\naaaaaa\n\nIs the index of a data set or fully qualified data set name of data sets to be extended. The specification ALL may be used to extend all data sets, but when used with FILE1DSN control statements, a parm of ALL must be used.\n\nJCL Considerations\n\nSYSIN DD\n\nIf the SYSIN DD is found, the TMC is processed based on the volumes specified in the range control statements. If no control statements are coded, the complete TMC is processed. A maximum of 20,000 range control statements is allowed. If the SYSIN DD is not found, then TMSCLEAN processes the complete TMC.\n\nTMSRPT89 DD\n\nIf the SYSIN DD is used, this DD must be coded. The range control statements are printed to this DD and any errors found in the control statements are printed to this DD.\n\nRange Control Statements\n\nVOL=ssssss-eeeeee\n\nThe VOL statement is used to select the volumes to be processed based on a starting and ending volume number. A single volume may be specified by only coding a start volume.\n\nSCRPOOL=xxxxx\n\nThe SCRPOOL statement is used to select the volumes to be processed based on a scratch subpool name.\n\nFILE1DSN=pattern\n\nThe FILE1DSN statement is used to select volumes based on the DSN of the first file on the volume, using standard\n\nCA 1\n\npattern masking. When the FILE1DSN statement is the only selection statement used, the complete TM will be processed and only volumes that match the specified pattern are processed. If FILE1DSN= statement is used with VOL and/or SCRPOOL statements, then only volumes within the requested ranges that match the pattern are processed.\n\nEXCLUDE=ssssss-eeeeee\n\nThe EXCLUDE statement selects the volumes you want to exclude from processing based on a starting and ending volume number. To specify a single volume, code only a start volume.\n\nStart and end volumes must be six digit numbers. If the volume number has five or fewer digits, it must be padded with 0s.\n\nEXCLUDE=001500-001575\n\nThe EXCLUDE control statement can be used without a VOL control statement.\n\nExample:\n\nThe control statement excludes the volser range of 001500-001550 from being processed by TMSCLEAN.\n\nEXCLUDE=001500-001550\n\nIf the volumes included match the volumes excluded, the exclude control statement overrides the include control statement.\n\nReset the Scratch Bit for Future Expiration Dates\n\ntop\n\nThe RESET option processes all tapes with the scratch bit on and a future expiration date. It turns the scratch bit off and resets future clean dates to the current date. This option should\n\nonly\n\nbe used if the SCRATCHLIST option was executed after the system was IPLed with a future date. However, TMC record cleanup has already occurred, and other\n\nCA 1\n\nutilities will have to be run to reestablish multivolume and multi-data set pointers and fields.\n\nThe RESET option will output Retention Records to the EARLOUT data set for subsequent report writer processing to produce TMS Report 42 - Scratch and Clean Reset. The volume serial number, volume sequence, data set name, expiration date, creation date and time, and other fields are listed on the report if the TMECLN02 member is used.\n\nJob Control Statements\n\n//stepname EXEC PGM=TMSCLEAN, // PARM='[TEST,]RESET' //STEPLIB DD DSN=CAI.CTAPLINK,DISP=SHR //TMSRPT DD SYSOUT=A //EARLOUT DD DSN=reset.earlout, // DISP=(NEW,PASS,DELETE), // UNIT=SYSDA, // SPACE=(CYL,5), // DCB=(RECFM=FB,LRECL=376,BLKSIZE=15416) *NOTE [//TMSRPT89 DD SYSOUT=A] [//SYSIN DD *] [VOL=ssssss-eeeeee] [EXCLUDE=ssssss-eeeeee] [SCRPOOL=xxxxx] [FILE1DSN=pattern]\n\nThe BLKSIZE may be any multiple of 376.\n\nParameter Definitions\n\nTEST\n\nProcess normally, but do not update any TMC records. The records processed are written to EARLOUT to subsequently produce the Scratch and Clean Reset report, but the TMC is not updated. This parameter is optional, and, if used, must be specified before RESET.\n\nRESET\n\nTurns off the scratch bit. (Records with the scratch bit on and a future expiration date).\n\nJCL Considerations\n\nSYSIN DD\n\nIf the SYSIN DD is found, the TMC is processed based on the volumes specified in the range control statements. If no control statements are coded, the complete TMC is processed. A maximum of 20,000 range control statements is allowed. If the SYSIN DD is not found, then TMSCLEAN processes the complete TMC.\n\nTMSRPT89 DD\n\nIf the SYSIN DD is used, this DD must be coded. The range control statements are printed to this DD and any errors that found in the control statements are printed to this DD."
    }
}