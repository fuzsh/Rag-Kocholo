{
    "id": "correct_subsidiary_00127_3",
    "rank": 86,
    "data": {
        "url": "https://forums.minecraftforge.net/topic/13390-entity-id-128-and-greater-causes-crash/",
        "read_more_link": "",
        "language": "en",
        "title": "Entity ID 128 (and greater) causes crash",
        "top_image": "",
        "meta_img": "",
        "images": [
            "https://forums.minecraftforge.net/uploads/monthly_2021_03/forge_logo.png.d1ecf3ff5345b3d06cb4e8ae78c4406e.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/emoticons/smile.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/emoticons/sad.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/emoticons/smile.png",
            "https://forums.minecraftforge.net/uploads/monthly_2019_05/A7BTrOJv_400x400.thumb.png.4d190db82dee6a85c5c62b15116e6908.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/monthly_2019_05/A7BTrOJv_400x400.thumb.png.4d190db82dee6a85c5c62b15116e6908.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/reactions/react_like.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/monthly_2019_05/A7BTrOJv_400x400.thumb.png.4d190db82dee6a85c5c62b15116e6908.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/monthly_2019_05/A7BTrOJv_400x400.thumb.png.4d190db82dee6a85c5c62b15116e6908.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/reactions/react_like.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/monthly_2019_05/A7BTrOJv_400x400.thumb.png.4d190db82dee6a85c5c62b15116e6908.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/monthly_2019_05/A7BTrOJv_400x400.thumb.png.4d190db82dee6a85c5c62b15116e6908.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_rank.png",
            "https://forums.minecraftforge.net/uploads/reactions/react_like.png",
            "https://forums.minecraftforge.net/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png",
            "https://forums.minecraftforge.net/uploads/monthly_2023_11/imp50x50.thumb.png.1be243537790c392dd4608a83288b9e3.png",
            "https://forums.minecraftforge.net/uploads/monthly_2023_12/robberymemeroblox.thumb.png.455bbf5070dcbc9bb7f3784b3209f749.png",
            "https://forums.minecraftforge.net/uploads/monthly_2023_12/robberymemeroblox.thumb.png.455bbf5070dcbc9bb7f3784b3209f749.png",
            "https://forums.minecraftforge.net/uploads/monthly_2023_12/robberymemeroblox.thumb.png.455bbf5070dcbc9bb7f3784b3209f749.png"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "TheyCallMeDanger"
        ],
        "publish_date": "2013-11-03T15:03:37+00:00",
        "summary": "",
        "meta_description": "Yes, I have a ridiculous number of entities. More than 50. I lost count. It's the OreSpawn mod. Tons and tons of critters... And yet, I'm trying to add a few more! PROBLEM: EntityID 128 does not work. It crashes. Everything below that is fine. Anything 128 and up, goes splat. From my log: 2013-11...",
        "meta_lang": "en",
        "meta_favicon": "",
        "meta_site_name": "Forge Forums",
        "canonical_link": "https://forums.minecraftforge.net/topic/13390-entity-id-128-and-greater-causes-crash/",
        "text": "Yes, I have a ridiculous number of entities. More than 50. I lost count.\n\nIt's the OreSpawn mod. Tons and tons of critters...\n\nAnd yet, I'm trying to add a few more!\n\nPROBLEM: EntityID 128 does not work. It crashes.\n\nEverything below that is fine. Anything 128 and up, goes splat.\n\nFrom my log:\n\n2013-11-03 09:36:40 [iNFO] [sTDOUT] Small Worm ID = 124\n\n2013-11-03 09:36:40 [iNFO] [sTDOUT] Cloud Shark ID = 128\n\nWorm and Cassowary(127) are fine.\n\nCloud Shark and Gold Fish(129) both crash.\n\nFrom the Minecraft log:\n\n---- Minecraft Crash Report ----\n\n// There are four lights!\n\nTime: 11/3/13 9:48 AM\n\nDescription: Unexpected error\n\njava.lang.NullPointerException\n\nat net.minecraft.client.multiplayer.NetClientHandler.handleMobSpawn(NetClientHandler.java:952)\n\nat net.minecraft.network.packet.Packet24MobSpawn.processPacket(Packet24MobSpawn.java:143)\n\nat net.minecraft.network.MemoryConnection.processReadPackets(MemoryConnection.java:89)\n\nat net.minecraft.client.Minecraft.runTick(Minecraft.java:1966)\n\nat net.minecraft.client.Minecraft.runGameLoop(Minecraft.java:909)\n\nat net.minecraft.client.Minecraft.run(Minecraft.java:837)\n\nat net.minecraft.client.main.Main.main(Main.java:93)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\nat java.lang.reflect.Method.invoke(Unknown Source)\n\nat net.minecraft.launchwrapper.Launch.launch(Launch.java:131)\n\nat net.minecraft.launchwrapper.Launch.main(Launch.java:27)\n\nFrom the Forge log:\n\n(nothing)\n\nIt crashes after trying to create the entity by ID, failing, returning NULL, and then accessing NULL.xposition.\n\nSeems to be a bug with the entity map, which appears to be 255 bits,\n\nbut is apparently only useful up to 127. Looks like a signed/unsigned byte problem.\n\nHere's a thought.... make it an INT like it should be, and bump the map up to 1024 in size.\n\nThat would be nice!\n\nIn the meantime, IS THERE A WORKAROUND???\n\nStill happens in Forge 942.\n\nHere is a bit more info...\n\nFrom NetClientHandler.java:\n\nSystem.out.printf(\"Spawning entity %d\\n\", par1Packet24MobSpawn.type );\n\nEntityLivingBase entitylivingbase = (EntityLivingBase)EntityList.createEntityByID(par1Packet24MobSpawn.type, this.mc.theWorld);\n\nentitylivingbase.serverPosX = par1Packet24MobSpawn.xPosition; (THIS IS WHERE THE NULL ptr CRASH occurs)\n\nproduces \"Spawning entity -128\"\n\n(the ID returned from findGlobalUniqueEntityId() was +128!!! How did it end up negative across the net???)\n\nAdding the line:\n\nif(par1Packet24MobSpawn.type < 0)par1Packet24MobSpawn.type = 256+par1Packet24MobSpawn.type;\n\nbetween the printf and the createEntityByID() works perfectly, but I don't know where else this\n\nproblem might occur, and what other functions may be affected. It also violates Forge code, so I can't\n\nuse this fix in the actual distributable mod...\n\nPLEASE fix...\n\nExcept that any number I pick over 127 is going to end up negative when sent over the network interface.\n\nfindGlobalUniqueEntityId() returns the correct value of 128.\n\npar1Packet24MobSpawn.type is wrong, at -128.\n\nSo, somewhere between when I get a correct positive 128, and send it accross the net,\n\nand the other side tries to spawn it, it becomes a negative 128.\n\nI have no way to bypass all that crap.\n\nIn other words, even if I picked arbitrary numbers myself,\n\nit would still fuck it up.\n\nIt's a bug.\n\nPlease fix...\n\nLol! Actually, I discovered that more than 30 years ago.\n\nSeems the folks at Minecraft still haven't...\n\nIt's actually a bug in their code, as they expect the compiler to do things in a different order\n\nthan it actually does them... The offending line, from Packet24MobSpawn.java:\n\nthis.type = par1DataInput.readByte() & 255;\n\nThe compiler reads the byte, ANDs it with 255, and THEN converts it to an integer.\n\nObviously they intended it the other way around.\n\nOn a side note, yes, I had filed a bug report with minecraft detailing the problem,\n\nand they did in fact blow it off. \"Resolved\" it as \"incomplete\".\n\nHow it could be incomplete I don't know... I even gave them the fixed code!\n\nSheesh...\n\nSo...\n\nIs there a way to globally override the Packet24MobSpawn class at runtime when\n\nForge loads my mod???\n\nOr perhaps MCP could patch it???\n\nOr you all could patch it??? PLEASE???\n\nI need standard spawning to work properly... Are there any other options???\n\nI desperately need space for moar mobs!\n\nY'all are almost as bad as Mojang... Yep. They refuse to fix their bugs too.\n\nI looked at EntityRegistry. It is NOT self explanatory.\n\nIt would appear, from testing and trial and error (because I could NOT find\n\nan example of the proper way to create/spawn mobs anywhere!!!!),\n\nthat this:\n\nGoldFishID = EntityRegistry.findGlobalUniqueEntityId();\n\nEntityRegistry.registerGlobalEntityID(GoldFish.class, \"GoldFish\", GoldFishID, 0xddffdd, 0x669955);\n\nEntityRegistry.registerModEntity(GoldFish.class, \"GoldFish\", GoldFishID, this, 64, 1, false);\n\nis at least one way that appears to function.\n\n(It doesn't crash, at least!)\n\nIS THIS CORRECT?\n\nIf not, please point me at an example or two or three or four... I could not find any!\n\nI would like to know for sure what the CORRECT way is,\n\nbecause I've got a shitload of code that I will have to update,\n\nand I really don't want to do that more than once.\n\nThanks!\n\n/** * Register the mod entity type with FML * @param entityClass The entity class * @param entityName A unique name for the entity * @param id A mod specific ID for the entity * @param mod The mod * @param trackingRange The range at which MC will send tracking updates * @param updateFrequency The frequency of tracking updates * @param sendsVelocityUpdates Whether to send velocity information packets as well */ public static void registerModEntity(Class<? extends Entity> entityClass, String entityName, int id, Object mod, int trackingRange, int updateFrequency, boolean sendsVelocityUpdates) { instance().doModEntityRegistration(entityClass, entityName, id, mod, trackingRange, updateFrequency, sendsVelocityUpdates); }\n\nHumm humm yes that is SOOOOOO FUCKING CONFUSING!!!!!\n\nNote what it says about the id:MOD SPECIFIC ID\n\nCuz you know.. id conflicts between mods are stupid and shouldnt happen. Hence Mod specific...\n\nEither way, don't be a fucking cunt. The id issue isnt OUR issue. It's a Minecraft issue that we have had resolved for ages.\n\nThe ONLY reason the global ID BS is there is for MODLOADER compatibility and it's going aweay in 1.7\n\nYa I dont know what the fuck you're doing wrong but entities do NOT need a global registration. As things are picked up for you already when you do the mod registration as long as you DONT fuck it up by doing the global registry.\n\nBut ya, banned cuz you're just being a cunt. The class is fairly fine if you read it. And as evidenced by the code snippit I pasted comments DO exist.\n\nAnyways have fun, be less of a cunt, enjoy modding!"
    }
}