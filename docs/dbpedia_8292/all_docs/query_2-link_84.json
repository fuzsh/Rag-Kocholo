{
    "id": "dbpedia_8292_2",
    "rank": 84,
    "data": {
        "url": "https://brezular.com/2016/09/26/clonezilla-server-edition-installation-on-ubuntu/",
        "read_more_link": "",
        "language": "en",
        "title": "Clonezilla Server Edition Installation on Ubuntu/Debian",
        "top_image": "https://i0.wp.com/brezular.com/wp-content/uploads/2021/06/cropped-icon-grey2.jpg?fit=32%2C32&ssl=1",
        "meta_img": "https://i0.wp.com/brezular.com/wp-content/uploads/2021/06/cropped-icon-grey2.jpg?fit=32%2C32&ssl=1",
        "images": [
            "https://brezular.com/wp-content/themes/adore-news/assets/style-5.gif",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/clonezilla-logo.jpg?resize=280%2C308&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture1_Network_Installation_Boot_Images.png?resize=618%2C159&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture2_Serial_Console_Output.png?resize=618%2C91&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture3_Upgrade_OS.png?resize=618%2C75&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture4-Kernel_image.png?resize=567%2C157&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture5_DNS_Domain.png?resize=637%2C171&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture6_NISP._YP_Domain.png?resize=625%2C55&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture7_Client_Hostname.png?resize=625%2C104&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture8-Ethernet_Ports.png?resize=640%2C207&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture9_Collecting_MAC_Adresses.png?resize=625%2C238&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture10-Same_IP_for_Clients.png?resize=640%2C114&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture11-DHCP_Server.png?resize=640%2C485&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture12_Diskless_Linux_Services.png?resize=626%2C225&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture13_Full_Conezilla_Mode.png?resize=625%2C172&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture14_Directory_For_Saving_Images.png?resize=625%2C159&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture15_PXE_Password.png?resize=625%2C85&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture16_Graphical_Boot.png?resize=625%2C81&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture17_No_NAT-Service_For_Clients.png?resize=625%2C78&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture18_Firewall_Rules.png?resize=627%2C111&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture19_Selecting_Clients.png?resize=622%2C181&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture20_Clonezilla_Start.png?resize=468%2C216&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture21_Beginner_Mode.png?resize=622%2C141&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture22_Select_In_Clients.png?resize=621%2C192&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture23_Default_Clonezilla.png?resize=517%2C153&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture24_Power_Off_Clients.png?resize=533%2C153&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture25_DHCP_Service_Running.png?resize=617%2C40&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture26_DHCP_Service_Not_Active-1.png?resize=640%2C67&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture27_DHCP_Service_Enabled_But_Not_Active.png?resize=640%2C62&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture28_DHCP_Service_Enabled_And_Active.png?resize=640%2C102&ssl=1",
            "https://i0.wp.com/brezular.com/wp-content/uploads/2016/09/Picture29_Obtaining_IP_from_DHCP.png?resize=640%2C228&ssl=1",
            "https://secure.gravatar.com/avatar/f58924d00694e819ebfba6925eba11c3?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/cb91985edcd9b73172d929851bf7495c?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/cb91985edcd9b73172d929851bf7495c?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/8650c9e0cbf27985dd7b16a543780ddb?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/a7327c539e0dcd99dc4393f684d0180b?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/a7327c539e0dcd99dc4393f684d0180b?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/a7327c539e0dcd99dc4393f684d0180b?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/7237e53b65719f61658406c59aa7fe40?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/a7327c539e0dcd99dc4393f684d0180b?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/a7327c539e0dcd99dc4393f684d0180b?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/a7327c539e0dcd99dc4393f684d0180b?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/69f341fc71eb51a8e255cd70c5194f1c?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/eec62da6ef90bc3d423810a317f6f4e9?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/ed728d40558a18284e82520e61913321?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/ed728d40558a18284e82520e61913321?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/9a6ea7d70bc792dea344753e7964b461?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/8d907849366fc49545e550952545098b?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/6271700092c06daacf74c0bbf567a690?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/6271700092c06daacf74c0bbf567a690?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/6271700092c06daacf74c0bbf567a690?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/1a3eb56a953e52ab47b6173d3adc5d0e?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/6271700092c06daacf74c0bbf567a690?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/7237e53b65719f61658406c59aa7fe40?s=32&d=mm&r=g",
            "https://secure.gravatar.com/avatar/7237e53b65719f61658406c59aa7fe40?s=32&d=mm&r=g",
            "https://i0.wp.com/www.noction.com/wp-content/uploads/2014/05/LOGO_small.png?w=160&ssl=1",
            "https://i0.wp.com/www.noction.com/wp-content/uploads/2014/05/LOGO_small.png?w=160&ssl=1",
            "https://i0.wp.com/www.noction.com/wp-content/uploads/2015/06/gears-150x150.png?w=65&ssl=1",
            "https://i0.wp.com/www.noction.com/wp-content/uploads/2015/06/gears-150x150.png?w=65&ssl=1",
            "https://i0.wp.com/www.noction.com/wp-content/uploads/2018/11/NetFlow-300x216.png?w=105&ssl=1",
            "https://i0.wp.com/www.noction.com/wp-content/uploads/2018/11/NetFlow-300x216.png?w=105&ssl=1",
            "https://i0.wp.com/www.noction.com/wp-content/uploads/2015/04/BGPsec-protocol.png?w=105&ssl=1",
            "https://i0.wp.com/www.noction.com/wp-content/uploads/2015/04/BGPsec-protocol.png?w=105&ssl=1"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "Radovan Brezula"
        ],
        "publish_date": "2016-09-26T00:00:00",
        "summary": "",
        "meta_description": "The tutorial describes installation steps for Clonezilla Server Edition (SE) on Ubuntu/Debian using a Bash script. Clonezilla is OpenSource Cloning System (OCS) and it is a partition and disk imaging/cloning program. It helps you to do system deployment, bare metal backup and recovery. Two types of Clonezilla are available, Clonezilla live and Clonezilla SE (server",
        "meta_lang": "en",
        "meta_favicon": "https://i0.wp.com/brezular.com/wp-content/uploads/2021/06/cropped-icon-grey2.jpg?fit=32%2C32&ssl=1",
        "meta_site_name": "Brezular's Blog - Networking & Virtualization & Linux",
        "canonical_link": "https://brezular.com/2016/09/26/clonezilla-server-edition-installation-on-ubuntu/",
        "text": "The tutorial describes installation steps for Clonezilla Server Edition (SE) on Ubuntu/Debian using a Bash script. Clonezilla is OpenSource Cloning System (OCS) and it is a partition and disk imaging/cloning program. It helps you to do system deployment, bare metal backup and recovery. Two types of Clonezilla are available, Clonezilla live and Clonezilla SE (server edition).\n\nClonezilla live is suitable for single machine backup and restore. Clonezilla SE is for massive deployment because it can clone many computers simultaneously. Clonezilla saves and restores only used blocks in the hard disk. It decreases time and saves the hard disk space and increases the clone efficiency.\n\nClonezilla is a part of DRBL (Diskless Remote Boot in Linux) which provides a diskless environment for client machines. Therefore, DRBL server should be to installed and configured prior to Clonezilla.\n\nI have created DRBL deployment script deploy_drbl.sh that helps you to install DRBL and configure server on Ubuntu/Debian occupied with two network interfces. The first NIC connects Clonezilla server to the Internet while the second is used to deploy images to clients. The script downloads and imports DRBL project public key and installs drbl package from repository. Afterwards, the script will run interactive Bash and Perl scripts that come with drbl package in this order:\n\ndrblsrv - prepares files for PXE client and generates PXE menu\n\ndrblpush - configures DNS, clients' hostname, Ethernet card, collects MAC addresses of clients, configures and starts DHCP server, diskless services and Clonezilla mode, PXE password, grephical/text boot menu, NAT services for clients and firewall rules\n\ndcs - DRBL utility to switch the mode for clients\n\nDeploying DRBL Server\n\n1. Starting Installation Script\n\nThe script deploy_drbl.sh must be started with root privileges. Once you login to root account with sudo su command, assign execute privileges to the script.\n\n$ wget https://brezular.com/wp-content/uploads/2016/10/deploy_drbl.sh_.txt\n\n$ sudo su\n\n# chmod +x ./deploy_drbl.sh_.txt\n\n# ./deploy_drbl.sh\n\nNote: The script deploy_drbl.sh requires working connection to the Internet in order to install DRBL server. Your job is to configure correct IP addresses for the both NICs. You also need to configure a default route and add DNS server.\n\n2. DRBL Server Installation\n\nThe scripts deploy_drbl.sh automatically starts drblsrv with a parameter -i. The script drbl is responsible for installation of DRBL server. Installation is interactive so you must provide answers for questions - either y or n. If the letter is capital, it is a default choice and you can press Enter or type particular letter to select this choice.\n\n2.1 Installation of Network Images\n\nPicture 1 - Installation of Boot Images via Network\n\nWe do not need any boot images so type N.\n\n2.2 Serial Console Output\n\nPicture 2 - Serial Console Output on Client Computer\n\nWe do not want to use the serial console output on the client computers so type N.\n\n2.3 Operating System Upgrade\n\nPicture 3 - Operating System Upgrade\n\nWe do not want to upgrade our OS thus type N.\n\n2.4 Selection of Kernel Image\n\nPicture 4 - Selecting Kernel Image for Clients\n\nSelect the option 2 - Generic kernel image from APT repo.\n\n3. Configure Clonezilla\n\nThe scripts deploy_drbl.sh automatically starts a script drblpush with a parameter -i (interactive mode).\n\n3.1 DNS Domain\n\nPicture 5 - DNS Domain\n\nPress Enter key to configure default DNS domain.\n\n3.2 NISP/YP Domain\n\nPicture 6 - NISP/YP Domain\n\nAgain, press Enter key to configure default penguinzilla domain name.\n\n3.3 Client Hostname Prefix\n\nPicture 7 - Client Hostname\n\nWe want our client to keep default hostname prefix so press Enter.\n\n3.4 Ethernet Ports\n\nPicture 8 - Ethernet Port\n\nThey are two detected network interfaces. The interface enp0s3 is used to connect Clonezilla server to the Internet. We will use the interface enp0s8 for DRBL connection. Press Enter to choose the default option enp0s3.\n\n3.5 Collecting MAC Addresses of Clients\n\nPicture 9 - Collecting MAC Addresses of Clients\n\nWe do not want to assign the same IP addresses to the clients from DHCP server thus we do not need to collect MAC addresses of the clients. Type N or just press Enter.\n\n3.6 Same IP address for Clients\n\nPicture 10 - Same IP address for Clients\n\nPress Enter to reject the offer to configure the same IP addresses for clients.\n\n3.7 DHCP Server\n\nPicture 11 - DHCP Server\n\nNow we configure a DHCP server running on the interface enp0s8 and providing IP addresses for clients. Enter an initial IP address from the range and the number of clients in your network. Then just confirm the DHCP range with Enter key or type Y.\n\n3.8 Diskless Linux Services\n\nPicture 12 - Diskless Linux Service\n\nWe do not need to provide diskless Linux service to clients so type option 2.\n\n3.9 Clonezilla Modes\n\nPicture 13 - Clonezilla Modes\n\nType 0 to configure full Clonezilla mode.\n\n3.10 Directory for Storing Images\n\nPicture 14 - Directory for Saving Saved Images\n\nPress Enter to configure a default directory /home/partimg/ for storing saved images.\n\n3.11 PXE Linux Password for Clients\n\nPicture 15 - PXE Linux Password for Clients\n\nType y if you want to configure a password for clients. The chosen password can be changed or disabled anytime by drbl-pxelinux-passwd utility.\n\n3.12 Graphical Background for PXE Menu\n\nPicture 16 - Graphical Background for PXE Menu\n\nType y if you want to boot your clients with graphical PXE Linux menu.\n\n3.13 NAT Services for Clients\n\nPicture 17 - NAT Services for Clients\n\nWe do not need to provide Internet to clients so type n.\n\n3.14 Firewall Rules\n\nPicture 18 - Changing Firewall Rules\n\nPress Enter or type y to let DRBL server to change firewall rules.\n\n4. Start Clonezilla Server\n\nThe scripts deploy_drbl.sh automatically starts a script dcs which starts Clonezilla.\n\n4.1 Client Selection\n\nPicture 19 - Selecting Clients\n\nWe can either select all clients or an individual client based on its IP or MAC address. Select the first option - All .\n\n4.2 Start Clonezilla Mode\n\nPicture 20 - Starting Clonezilla Mode\n\nSelect an option clonezilla-start to start clonezilla mode.\n\n4.3 Beginner Mode\n\nPicture 21 - Beginner Mode\n\nSelect an option Beginner which accepts the default options.\n\n4.4 Select-in-Client Clonezilla Mode\n\nPicture 22 - Select-in-Client Clonezilla Mode\n\nSelect an option select-in-client. This option allows you to select either to restore or save the image on client.\n\n4.5 Clonezilla Advanced Extra Parameters\n\nPicture 23 - Clonezilla Advanced Extra Parameters\n\nSelect an option -y1 default Clonezilla.\n\n4.6 Shutdown Clients\n\nPicture 24 - Shutdown Clients When Cloning is Finished\n\nSelect an option -p poweroff. Clients automatically power off once cloning is finished. When dcs script finishes, you can see the following command in your terminal window.\n\ndrbl-ocs -b -l en_US.UTF-8 -y1 -p poweroff select_in_client\n\n-b - run program in batch mode, i.e without any prompt\n\n-l - language en-US.UTF-8\n\n-y1 - clonezilla server as restore server\n\n-p - shutdown client when cloning/restoring finishes\n\nselect_in_client - client chooses either to clone or restore\n\nYou can put the command inside the script /etc/init/clone.conf to start Clonezilla automatically after boot. To clone clients using multicast in order to speed up cloning process, use the following command.\n\ndrbl-ocs -b -g auto -e1 auto -e2 -x -r -j2 -sc0 -p poweroff --time-to-wait 30 -l en_US.UTF-8 startdisk multicast_restore core_linux sda\n\nAll options are explained here.\n\n5. Troubleshooting\n\nHere are the problems I noticed during writing the tutorial.\n\n5.1 Client Does Not Get IP Address\n\nCheck if DHCP service is running with the command:\n\n$ ps -ef | grep dhcpd | grep -v grep\n\nPicture 25 - Checking DHCP Service\n\nIf you cannot see the output above, DHCP service is not running. Check the service status with the command:\n\n$ systemctl status isc-dhcp-server\n\nPicture 26 - DHCP Service Disabled and Not Active\n\nWe can see that DHCP service is disabled and not active. We can enable it with the command:\n\n$ systemctl enable isc-dhcp-server\n\nPicture 27 - DHCP Service Enabled But Not Active\n\nDHCP service is enabled but not active. Activate the service with the command:\n\n$ systemctl start isc-dhcp-server\n\nPicture 28 - DHCP Service Enabled and Active\n\nYou can check DHCP messages in /var/log/syslog file.\n\nPicture 29 - Obtaining IP Address for Client\n\nObtaining IP address 192.168.112.1 for client with a MAC address 09:00:27:93:43:bb via the interface enp0s3.\n\nEnd."
    }
}