{
    "id": "dbpedia_8292_0",
    "rank": 91,
    "data": {
        "url": "https://forums.ni.com/t5/NI-Linux-Real-Time-Discussions/How-to-implement-a-full-system-self-backup-for-embedded-or-field/td-p/3470749",
        "read_more_link": "",
        "language": "en",
        "title": "How to implement a full system self-backup for embedded or field-deployed RIO",
        "top_image": "https://www.ni.com/favicon.ico?v=1",
        "meta_img": "https://www.ni.com/favicon.ico?v=1",
        "images": [
            "https://ni.scene7.com/is/image/ni/02_patrick_robinson_0043_255x95",
            "https://ni.scene7.com/is/image/ni/AdobeStock_538838391_249x112",
            "https://ni.scene7.com/is/image/ni/LabVIEW?$ni-icon-pm$",
            "https://ni.scene7.com/is/image/ni/Multisim_BG?$ni-icon-pm$",
            "https://ni.scene7.com/is/image/ni/sw_suites_bundles?$ni-icon-pm$",
            "https://forums.ni.com/t5/image/serverpage/image-id/167928i5DC17300B364EA78/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/proven_member.gif",
            "https://forums.ni.com/t5/image/serverpage/image-id/247304iF848B2D1418E3C1A/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/312.gif",
            "https://forums.ni.com/t5/image/serverpage/image-id/167928i5DC17300B364EA78/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/proven_member.gif",
            "http://forums.ni.com/legacyfs/online/emoticons/wink.png",
            "https://forums.ni.com/t5/image/serverpage/image-id/247304iF848B2D1418E3C1A/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/312.gif",
            "http://forums.ni.com/legacyfs/online/emoticons/laugh.png",
            "https://forums.ni.com/t5/image/serverpage/image-id/89818iB09B0502DE40313F/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/employee/proven_active_regular.gif",
            "https://forums.ni.com/t5/image/serverpage/image-id/167928i5DC17300B364EA78/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/proven_member.gif",
            "https://forums.ni.com/t5/image/serverpage/image-id/167928i5DC17300B364EA78/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/proven_member.gif",
            "https://forums.ni.com/t5/image/serverpage/image-id/89818iB09B0502DE40313F/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/employee/proven_active_regular.gif",
            "https://forums.ni.com/t5/image/serverpage/image-id/89818iB09B0502DE40313F/image-dimensions/40x40/constrain-image/false?v=v2",
            "https://forums.ni.com/ni/i/rank_icons/employee/proven_active_regular.gif",
            "https://forums.ni.com/skins/images/1C3E73D889E0177BC9BBEC936A14BE41/responsive_peak/images/powered_by_khoros.svg",
            "https://www.ni.com/content/dam/web/scene7/images/logo_2020_white.svg",
            "https://www.ni.com/content/dam/web/scene7/images/logo_2020_white.svg",
            "https://ni.scene7.com/is/image/ni/emerson_footer_white?fmt=png-alpha"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "forums.ni.com",
            "user-id"
        ],
        "publish_date": "2016-08-10T17:44:36.153000+00:00",
        "summary": "",
        "meta_description": "Well, the time has finally come. The product I'm working on that OEMs a cRIO needs to be deployed to customers' sites, and that means several things:",
        "meta_lang": "en",
        "meta_favicon": "https://www.ni.com/apple-touch-icon.png",
        "meta_site_name": "",
        "canonical_link": "https://forums.ni.com/t5/NI-Linux-Real-Time-Discussions/How-to-implement-a-full-system-self-backup-for-embedded-or-field/td-p/3470749",
        "text": "Well, the time has finally come. The product I'm working on that OEMs a cRIO needs to be deployed to customers' sites, and that means several things:\n\nThe end user will no longer have access to a SW dev for questions or help.\n\nThe IT environment the cRIO is in will not be controlled by anyone working with the SW devs.\n\nThe cRIO will not be within arm's reach of anyone with a copy of MAX (because that would give them a few godlike powers they shouldn't have).\n\nMost ports on the cRIO will be firewalled to make it safe for use in DMZs or non-NATted networks. Also to protect it against curious IT personnel and blackhat hobbyists.\n\nWe need a way to make the cRIO back itself up daily so it can be restored by a product support technician. I'm familiar iwth NI Sysconfig and many of its limitations and quirks. It gets the job done well when your network connection is stable with a low ping, if you're using it from a remote device (like a workstation or laptop). But it won't allow me to have the cRIO create a system image of itself without restarting into Safe Mode, and that can't be allowed because this is a safety/control application with 24/7 uptime.\n\nI've tried using a shell script to tarball nonvolatile files and then untar them during restoration, but the restored system doesn't work until I use MAX to reinstall \"NI Software\".\n\nSo how do I get a cRIO to create a system image of itself (1) without going offline (2) in such a way that it can be restored automatically by an authorized user?\n\nI'm sure you do, seeing as how I still run across your name in our source repository.\n\nNo, I haven't tried any of them yet. We're in the early stages of moving to linux-based RIOs and still figuring out the systems, tools, procedures, and coding practices that allow us to support both VxWorks and NI-Linux based units in the field. As our devices are designed to be 30-year assets with 24/7 uptime, this is no small task.\n\nIn any case, creating daily backups on the target and making them available for field techs to restore doesn't fit our business model. It's too expensive to send someone to the site. I suppose if I ever get SaltStack working we might look into automatically creating local images and restoring them via remote commands as a recovery option.\n\nOne thing I've considered (but have no idea how to do) is creating a recovery partition on the sbRIO with a custom bootstrap image. The idea is if there is a catastrophic failure on the main partition, some lower-level daemon takes over, reimages the main partition with the bootstrap image, and reboots. Then we can go through our normal process of downloading and installing the necessary components to get the system back up and running. But like I said, I have no idea how to do that or if it's even possible on the linux RIOs. (I'm pretty sure it can't be done on the VxWorks RIOs.)\n\nI was wondering if I could get a more complete picture of what systems you wish to archive and restore, since attempting to backup a running application in a manner that allows for live restoration is a very tricky task, especially if the services that are part of the 24/7 uptime requirement are part of this backup/restore. This is not just a tricky task for LabVIEW, but for all applications (and is most often achieved through system duplication and transparent failover, \"system\" usually being a virtual machine or container in the networking world).\n\nBradM wrote:\n\nI was wondering if I could get a more complete picture of what systems you wish to archive and restore\n\nI can't share specific details on a public forum because, you know, IP protection and NDA and all that stuff. But I'll say this: I need to back up all applications, daemons, kernel modules, etc. in such a way that I can overwrite what's on disk with the backup files in order to get the product working again. If that involves formatting the primary disk prior to restoration, so be it. I don't need to back up state data that'll be recreated when the system starts running again. I do need to back up app and config files for currently-running processes.\n\nI don't need live restoration. That is, as you've said, an incredibly difficult feat. We intend to take a system down when it misbehaves and while offline, restore it from a backup and validate the restoration using a technician's software tool and laptop. Then we'll put it back online."
    }
}