{
    "id": "dbpedia_3790_3",
    "rank": 59,
    "data": {
        "url": "https://learn.microsoft.com/en-us/azure/network-watcher/traffic-analytics",
        "read_more_link": "",
        "language": "en",
        "title": "Traffic analytics - Azure Network Watcher",
        "top_image": "https://learn.microsoft.com/en-us/media/open-graph-image.png",
        "meta_img": "https://learn.microsoft.com/en-us/media/open-graph-image.png",
        "images": [
            "https://learn.microsoft.com/en-us/azure/network-watcher/media/traffic-analytics/data-flow-for-nsg-flow-log-processing.png"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2024-04-24T17:04:00+00:00",
        "summary": "",
        "meta_description": "Learn what Azure Network Watcher traffic analytics is, and how to use it for viewing network activity, securing networks, and optimizing performance.",
        "meta_lang": "en",
        "meta_favicon": "",
        "meta_site_name": "",
        "canonical_link": "https://learn.microsoft.com/en-us/azure/network-watcher/traffic-analytics",
        "text": "Traffic analytics overview\n\nTraffic analytics is a cloud-based solution that provides visibility into user and application activity in your cloud networks. Specifically, traffic analytics analyzes Azure Network Watcher flow logs to provide insights into traffic flow in your Azure cloud. With traffic analytics, you can:\n\nVisualize network activity across your Azure subscriptions.\n\nIdentify hot spots.\n\nSecure your network by using information about the following components to identify threats:\n\nOpen ports\n\nApplications that attempt to access the internet\n\nVirtual machines (VMs) that connect to rogue networks\n\nOptimize your network deployment for performance and capacity by understanding traffic flow patterns across Azure regions and the internet.\n\nPinpoint network misconfigurations that can lead to failed connections in your network.\n\nWhy traffic analytics?\n\nIt's vital to monitor, manage, and know your own network for uncompromised security, compliance, and performance. Knowing your own environment is of paramount importance to protect and optimize it. You often need to know the current state of the network, including the following information:\n\nWho is connecting to the network?\n\nWhere are they connecting from?\n\nWhich ports are open to the internet?\n\nWhat's the expected network behavior?\n\nIs there any irregular network behavior?\n\nAre there any sudden rises in traffic?\n\nCloud networks are different from on-premises enterprise networks. In on-premises networks, routers and switches support NetFlow and other, equivalent protocols. You can use these devices to collect data about IP network traffic as it enters or exits a network interface. By analyzing traffic flow data, you can build an analysis of network traffic flow and volume.\n\nWith Azure virtual networks, flow logs collect data about the network. These logs provide information about ingress and egress IP traffic through a network security group or a virtual network. Traffic analytics analyzes raw flow logs and combines the log data with intelligence about security, topology, and geography. Traffic analytics then provides you with insights into traffic flow in your environment.\n\nTraffic analytics provides the following information:\n\nMost-communicating hosts\n\nMost-communicating application protocols\n\nMost-conversing host pairs\n\nAllowed and blocked traffic\n\nInbound and outbound traffic\n\nOpen internet ports\n\nMost-blocking rules\n\nTraffic distribution per Azure datacenter, virtual network, subnets, or rogue network\n\nKey components\n\nTo use traffic analytics, you need the following components:\n\nNetwork Watcher: A regional service that you can use to monitor and diagnose conditions at a network-scenario level in Azure. You can use Network Watcher to turn network security group flow logs on and off. For more information, see What is Azure Network Watcher?\n\nLog Analytics: A tool in the Azure portal that you use to work with Azure Monitor Logs data. Azure Monitor Logs is an Azure service that collects monitoring data and stores the data in a central repository. This data can include events, performance data, or custom data that's provided through the Azure API. After this data is collected, it's available for alerting, analysis, and export. Monitoring applications such as network performance monitor and traffic analytics use Azure Monitor Logs as a foundation. For more information, see Azure Monitor Logs. Log Analytics provides a way to edit and run queries on logs. You can also use this tool to analyze query results. For more information, see Overview of Log Analytics in Azure Monitor.\n\nLog Analytics workspace: The environment that stores Azure Monitor log data that pertains to an Azure account. For more information about Log Analytics workspaces, see Overview of Log Analytics workspace.\n\nAdditionally, you need a network security group enabled for flow logging if you're using traffic analytics to analyze network security group flow logs or a virtual network enabled for flow logging if you're using traffic analytics to analyze virtual network flow logs:\n\nNetwork security group (NSG): A resource that contains a list of security rules that allow or deny network traffic to or from resources that are connected to an Azure virtual network. Network security groups can be associated with subnets, network interfaces (NICs) that are attached to VMs (Resource Manager), or individual VMs (classic). For more information, see Network security group overview.\n\nNetwork security group flow logs: Recorded information about ingress and egress IP traffic through a network security group. Network security group flow logs are written in JSON format and include:\n\nOutbound and inbound flows on a per rule basis.\n\nThe NIC that the flow applies to.\n\nInformation about the flow, such as the source and destination IP addresses, the source and destination ports, and the protocol.\n\nThe status of the traffic, such as allowed or denied.\n\nFor more information about network security group flow logs, see Network security group flow logs overview.\n\nVirtual network (VNet): A resource that enables many types of Azure resources to securely communicate with each other, the internet, and on-premises networks. For more information, see Virtual network overview.\n\nVirtual network flow logs: Recorded information about ingress and egress IP traffic through a virtual network. Virtual network flow logs are written in JSON format and include:\n\nOutbound and inbound flows.\n\nInformation about the flow, such as the source and destination IP addresses, the source and destination ports, and the protocol.\n\nThe status of the traffic, such as allowed or denied.\n\nFor more information about virtual network flow logs, see Virtual network flow logs overview.\n\nNote\n\nFor information about the differences between network security group flow logs and virtual network flow logs, see Virtual network flow logs compared to network security group flow logs.\n\nHow traffic analytics works\n\nTraffic analytics examines raw flow logs. It then reduces the log volume by aggregating flows that have a common source IP address, destination IP address, destination port, and protocol.\n\nAn example might involve Host 1 at IP address 10.10.10.10 and Host 2 at IP address 10.10.20.10. Suppose these two hosts communicate 100 times over a period of one hour. The raw flow log has 100 entries in this case. If these hosts use the HTTP protocol on port 80 for each of those 100 interactions, the reduced log has one entry. That entry states that Host 1 and Host 2 communicated 100 times over a period of one hour by using the HTTP protocol on port 80.\n\nReduced logs are enhanced with geography, security, and topology information and then stored in a Log Analytics workspace. The following diagram shows the data flow:\n\nPrerequisites\n\nTraffic analytics requires the following prerequisites:\n\nA Network Watcher enabled subscription. For more information, see Enable or disable Azure Network Watcher.\n\nNetwork security group flow logs enabled for the network security groups you want to monitor or virtual network flow logs enabled for the virtual network you want to monitor. For more information, see Create a network security group flow log or Create a virtual network flow log.\n\nAn Azure Log Analytics workspace with read and write access. For more information, see Create a Log Analytics workspace.\n\nOne of the following Azure built-in roles needs to be assigned to your account:\n\nDeployment model Role Resource Manager Owner Contributor Network contributor 1 and Monitoring contributor 2\n\nIf none of the preceding built-in roles are assigned to your account, assign a custom role to your account. The custom role should support the following actions at the subscription level:\n\nMicrosoft.Network/applicationGateways/read\n\nMicrosoft.Network/connections/read\n\nMicrosoft.Network/loadBalancers/read\n\nMicrosoft.Network/localNetworkGateways/read\n\nMicrosoft.Network/networkInterfaces/read\n\nMicrosoft.Network/networkSecurityGroups/read\n\nMicrosoft.Network/publicIPAddresses/read\n\nMicrosoft.Network/routeTables/read\n\nMicrosoft.Network/virtualNetworkGateways/read\n\nMicrosoft.Network/virtualNetworks/read\n\nMicrosoft.Network/expressRouteCircuits/read\n\nMicrosoft.OperationalInsights/workspaces/read 1\n\nMicrosoft.OperationalInsights/workspaces/sharedkeys/action 1\n\nMicrosoft.Insights/dataCollectionRules/read 2\n\nMicrosoft.Insights/dataCollectionRules/write 2\n\nMicrosoft.Insights/dataCollectionRules/delete 2\n\nMicrosoft.Insights/dataCollectionEndpoints/read 2\n\nMicrosoft.Insights/dataCollectionEndpoints/write 2\n\nMicrosoft.Insights/dataCollectionEndpoints/delete 2\n\n1 Network contributor doesn't cover Microsoft.OperationalInsights/workspaces/* actions.\n\n2 Only required when using traffic analytics to analyze virtual network flow logs. For more information, see Data collection rules in Azure Monitor and Data collection endpoints in Azure Monitor.\n\nTo learn how to check roles assigned to a user for a subscription, see List Azure role assignments using the Azure portal. If you can't see the role assignments, contact the respective subscription admin.\n\nCaution\n\nData collection rule and data collection endpoint resources are created and managed by traffic analytics. If you perform any operation on these resources, traffic analytics may not function as expected.\n\nPricing\n\nFor pricing details, see Network Watcher pricing and Azure Monitor pricing.\n\nTraffic analytics (FAQ)\n\nTo get answers to the most frequently asked questions about traffic analytics, see Traffic analytics FAQ."
    }
}