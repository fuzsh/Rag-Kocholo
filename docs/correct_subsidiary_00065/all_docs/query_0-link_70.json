{
    "id": "correct_subsidiary_00065_0",
    "rank": 70,
    "data": {
        "url": "https://www.truenas.com/community/threads/making-a-truenas-scale-server-as-a-first-it-project.108828/",
        "read_more_link": "",
        "language": "en",
        "title": "Making a TrueNAS SCALE server as a first IT project",
        "top_image": "https://www.truenas.com/community/data/assets/logo/FORUMSFAVICON.png",
        "meta_img": "https://www.truenas.com/community/data/assets/logo/FORUMSFAVICON.png",
        "images": [
            "https://www.truenas.com/community/styles/newstyle/basic/publicLogoUrl.png",
            "https://www.truenas.com/community/styles/newstyle/basic/publicLogoUrl.png",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://www.truenas.com/community/data/avatars/m/37/37321.jpg?1403378337",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://www.truenas.com/community/data/avatars/m/55/55604.jpg?1594555544",
            "https://www.truenas.com/community/data/assets/ozzmodz_badges_badge/Knowledge_Badge_1.png",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://www.truenas.com/community/data/avatars/m/82/82877.jpg?1554589562",
            "https://www.truenas.com/community/data/assets/ozzmodz_badges_badge/Knowledge_Badge_1.png",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://www.truenas.com/community/data/avatars/m/82/82877.jpg?1554589562",
            "https://www.truenas.com/community/data/assets/ozzmodz_badges_badge/Knowledge_Badge_1.png",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://www.truenas.com/community/data/avatars/m/82/82877.jpg?1554589562",
            "https://www.truenas.com/community/data/assets/ozzmodz_badges_badge/Knowledge_Badge_1.png",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://www.truenas.com/community/data/avatars/m/82/82877.jpg?1554589562",
            "https://www.truenas.com/community/data/assets/ozzmodz_badges_badge/Knowledge_Badge_1.png",
            "https://secure.gravatar.com/avatar/8bedcf4bd31f91dd2d1d4c1fd1eb3aeb?s=96",
            "https://www.truenas.com/community/data/avatars/m/101/101722.jpg?1631200266",
            "https://www.truenas.com/community/data/assets/ozzmodz_badges_badge/Knowledge_Badge_1.png",
            "https://www.truenas.com/community/data/avatars/m/101/101722.jpg?1631200266",
            "https://www.truenas.com/community/data/assets/ozzmodz_badges_badge/Knowledge_Badge_1.png",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://www.truenas.com/community/data/avatars/m/123/123753.jpg?1679690885",
            "https://secure.gravatar.com/avatar/8bedcf4bd31f91dd2d1d4c1fd1eb3aeb?s=96",
            "https://www.truenas.com/community/data/avatars/s/117/117605.jpg?1674046959",
            "https://www.truenas.com/community/data/avatars/s/28/28654.jpg?1675452852",
            "https://www.truenas.com/community/data/avatars/s/120/120362.jpg?1704668432",
            "https://www.truenas.com/community/data/avatars/s/120/120362.jpg?1704668432"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "TheGeekn°72"
        ],
        "publish_date": "2023-03-24T20:46:50+00:00",
        "summary": "",
        "meta_description": "Hi there fellas,\n\nI've just started on TrueNAS and since I'm a beginner in this general area of IT, I wanted to inquire People Who Know on my project and...",
        "meta_lang": "en",
        "meta_favicon": "https://www.truenas.com/community/data/assets/logo/FORUMSFAVICON.png",
        "meta_site_name": "TrueNAS Community",
        "canonical_link": "https://www.truenas.com/community/threads/making-a-truenas-scale-server-as-a-first-it-project.108828/",
        "text": "TheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 24, 2023\n\n#1\n\nHi there fellas,\n\nI've just started on TrueNAS and since I'm a beginner in this general area of IT, I wanted to inquire People Who Know on my project and tell me if they have any advices, comments, if there's anything I should look out for while handling this and what not\n\nI put everything in a thread on the LTT server so I'll just link it here to avoid just making doubloons across the internet : https://linustechtips.com/topic/1496088-my-first-personal-tinker-project-as-an-it-student/\n\nI got almost all the hardware, will probably get the last of it next week, planning to RAID-Z1 3x4TB Ironwolf drives to it, fire comments away !\n\nGeek, over and out\n\nTheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 29, 2023\n\n#2\n\nHi there fellas,\n\nI'm getting my last orders delivered tomorrow and so inching ever closer to actual setup time, issue is, as I'm looking up info regarding RAIDing drives, I'm not quite sure if I can be confident about the content I'm reading and as such I wanted to ask to people familiar with RAID-Z and if RZ1 is actually the way to go for my planned 3x4TB config or if there was other options I missed/didn't consider\n\nAt first I was planning on using RAID 5 then realised that due to the file system used, RAID-Z1 would be better then there went the rabbit hole of googling info and having 3445864 results to read opinions from lol\n\nFire away, I'm all eyes !\n\nGeek, over and out\n\nEricloewe\n\nServer Wrangler\n\nJoined\n\nFeb 15, 2014\n\nMessages\n\n20,194\n\nMar 29, 2023\n\n#3\n\nWhat's the actual goal here? It's hard to provide any meaningful info for an abstract tinkering thing, much like working on a car - it's not a goal, it's a means to an end.\n\nTheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 29, 2023\n\n#4\n\nWhat's the actual goal here? It's hard to provide any meaningful info for an abstract tinkering thing, much like working on a car - it's not a goal, it's a means to an end.\n\nI put literally everything there is to know in the post just above mate :D\n\nsretalla\n\nPowered by Neutrality\n\nJoined\n\nJan 1, 2016\n\nMessages\n\n9,703\n\nMar 29, 2023\n\n#5\n\nThe only feedback I can see that would be relevant is that RAIDZ1 isn't ideal for disks larger than 2TB, but is preferable to RAID 5 via hardware as ZFS will not play well with that and you will eventually lose data.\n\nYou may find somewhere down the road that when one disk fails, you're unprotected against data corruption and also against a further disk failure while resilvering (which is hard on the remaining disks). If the pool were to be full-ish, that could take at least 24 hours with big disks...\n\nTheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 29, 2023\n\n#6\n\nRAIDZ1 isn't ideal for disks larger than 2TB\n\ndamn, so no bueno for my 4TB HDDs or I can still go ahead with relative safety ?\n\nbut is preferable to RAID 5 via hardware as ZFS will not play well with that and you will eventually lose data.\n\nI... lost you there. You mean hardware RAID-Z1 instead of any software RAID ? (because I wasn't planning on buying a RAID PCIe card, that stuff is expensive and I've already put quite a lot of budget on this already)\n\nYou may find somewhere down the road that when one disk fails, you're unprotected against data corruption\n\nok, I figured that one part, looking that up was pretty straight forward\n\nand also against a further disk failure while resilvering (which is hard on the remaining disks). If the pool were to be full-ish, that could take at least 24 hours with big disks...\n\nI got Ironwolf HDDs which are *supposed* to be quality NAS designed drives, did I got played like a pigeon or was it the right thing to do ?\n\nis having a second drive failure a common thing when resilvering ? would it be better to copy all data from the \"OK\" drives on new ones and resilver from them ? is it even possible ?\n\nHeracles\n\nWizard\n\nJoined\n\nFeb 2, 2018\n\nMessages\n\n1,401\n\nMar 29, 2023\n\n#7\n\nbecause I wasn't planning on buying a RAID PCIe card\n\nNo-Go here. No hardware raid. TrueNAS must see and manage physical drives itself.\n\nI got Ironwolf HDDs which are *supposed* to be quality NAS designed drives\n\nIndeed, a good choice and I use them myself.\n\nis having a second drive failure a common thing when resilvering ?\n\nMore often than you think but must important is that when it happen, you can loose up to your entire pool. So even if probability is low, impact is extreme. As such, it is a pretty high risk.\n\nDo not forget about backups. No single server, TrueNAS or other, can be more than a single point of failure. See my signature about that...\n\nTheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 29, 2023\n\n#8\n\nMore often than you think but must important is that when it happen, you can loose up to your entire pool. So even if probability is low, impact is extreme. As such, it is a pretty high risk.\n\ngonna reiterate my question just in case you might have missed it : would it be better to copy all data from the \"OK\" drives on new ones and resilver from them ? is it even possible ?\n\nDo not forget about backups. No single server, TrueNAS or other, can be more than a single point of failure. See my signature about that...\n\nthis is exactly why I'm making this NAS, not only to learn stuff about server management but also to make a back up of all the files I've accumulated so far, I'm not cramming any of my current drives by any means but I also wanted a headstart regarding my data storage capability anyway\n\nand for what I've planned, I'm not even nearing 40% of my max capacity post dump and it's pretty low priority content too so eh\n\neventually in a few years, I'll get me enough hardware to spawn a couple high capacity NAS servers and have them in mirror together in two locations\n\nI've always wanted to make myself a large, heavily geared server room with lots of cool tech in it lol, a pipe dream at this time but one day eh ?\n\nHeracles\n\nWizard\n\nJoined\n\nFeb 2, 2018\n\nMessages\n\n1,401\n\nMar 29, 2023\n\n#9\n\nwould it be better to copy all data from the \"OK\" drives on new ones and resilver from them ? is it even possible ?\n\nThe only proper solution is not using Raid-Z1. No matter is it resilvering a new disk from the other members in the Raid-Z1 or emptying the remaining drives in the Raid-Z1, you face the same risks :\n\n--No protection until the task is completed\n\n--The task itself is heavy load and may very well push the other drives to a fault\n\n--All of these data must be retrieved without a single error because there will be no more redundancy to detect and fix it\n\n--All drives, buses and others have a small normal error rate. To read that much data, even with such a low error rate, will statistically leaves you with a few errors. As such, despite being technically possible, there is no way to make it a proper solution.\n\nMirrors are way better because they penalize only a single drive when it is time to rebuild something. For critical systems, it is easy to use 3-way mirrors to increase the protection.\n\nRaid-Z2 will avoid the heavy load of re-reading everything because the extra drive is \"pre-\" silvered for the failure of any other drive. Also, it will keep you safe with some redundancy left once a first drive died. Raid-Z3 will increase that protection one step further.\n\nSo there are no proper way of securing Raid-Z1 with large drives, other than destroying that pool and re-creating it as Raid-Z2.\n\nTheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 29, 2023\n\n#10\n\nThe only proper solution is not using Raid-Z1. No matter is it resilvering a new disk from the other members in the Raid-Z1 or emptying the remaining drives in the Raid-Z1, you face the same risks :\n\n--No protection until the task is completed\n\n--The task itself is heavy load and may very well push the other drives to a fault\n\n--All of these data must be retrieved without a single error because there will be no more redundancy to detect and fix it\n\n--All drives, buses and others have a small normal error rate. To read that much data, even with such a low error rate, will statistically leaves you with a few errors. As such, despite being technically possible, there is no way to make it a proper solution.\n\nMirrors are way better because they penalize only a single drive when it is time to rebuild something. For critical systems, it is easy to use 3-way mirrors to increase the protection.\n\nRaid-Z2 will avoid the heavy load of re-reading everything because the extra drive is \"pre-\" silvered for the failure of any other drive. Also, it will keep you safe with some redundancy left once a first drive died. Raid-Z3 will increase that protection one step further.\n\nSo there are no proper way of securing Raid-Z1 with large drives, other than destroying that pool and re-creating it as Raid-Z2.\n\nThat makes a great deal of sense... But being an IT student, I don't have the budget to get that many drives, even the minimum amount lol\n\n3 is already pushing it for me (at 100€ a pop, 3x4TB is the best deal I could get for my budget) add to that an SSD (for boot drive of course, didn't have one at hand) and a few spare parts here and there, I'm hoping that this low usage NAS will hold for a while til I actually get a job that allows me to dump cash into loads of gear and allow me to fund bigger projects like a proper R-Z3 pool with a dozen hi-cap drives\n\nIn the mean time, that project of mine should be way more than enough to learn how actually properly use, manage, upgrade, tweak and maintain such a system (hopefully nothing goes drastically wrong)\n\nHeracles\n\nWizard\n\nJoined\n\nFeb 2, 2018\n\nMessages\n\n1,401\n\nMar 29, 2023\n\n#11\n\nWell, maybe you are shooting too high for a first project then ? How about putting in place a secured DNS infrastructure ?\n\nStep 1\n\nA local DNS server hosting your own local domain (like home.lab) (ex: using isc bind)\n\nStep 2\n\nMake it a recursive server to resolve Internet names, including access control to answer your local network only\n\nStep 3\n\nImplement DNS Sec validation\n\nStep 4\n\nQuery remote DNS servers over TLS (853)\n\nStep 5\n\nIncrease security by adding DNS sink hole to block adwares, trackers and more (ex: pi-hole)\n\nStep 6\n\nIncrease feature by registering extra stuff in your DNS like SSH keys\n\nStep 7\n\nStart doing network monitoring by collecting and reviewing your DNS logs\n\nJust with that, you can have fun for months. Also, you will not need anything more than a Raspberry PI. Of course, whatever hardware you have will be able to run something capable of that.\n\nDNS is a fundamental in IT, network and security. To master it would be a great point to begin with.\n\nTheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 30, 2023\n\n#12\n\nWell, maybe you are shooting too high for a first project then ? How about putting in place a secured DNS infrastructure ?\n\nStep 1\n\nA local DNS server hosting your own local domain (like home.lab) (ex: using isc bind)\n\nStep 2\n\nMake it a recursive server to resolve Internet names, including access control to answer your local network only\n\nStep 3\n\nImplement DNS Sec validation\n\nStep 4\n\nQuery remote DNS servers over TLS (853)\n\nStep 5\n\nIncrease security by adding DNS sink hole to block adwares, trackers and more (ex: pi-hole)\n\nStep 6\n\nIncrease feature by registering extra stuff in your DNS like SSH keys\n\nStep 7\n\nStart doing network monitoring by collecting and reviewing your DNS logs\n\nJust with that, you can have fun for months. Also, you will not need anything more than a Raspberry PI. Of course, whatever hardware you have will be able to run something capable of that.\n\nDNS is a fundamental in IT, network and security. To master it would be a great point to begin with.\n\nWe've actually started touching that and so far we've mostly been doing an overhaul of our hardware/software knowledge and a bunch of stuff regarding tools and tricks good to master and we aren't done just yet with network planning, setup and configuration\n\nAnd I already have all the equipment, might as well make something of it ! And I could do that either on my RasPi (that I'll have to unearth from somewhere in my storage) or this server since it'll have way more than enough processing power to handle that and I planned to use it as such a platform too anyway, adding services and containers and stuff like that\n\nAlso, I genuinely don't think I've aimed that high to be honest, it's probably gonna be rough but not all that hard, I'm not that helpless either when it comes to IT :p\n\nHeracles\n\nWizard\n\nJoined\n\nFeb 2, 2018\n\nMessages\n\n1,401\n\nMar 30, 2023\n\n#13\n\nAnd I already have all the equipment\n\nFor a TrueNAS project, not really.\n\nTrueNAS is an enterprise-grade solution that relies on enterprise-grade resources. To deploy it without these requirements is not recommended. Because you wish to learn, I think it would be important to learn how to do it properly. To have things that looks like functioning at first is not good enough in enterprise. You need to be able to guarantee that the solution will keep working under all conditions, will survive problems, will safeguard the intellectual property and more.\n\nSo if you still wish to go about storage, here is another idea :\n\nStep 1\n\nDeploy a Linux server using only 1 hard drive at first\n\nStep 2\n\nAdd drives in that server and use them to create a logical raid using mdadm\n\nStep 3\n\nInstall MinIO on that server (MinIO is an S3-compatible storage solution)\n\nStep 4\n\nDeploy a database in that server\n\nStep 5\n\nDeploy a Nextcloud service that will connect to that database and use the S3 storage for its main storage\n\nStep 6\n\nDeploy a reverse proxy with ACME certificate to access your private cloud remotely\n\nAgain, you have a ton of fun waiting for you on that path and again, you can build this following best practices.\n\nWI_Hedgehog\n\nGuru\n\nJoined\n\nJun 15, 2022\n\nMessages\n\n674\n\nMar 30, 2023\n\n#14\n\nFirst Lesson: Ask questions BEFORE buying hardware.\n\nSecond Lesson: Thorough planning avoids unnecessary expense. (Keep in mind \"unknowns\" exist, so don't over-plan either; experience will dictate what's prudent.)\n\nThird Lesson: Buy used. Rolling a car off the lot incurs an immediate 20% depreciation, computer equipment is 30%. Buying used can get you to the same endpoint for 70% less initial investment, though your electricity and somewhat more frequent replacement costs will drive that up 20% over time (potentially a 50% over-all savings). Since you're not paying interest on debt not incurred (as you're a college student, not a business with working capital), your over-all savings is around 70%, in rough numbers.\n\nFourth Lesson: These are your working years. Forget about women, gaming, hobbies, and anything that doesn't solidly invest in your future. Work smart now and retire early with a young, beautiful trophy wife. You won't understand how this all works until you're 40, so take this advice now and you'll be really happy with yourself later.\n\nFifth Lesson: Don't get married. It's a legally-binding contract that doesn't follow the rules of law and has no up-side for men; it's a horrible decision from a business standpoint. You won't understand how this all works until 15 years after your divorce, so take this advice now and you'll be really happy with yourself later. When you're 40 with a home, vacation property, home-theater, four luxury vehicles, nobody on your @$$ about how much anything cost but rather admiring you for growing your wealth, and your pick of incredibly gorgeous women who haven't let themselves go because they're married and have no reason to do anything they don't want to, you'll realize how important this advice was. Conversely, if you're 40 with three kids, loads of debt, and a fat, nagging spouse, you'll realize how important this advice was.\n\nSixth Lesson: Learning how to cook is easy, meals are inexpensive, taste great, and your health will be far easier to maintain. Invest in a few basic cooking items and real ingredients after browsing a few free online recipe sites. Your friends will admire you and later on when you're 40 you'll find that cooking a meal at your place will pretty much land any woman you want. That huge fireplace you retire in front of after the meal will land you whatever else you want. (pack her a lunch in the morning and send her on her way, you've got a life to lead, when you're 40)\n\nLast edited: Mar 30, 2023\n\nNugentS\n\nMVP\n\nJoined\n\nApr 16, 2020\n\nMessages\n\n2,947\n\nMar 30, 2023\n\n#15\n\nWI_Hedgehog seems to be a bit cynical about life!!\n\nNot that he's 100% wrong though (not even close)\n\nLarsR\n\nGuru\n\nJoined\n\nOct 23, 2020\n\nMessages\n\n719\n\nMar 30, 2023\n\n#16\n\nDamn, came to this forum for tech support, instead we get life support...\n\nNugentS\n\nMVP\n\nJoined\n\nApr 16, 2020\n\nMessages\n\n2,947\n\nMar 30, 2023\n\n#17\n\nTrueNAS is for Life (just like a puppy)\n\nTheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 30, 2023\n\n#18\n\nFor a TrueNAS project, not really.\n\nTrueNAS is an enterprise-grade solution that relies on enterprise-grade resources. To deploy it without these requirements is not recommended. Because you wish to learn, I think it would be important to learn how to do it properly. To have things that looks like functioning at first is not good enough in enterprise. You need to be able to guarantee that the solution will keep working under all conditions, will survive problems, will safeguard the intellectual property and more.\n\nSo if you still wish to go about storage, here is another idea :\n\nStep 1\n\nDeploy a Linux server using only 1 hard drive at first\n\nStep 2\n\nAdd drives in that server and use them to create a logical raid using mdadm\n\nStep 3\n\nInstall MinIO on that server (MinIO is an S3-compatible storage solution)\n\nStep 4\n\nDeploy a database in that server\n\nStep 5\n\nDeploy a Nextcloud service that will connect to that database and use the S3 storage for its main storage\n\nStep 6\n\nDeploy a reverse proxy with ACME certificate to access your private cloud remotely\n\nAgain, you have a ton of fun waiting for you on that path and again, you can build this following best practices.\n\nWith absolutely no ill intent to ignore your advice, I respectfully disagree on whether or not I should use TrueNAS for my project.\n\nAnd since I'm using SCALE which is Linux based, I can probably install, setup and use it along the steps you have listed as a learning curve.\n\nI have a couple relations that work professionally in cybersec and storage solutions that I can rely on to help me out learn about it and a friend of mine showed me a heavily \"modded\" (?) TrueNAS he built for himself with services that do sounds like some of the steps you listed (that was a few months ago and I wasn't knowledgeable enough then to fully understand what I was shown but looking back there are similarities, that is, as long as I recall properly).\n\nAgain, it is not my intent to dismiss what looks to me like valuable advice, I just feel quite bitter about scrapping my carefully researched plan that took me close to two weeks of educated research and scavenging for info here and there to make something that looks like it holds its ground and validated by those same relations I mentioned earlier.\n\nHowever, I thank you for your time and your replies, until next time ? I plan on updating my LTT forum thread (link in the first post) if you are interested in eyeing my progress with this project over time\n\nTheGeekn°72\n\nDabbler\n\nJoined\n\nMar 24, 2023\n\nMessages\n\n12\n\nMar 30, 2023\n\n#19\n\nFirst Lesson: Ask questions BEFORE buying hardware.\n\nSecond Lesson: Thorough planning avoids unnecessary expense. (Keep in mind \"unknowns\" exist, so don't over-plan either; experience will dictate what's prudent.)\n\nThird Lesson: Buy used.\n\nFirst : that I did ! I looked up info about what I was planning to do for at least a solid week and pushed so far into it, I was even reading about HDD technologies and the difference between SMR, CMR and other types\n\nSecond : it may have looked like I was complaining about the cash I've put into this but so far, every single part I've acquired has been on the planned purchases list since day one, I just had other unrelated expenses (\"unknowns\" shall we say) that made me grind my teeth but I fixed that budget hole thankfully so I don't have any issues regarding that anymore\n\nThird : that I did too ! 80% of the cash spent went into brand new drives (because I didn't have any and I wasn't about to play Russian roulette on ebay with NAS type HDDs that can't be certified regarding their usage duration until after delivery) the last 20% went into a refurbished system from a reliable company here that I mostly got for \"spare parts\" : had a full system that was perfectly workable but had the space for a singular HDD and nothing else and half the SATA ports I needed, RAM and CPU are otherwise far more than enough, so I was planning on gutting it from the good parts and put them into that low value system I got just for the bigger case and larger motherboard :p (honestly a great deal when compared to similar listings for either a full machine or just the spare parts I needed)\n\nLast edited: Mar 30, 2023"
    }
}