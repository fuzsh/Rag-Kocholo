cancel

Turn on suggestions

Auto-suggest helps you quickly narrow down your search results by suggesting possible matches as you type.

Showing results for

Search instead for

Did you mean:

Troy_Raney

Digital Support

STT - Troubleshooting Qlik Data Transfer

Environment

Qlik Data Transfer November 2021

Qlik Sense Enterprise SaaS

Transcript

Hello everyone! And welcome to the December edition of Techspert Talks. I’m Troy Raney and I’ll be your host for today's session. Today's presentation is Troubleshooting Qlik Data Transfer with Benoit Canal. Benoit, can you tell us a little bit about yourself?

Hi everybody. My name is Benoit Canal. I have been working here for 3 years in back-end support team. And my main focus is for Qlik Sense and Qlik Cloud products.

Great. Today we're going to be talking about what you need to know with Qlik Data Transfer before you actually install to try and avoid most issues; how to troubleshoot some common issues, and we're going to see some demonstration of that actually troubleshooting those; and we're definitely going to collect a lot of things remember and resources for everybody to take away with today. But Benoit, for those of us who aren't familiar: what is Qlik Data Transfer and what does it do and how does it work?

Qlik Data Transfer is lightweight Windows application that lets you upload data from your on-premise data sources to a Qlik Sense Cloud tenant.

Okay.

The service account owner (SAO) or the tenant administrator generates an API key from the tenant which is then used to authenticate Qlik Data Transfer. After you install Qlik Data Transfer, it will ask you for the tenant and also for the API key. After they are authenticated, you can schedule automatic data reloads or upload data manually.

Is Qlik Data Transfer free? I know that's something on everybody's mind.

Yeah, it's free. And moreover, it's included with your tenant. You only need to have access to your tenant and then you go to your profile. And in your profile, you have some tools like Qlik Desktop or Qlik Data Transfer, and from here you can download it.

So, where should people start to find information they need before installing?

So, they need to go to the Qlik Cloud Help page. There is a section on Deploying Qlik Sense: Installing Qlik Data Transfer.

And that's the Qlik Data Transfer Service that's installed on Windows?

Exactly.

Okay. So, obviously everything here should be read, but what are some details here you want to highlight?

You need absolutely to have the port 443 open in your server.

So, that port allows communication from the server to the Qlik Cloud tenant?

Exactly.

Okay.

Another one where we receive a lot of case is this requirement with Windows Server 2012: you need absolutely to have this cipher. They are not present by default. If not, the connection will not work, you will not manage to reach the tenant.

Okay, and that's a Windows policy or setting that needs to be enabled?

Exactly.

All right.

Also, with PowerShell, you need to have the at least the permission “RemoteSigned.” If you don't have it, the service will not be able to install the needed certificates.

All right. So, that's part of the installation creating the certificate?

Yeah.

Okay.

Another requirement is in another section.

Okay.

It's in the section explaining How to Upload Data. You have some limitation.

I see.

One of them is really important. Basically, Qlik Data Transfer doesn't support proxy. So, if you have a proxy, you need to set a rules to bypass the proxy. If not, you could have some issue using the application.

So, if the server is using a proxy, a bypass rule needs to be set up. Okay. And I think it's good to point out that the documentation has Requirements and Limitations on different pages. So, it's not that obvious and good to highlight for people.

Yeah.

All right. Well, what are some common issues that people face when getting started with Qlik Data Transfer?

Yeah, first issue people can have is when you start Qlik Data Transfer, then you see a blank page. Here this is a Windows 10 machine and we have the latest Qlik Data Transfer version which is in November 2021.

Okay, great.

So, if I start Qlik Data Transfer, you see it's a blank page.

Oh. So, no error messages it’s just nothing really happening.

Yeah. When you have a blank page, it just means that microservice is not running correctly.

Okay. I’m sure there could be a lot of reasons for that what would you check first?

So, the first thing that I would check is the services to see if it's running.

And here's where we get to see the service that's actually installed?

And you see it's running.

So, where can we find the log files for this to investigate further?

C:\ ProgramData

And that's a hidden folder, right.

Qlik > DataTransfer > Log, you have three kinds of logs. The most important is this one: the DataUploadService logs.

Okay. What do you look for when you open a log like this?

What you want to see is ERROR.

Okay.

And also, what is at the end. So, here we see there is “no certificate found.” There is a problem in certificate. And if you go to the beginning, you have very accurate error. It's saying that the certificate “cannot be loaded because running script is disabled on this system.”

Is that one of the limitations you mentioned before?

Yeah. There is this requirement. We need to have the “RemoteSigned” policy.

Okay.

We run PowerShell.

And does that need to be run As Administrator?

Yeah, because if you run normally, it will not work. So, you need to run it As Administrator.

And this first command will check what policy is currently applied? Okay.

And we are in Restricted. So, this is not correct, and that is why it's not working.

Okay. So, running this command should set it to the correct policy?

So, you need to press Yes. And if you check again now the policy, it’s correct.

“RemoteSigned.” Okay. So, do we need to reinstall now?

You don't need to reinstall. What you need to do is to stop the service.

Okay.

And then, start it again. The service will try to install the certificate again.

So, it's actually running the service the first time with the correct policy applied that creates the certificate?

Yeah. Just let's see if now it's working. We still have a blank page. And the services running.

So, I guess we go back to the logs to see if there's something new?

So, we have again the same. But in the FullQualifiedError >

“UnauthorizedAccessException.” So, it sounds like we don't have appropriate rights, maybe?

Yeah. Maybe this service account maybe doesn't have the Local Admin Rights. Let's, let's check it.

Okay.

It's another requirement, this one. I didn't point it out, but you see.

So, the name of our user account was QVService, right? So, I don't see it there.

Yeah, and it's not here. So. I would just add it. And I will restart the service.

So, there could be several reasons why we're getting that blank screen basically.

Exactly. It can be a broken certificate, a missing certificate or something prohibiting running correctly the service; can be a lot of things. If we start Qlik Data Transfer, we should have the correct display. Yeah.

All right. So, now we're on to the setup. A quick question: if someone encounters an error message in the logs; they do what you've suggested; they're getting a blank screen. They search in the logs. They find a message in logs they don't understand. Could they search for that in Qlik Community and find a solution?

Absolutely, because it might be possible other people from Community face this issue and they talk about it. Maybe you will find already existing article with a solution. So, it's a very good idea to do that.

Okay, great. What could be yet another cause of the blank screen issue?

You have again a blank page. Here we see there is a certificate. This one, we say we can ignore it. And here:

“unable to unlock the reload service”

We don't really know what is the meaning of that. So, we can try to search in the community what we find.

Okay. Just Google it. Google is your friend.

And put “Qlik.” Something also you can do: you want the exact word for the search [add quotation marks].

Okay.

“Qlik Data Transfer White Screen…” So, let's see. This one looks interesting. It's one of my articles.

Nice. It's good to see you active in the Community. So, that's the same error with the same message in the logs.

Exactly. So, what I advise is to, to go to check what we have in the certificate in the MMC console. What I recommend to do is to run it as a Service Account.

Okay.

Do a Shift + Right-click > Run as Different User.

And that's so you can run the MMC as the same account running the Qlik Data Transfer service?

Exactly. Computer Account. And Ok. And you need to go to Personal. There is no certificate. It's not exactly like my article, but same consequence. We don't see the certificate. We have the rights. So, let's see what the page is advising us.

Okay.

They propose an action.

Okay.

We will follow the step. We will stop the Qlik Data Transfer Service. And then we will navigate here. And we delete.

Okay. So, we're actually deleting the certificates?

Yeah. It's written here: “and delete the certificates there.” Then you go here. Run Remove-Certificate script with PowerShell.

It ran it.

And then, you need to start the service.

Okay.

So, now, we check to make sure the certificates got made?

Yeah.

And that's how it should look? Those are the two certificates we're expecting?

Yeah. Like that.

Now, I noticed in the Help documentation that you quickly showed there; it gave instructions for when Qlik Data Transfer is installed on its own machine and for when it's installed on the same machine as a Qlik Sense Enterprise Service. What would you recommend: having it on its own machine or having it on the same machine as Qlik Sense?

We recommend, I strongly recommend to have a dedicated machine for Data Transfer only.

It's good to know. All right. So, beyond the blank screen issue; what are some other common issues an admin might encounter?

The other frequent issue is a problem to connect to the tenant.

Okay. Can we see how that looks?

Yeah. And this server is a Windows Server 2012.

Okay. So, we've got Qlik Data Transfer installed. And we're at the setup screen.

Let's name it QDT.

Your Qlik Cloud tenant link.

We need to put an API key. So, let's…

Yeah. We get that from Cloud?

Yeah. So, you need to go to your Profile Settings.

All right.

And here there is API keys. And then you “Generate a New Key.” So, you can choose the time when it will expire. If you need for a long time, you can put 1 year or 2 years. But in any case, if it expire, then Qlik Data Transfer will not work anymore. You just have to create a new one, and then apply it to the Data Transfer and then it will work again. We choose a Month. QDT. Generate.

All right. So, that long string there is our API Key?

Yeah. I recommend you to keep it somewhere to be able to use it again. And then we put it here. And you click Apply.

Uh-oh! We're getting an error message. Is that the common error that you see customers run into?

Yeah. Yeah.

Okay. Yeah, where would you start investigating this?

I would first check if we have access to the tenant from the browser.

Okay.

Here, we see it's working.

Right. You're accessing your Qlik Cloud tenant from the Qlik Data Transfer server.

One other thing is if you have access to the tenant from port 443.

Okay. That's the port for all communication between the tenant and the server?

Exactly. There is a PowerShell command that can check that. I will put it here. Basically it will test this DNS with this port.

All right.

And, if it's correct, the result will be True. If it's not correct, the result will be False. So, it's True. So, it means that the port is correctly open.

Okay. So, it's not the port then. That's a nice troubleshooting step to check. Where should we go next?

Let's check the log. We have only one.

Okay. We - I see some “Unauthorized” errors at the bottom.

Okay. So, Unauthorized, with that you just know something is going wrong but it doesn't really point out.

Yeah. It gives you a clue that it’s somehow permissions related, but you're not quite sure which permissions, right?

Yeah. Remember, we are in Windows 2012.

Right! The cipher!

There is here an article. We need to start gpedit.msc. So, let's do it.

So, this is a Windows policy editor. All right.

Yeah. And you need to go to Administrative Templates.

Okay.

Network, and then SSL Configuration Settings. Not configurated. So, it means you are using this default Windows cipher. So, you need to click ‘Enable.’ And then copy this one.

And paste it into the little box. Okay.

Yeah. You need to restart the server.

Okay. So, the server's restarted. And I guess you try and create the connection again?

Yeah. So, let's start Qlik Data Transfer. A name. We put the link. The link is here. API key, the one I saved earlier, and then Apply. Here we go.

Success!

So, with a good correct cipher it's working.

So, here you can actually get to the process of actually creating data connections for your apps and such. Okay. What could be another reason for the ‘unable to connect’ error?

We have an example here. So, let's troubleshoot it. Again, “Unable to Connect to the Tenant.” Let's see directly what logs are saying.

Okay. Same issue we had before. That was because the cipher was not configured, but now it's a different cause.

Yeah, exactly. Again…

Yeah! “Unauthorized at verify tenant.” Very similar to what we saw in the logs with the previous error.

Like it cannot even connect to the tenant. So, let's try to go from a browser.

Okay.

Not working. Maybe we have a proxy, or let's see if the port is open.

And that port again is 443, right?

Yeah. It was the same command.

Okay. So, it's checking if it can communicate across port 443, and…

False. So, it means it's blocked. If it's blocked, check if we have antivirus, a Firewall, or something. The Windows Firewall.

Now, what are you looking for in here? Just any Block action?

I’m trying to see if there is something in…

I see a block there, yeah.

Yeah then it's called QDT, so probably this is the reason. Block connection.

Okay. So, this is a rule you've created to prompt this issue?

Yeah, for the example.

But that's a good tip to double check that port 443 is unblocked and open. So, if you just disable that then this should work?

Yeah. So, let's try directly to Apply.

Great!

And it’s working.

Well, that's very helpful getting to see how to troubleshoot some common issues with the getting started with Qlik Data Transfer. Okay. Great, well now, it's time for Q&A. Please submit your questions through the Q&A panel on the left side of your On24 console. Benoit, let's take the first question here:

What are significant differences between versions?

Most of the difference are some defects resolved. And if you want to know what are the defects resolved or the improvements…

Yeah. How can people see what defects have been corrected, and information about each release?

You can - there with a release notes PDF on the download page, where you download the application. So, here you can check everything.

Oh. So, it's not in Qlik community? Because I thought that release notes were in Qlik community now.

No. No, for Qlik Data Transfers it’s still on the download page.

Okay. So, this is the download site where we've probably got Qlik Data Transfer.

Exactly. And here you click on Qlik Data Transfer, and you have all the versions You have the most recent version here: November. And here, you have all the Release Notes. Here, if you open it; for example, we will see, there is one resolved issue here.

Okay. I saw a lot of different versions there. Which version would you recommend using?

The latest one.

Okay.

Because Qlik Cloud is something evaluated very fast.

That's right, because Qlik Sense Cloud is always running the latest version. And since you're connecting an on-cloud version versus an on-premise, it's always good to have the same version in both.

Exactly. Yeah.

Okay. Next question: can the user that created the transfer task be different than the owner of the app?

The user can only see application which he does have access to. So, if the user can reload an application in a Qlik Cloud, then he will be able to trigger a reload from Qlik Data Transfer.

Okay.

So, basically the Qlik Data Transfer user needs rights for the application.

That makes sense. And because you can reload apps both in the cloud and from Qlik Data Transfer, that's why this is important.

Yeah.

Next question: which user ID should create the Qlik Data Transfer tasks?

It should be a user with a professional license, and with access to all needed spaces.

Okay.

There is only one user used for Qlik Data Transfer, and this is the user who creates the API key.

Okay.

You can only have one user. So, this user is doing everything.

And it's basically the admin of Qlik Data Transfer?

Yeah. That's why we say the admin of the tenant or admin of Qlik Sense. And this user needs to be the administrator of the tenant or the SAO.

And what's SAO?

It's what we say in the help page here: the Service Account Owner.

Okay.

The one who generates API key. In fact, in order to have that working properly, you… is written here: you need to have professional access, and with the developer role. What is really important is: to have access to all spaces, because if not, if you don't have access to space you will not be able to upload some data to those spaces.

All right. Next question: am I missing it, or do I need to request it to appear in my tenant? So, I guess someone's looking for Qlik Data Transfer or not finding it.

So, you should see it in your cloud, Qlik Cloud account under your profile and tool.

Can you show us what that looks like?

Yeah. So, you click here on your name > Profile Settings > and then API Key. And to be able to see API Key, there is a step you have to do in the Management Console. If you don't see it, you go to Settings, and you need to Enable API Key.

Ah! Very good to know.

Yeah.

That's a great tip.

Only, even you can choose a number of API Keys you can create by user, and also the maximum expiration days.

Next question: is this available with Qlik Sense Cloud?

This is a designed for Qlik Sense Cloud. The product is offered with a cloud product. So, they are working together.

Perfect. Yeah, makes sense. And we're seeing it all over the place. All right.

Next question: manage space is not displayed in the destinations list. I guess where can they find that or why are they not seeing it?

So, it would mean either you don't have any space available for the user who created the API Key.

Okay.

Or either there is no connection from the QDT Server to the tenant.

All right. So, we need to investigate that a little further.

For example, it happened to me suddenly: I didn't see any space here. There wasn't… there was nothing. And it was after I got to outside for a lunch pause. So, my computer - local computer, and it was sleeping in sleeping mode. When I came back, it's like there was no connection. So. I had to refresh. And then after it appear again.

Oh! If only everything could be so simple. Okay. We have time for one last question:

Is this available for QlikView?

Yeah. With Qlik Data Transfer you can you can send them a QlikView application data, but it will not reload any QlikView application.

Okay.

So, you only can add some Qlik Sense application for reload.

Okay, because it is designed to work directly with Qlik Sense, so…

Exactly.

That makes sense. Okay great! Well, thank you very much Benoit.

You are welcome and thank you to everybody who follows this presentation. I really hope it was helpful and interesting for you. I hope you will be able to troubleshooting better the issue you're having when installing or using a Qlik Data Transfer. And if you if you still need help or if you have questions, we can meet in the Qlik Community.

Great! Thank you everyone. We hope you enjoyed this session. Thank you to Benoit for presenting. We appreciate getting experts like Benoit to share with us. Here's our legal disclaimer. And thank you once again! Have a great rest of your day.

Labels (2)