{
    "id": "wrong_mix_domainrange_subsidiary_00031_1",
    "rank": 0,
    "data": {
        "url": "https://community.cadence.com/cadence_technology_forums/f/custom-ic-design/20466/monte-carlo-simulation-global-local-vs-local-and-process-vs-mismatch",
        "read_more_link": "",
        "language": "en",
        "title": "Monte Carlo Simulation: Global+Local vs Local and Process vs Mismatch",
        "top_image": "https://community.cadence.com/cfs-filesystemfile/__key/themefiles/f-s-3fc3f82483d14ec485ef92e206116d49-files/favicon.png?_=638564397481093403",
        "meta_img": "https://community.cadence.com/cfs-filesystemfile/__key/themefiles/f-s-3fc3f82483d14ec485ef92e206116d49-files/favicon.png?_=638564397481093403",
        "images": [
            "https://community.cadence.com/cfs-filesystemfile/__key/widgetfiles/5a76085a0add480cbbcc9ef8568e2de4-d/cadence_2D00_logo_2D00_black.png?_=638072669021690804",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/system-images/anonymous.gif_2D00_32x32x2.png?_=637590656695278526",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/communityserver-components-avatars-00-00-13-75-72/4TT6QA5XNSJ5.jpg_2D00_44x44x2.jpg?_=635481547440000000",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/communityserver-components-avatars-00-00-09-01-64/4TT6QA2L2EQ3.jpg_2D00_44x44x2.jpg?_=635483853730000000",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/communityserver-components-avatars-00-00-38-43-73/4U7E2QR5Q836.jpg_2D00_44x44x2.jpg?_=636922199030000000",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/communityserver-components-avatars-00-00-00-49-36/4UGLSKBWNRRE.jpg_2D00_44x44x2.jpg?_=637858009818434100",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/system-images/anonymous.gif_2D00_44x44x2.png?_=637590656739458076",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/communityserver-components-avatars-00-00-38-43-73/4U7E2QR5Q836.jpg_2D00_44x44x2.jpg?_=636922199030000000",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/communityserver-components-avatars-00-00-38-43-73/4U7E2QR5Q836.jpg_2D00_44x44x2.jpg?_=636922199030000000",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/system-images/anonymous.gif_2D00_44x44x2.png?_=637590656739458076",
            "https://community.cadence.com/cfs-filesystemfile/__key/communityserver-components-imagefileviewer/communityserver-components-avatars-00-00-38-43-73/4U7E2QR5Q836.jpg_2D00_44x44x2.jpg?_=636922199030000000"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            "Monte Carlo"
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2011-10-05T13:57:51.327000+00:00",
        "summary": "",
        "meta_description": "Hi, I am runnig some Monte Carlo simulations and there are some options for model libraries like Global+Local and Local. Also, after choosing model setup in ADE",
        "meta_lang": "en",
        "meta_favicon": "https://community.cadence.com/cfs-filesystemfile/__key/themefiles/f-s-3fc3f82483d14ec485ef92e206116d49-files/favicon.png?_=638564397481093403",
        "meta_site_name": "",
        "canonical_link": "https://community.cadence.com/cadence_technology_forums/f/custom-ic-design/20466/monte-carlo-simulation-global-local-vs-local-and-process-vs-mismatch",
        "text": "Hi,\n\nmore than 8 years later, I still have the same question and did not find any useful information on this topic.\n\nWhat I understood so far is:\n\n1. In Corner (ss/tt/fs/sf/ff) simulations the variation from wafer-to-wafer and lot-to-lot is simulated. But all devices do have the same model-parameters during simulation - means \"deviceA\" behaves the same as its adjacent \"deviceB\" with model parameters of the actual simulated corner. No mismatch between devices.\n\n2. \"MC_local\" simulates the variation (mismatch) of devices within one wafer - means \"deviceA\" has slightly different model-parameters as its adjacent \"deviceB\", but at the typical \"tt\" process corner. So it is assumed that the process corner is \"tt\".\n\n3. \"MC global\" simulates the variation (mismatch) of devices from wafer-to-wafer and lot-to-lot. This is like a Corner simulation, but \"deviceA\" can have the \"slow\"-corner-parameters, whereas its adjacent \"deviceB\" can have \"fast\"-corner-parameters.\n\nNow, what I have difficulties with, is to understand the use-case for point 3. As an example, in a differential amplifier, it might not happen that one device is at \"fast\" whereas the other device is at \"slow\",right ? What instead can happen is, that both devices are at \"slow\", but do have the \"local\" variation around this \"slow\" process corner.\n\nWhat I would like to simulate is, to set a process corner (ss/ff/tt..) and the apply local variation to the devices within each process corner.\n\nI think I am missing something in my understanding of process corners and MC simulations.\n\nCan anyone explain the missing parts ?\n\nI'm not sure what this \"MC global\" is that you are taking about. This might be something in the particular PDK/models you've got, but it's not how Spectre normally works. Other than corners (which are straightforward to understand), spectre has three different things it can simulate with monte carlo:\n\nProcess. This is where you have distributions for various parameters, and each monte carlo point randomises the parameter within that distribution, and then uses the value of that parameter everywhere. Effectively this is doing a global variation, and it means that you are effectively simulating lot to lot random variation, and excluding any local (mismatch) effects.\n\nMismatch. This is where you have distributions for various parameters (and it will be a different distribution than the process variation) and in each monte carlo point it randomises the parameter within that distribution for each instance in the design. So each instance will see a different value of that parameter, and hence it models the effective of local random variation. I find the term \"mismatch\" a little misleading because it's not really simulating mismatch, but mismatch is a consequence of the local random variation.\n\nAll. This first determines the Process (global) variation across the entire lot per point, and then each instance will have the local (mismatch) variation about that global process value. So you can think of it that the process variation moves the mean value for all devices for that point in the monte carlo, and then the mismatch (local) variation provides the device to device variation. Put another way, All is doing Process+Mismatch together\n\nThere's nothing in spectre that would apply process variation differently per instance (i.e. point 3 in your list above)\n\nSome foundry models are a bit odd however - they require you to use \"All\" all the time, and then the model section you pick ensures that the variation is appropriately computed. You'd need to check with the foundry (or their documentation) to understand exactly what they are doing.\n\nI always point out too that \"mismatch\" is actually modelling the remaining random local variation and is not trying to model systematic effects (e.g. due to poor layout alignment or proximity). Sometimes people worry about how they should be correlating the parameters to capture how well the layout is aligned, but in general that's not what Monte Carlo models capture. That said, a design which is sensitive to random local variation of instances is likely to also require well matched layout, so information about mismatch contributions can be useful to prioritise good layout practice (although understanding the design normally tells you that too).\n\nRegards,\n\nAndrew.\n\nDear HoWei,\n\nI might be able to shed a little more light on your question based on experience with our foundry. What may, or may not, be confusing you is the process cases offered by your foundry. Our foundry offers a set of process corners with two options - the standard corners (ss,ff,tt,sf, fs...) - as well as a second smaller set called \"global\" corners. They happened to be named similarly to the standard corners but include a \"g\" suffix. Hence, as an example, for the slow process case there are two corners - what are termed a \"total corner\" and a \"global corner\". The \"total corner\" is representative of the maximum device parameter variation including local device variation effects. However, it is not a statistical corner. The \"global\" corner is defined as the \"total\" corner minus the impact of \"local variation\". Hence, if you were to examine simulation results for a parameter using a \"total\" and \"global\" corner, you would find the range of variation will be less with the \"global\" corner than with the \"total\" corner.\n\nThe \"global\" corner is provided for use in statistical simulations. Hence, when performing a Monte-Carlo simulation, the \"global\" corner is selected - NOT the \"total\" corner.\n\nWhen simulating the impact of local variation in Monte-Carlo using ADE-XL, Assembler, or Maestro using the \"global\" corner, one must check the radio button to simulate \"Mismatch\" under the \"Statistical Variation\" section of the \"Monte-Carlo Sampling...\" panel and not the \"All\" nor the \"Process\" radio buttons to assess the impact of local variation.\n\nTo address your specific question:\n\n\"What I would like to simulate is, to set a process corner (ss/ff/tt..) and the apply local variation to the devices within each process corner.\"\n\na set of three Monte-Carlo simulation sets is required using the respective \"global\" corner for each case (ss/ff/tt) using the \"Mismatch\" radio button selected. You will find each will provide a different level of statistical variation. As a side note, in lieu of telling spectre to automatically determine the proper number of simulations to run to estimate parameter standard deviation, I usually initially run a large set (200 to 1000) and plot the value of the resulting standard deviation as a function of the number of simulations run. This provides a very good estimate of the impact of the number of Monte-Carlo simulations and its impact of my estimate for the standard deviation.\n\nI hope this helps explain your situation based on my experience with our foundry.\n\nShawn\n\nHi Andrew and Shawn,\n\nthanks for this insightful discussion - bthw. I am pretty sure I am using the same PDK as Shawn does ;-)\n\nI spend some hours on investigating the behaviour by observing the \"Vth\" for two NMOS instances (M0 and M1) versus different corners and MC setups. Our PDK-modelfile offers 4 different \"sections\" of Corner/MC simulation cases:\n\n1. \"Total_Corner\"\n\nThere we can select between sections \"ss, ff, tt, sf, fs\".\n\nThis sets the \"Vth\" for both M0/M1 to the same value without any difference between the two devices. It has no mismatch included. it does not matter whether I select \"Process/Mismatch/All\" - I always get the \"Vth\" for the selected corner.\n\n2. \"Global Corner + Local MC\"\n\nThere we can select between sections \"ttg_localmc, ssg_localmc, ...\" .\n\nSelecting \"Process\" sets the \"Vth\" for both devices to the same value (no mismatch), depending on the selected \"section\".\n\nSelecting \"Mismatch\" adds some variation between M0 and M0 \"Vth\" - that is the mismatch around the selected corner.\n\nE.g. if I want to see the mismatch of devices at the process corner \"fs\", I just select the section \"fsg_localmc\" and apply \"Mismatch or All\" (give same results because process cannot be varied, as it has been selected via section already).\n\n3. \"Local MC only\"\n\nThe section \"localmconly\" provides simple access to the \"tt\" corner.\n\nSelecting \"Process\" it results in the same as selecting section \"tt\". Selecting \"Mismatch\" results in the same as selecting \"ttg_localmc\".\n\n4. Global MC + Local MC\n\nThe section \"global_localmc\" applies monte-carlo to process and mismatch.\n\nSelecting \"Process\" varies the \"Vth\" somehow between the process corners (with normal-distribution around the \"tt\" mean), but both devices doe have the same \"Vth\" - no mismatch included. That is the only case, where the \"Vth\" is varied over the full range of \"Process\" corners.\n\nSelecting \"Mismatch\" applies variation to the \"Vth\" of the two instances M0 and M1 around the \"tt\" corner. This gives the same result as \"ttg_localmc\".\n\nSelecting \"All\" (this is actually the only case where \"All\" gives a different result as \"Mismatch\") combines the \"Process\" and \"Mismatch\" variations. The simulator first selects a \"Vth\" from the \"Process\" variation and applies it to both M0/M1, and then applies \"Mismatch\" to the instances, causing a different \"Vth\" in M0/M1 within the distribution of \"localmc\". The result is a full range of process and mismatch variation - but one cannot distinguish anymore which point belong to what corner (because it can be any value between corners) and it does not tell the distribution around dedicated corners. It might only be useful for yield-estimation, but not for matching in e.g. diffamp or for R2R-resistors.\n\nThats at least how I understood it eventually.\n\nDear HoWei,\n\nFirst your description of the four cases you outlined appears consistent with my understanding. Great!\n\nLet me attempt to provide my thoughts on your additional questions.\n\n> can you tell me how the variation resistors and MOS is simulated in Global_LocalMC ?\n\n> As I understand the NMOS values are varied with their mismatch distribution\n\n> around a specific Global (Process) point.\n\nI assume you also mean to include PMOS devices as well as NMOS devices as both will show variation if this condition is selected for your Monte-Carlo analysis.\n\n> But will the resistor values have an independent GlobalMC (Process) point\n\n> - means can it be the case that the NMOS are at the ff-corner and the\n\n> resistor is at ss-corner, and at the next MC point,\n\n> the NMOS are still at ff-corner and the resistors at ff-corner ?\n\n> I am wondering anyways if the resistor-values (in reality - not simulation)\n\n> are dependent or independent of the Process corner ?\n\nIf you examine the PDK you are using, this Monte-Carlo condition is mapped to the typical silicon process. It only invokes modeling information from the typical corner case. For each Monte-Carlo iteration, the process variation applied to MOS devices is identical, but the local variation will vary from device to device if Mismatch is selected. Discrete resistor variation (i.e., those not composed of MOS devices), however, is independent of MOS device variation based on how they are fabricated. Its sheet rho and dimensional parameters are not related physically to the sheet resistance nor dimensional varation of MOS devices. Hence, it is very possible that the resistor value in a given Monte-Carlo iteration may appear \"slower\" or \"faster\" than the corresponding MOS devices in the same iteration.\n\nDid I understand your concern, and does this make sense HoWei? I hope so anyway.\n\nShawn\n\nHi Shawn,\n\nI think you answered my questions (which was not very precisely given).\n\nI understand that PMOS/NMOS/N-Well-Resistors are correlated, but undergo mismatch variation between instances (like all other devices do).\n\nWhat I actually asking about was the correlation between *MOS and Poly resistors, and I think what you wrote makes sense, that those are not correlated to *MOS.\n\nWhich means it can happen that for any *MOS corner, the poly-resistors can have arbitrary value (high (slow) / low (fast) - in reality.\n\nAnd by looking into the PDK documentation for \"model_usage.pdf\" it seems that this is covered in simulation by the given modelfile sections (except for \"Total_Corner\" where \"ff-MOS\" is connected to \"ff-Res\" and \"ss-MOS\" is connected to \"ss-Res\" and all others \"sf/fs/tt\" are connected to \"tt-Res\").\n\nI will now have to do more simulations to find out what \"ff-Res\" means - I assume these are the low-resistance-values.\n\nAbove you wrote:\n\n>The \"total corner\" is representative of the maximum device parameter variation including local device variation effects. However,\n\n>it is not a statistical corner. The \"global\" corner is defined as the \"total\" corner minus the impact of \"local variation\". Hence, if you\n\n>were to examine simulation results for a parameter using a \"total\" and \"global\" corner, you would find the range of variation will\n\n>be less with the \"global\" corner than with the \"total\" corner.\n\nDuring my investigations I found the following \"mean\" values for a NMOS \"Vth\" different simulation cases (fictive numbers) for \"process only\" (no mismatch):\n\n1. Total_Corner: ff/fs/tt/sf/ss 300 / 350 / 400 / 500 /550\n\nI am wondering why ff and fs, as well as sf and ss do have different Vth values for NMOS - shouldn't these be the same ? Or are they measured/derived on different wafers and not assumed to be the same ?\n\n2. Global Corner + LocalMC: ffg_localmc / ssg_localmc 310 / 540\n\nHere I am expecting that \"ffg_*\" would have the same mean as \"ff\" above (same for \"ssg\" and \"ss\"). Why do they not have same mean ?\n\nIs it what you described above, that the \"ff\" value for \"Vth\" is mean+5*sigma, whereas \"ffg_*\" is mean-only ?\n\nBR\n\nHo"
    }
}