{
    "id": "dbpedia_7423_2",
    "rank": 18,
    "data": {
        "url": "https://communities.sas.com/t5/SAS-Procedures/Error-handling-for-missing-file-using-FILENAME-statement/td-p/61254",
        "read_more_link": "",
        "language": "en",
        "title": "Error handling for missing file using FILENAME statement.",
        "top_image": "https://communities.sas.com/html/assets/sas-comm-social-blue.png",
        "meta_img": "https://communities.sas.com/html/assets/sas-comm-social-blue.png",
        "images": [
            "https://communities.sas.com/t5/image/serverpage/avatar-name/mummy/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://communities.sas.com/legacyfs/online/a58428_tempImage7157652860136902530.png",
            "https://communities.sas.com/html/rank_icons/rank8-quartz-4dots.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/mummy/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/robowars/avatar-theme/candy/avatar-collection/robots/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank12-rhodocrosite-2dots.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/mummy/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://communities.sas.com/legacyfs/online/a64407_merrybell.png",
            "https://communities.sas.com/html/rank_icons/rank19-jade-9dots.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/mummy/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://communities.sas.com/html/@FE2E71CE1A1EA57ECF25C69F31FD30C8/emoticons/1f642.png",
            "https://communities.sas.com/legacyfs/online/a71076_XiaKeshan_Photo.png",
            "https://communities.sas.com/html/rank_icons/super-user-rank.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/robowars/avatar-theme/candy/avatar-collection/robots/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank12-rhodocrosite-2dots.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/robocyborg/avatar-theme/candy/avatar-collection/robots/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank6-fluorite-2dots.png",
            "https://communities.sas.com/legacyfs/online/a1288_os22.png",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/mummy/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/guitar/avatar-theme/candy/avatar-collection/music/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank6-fluorite-2dots.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/mummy/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://communities.sas.com/legacyfs/online/a64407_merrybell.png",
            "https://communities.sas.com/html/rank_icons/rank19-jade-9dots.png",
            "https://img.youtube.com/vi/mmD4roIFOWU/0.jpg",
            "https://communities.sas.com/t5/image/serverpage/image-id/91612i245D732FF24B323D/image-size/small?v=v2&px=200",
            "https://communities.sas.com/legacyfs/online/a1288_os22.png",
            "https://communities.sas.com/t5/image/serverpage/image-id/48165i677A113D7AE78DF0/image-dimensions/16x16?v=v2",
            "https://communities.sas.com/legacyfs/online/a58428_tempImage7157652860136902530.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/ghost/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/favicon/version/2?xdesc=1.0",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/guitar/avatar-theme/candy/avatar-collection/music/avatar-display-size/favicon/version/2?xdesc=1.0",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/robowars/avatar-theme/candy/avatar-collection/robots/avatar-display-size/favicon/version/2?xdesc=1.0",
            "https://communities.sas.com/legacyfs/online/a64407_merrybell.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/robocyborg/avatar-theme/candy/avatar-collection/robots/avatar-display-size/favicon/version/2?xdesc=1.0",
            "https://communities.sas.com/legacyfs/online/a71076_XiaKeshan_Photo.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/mummy/avatar-theme/candy/avatar-collection/monsters/avatar-display-size/favicon/version/2?xdesc=1.0",
            "https://communities.sas.com/skins/images/A2FEBF45D372CDF12DBD3E0B045CE498/responsive_peak/images/powered_by_khoros.svg"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "communities.sas.com",
            "user-id"
        ],
        "publish_date": "2011-01-10T16:20:36.112000+00:00",
        "summary": "",
        "meta_description": "I relatively new to SAS but a strong mainframe COBOL/Assembler coder. Is there error handling logic in SAS that will intercept and reset the return",
        "meta_lang": "en",
        "meta_favicon": "https://communities.sas.com/html/@86D798D128D0FA03C10624935AA29945/assets/favicon.ico",
        "meta_site_name": "",
        "canonical_link": "https://communities.sas.com/t5/SAS-Procedures/Error-handling-for-missing-file-using-FILENAME-statement/td-p/61254",
        "text": "Obsidian | Level 7\n\nI relatively new to SAS but a strong mainframe COBOL/Assembler coder. Is there error handling logic in SAS that will intercept and reset the return code back to a job stream? I have a simple SAS job that takes current days date - 1 and adds that date variable to the end of a file name to map and store in a pdb. When the file hasn't been created, I don't want my job to fail. Simple go on to the next step of the job stream and continue. Any help/suggestions would be appreciated. Thanks!\n\nHere is my simple SAS job:\n\nDATA _NULL_;\n\nDTRUN=TODAY()-1;\n\nDTRUN1=(PUT(DTRUN,YYMMDD6.));\n\nCALL SYMPUT('DYYMMDD',DTRUN1);\n\nSTOP;\n\nRUN;\n\nDATA LNX_USERS;\n\nFILENAME LXGSTMEM \"SYS90H.LNXMEM.D&DYYMMDD\" DISP=SHR;\n\nINFILE LXGSTMEM DELIMITER=',' DSD FIRSTOBS=2;\n\nINPUT GUEST :$8.\n\nDATETIME :$15.\n\nTOTMEM :8.\n\nKBMEMFR :8.\n\nKBMEMUS :8.\n\nPCTMEMUS :5.2\n\nKBBUFFRS :8.\n\nKBCACHED :8.\n\nKBSWPFR :8.\n\nKBSWPUS :8.\n\nPCTSWPUS :5.2\n\nKBSWPCAD :8.;\n\nLNXDATE = TODAY()-1;\n\n%PUT SYSERR=&SYSERR;\n\nHere is the output when the file is missing:\n\n7 !\n\n8\n\n9 DATA LNX_USERS;\n\n10\n\n11 FILENAME LXGSTMEM \"SYS90H.LNXMEM.D&DYYMMDD\" DISP=SHR;\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110109\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110109\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110109\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\n11 !\n\n12\n\n13 INFILE LXGSTMEM DELIMITER=',' DSD FIRSTOBS=2;\n\n14\n\n15 INPUT GUEST :$8.\n\n16 DATETIME :$15.\n\n17 TOTMEM :8.\n\n18 KBMEMFR :8.\n\n19 KBMEMUS :8.\n\n20 PCTMEMUS :5.2\n\n21 KBBUFFRS :8.\n\n22 KBCACHED :8.\n\n23 KBSWPFR :8.\n\n24 KBSWPUS :8.\n\n25 PCTSWPUS :5.2\n\n26 KBSWPCAD :8.;\n\n27\n\n28 LNXDATE = TODAY()-1;\n\n29\n\n30 %PUT SYSERR=&SYSERR;\n\nSYSERR=0\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nNOTE: THE SAS SYSTEM STOPPED PROCESSING THIS STEP BECAUSE OF ERRORS.\n\nNOTE: SAS SET OPTION OBS=0 AND WILL CONTINUE TO CHECK STATEMENTS. THIS MAY CAUSE\n\nWARNING: THE DATA SET WORK.LNX_USERS MAY BE INCOMPLETE. WHEN THIS STEP WAS STOP\n\nNOTE: THE DATA STATEMENT USED THE FOLLOWING RESOURCES:\n\nCPU TIME - 00:00:00.02\n\nELAPSED TIME - 00:00:00.21\n\nEXCP COUNT - 91\n\nTASK MEMORY - 3806K (120K DATA, 3686K PROGRAM)\n\nTOTAL MEMORY - 17249K (6048K DATA, 11201K PROGRAM)\n\nNOTE: THE ADDRESS SPACE HAS USED A MAXIMUM OF 664K BELOW THE LINE AND 17772K ABO\n\nERROR: SAS ENDED DUE TO ERRORS.\n\nERROR: SAS ENDED DUE TO ERRORS.\n\nERROR: SAS ENDED DUE TO ERRORS.\n\n3 THE SAS SYSTEM\n\nYOU SPECIFIED: OPTIONS ERRORABEND;.\n\nYOU SPECIFIED: OPTIONS ERRORABEND;.\n\nYOU SPECIFIED: OPTIONS ERRORABEND;.\n\nERROR: ERRORS PRINTED ON PAGES 2,3.\n\nERROR: ERRORS PRINTED ON PAGES 2,3.\n\nERROR: ERRORS PRINTED ON PAGES 2,3.\n\nObsidian | Level 7\n\n| In reply to Peter_C\n\n> you can test the return code from a filename\n\n> statement in macro variable &SYSFILRC\n\n> you also have a function allowing your data step to\n\n> detect whether the file exists\n\n> if not fileexist( \"SYS90H.LNXMEM.D&DYYMMDD\" ) then\n\n> abort return 23 ;\n\n>\n\n> and the SAS step return code should be 23\n\n> which your system job scheduler or JCL can test for.\n\nThanks Peter, this looks like what I am somewhat used to. Buuuttttt,......\n\nI put your if statement in my DATA LNX_USERS step and the job still fails with a U0999 return code.\n\n7 !\n\n8\n\n9 DATA LNX_USERS;\n\n10\n\n11 FILENAME LXGSTMEM \"SYS90H.LNXMEM.D&DYYMMDD\" DISP=SHR;\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110111\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110111\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110111\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\n11 !\n\n12\n\n13 INFILE LXGSTMEM DELIMITER=',' DSD FIRSTOBS=2;\n\n14\n\n15 INPUT GUEST :$8.\n\n16 DATETIME :$15.\n\n17 TOTMEM :8.\n\n18 KBMEMFR :8.\n\n19 KBMEMUS :8.\n\n20 PCTMEMUS :5.2\n\n21 KBBUFFRS :8.\n\n22 KBCACHED :8.\n\n23 KBSWPFR :8.\n\n24 KBSWPUS :8.\n\n25 PCTSWPUS :5.2\n\n26 KBSWPCAD :8.;\n\n27\n\n28 LNXDATE = TODAY()-1;\n\n29\n\n30 IF NOT FILEEXIST(\"SYS90H.LNXMEM.D&DYYMMDD\") THEN ABORT RETURN 4;\n\n31\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nDo you think that the job fails at the FILENAME statement and ignores the rest? Thanks for your input!\n\nObsidian | Level 7\n\n| In reply to data_null__\n\ndata _null_;\n\nThat works, to a point. If the file doesn't exist, I need to set the return code to a specific value so I can flag it in the job stream. So would I just create an ELSE statement off the IF FILEEXIST, setting the return code to, say 4, by:\n\nIF FILEEXISTS(FILENAME) THEN DO;\n\n...\n\n...\n\n...\n\nELSE ABORT RETURN 4;\n\nI'll give it a try while your mulling that over!\n\nFluorite | Level 6\n\n| In reply to Peter_C\n\nHere is one more way you can try\n\nSAS cannot determine during the compilation phase that the data file is not available and it will start the execution. We have control! But now we have to create the link with the data file and test whether it is available in the DATA step ourselves:\n\nFILENAME myinput dummy;\n\n%LET Filename =d:\\inputfiels\\myfile.csv;\n\nDATA mydata;\n\nRETAIN InputFile \"&Filename\" ErrorCount 0;\n\nIF FILEEXIST(\"&filename\") THEN DO\n\nINFILE myinput DELIMITER='09'x MISSOVER DSD LRECL=32767 FIRSTOBS=2\n\nFILEVAR=InputFile END=eof;\n\nInformat .....\n\nInput........\n\nIF _ERROR_ THEN ErrorCount +1;\n\nIF eof THEN CALL SYMPUTX('Status',ErrorCount);\n\nEND;\n\nELSE DO;\n\nPUT \"Input file &filename not available\";\n\nCALL SYMPUTX('Status',-1);\n\nSTOP;\n\nEND;\n\nRUN;\n\nThe FILEVAR option in the INFILE statement allows you to specify the input file at execution time. So what we do is\n\nwe store the path and file name in the macro variable Filename and assign that value to the variable InputFile. Next\n\nwe test whether the file is there with the FILEEXIST function and if it exists we use it in the FILEVAR option of the\n\nINFILE statement to read the input. If it does not exist, we issue the error message and stop the DATA step\n\ngracefully with the STOP statement. No error messages or warnings in the SAS log.\n\nObsidian | Level 7\n\n| In reply to OS2Rules\n\nHi OS2 Rules,\n\nI did that in my last run, after looking up the OPTIONS statement. It stopped abending but the job finished with a return code = 8. It looks as if it is ignoring my FILEEXIST condition statement completely. I even moved it up immediately after the FILENAME statement and no change.\n\n1\n\n2 THE SAS SYSTEM\n\n2 OPTIONS NOERRABEND;\n\n3\n\n4 DATA _NULL_;\n\n5 DTRUN=TODAY()-1;\n\n6 DTRUN1=(PUT(DTRUN,YYMMDD6.));\n\n7 CALL SYMPUT('DYYMMDD',DTRUN1);\n\n8 STOP;\n\n9 RUN;\n\nNOTE: THE DATA STATEMENT USED THE FOLLOWING RESOURCES:\n\nCPU TIME - 00:00:00.00\n\nELAPSED TIME - 00:00:00.04\n\nEXCP COUNT - 23\n\nTASK MEMORY - 3222K (123K DATA, 3099K PROGRAM)\n\nTOTAL MEMORY - 16989K (6048K DATA, 10941K PROGRAM)\n\nNOTE: THE ADDRESS SPACE HAS USED A MAXIMUM OF 664K BELOW THE LINE AND 17508K ABO\n\n9 !\n\n10\n\n11 DATA LNX_USERS;\n\n12\n\n13 FILENAME LXGSTMEM \"SYS90H.LNXMEM.D&DYYMMDD\" DISP=SHR;\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110109\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110109\n\nERROR: SVC99 ERROR RC=4, REASON=1708 : IKJ56228I DATA SET SYS90H.LNXMEM.D110109\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\nERROR: ERROR IN THE FILENAME STATEMENT.\n\n13 !\n\n14\n\n15 IF NOT FILEEXIST(\"SYS90H.LNXMEM.D&DYYMMDD\") THEN ABORT RETURN 4;\n\n16\n\n17 INFILE LXGSTMEM DELIMITER=',' DSD FIRSTOBS=2;\n\n18\n\n19 INPUT GUEST :$8.\n\n20 DATETIME :$15.\n\n21 TOTMEM :8.\n\n22 KBMEMFR :8.\n\n23 KBMEMUS :8.\n\n24 PCTMEMUS :5.2\n\n25 KBBUFFRS :8.\n\n26 KBCACHED :8.\n\n27 KBSWPFR :8.\n\n28 KBSWPUS :8.\n\n29 PCTSWPUS :5.2\n\n30 KBSWPCAD :8.;\n\n31\n\n32 LNXDATE = TODAY()-1;\n\n33\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nERROR: NO LOGICAL ASSIGN FOR FILENAME LXGSTMEM.\n\nNOTE: THE SAS SYSTEM STOPPED PROCESSING THIS STEP BECAUSE OF ERRORS.\n\nNOTE: SAS SET OPTION OBS=0 AND WILL CONTINUE TO CHECK STATEMENTS. THIS MAY CAUSE\n\nWARNING: THE DATA SET WORK.LNX_USERS MAY BE INCOMPLETE. WHEN THIS STEP WAS STOP\n\nNOTE: THE DATA STATEMENT USED THE FOLLOWING RESOURCES:\n\nCPU TIME - 00:00:00.02\n\nELAPSED TIME - 00:00:00.21\n\nEXCP COUNT - 98\n\nTASK MEMORY - 3806K (120K DATA, 3686K PROGRAM)\n\nTOTAL MEMORY - 17249K (6048K DATA, 11201K PROGRAM)\n\nNOTE: THE ADDRESS SPACE HAS USED A MAXIMUM OF 664K BELOW THE LINE AND 17772K ABO\n\n3 THE SAS SYSTEM\n\nERROR: ERRORS PRINTED ON PAGE 2.\n\nERROR: ERRORS PRINTED ON PAGE 2.\n\nERROR: ERRORS PRINTED ON PAGE 2.\n\nNOTE: THE SAS SESSION USED 2.32 CPU SECONDS AND 17249K.\n\nNOTE: THE ADDRESS SPACE HAS USED A MAXIMUM OF 664K BELOW THE LINE AND 17772K ABO\n\nNOTE: SAS INSTITUTE INC., SAS CAMPUS DRIVE, CARY, NC USA 27513-2414\n\nFluorite | Level 6\n\n| In reply to G_I_Jeff\n\nHere's some of what I've been doing recently. (Big caveat: all of this is from memory since\n\nI haven't coded a single line of SAS for more than three months now).\n\nThe basic idea is to modularize the code which allows to execute parts of it conditionally.\n\nSo my code usually looks somewhat like\n\n[pre]\n\n%include ddname(member1) ;\n\n%include ddname(member2) ;\n\n%include ddname(member3) ;\n\n[/pre]\n\nBy putting an asterisk in front of \"%include\" parts of the code can be deactivated.\n\nSAS's idiosyncratic way of interpreting, compiling, executing the program code allows\n\nto make this process dynamic.\n\nSo back to some sample code\n\n[pre]\n\n... some code that executes unconditionally ...\n\n/* macro variables can be created/modified in open code */\n\n/* where 'open code' means that the statements are not */\n\n/* embedded in a data/proc step nor in a macro routine either */\n\n%let dsname = THE.MVS.DATASET.NAME ;\n\n%let _catlgd = %sysfunc(dsncatlgd(\"&dsname\")) ; /* returns 0 or 1 */\n\n%let _filexist = %sysfunc(fileexist(\"&dsname\")) ; /* returns 0 or 1 */\n\n/* function DSNCATLGD has the advantage of not allocating the dataset */\n\n/* dynamically. Instead it does a catalog lookup. */\n\n/* Choose whichever function is more appropriate for your case. */\n\n/* now we use these values to extract either a blank or an asterisk */\n\n/* from %str(* ) */\n\n%let _asterisk1 = %sysfunc(substr(%str(* ),%eval(&_catlgd +1),1)) ;\n\n%let _asterisk2 = %sysfunc(substr(%str(* ),%eval(&_filexist+1),1)) ;\n\n/* as a result &_asterisk determines whether the next statement */\n\n/* will be interpreted as a comment statement or an executable statement */\n\n/* i.e. whether member \"member\" will be included or not */\n\n&_asterisk1%include ddname(member) ; /* member being included conditionally */\n\n... some more code that executes unconditionally ...\n\n[/pre]\n\nHope this helps. Or at least gives you some ideas.\n\nAnd of course, I'm not using long variable names like &_asterisk in my programs."
    }
}