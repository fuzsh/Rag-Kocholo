{
    "id": "dbpedia_7423_2",
    "rank": 8,
    "data": {
        "url": "https://www.cisco.com/c/en/us/td/docs/security/firepower/2100/troubleshoot_fxos/b_2100_CLI_Troubleshoot/b_2100_CLI_Troubleshoot_chapter_011.html",
        "read_more_link": "",
        "language": "en",
        "title": "Cisco FXOS Troubleshooting Guide for the Firepower 1000/2100 and Secure Firewall 3100/4200 with Threat Defense",
        "top_image": "",
        "meta_img": "",
        "images": [
            "https://www.cisco.com/etc/designs/cdc/fw/i/ic_clear_gray.png",
            "https://www.cisco.com/etc/designs/cdc/fw/i/ic_clear_gray.png",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/c/dam/cdc/i/Feedback_OceanBlue.png",
            "https://www.cisco.com/etc/designs/cdc/fw/i/icon_lock_small.png",
            "https://cisco.112.2o7.net/b/ss/cisco-mobile/5/12345"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2024-08-08T00:01:39",
        "summary": "",
        "meta_description": "Image Management",
        "meta_lang": "en",
        "meta_favicon": "",
        "meta_site_name": "Cisco",
        "canonical_link": "https://www.cisco.com/c/en/us/td/docs/security/firepower/2100/troubleshoot_fxos/b_2100_CLI_Troubleshoot/b_2100_CLI_Troubleshoot_chapter_011.html",
        "text": "Image Management\n\nAbout Disaster Recovery\n\nYou may need to reset the configuration, reinstall the image, recover the FXOS password, or completely reimage the system. See the following available procedures:\n\nErase the configuration and restart the system with the same image—All configurations are removed, and thethreat defense is reinstalled using the current image. Note that after performing this procedure, you will have to reconfigure the system, including admin password and connectivity information. See Reimage the System with the Base Install Software Version.\n\nPerform a factory reset from ROMMON (admin password recovery)—All configurations are removed, and threat defense is reinstalled using the current image. Note that after performing this procedure, you will have to reconfigure the system, including admin password and connectivity information. See Perform a Factory Reset from ROMMON (Password Reset).\n\nReimage the system with a new version—All configurations are removed, and threat defense is reinstalled using the a new software image. Note that after performing this procedure, you will have to reconfigure the system, including admin password and connectivity information. See Reimage the System with a New Software Version.\n\nReformat the SSD File System—Reformats the SSD if you see disk corruption messages. All configurations are removed. Note that after performing this procedure, you will have to reconfigure the system, including admin password and connectivity information. See Reformat the SSD File System (Firepower 2100).\n\nBoot from ROMMON—Boots FXOS from ROMMON if you cannot boot up. You can then reformat the eMMC and reinstall the software image. This procedure retains all configuration. See Boot from ROMMON.\n\nErase all configuration and images—This option restores your system to its factory default settings, and erases the images. The procedure requires you to boot the system over TFTP, download the threat defense software, and reconfigure the entire system. See Perform a Complete Reimage.\n\nChange the admin password—This procedure lets you change the admin password from the threat defense CLI. See Change the Admin Password.\n\nChange the admin password if threat defense is offline—This procedure lets you change the admin password from FXOS. See Change the Admin Password if Threat Defense is Offline. Note that if the threat defense is online, you must change the admin password using the threat defense CLI.\n\nReimage the System with the Base Install Software Version\n\nThis procedure erases all configuration except the base install software version setting. When the system comes back up after the erase configuration operation, it will run with the startup version of threat defense.\n\nIf your current running version is an upgrade-only image, you will have to re-upgrade your threat defense after performing this procedure. For example, version 6.2.2.x is an upgrade-only image. If you elect to perform this procedure on your 6.2.2.x system, then the base install package (version 6.2.1.x) will be reinstalled, and you will need to re-upgrade to version 6.2.2.x using the Secure Firewall Management Center or Secure Firewall device manager. In this case, the FXOS version may not revert back to a lower version. This mismatch may cause failures in a High Availability configuration. For this scenario, we recommended that you perform a complete reimage of the system (see Perform a Complete Reimage for more information).\n\nBefore you begin\n\nVerify that you are in the FXOS CLI context. If you connect to the Firepower 1000/2100, Secure Firewall 3100, or Secure Firewall 4200 device via serial console, you will automatically connect to the FXOS CLI context. If you are in the threat defense CLI context, you must first switch to the FXOS CLI context with the connect fxos command.\n\nTake note of your appliance management IP address configuration and copy the information shown from the following command:\n\nfirepower # scope fabric a firepower /fabric-interconnect # show detail\n\nTake note of your threat defense base install version using the following commands. The Startup Version column shows your base install version. The Running Version shows any upgrades you applied to the base install version.\n\nfirepower# scope ssa firepower /ssa # show app-instance Application Name Slot ID Admin State Operational State Running Version Startup Version Cluster Oper State -------------------- ---------- --------------- -------------------- --------------- --------------- ------------------ ftd 1 Enabled Online 6.2.2.49 6.2.1.341 Not Applicable\n\nDisassociate your devices from Smart Licensing.\n\nDeregister your devices from the cloud tenant (if applicable). See Deregister From Cloud.\n\nTo reimage your Secure Firewall 3100 device to threat defense 7.3.0 version, you must have ROMMON version 1.1.08 or above. If the current ROMMON version is less than 1.1.08, you must upgrade ROMMON by upgrading to ASA 9.19 or later. You can also use the management center or device manager to upgrade the threat defense to 7.3.0 (see Threat Defense Reimage for more information).\n\nYou cannot reimage the Secure Firewall 3100 device to threat defense 7.4 using the base install software version due to the introduction of a single image for installation and upgrading of the threat defense image. Instead, perform a complete reimage of the system. For more information, see Perform a Complete Reimage.\n\nProcedure\n\nStep 1\n\nIn the FXOS CLI, connect to local-mgmt:\n\nfirepower # connect local-mgmt\n\nStep 2\n\nErase all configuration:\n\nfirepower(local-mgmt) # erase configuration\n\nExample:\n\nfirepower(local-mgmt)# erase configuration All configurations will be erased and system will reboot. Are you sure? (yes/no):yes Removing all the configuration. Please wait.... Configurations are cleaned up. Rebooting....\n\nStep 3\n\nOnce the system comes back up, you can check the state of the application with the show app-instance command. Note that the password login is now set to the default admin/Admin123 .\n\nExample:\n\nfirepower# scope ssa firepower /ssa # show app-instance Application Name Slot ID Admin State Operational State Running Version Startup Version Cluster Oper State -------------------- ---------- --------------- -------------------- --------------- --------------- ------------------ ftd 1 Disabled Installing 6.2.1-1314 Not Applicable\n\nExample:\n\nfirepower /ssa # show app-instance Application Name Slot ID Admin State Operational State Running Version Startup Version Cluster Oper State -------------------- ---------- --------------- -------------------- --------------- --------------- ------------------ ftd 1 Enabled Online 6.2.1.10140\n\nWhat to do next\n\nComplete the setup tasks in the getting started guide, and upgrade to latest version if necessary.\n\nPerform a Factory Reset from ROMMON (Password Reset)\n\nIf you cannot log into FXOS (either because you forgot the password, or the SSD disk1 file system was corrupted), you can restore the FXOS and threat defense configuration to the factory default using ROMMON. The admin password is reset to the default Admin123. If you know the password, and want to restore the factory default configuration from within FXOS, see Reimage the System with the Base Install Software Version.\n\nBefore you begin\n\nTo reimage your Secure Firewall 3100 device to threat defense 7.3.0 version, you must have ROMMON version 1.1.08 or above. If the current ROMMON version is less than 1.1.08, you must upgrade ROMMON by upgrading to ASA 9.19 or later. You can also use the management center or device manager to upgrade threat defense version to 7.3.0 (see Threat Defense Reimage for more information).\n\nProcedure\n\nStep 1\n\nPower on the device. When you see the following prompt, hit ESC to stop the boot.\n\nExample: Use BREAK or ESC to interrupt boot. Use SPACE to begin boot immediately.\n\nStep 2\n\nVerify the ROMMON version:\n\nrommon 1 > show info\n\nExample:\n\nFirepower 1000 and 2100 devices\n\nrommon 1 > show info Cisco System ROMMON, Version 1.0.06, RELEASE SOFTWARE Copyright (c) 1994-2017 by Cisco Systems, Inc. Compiled Wed 11/01/2017 18:38:59.66 by builder\n\nSecure Firewall 3100 devices\n\nrommon 1 > show info Cisco System ROMMON, Version 1.1.08 , RELEASE SOFTWARE Copyright (c) 1994-2022 by Cisco Systems, Inc. Compiled Fri 06/10/2022 10:25:43.78 by Administrator\n\nSecure Firewall 4200 devices\n\nCisco System ROMMON, Version 1.0.15, RELEASE SOFTWARE Copyright (c) 1994-2023 by Cisco Systems, Inc. Compiled Thu 06/15/2023 14:41:54.43 by builder\n\nStep 3\n\nFactory reset the device.\n\nFor ROMMON version 1.0.06 or later:\n\nrommon 2 > factory-reset\n\nFor ROMMON version 1.0.04:\n\nrommon 2 > password_reset\n\nExample:\n\nFirepower 1000 and 2100 devices\n\nrommon 2 > factory-reset Warning: All configuration will be permanently lost with this operation and application will be initialized to default configuration. This operation cannot be undone after booting the application image. Are you sure you would like to continue ? yes/no [no]: yes Please type 'ERASE' to confirm the operation or any other value to cancel: ERASE Performing factory reset... File size is 0x0000001b Located .boot_string Image size 27 inode num 16, bks cnt 1 blk size 8*512 Rommon will continue to boot disk0: fxos-k8-fp2k-lfbff.2.3.1.132.SSB Are you sure you would like to continue ? yes/no [no]: yes File size is 0x0817a870 Located fxos-k8-fp2k-lfbff.2.3.1.132.SSB\n\nExample:\n\nSecure Firewall 3100 devices\n\nrommon 2 > factory-reset Warning: All configuration will be permanently lost with this operation and application will be initialized to default configuration. This operation cannot be undone after booting the application image. Are you sure you would like to continue ? yes/no [no]: yes Please type 'ERASE' to confirm the operation or any other value to cancel: ERASE Performing factory reset... File size is 0x0000001b Located .boot_string Image size 27 inode num 16, bks cnt 1 blk size 8*512 Rommon will continue to boot disk0: Cisco_FTD_SSP_FP3K_Upgrade-7.3.0-4.sh.REL.tar Are you sure you would like to continue ? yes/no [no]: yes File size is 0x0817a870 Located Cisco_FTD_SSP_FP3K_Upgrade-7.3.0-4.sh.REL.tar\n\nExample:\n\nSecure Firewall 4200 devices\n\nrommon 2 > factory-reset Warning: All configuration will be permanently lost with this operation and application will be initialized to default configuration. This operation cannot be undone after booting the application image. Are you sure you would like to continue ? yes/no [no]: yes Please type 'ERASE' to confirm the operation or any other value to cancel: ERASE Performing factory reset... File size is 0x0000001b Located .boot_string Image size 27 inode num 16, bks cnt 1 blk size 8*512 Rommon will continue to boot disk0: Cisco_Secure_FW_TD_4200-7.4.0-1044.sh.DEV.tar Are you sure you would like to continue ? yes/no [no]: yes File size is 0x0817a870 Located Cisco_Secure_FW_TD_4200-7.4.0-1044.sh.DEV.tar\n\nStep 4\n\nIf the system does not prompt you to boot, enter the boot command:\n\nrommon 3 > boot\n\nWhat to do next\n\nComplete the setup tasks in the getting started guide.\n\nReimage the System with a New Software Version\n\nThis procedure allows you to reimage the system with a new software version. After performing this procedure, you will need to reconfigure the management IP address and other configuration parameters on the device. If you want to upgrade the software without erasing your configuration, see the upgrade guide.\n\nBefore you begin\n\nVerify that you are in the FXOS CLI context. If you connect to the Firepower 1000/2100, Secure Firewall 3100, or or Secure Firewall 4200 device via serial console, you will automatically connect to the FXOS CLI context. If you are in the threat defense CLI context, you must first switch to the FXOS CLI context with the connect fxos command.\n\nTake note of your appliance management IP address configuration, and copy the information shown from the following command:\n\nfirepower # scope fabric a firepower /fabric-interconnect # show detail\n\nDisassociate your devices from Smart Licensing.\n\nDeregister your devices from the cloud tenant (if applicable). See Deregister From Cloud.\n\nTo reimage your Secure Firewall 3100 device to threat defense version 7.3.0, you must have ROMMON version 1.1.08 or above. If the current ROMMON version is less than 1.1.08, you must upgrade ROMMON by upgrading to ASA 9.19 or later. You can also use the management center or device manager to upgrade threat defense version to 7.3.0 (see Threat Defense Reimage for more information).\n\nProcedure\n\nStep 1\n\nDownload the software bundle to your local computer, or to a USB flash drive.\n\nStep 2\n\nIf using a USB drive, insert the USB drive into the USB port on the appliance.\n\nStep 3\n\nIn FXOS, enter the system scope and verify the current version running on your system:\n\nfirepower # scope system\n\nfirepower /system # show version detail\n\nStep 4\n\nEnter the firmware scope:\n\nfirepower # scope firmware\n\nStep 5\n\nDownload the new software package. If you are using a USB drive to download the software package, use the following syntax:\n\nfirepower # scope firmware\n\nfirepower /firmware # download image usbA:image_name\n\nNote that the image_name is the output from the show version detail command in step 3, above.\n\nFor example:\n\nfirepower /firmware # download image usbA:cisco-ftd-fp2k.6.2.1-36.SPA\n\nYou can also use FTP, SCP, SFTP, or TFTP to copy the threat defense software package to the device:\n\nfirepower /firmware # download image tftp/ftp/scp/sftp://path to the image, including the server root /image name\n\nExample for Firepower 1000 and 2100 devices:\n\nfirepower /firmware # download image tftp://example.cisco.com/fxos-2k.6.2.1-1314.SPA\n\nExample for Secure Firewall 3100 devices:\n\nfirepower /firmware # download image scp://example.cisco.com/auto/Cisco_FTD_SSP_FP3K_Upgrade-7.3.0-14.sh.REL.tar\n\nExample for Secure Firewall 4200 devices:\n\nfirepower-4215 /firmware # download image tftp://172.29.185.101:/Cisco_Secure_FW_TD_4200-7.4.0-1044.sh.REL.tar\n\nStep 6\n\nDisplay the download task to monitor the download progress:\n\nfirepower /firmware #show download-task\n\nOnce Downloaded displays in the output of the Status column, the download is complete.\n\nExample:\n\nSecure Firewall 3100 devices:\n\nfirepower 3110 /firmware # show download task File Name Protocol Server Port Userid State --------- -------- ------ ---- ------------ Cisco_FTD_SSP_FP3K_Upgrade-7.3.0-14.sh.REL.tar Scp 172.23.205.217 0 <xxxxxx> Downloaded\n\nExample:\n\nSecure Firewall 4200 devices:\n\nfirepower-4215 /firmware # show download-task Download task: File Name Protocol Server Port Userid State --------- -------- --------------- ---------- --------------- ----- Cisco_Secure_FW_TD_4200-7.4.0-1044.sh.REL.tar Tftp 172.29.185.101 0 Downloading\n\nStep 7\n\nOnce the download is complete, display the software packages installed on your system and copy the displayed bundle image version from the output:\n\nfirepower /firmware # show package\n\nExample:\n\nFirepower 1000 and 2100 devices\n\nfirepower /firmware # show package Name Package-Vers --------------------------------------------- ------------ cisco-ftd-fp2k.6.2.1-1314.SPA 6.2.1-1314\n\nIn the above example, 6.2.1-1314 is the security pack version.\n\nExample:\n\nSecure Firewall 3100 devices\n\nfirepower 3110 /firmware # show package Name Package Vers --------------------------------------------- --------------- Cisco_FTD_SSP_FP3K_Upgrade-7.3.0-14.sh.REL.tar 7.3.0-14\n\nExample:\n\nSecure Firewall 4200 devices\n\nfirepower-4215 /firmware # show package Name Package-Vers --------------------------------------------- ------------ Cisco_Secure_FW_TD_4200-7.4.0-1044.sh.REL.tar 7.4.0-1044\n\nIn the above example, 7.3.0-14 is the security pack version.\n\nStep 8\n\nEnter the auto-install scope:\n\nfirepower /firmware # scope auto-install\n\nStep 9\n\nInstall the new application software package (where the version is the output from show package, above):\n\nfirepower /firmware/auto-install # install security-pack version version\n\nExample:\n\nfirepower 3110 /firmware/auto install # install security pack version 7.3.0-14 … firepower /firmware # connect ftd > show version -----------------[ firepower 3100 ]----------------- Model : Cisco Secure Firewall 3110 Threat Defense (80) Version 7.3.0 (Build\n\nWhat to do next\n\nComplete the setup tasks in the getting started guide.\n\nDownload a Package for Multi-Instance Mode\n\nThis procedure lets you download an older threat defense package to a multi-instance chassis, so you can add an instance using that version. Both the FXOS and threat defense images are included in the same package, so if you upgraded the chassis FXOS version, the old, matching threat defense version will still be available for instances.\n\nYou won't be able to use a threat defense that is not compatible with the running FXOS version. For example, you cannot use a newer threat defense without upgrading your chassis first.\n\nBefore you begin\n\nVerify that you are in the FXOS CLI. If you connect to the device from the console, you will automatically connect to the FXOS CLI. If you SSH to the device, you will connect to the threat defense CLI, and you must use the connect fxos command to access the FXOS CLI.\n\nProcedure\n\nReformat the SSD File System (Firepower 2100)\n\nIf you successfully logged into FXOS, but you see disk corruption error messages, you can reformat SSD1 where the FXOS and threat defense configuration is stored. This procedure restores the FXOS configuration to the factory default. The admin password is reset to the default Admin123. This procedure also resets the threat defense configuration.\n\nThis procedure does not apply to the Firepower 1000 and Secure Firewall 3100, which do not allow you to erase the SSD while still retaining the startup image.\n\nProcedure\n\nBoot from ROMMON\n\nIf you cannot boot the device, it will boot into ROMMON where you can boot FXOS from a TFTP server or a USB drive formatted as EXT2/3/4 or VFAT/FAT32 . After booting into FXOS, you can then reformat the eMMC (the internal flash device that holds the software images). After you reformat, then you need to re-download the images to the eMMC. This procedure retains all configuration, which is stored on the separate ssd1.\n\nThe eMMC file system might get corrupted because of a power failure or other rare condition.\n\nBefore you begin\n\nYou must have console access for this procedure.\n\nTo reimage your Secure Firewall 3100 device to threat defense version 7.3.0, you must have ROMMON version 1.1.08 or above. If the current ROMMON version is less than 1.1.08, you must upgrade ROMMON by upgrading to ASA 9.19 or later. You can also use the management center or device manager to upgrade threat defense version to 7.3.0 (see Threat Defense Reimage for more information).\n\nProcedure\n\nPerform a Complete Reimage\n\nThis procedure reformats the entire system, erases the images, and returns it to its factory default settings. After performing this procedure, you must download the new software images and reconfigure your system.\n\nNote\n\nAfter performing this procedure, the admin password is reset to Admin123.\n\nBefore you begin\n\nTo reimage your Secure Firewall 3100 device to threat defense version 7.3.0, you must have ROMMON version 1.1.08 or above. If the current ROMMON version is less than 1.1.08, you must upgrade ROMMON by upgrading to ASA 9.19 or later. You can also use the management center or device manager to upgrade the threat defense version to 7.3.0 (see Threat Defense for more information).\n\nYou must have console access for this procedure.\n\nDownload the threat defense package to a TFTP server or a USB drive formatted as EXT2/3/4 or VFAT/FAT32.\n\nSee: https://www.cisco.com/go/ftd-software\n\nIf you use USB, install the drive before you start. If you insert the USB drive while the system is running, you will need to reboot the system before it will recognize the USB drive.\n\nProcedure\n\nStep 1\n\nDeregister your devices from the cloud tenant (if applicable). See Deregister From Cloud.\n\nStep 2\n\nConnect to the FXOS CLI from the console port.\n\nLog in as admin and the admin password.\n\nStep 3\n\nReformat the system.\n\nconnect local-mgmt\n\nformat everything\n\nEnter yes, and the device reboots.\n\nExample:\n\nfirepower# connect local-mgmt firepower(local-mgmt)# format everything All configuration and bootable images will be lost. Do you still want to format? (yes/no):yes\n\nStep 4\n\nPress Esc during the bootup when prompted to reach the ROMMON prompt. Pay close attention to the monitor.\n\nExample:\n\n******************************************************************************* Cisco System ROMMON, Version 1.0.03, RELEASE SOFTWARE Copyright (c) 1994-2017 by Cisco Systems, Inc. Compiled Thu 04/06/2017 12:16:16.21 by builder ******************************************************************************* Current image running: Boot ROM0 Last reset cause: ResetRequest DIMM_1/1 : Present DIMM_2/1 : Present Platform FPR-2130 with 32768 MBytes of main memory BIOS has been successfully locked !! MAC Address: 0c:75:bd:08:c9:80 Use BREAK or ESC to interrupt boot. Use SPACE to begin boot immediately.\n\nPress Esc at this point.\n\nStep 5\n\nBoot from the threat defense package on a USB drive formatted as EXT2/3/4 or VFAT/FAT32, or boot over the network using TFTP.\n\nIf you want to boot from USB:\n\nboot usb:/path/filename\n\nUse the dir usb: command to view the disk contents.\n\nExample:\n\nrommon 1 > dir usb: rommon 2 > boot usb:/Cisco_FTD_SSP_FP3K_Upgrade-7.4.1-01.sh.REL.tar\n\nIf you want to boot from TFTP:\n\nSet the network settings for Management 1/1, and load the threat defense package using the following ROMMON commands.\n\naddress management_ip_address\n\nnetmask subnet_mask\n\nserver tftp_ip_address\n\ngateway gateway_ip_address\n\nfilepath/filename\n\nset\n\nsync\n\ntftpdnld -b\n\nSee the following information:\n\nset —Shows the network settings. You can also use the ping command to verify connectivity to the server.\n\nsync —Saves the network settings.\n\ntftpdnld -b —Loads the threat defense package.\n\nExample:\n\nrommon 1 > address 10.86.118.4 rommon 2 > netmask 255.255.252.0 rommon 3 > server 10.86.118.21 rommon 4 > gateway 10.86.118.1 rommon 5 > file Cisco_FTD_SSP_FP3K_Upgrade-7.3.0-01.sh.REL.tar rommon 6 > set ROMMON Variable Settings: ADDRESS=10.86.118.4 NETMASK=255.255.252.0 GATEWAY=10.86.118.21 SERVER=10.86.118.21 IMAGE=cisco-asa-fp2k.9.8.2.SPA CONFIG= PS1=\"rommon ! > \" rommon 7 > sync rommon 8 > tftpdnld -b Enable boot bundle: tftp_reqsize = 268435456 ADDRESS: 10.86.118.4 NETMASK: 255.255.252.0 GATEWAY: 10.86.118.21 SERVER: 10.86.118.1 IMAGE: Cisco_FTD_SSP_FP3K_Upgrade-7.4.1-01.sh.REL.tar MACADDR: d4:2c:44:0c:26:00 VERBOSITY: Progress RETRY: 40 PKTTIMEOUT: 7200 BLKSIZE: 1460 CHECKSUM: Yes PORT: GbE/1 PHYMODE: Auto Detect link up Receiving Cisco_FTD_SSP_FP3K_Upgrade-7.4.1-01.sh.REL.tar from 10.86.118.21!!!!!!!! […]\n\nPing to troubleshoot connectivity to the server:\n\nrommon 1 > ping 10.86.118.21 Sending 10, 32-byte ICMP Echoes to 10.86.118.21 timeout is 4 seconds !!!!!!!!!! Success rate is 100 percent (10/10) rommon 2 >\n\nStep 6\n\nOnce the system comes up, log in to FXOS using the default username: admin and password: Admin123.\n\nStep 7\n\nConfigure the Management interface so you can download the threat defense image from a server.\n\nIf you use USB, you can skip this step.\n\nEnter the fabric-interconnect scope:\n\nscope fabric-interconnect a\n\nSet the new management IP information:\n\nset out-of-band static ip ip netmask netmask gw gateway\n\nCommit the configuration:\n\ncommit-buffer\n\nStep 8\n\nDownload and boot the threat defense package. Because you booted temporarily from USB or TFTP, you must still download the image to the local disk.\n\nDownload the package.\n\nscope firmware\n\ndownload image url\n\nshow download-task\n\nYou can download the package from the same TFTP server or USB drive you used earlier, or another server reachable on Management 1/1. Specify the URL for the file being imported using one of the following:\n\nftp://username@server/[path/]image_name\n\nscp://username@server/[path/]image_name\n\nsftp://username@server/[path/]image_name\n\ntftp://server[:port]/[path/]image_name\n\nusbA:/path/filename\n\nExample:\n\nfirepower-2110# scope firmware firepower-2110 /firmware # download image tftp://10.86.118.21/Cisco_FTD_SSP_FP3K_Upgrade-7.4.1-01.sh.REL.tar Please use the command 'show download-task' or 'show download-task detail' to check download progress. firepower-2110 /firmware # show download-task Download task: File Name Protocol Server Port Userid State --------- -------- --------------- ---------- --------------- ----- Cisco_FTD_SSP_FP3K_Upgrade-7.4.1-01.sh.REL.tar Tftp 10.88.29.21 0 Downloaded\n\nWhen the package finishes downloading (Downloaded state), boot the package.\n\nshow package\n\nscope auto-install\n\ninstall security-pack version version force\n\nIn the show package output, copy the Package-Vers value for the security-pack version number. The chassis installs the threat defense package and reboots.\n\nStep 9\n\nAfter the software package is installed, continue with the setup instructions in the getting started guide for your hardware platform.\n\nChange the Admin Password\n\nAfter reimaging your device, the admin password is reset to Admin123. You will be prompted to change the password when you first log in. If you want to change the password later, use this threat defense CLI procedure to change the admin password to a new string.\n\nProcedure\n\nStep 1\n\nConnect to the threat defense application CLI:\n\nfirepower-chassis # connect ftd\n\nStep 2\n\nVerify that the admin user account is present in the users table:\n\n> show user\n\nExample:\n\n> show user Login UID Auth Access Enabled Reset Exp Warn Str Lock Max admin 100 Local Config Enabled No Never N/A Dis No 0\n\nStep 3\n\nSet the new password for the admin user account:\n\nfirepower-chassis # configure user password admin\n\nExample:\n\n> configure user password admin Enter current password: Enter new password for user admin: Confirm new password for user admin:\n\nChange the Admin Password if Threat Defense is Offline\n\nAfter reimaging your device, the admin password is reset to Admin123. You will be prompted to change the password when you first log in. If you want to change the password later, use this procedure to change the admin password to a new string if threat defense is offline or otherwise unavailable. Note that if threat defense is online, you will need to change the admin password using the threat defense CLI (see Change the Admin Password).\n\nNote\n\nThe procedure to change the admin password via the FXOS CLI depends on the version of threat defense you are currently running.\n\nBefore you begin\n\nVerify that you are in the FXOS CLI context. If you connect to the Firepower 1000/2100 or Secure Firewall 3100 device via serial console, you will automatically connect to the FXOS CLI context. If you are in the threat defense CLI context, you must first switch to the FXOS CLI context with the connect fxos command.\n\nProcedure\n\nStep 1\n\nFrom the FXOS CLI, enter the security scope:\n\nfirepower # scope security\n\nStep 2\n\n(Firepower Version 6.4 and later) You must reauthenticate the old admin password in order to set a new password:\n\nfirepower /security* # set password\n\nExample:\n\nFPR-2120# scope security FPR-2120# /security # set password Enter old password: Enter new password: Confirm new password: firepower-2120 /security* # commit-buffer\n\n(Firepower Version 6.3 and earlier) View the current list of local users. If you have just reimaged your device, admin will be the only user in this list:\n\nfirepower /security # show local-user\n\nExample:\n\nFPR-2120# scope security FPR-2120 /security # show local-user User Name First Name Last name --------------- --------------- --------- admin\n\n(Firepower Version 6.3 and earlier) Enter the admin local user scope:\n\nfirepower /security # enter local-user admin\n\n(Firepower Version 6.3 and earlier) Set the new password for user admin:\n\nfirepower /security/local-user # set password\n\nExample:\n\nFPR-2100 /security # enter local-user admin FPR-2100 /security/local-user # set password Enter a password: cisco Confirm the password: cisco\n\nStep 3\n\nCommit the configuration:\n\nfirepower /security/local-user* # commit-buffer\n\nDeregister From Cloud\n\nIf you reimage or factory reset your Firepower 1000/2100 or Secure Firewall 3100 device for a new purpose (for example, for transfer to a new group within your company, or after purchasing the device from a third party vendor), you may need to deregister the device from the cloud tenancy.\n\nIf you have access to the cloud (CDO) account to which the device was registered, log into that account and delete the Firepower 1000/2100 or Secure Firewall 3100 device.\n\nIf you do not have access to the cloud account, use the following procedure to deregister your Firepower 1000/2100 or Secure Firewall 3100 device from the cloud tenancy using the FXOS CLI.\n\nBefore you begin\n\nVerify that you are in the FXOS CLI context. If you connect to the Firepower 1000/2100 or Secure Firewall 3100 device via serial console, you will automatically connect to the FXOS CLI context. If you are in the threat defense CLI context, you must first switch to the FXOS CLI context with the connect fxos command.\n\nVerify whether your device has access to the cloud:\n\nfirepower # scope fabric a firepower /fabric-interconnect # show detail\n\nIf no management IP address displays in the show detail output, you must first configure a management IP for your device:\n\nEnter the fabric interconnect scope:\n\nfirepower # scope fabric-interconnect\n\nSet the new management IP information:\n\nfirepower /fabric-interconnect # set out-of-band static ip ip netmask netmask gateway gateway\n\nCommit the configuration:\n\nfirepower /fabric-interconnect # commit buffer\n\nProcedure\n\nStep 1\n\nConnect to the local-management command shell:\n\nfirepower # connect local\n\nStep 2\n\nDeregister your device from the cloud:\n\nfirepower(local-mgmt)# cloud deregister\n\nExample\n\nfirepower # connect local firepower(local-mgmt) # cloud deregister"
    }
}