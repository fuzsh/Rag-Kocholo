{
    "id": "dbpedia_3407_3",
    "rank": 34,
    "data": {
        "url": "https://pdfcoffee.com/tatsuno-pump-file-2018-08-24-15-54-17-pdf-free.html",
        "read_more_link": "",
        "language": "en",
        "title": "TATSUNO PUMP File",
        "top_image": "https://pdfcoffee.com/img/tatsuno-pump-file-2018-08-24-15-54-17-pdf-free.jpg",
        "meta_img": "https://pdfcoffee.com/img/tatsuno-pump-file-2018-08-24-15-54-17-pdf-free.jpg",
        "images": [
            "https://pdfcoffee.com/pdfcoffee/assets/img/pdfcoffee_logo.png",
            "https://pdfcoffee.com/img/200x200/tatsuno-pump-file-2018-08-24-15-54-17-pdf-free.jpg",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/thumbnail_placeholder.png",
            "https://pdfcoffee.com/pdfcoffee/assets/img/pdfcoffee_logo.png"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "Guest"
        ],
        "publish_date": "2018-08-24T00:00:00",
        "summary": "",
        "meta_description": "PTS-1 controller over fuel dispensers and ATG systems for petrol stationsTECHNICAL GUIDE (PCB board modification: PTS-...",
        "meta_lang": "en",
        "meta_favicon": "https://pdfcoffee.com/pdfcoffee/assets/img/apple-icon-57x57.png",
        "meta_site_name": "pdfcoffee.com",
        "canonical_link": "https://pdfcoffee.com/tatsuno-pump-file-2018-08-24-15-54-17-pdf-free.html",
        "text": "Citation preview\n\nPTS-1 controller over fuel dispensers and ATG systems for petrol stations\n\nTECHNICAL GUIDE (PCB board modification: PTS-1, revision: PTS-U5-v7) Review date: 21 March, 2020\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCONTENT REVISION HISTORY ................................................................................................................................................ 6 PURPOSE OF THE DOCUMENT .............................................................................................................................. 7 TECHNICAL FEATURES ........................................................................................................................................... 8 Appointment ................................................................................................................................................. 8 General specification ..................................................................................................................................... 8 SUPPORTED FUEL DISPENSERS COMMUNICATION PROTOCOLS .......................................................................... 9 SUPPORTED ATG SYSTEMS COMMUNICATION PROTOCOLS ..............................................................................13 BOARD CONNECTORS AND INTERFACES.............................................................................................................15 COMMUNICATION PORTS ...................................................................................................................................16 COMPLETE SET ....................................................................................................................................................17 CONNECTION TO POWER SUPPLY .......................................................................................................................18 CONNECTION TO CONTROL SYSTEM...................................................................................................................19 INSTALLATION REQUIREMENTS FOR PETROL STATION ......................................................................................20 CONNECTION TO FUEL DISPENSERS ...................................................................................................................22 CONNECTION TO ATG SYSTEMS AND PROBES ....................................................................................................23 SENDING OF PUMPS SALES DATA TO CONSOLES ...............................................................................................24 CONVERSION BETWEEN PUMPS PROTOCOLS ....................................................................................................25 CONVERSION BETWEEN ATG CONSOLES PROTOCOLS .......................................................................................26 MONITORING OVER FUEL DISPENSERS AND TANKS ...........................................................................................27 FUEL DISPENSERS SALES DATA FOR ATG CONSOLES FOR RECONCILIATION ......................................................28 PTS CONTROLLER MULTI POS SYSTEMS OPERATION..........................................................................................29 PTS CONTROLLER CONFIGURATION AND TESTING UTILITY ................................................................................30 General information .................................................................................................................................... 30 Scheme of connections ............................................................................................................................... 31 Starting PTS configuration utility ............................................................................................................. 31 Tab “General” .............................................................................................................................................. 32 Tab “Pumps configuration” ......................................................................................................................... 33 Tab “Probes configuration” ......................................................................................................................... 34 Tab “Parameters” ........................................................................................................................................ 35 Tab “Control” ............................................................................................................................................... 37 Tab “Logging” .............................................................................................................................................. 39 Tab “Firmware update” ............................................................................................................................... 44 Tab “Diagnostics ”........................................................................................................................................ 47 BUILT-IN PUMPs SIMULATOR .............................................................................................................................49 BUILT-IN ATG PROBEs SIMULATOR .....................................................................................................................51 PTS controller API (APPLICATION PROGRAMMING INTERFACES) ......................................................................53 C and C++ API............................................................................................................................................... 54 C# PTS controller configuration and testing utility...................................................................................... 56 C# application .............................................................................................................................................. 58 C# API........................................................................................................................................................... 60 Delphi API .................................................................................................................................................... 62 Java API ........................................................................................................................................................ 64 Python API ................................................................................................................................................... 66 Visual Basic .NET PTS controller configuration and testing utility .............................................................. 68 Visual Basic .NET application ....................................................................................................................... 70 Visual Basic .NET API.................................................................................................................................... 72 PTS controller COM-object for MS Windows OS ......................................................................................... 74 www.technotrade.ua\n\npage 2 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nVisual Basic 6.0 application ......................................................................................................................... 75 PTS controller UniPump communication protocol...................................................................................... 77 PTS CONTROLLER SOFTWARE DEVELOPMENT KIT (SDK) ....................................................................................78 PTS controller SDK appointment ................................................................................................................. 78 PTS controller SDK structure ....................................................................................................................... 78 PTS controller SDK technical features ......................................................................................................... 79 Specification ............................................................................................................................................ 79 PTS controller SDK connections scheme ..................................................................................................... 80 UniPump pumps software simulator........................................................................................................... 81 Purpose .................................................................................................................................................... 81 Main view ................................................................................................................................................ 81 Configuration ........................................................................................................................................... 82 UniProbe ATG probes software simulator .................................................................................................. 84 Purpose .................................................................................................................................................... 84 Main view ................................................................................................................................................ 84 Configuration ........................................................................................................................................... 85 Open source PTS controller .NET application (C# and VB.NET) .................................................................. 87 Purpose .................................................................................................................................................... 87 Start ......................................................................................................................................................... 88 Configuration of PTS controller ............................................................................................................... 88 Main view ................................................................................................................................................ 90 Settings of fuel point icons ...................................................................................................................... 91 Reading of fuel point total counters........................................................................................................ 92 Settings .................................................................................................................................................... 93 Displaying ATG systems probes states .................................................................................................... 94 Settings of ATG probe icons .................................................................................................................... 95 TiT.PTS classes help file ........................................................................................................................... 96 PumpDemo utility........................................................................................................................................ 97 PTS controller test utilities .......................................................................................................................... 99 Purpose .................................................................................................................................................... 99 PTS terminal utility .................................................................................................................................... 100 Purpose .................................................................................................................................................. 100 Step-by-step configuration of the PTS controller SDK .............................................................................. 101 Purpose .................................................................................................................................................. 101 Step 1. Downloading of PTS controller SDK software ........................................................................... 101 Step 2. Assembling PTS controller SDK cabling and connection to PC .................................................. 101 Step 3. Starting of the PTS controller configuration utility Pts_config.exe ........................................... 104 Step 4. Configuration of pump ports ..................................................................................................... 105 Step 5. Configuration of probes ports ................................................................................................... 106 Step 6. Configuration of PTS controller parameters ............................................................................. 107 Step 7. Configuration of pumps parameters ......................................................................................... 108 Step 8. Configuration of pumps software simulator ............................................................................. 109 Step 9. Configuration of ATG probes software simulator ..................................................................... 111 Step 10. Control over pumps and ATG probes in PTS controller configuration and testing utility ....... 112 Step 11. Configuration of PTS controller .NET application for control over pumps and ATG probes ... 114 EXAMPLES OF FUEL DISPENSERS CONNECTION SCHEMES ...............................................................................120 Gilbarco dispenser connection scheme..................................................................................................... 121 Wayne Dresser dispenser connection scheme (RS-485 interface) ........................................................... 124 Wayne Dresser dispenser connection scheme (current loop interface) ................................................... 125 www.technotrade.ua\n\npage 3 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTatsuno (Japan) dispenser connection scheme ........................................................................................ 126 Tatsuno Europe (former Benc) dispenser connection scheme ................................................................. 127 Tokheim dispenser connection scheme .................................................................................................... 128 Tokheim dispenser connection scheme (RS-485 interface) ...................................................................... 131 Tokheim India dispenser connection scheme ........................................................................................... 133 Nuovo Pignone dispenser connection scheme (RS-485 interface) ........................................................... 134 Nuovo Pignone dispenser connection scheme (4-wire current loop interface) ....................................... 135 Logitron dispenser connection scheme (3-wire current loop interface) .................................................. 136 Bennett dispenser connection scheme (RS-485 interface) ....................................................................... 137 Bennett dispenser connection scheme (2-wire current loop interface) ................................................... 138 Batchen Email dispenser connection scheme ........................................................................................... 139 Scheidt & Bachmann T20 dispenser connection scheme.......................................................................... 140 Coptron dispenser connection scheme ..................................................................................................... 141 Midco dispenser connection scheme ........................................................................................................ 142 Petrotec dispenser connection scheme .................................................................................................... 143 Galileo dispenser connection scheme ....................................................................................................... 144 Prowalco dispenser connection scheme ................................................................................................... 145 Emgaz Dragon / Fornovo LPG dispenser with EsiWelma pumphead connection scheme........................ 146 Maser dispenser connection scheme ........................................................................................................ 147 Petposan-S4 / Meksan-S4 / Europump-S4 / Yenen dispensers connection scheme ................................ 148 Yenen dispensers connection scheme ...................................................................................................... 149 Petposan-Beta / Europump-Beta dispensers connection scheme ............................................................ 150 EuroPump dispenser connection scheme ................................................................................................. 151 Mekser dispenser connection scheme ...................................................................................................... 152 Fuelsis dispenser connection scheme ....................................................................................................... 153 Mepsan Unimep dispenser connection scheme ....................................................................................... 154 Meksan / Wayne SU86 dispenser connection scheme ............................................................................. 155 Baransay dispenser connection scheme ................................................................................................... 156 2A LPG dispenser connection scheme....................................................................................................... 157 Falcon dispenser connection scheme........................................................................................................ 158 Korea EnE (LG EnE) dispenser connection scheme ................................................................................... 159 Dong Hwa Prime dispenser connection scheme ....................................................................................... 160 Gallagher (PEC) dispenser connection scheme ......................................................................................... 161 Compac dispenser connection scheme ..................................................................................................... 162 Safe dispenser connection scheme ........................................................................................................... 163 MS Gas dispenser connection scheme ...................................................................................................... 164 Shibata dispenser connection scheme ...................................................................................................... 165 Aspro Develco dispenser connection scheme ........................................................................................... 166 HongYang dispenser connection scheme.................................................................................................. 167 Lanfeng dispenser connection scheme ..................................................................................................... 168 Sanki dispenser connection scheme ......................................................................................................... 169 Datian Machines dispenser connection scheme ....................................................................................... 171 Eaglestar dispenser connection scheme ................................................................................................... 172 Blue Sky dispenser connection scheme..................................................................................................... 173 Topaz dispenser connection scheme ........................................................................................................ 174 Shelf dispenser connection scheme .......................................................................................................... 175 UniCon dispenser connection scheme ...................................................................................................... 176 EXAMPLES OF ATG SYSTEMS CONNECTION SCHEMES .....................................................................................177 Gilbarco Veeder Root TLS consoles connection scheme ........................................................................... 178 www.technotrade.ua\n\npage 4 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nStart Italiana console connection scheme................................................................................................. 178 Start Italiana wired probes connection scheme........................................................................................ 179 Start Italiana wireless probes connection scheme .................................................................................... 179 Alisonic wired probes connection scheme ................................................................................................ 180 Alisonic wireless probes connection scheme ............................................................................................ 180 Struna ATG system connection scheme .................................................................................................... 181 OPW Site Sentinel ATG system connection scheme ................................................................................. 181 Colibri ATG system connection scheme .................................................................................................... 182 Fafnir ATG system connection scheme ..................................................................................................... 182 Hectronic ATG probes connection scheme ............................................................................................... 183 Vega radar level meters............................................................................................................................. 183 Windbell magnetostrictive probes connection scheme............................................................................ 184 North Falcon wired probes connection scheme ....................................................................................... 185 North Falcon wireless probes connection scheme.................................................................................... 185 PTS CONTROLLER PCB BOARD ..........................................................................................................................186 PCB board top view ................................................................................................................................... 186 PCB board bottom view............................................................................................................................. 186 Board dimensions ...................................................................................................................................... 187 RS-232 PORT CABLE CONNECTOR .....................................................................................................................188 CERTIFICATES ....................................................................................................................................................189 ORDER INFORMATION ......................................................................................................................................190\n\nwww.technotrade.ua\n\npage 5 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nREVISION HISTORY REV\n\nDATE\n\nR01\n\n2017.11.21\n\nEvgeniy Vasyliev\n\nAll\n\nFirst release of PTS-1 board revision\n\nR02\n\n2018.06.09\n\nEvgeniy Vasyliev\n\nAll\n\nMinor fixes\n\nR03\n\n2018.08.15\n\nEvgeniy Vasyliev\n\nAll\n\nModification of PTS PCB board\n\nR04\n\n2018.11.17\n\nEvgeniy Vasyliev\n\nSupported communication protocols, examples of connection schemes\n\nUpdated list of supported communication protocols of fuel dispensers and ATG systems, added examples of connection to fuel dispensers and ATG systems\n\nR05\n\n2019.03.01\n\nEvgeniy Vasyliev\n\nSupported input communication protocols\n\nCommunication with PTS controller using pump and ATG consoles protocols\n\nR06\n\n2020.03.21\n\nEvgeniy Vasyliev\n\nGeneral information update\n\nRegular document review\n\nwww.technotrade.ua\n\nBY\n\nSECTIONS\n\nDESCRIPTION\n\npage 6 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nPURPOSE OF THE DOCUMENT This Technical Guide is intended for studying of PTS controller over fuel dispensers and ATG systems for petrol stations. It contains basic information regarding its − technical characteristics − supported communication protocols of fuel dispensers and ATG systems − board interfaces and connectors − configuration − supplied application programming interfaces (API) − description, configuration and connection of PTS controller software development kit (SDK) − schemes of connection to fuel dispensers and ATG systems − board schematics − cabling Information regarding connection to specific fuel dispensers and correspondent configuration of PTS controller can be received upon request to Technotrade LLC company. Given technical manual describes the latest hardware version of the PTS controller board (PTS controller PCB board modification PTS-1). Technical manuals of older versions of the PTS controller board (PTS-U5, PTS-U3, PTS-U2 and PTS-U) with their corresponding connection schemes can be downloaded from PTS controller web-page: http://www.technotrade.ua/fuel-pump-controller.html. Due to a reason that PTS controller firmware is constantly being developed in direction of improvement of its possibilities, changes are possible in final version, which are not described in given Technical Guide. During the system development process given Technical Guide is also expanded and updated and new chapters are added. Latest version of this Technical Guide can be downloaded from the PTS controller webpage: http://www.technotrade.ua/fuel-pump-controller.html. Technotrade LLC hereby permits reproduction of this document as may be required by any of the customers or OEMs wishing to use it. This document has been carefully prepared and is believed to be accurate. However, Technotrade LLC, its employees and its agents do not assume responsibility for its use either directly or indirectly. Technotrade LLC shall not be liable for technical or editorial errors or omissions which may appear in this document. Technotrade LLC reserves a right to make changes to this document at any time without notice. Prospective users of this document should contact Technotrade LLC at the time they wish to use PTS controller together with their products to become aware of any updates that may apply. In case if you find any mistakes, omissions in this document or have any suggestions on improvements to this document, please feel free to e-mail them to our support mailbox: [email protected]. We will be grateful to you for this valuable information. All technical questions regarding the PTS controller are welcome to be asked on support mailbox: [email protected]. Our support team will be glad to help you. Also, you can call to us or visit us on:\n\nTechnotrade LLC Ukraine, 04114 Kiev, Priorska str. 10, office 1 Tel: +38-044-502-46-55, +38-044-502-46-77 Web: www.technotrade.ua Mail: [email protected] www.technotrade.ua\n\npage 7 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTECHNICAL FEATURES Appointment PTS-1 controller over fuel dispensers and ATG (automatic tank gauge) systems for petrol stations serves as a protocols converter. It knows communication protocols of a great variety of fuel dispensers and ATG probes and allows control over any of them in exactly the same way using its own input communication protocol or popular pumps and ATG systems communication protocols. POS system (cash register, payment terminal) should not matter what is the brand of fuel dispenser or ATG system connected – it simply communicates to the PTS controller the same way regardless the brand of fuel dispensers and ATG systems used, PTS controller undertakes all work on communication with fuel dispensers and ATG systems using their native communication protocol and takes into account all their peculiarities.\n\nThis completely simplifies work for a POS system developer: by having implemented input common communication protocol of PTS controller the POS becomes able to provide control over any of fuel dispensers and ATG systems supported by PTS controller. PTS controller itself converts input communication protocol into proprietary communication protocols of fuel dispensers and ATG systems. Thus, the time required for development of POS system for petrol stations is significantly reduced. PTS controller can be called a forecourt controller and can be used together with POS systems, cash registers, OPTs (outdoor payment terminals) and other control systems for petrol stations in order to provide control over fuel dispensers, LPG (liquified petroleum gas) dispensers, CNG (compressed natural gas) dispensers and various brands of ATG systems at petrol stations and storage depots. PTS controller is supplied with a rich set of APIs (application programming interfaces) developed under most popular programming languages and environments in order to provide comfortable and quick implementation of the PTS controller into control systems for petrol stations (POS system, cash register, OPT terminal, etc).\n\nGeneral specification ## 1 2 3 4 5\n\nPARAMETER Power supply voltage Current consumption Temperature range Weight Overall dimensions\n\nwww.technotrade.ua\n\nVALUE 12 V DC 400 mA max -40°C ÷ +80°C\n\n120 g 85 x 58 x 30 mm page 8 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nSUPPORTED FUEL DISPENSERS COMMUNICATION PROTOCOLS Baud rate is configured for pump ports in PTS controller independently on the used communication protocol. Some dispensers may demand using interface converter boards to RS-485 interface (depends on electronics of used pumphead in dispenser). ## 1 2 3 4\n\nFUEL DISPENSER BRAND 2A ACTRONIC ADAST (ADAMOV SYSTEMS) AG WALKER\n\n5\n\nAGIRA\n\n6 7 8\n\nANGI International ARIEL ASPRO\n\n9 10 11 12 13\n\nASSYTECH ASTRON AZT BARANSAY BATCHEN\n\n14\n\nBENNETT\n\n15\n\nBLUE SKY\n\n16 17 18 19\n\nCENSTAR CFT Clean Fuel CHANGLONG COMPAC\n\n20 21 22 23 24 25\n\nCOPTRON CORITEC DATIAN MACHINES DEM G. SPYRIDES DEVELCO DINT\n\nwww.technotrade.ua\n\nPROTOCOL NAME S4-Dart PEC Pump Communication Protocol Adast EasyCall SPDC-1, MPDC-1 PEC Pump Communication Protocol, PumpControl, Develco Gilbarco Two-Wire PumpControl PumpControl, Develco, Coritec Dart TIT UniPump AZT 2.0 Gilbarco Two-Wire Gilbarco Electroline, Gilbarco MPP, PumpControl, Maser, PEC Pump Communication Protocol Bennett pump dispenser protocol (current loop), Bennett pump dispenser protocol (RS-485 Fleet), Bennett pump dispenser protocol (RS-485 Retail) Blue Sky 6-6-4 protocol, Blue Sky 8-8-6 protocol, LT protocol, LY protocol, JP protocol Censtar protocol Gilbarco Two-Wire CHANGLONG pumps protocol PEC Pump Communication Protocol, Gilbarco Australia Dart Coritec WS 16 communication protocol Wayne Dart Develco Tokheim Controller-Dispenser Communication protocol page 9 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\n26 27\n\nDONG HWA PRIME DURULSAN\n\n28 29 30 31 32 33 34 35 36 37 38 39 40 41 42\n\nEAGLESTAR EKOSIS EMGAZ DRAGON EPCO ESIWELMA EUROPUMP FALCON LPG FLOW FORNOVO GAS FUELQUIP FUELSIS GALILEO GASLIN GERKON GILBARCO\n\n43 44 45 46\n\nGREENFIELD HAKO HITACHI HONG YANG\n\n47\n\nIMW\n\n48 49 50 51 52 53\n\nINTERMECH KALVACHA KIEVNIIGAZ KOREA ENE KPG-2 KRAUS\n\n54 55\n\nKWANGSHIN LANFENG\n\n56 57 58\n\nLG ENE LOGITRON MASER\n\n59 60 61 62\n\nMEKSAN / WAYNE SU86 MEKSER MEPSAN MIDCO\n\nwww.technotrade.ua\n\nReview date: 21 March, 2020\n\n(UDC) Prime pump interface Dart, Gilbarco Two-Wire Eaglestar Gilbarco Two-Wire Marconi PumaLAN Epco protocol specification Marconi PumaLAN S4-Dart Falcon Easycall Marconi PumaLAN PEC Pump Communication Protocol S4-Dart PumpControl S4-Dart TIT UniPump Gilbarco Two-Wire, Extended Two-Wire Appendix Gilbarco Two-wire TIT UniPump SS-LAN protocol HongYang FZ-protocol, HongYang 886 communication protocol, HongYang 886 MPD communication protocol PumpControl, Tokheim UDC PEC Pump Communication Protocol Kalvacha TIT UniGaz EnE Dispenser POS protocol TIT UniGaz MNET design specification, Gilbarco Two-wire KS-NET protocol RS–232 protocol, RS–485 protocol, SS-LAN protocol EnE Dispenser POS protocol Marconi PumaLAN Maser, Gilbarco Two-wire Wayne Dart S4-Dart S4-Dart Midco Proprietary Pump Protocol (versions 3.10, 3.11, page 10 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\n63 64 65 66 67 68\n\nMM PETRO (ZAP) MOTOGAZ MS GAS NARA NUOVA MIGAS NUOVO PIGNONE\n\n69 70\n\nORCA PEC (GALLAGHER FUEL SYSTEMS)\n\n71 72 73 74 75 76 77\n\nPECO PEGASUS PETPOSAN PETROEQUIP PETROMECCANICA PETROTEC PROWALCO\n\n78 79 80\n\nPUMP CONTROL PUMPTRONICS REAL-TECH\n\n81 82\n\nRIX SAFE\n\n83\n\nSALZKOTTEN\n\n84\n\nSANKI\n\n85 86 87\n\nSEA BIRD SHELF SCHEIDT & BACHMANN\n\n88 89 90 91\n\nSHIBATA SLAVUTICH SOMO PETRO STAR\n\nwww.technotrade.ua\n\nReview date: 21 March, 2020\n\n3.12) MM Petro ZAP RS-485 PumpControl SK protocol AZT 2.0 Dart Nuovo Pignone RS-485, Nuovo Pignone Current Loop 4-wire, Wayne Dart SS-LAN PEC Pump Communication Protocol, Gilbarco Australia SS-LAN Arion1 OpenProtocol S4-Dart Lanfeng protocol Wayne Dart Petrotec HDX protocol SPDC-1 / MPDC-1, SPDC-2 / MPDC-2, Salesmaker & ICON PumpControl Gilbarco Two-Wire Blue Sky, SS-LAN PEC Pump Communication Protocol SAFE PMII Graf, PumpControl ER3 Data interface, Gilbarco Two-Wire, Marconi Logitron PumaLAN Sanki Comm., Sanki Russia 664, Sanki Russia 765, AZT 2.0, Sanki General, Sanki Australia, Sanki Global Blue Sky Shelf T02, V11 SS-LAN Slavutich FD-Link POS protocol HongYang 886 communication protocol, HongYang 886 MPD communication protocol page 11 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\n92\n\nTATSUNO (JAPAN)\n\n93\n\nTATSUNO EUROPE (FORMER BENC)\n\n94\n\nTEKSER\n\n95\n\nTOKHEIM\n\n96 97 98 99\n\nTOKHEIM INDIA TOKICO TOMINAGA TOPAZ\n\n100 101 102 103 104\n\nTRANSPONDER UCAR ELEKTRIC UNICON-TIT VANZETTI WAYNE DRESSER\n\n105 WAYNE PIGNONE 106 YENEN 107 ZCHENG GENUINE MACHINES\n\nwww.technotrade.ua\n\nReview date: 21 March, 2020\n\nTatsuno SS-LAN, Extended Digits Number protocol Tatsuno Benc PDE, Logitron PumaLAN Wayne Dart, Wayne US Current Loop Tokheim Controller-Dispenser Communication protocol (UDC), Logitron PumaLAN TQCL serial communication protocol Tokico SS-LAN Tominaga SS-LAN Topaz Electro, Iskra ver. 1.72 PEC Pump Communication Protocol S4-Dart TIT UniPump Logitron PumaLAN Wayne Dart, Wayne US Current Loop Wayne Dart S4-Dart, Maser Zcheng communication protocol\n\npage 12 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nSUPPORTED ATG SYSTEMS COMMUNICATION PROTOCOLS Communication parameters (baud rate, parity control, data and stop bits) are configured for probe ports in PTS controller independently on the used communication protocol. ## 1 2\n\nATG SYSTEM BRAND ACCU ALISONIC\n\n3 4 5 6\n\nASSYTECH BLUESKY DUT-E EAGLESTAR\n\n7 8\n\nEBW ENRAF\n\n9 10\n\nESCORT FD FAFNIR\n\n11 12\n\nFRANKLIN FUELING GAMICOS\n\n13\n\nGILBARCO VEEDER ROOT\n\n14\n\nHECTRONIC\n\n15 16 17 18 19 20 21\n\nHONG YANG HUMANENTEC INCON LABKO MTS ATG SENSORS ND NORTH FALCON\n\n22 23 24\n\nOMNICOMM OMNTEC OPW\n\n25\n\nQINGDAO GUIHE\n\n26 27 28\n\nRCS EPSILON SENSOR START ITALIANA\n\n29\n\nSTRUNA\n\nwww.technotrade.ua\n\nPROTOCOL NAME PD-300 Communication Protocol Alisonic, Gilbarco Veeder Root Assytech Gilbarco Veeder Root COM protocol Modbus RTU, Smart-probe communication protocol Gilbarco Veeder Root Enraf Height protocol, Enraf Volume protocol COM protocol Fafnir VISY-Quick, Gilbarco Veeder Root, Torrix RS-485 MODBUS Gilbarco Veeder Root GLT622 console communication protocol, Modbus communication protocol for radar probes Gilbarco Veeder Root, Gilbarco Dispenser Interface Protocol (DIM) Hectronic HLS, VR-Dip Gilbarco Veeder Root 520S Communication Protocol Gilbarco Veeder Root Labkotec POS interface protocol MTS USTD ND UUS-1 Alisonic, Gilbarco Veeder Root COM protocol Gilbarco Veeder Root Petrovend4, Petrovend4 ACR, Gilbarco Veeder Root Gilbarco Veeder Root Qingdao Guihe Modbus RTU COM protocol Sens Start Italiana SMT/XMT, Gilbarco Veeder Root Struna Kedr spec. 1.4 page 13 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\n30 31 32 33 34\n\nUNIPROBE VEGA VEPAMON WINDBELL ZCHENG GENUINE MACHINES\n\nwww.technotrade.ua\n\nReview date: 21 March, 2020\n\nUniprobe Vega ASCII protocol COM protocol Windbell smart-probe communication protocol Gilbarco Veeder Root\n\npage 14 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nBOARD CONNECTORS AND INTERFACES\n\nPTS controller is supplied together with terminal blocks for each of the connectors for screwing of connection wires.\n\nwww.technotrade.ua\n\npage 15 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCOMMUNICATION PORTS PORT NAME PC PORT Pump port 1\n\nINTERFACE RS-232 (3 wires: TxD, RxD, Gnd) RS-485 (2 wires: line A, line B)\n\nAPPOINTMENT Connection with control system (POS system, cash register, OPT terminal, etc). It is recommended to use shielded cable.\n\nConnection with fuel dispensers using configurable proprietary communication protocol (up to 16 fuel dispensers). It is required to use shielded cable, which shield is connected to ground on the side of connected pump.\n\nPUMP PORTS\n\nPump port 2\n\nPump port 3\n\nPump port 4\n\nDISP port (RS-485)\n\nRS-485 (2 wires: line A, line B)\n\nConnection with fuel dispensers using configurable proprietary communication protocol (up to 16 fuel dispensers). It is required to use shielded cable, which shield is connected to ground on the side of connected pump.\n\nRS-485 (2 wires: line A, line B)\n\nConnection with fuel dispensers using configurable proprietary communication protocol (up to 16 fuel dispensers).\n\nRS-485 (2 wires: line A, line B)\n\nConnection with fuel dispensers using configurable proprietary communication protocol (up to 16 fuel dispensers).\n\nRS-485 (2 wires: line A, line B)\n\nIt is required to use shielded cable, which shield is connected to ground on the side of connected pump.\n\nIt is required to use shielded cable, which shield is connected to ground on the side of connected pump.\n\n1. PTS controllers interconnection (up to 16 PTS controllers) for simultaneous control over the same fuel dispensers and ATG systems 2. Connection with ATG systems (probes) using configurable proprietary com. protocol (up to 16 ATG probes)\n\nPROBE PORTS\n\nIt is required to use shielded cable, which shield is connected to ground on the side of connected ATG system (probe).\n\nDISP port (RS-232)\n\nRS-232 (3 wires: TxD, RxD, Gnd)\n\nLOG port\n\nRS-232 (3 wires: TxD, RxD, Gnd)\n\nUSER port\n\nRS-232 (3 wires: TxD, RxD, Gnd)\n\nConnection with ATG system (console) using configurable proprietary communication protocol (up to 16 ATG probes). 1. Connection with ATG system (console) using configurable proprietary communication protocol (up to 16 ATG probes) 2. Writing of operation log of PTS controller interaction with fuel dispensers, ATG systems, PTS interconnection Connection with ATG system (console) using configurable proprietary communication protocol (up to 16 ATG probes).\n\nNOTE! It is strictly prohibited to connect any of the cables’ shields to ports of PTS controller. Manufacturer reserves a right to bring in modifications in construction of controller for improving of its technical and functional characteristics, so supplied version of controller may differ from described in given technical guide. Warning! This is a class A product. In a domestic environment this product may cause radio interference in which case the user may be required to take adequate measures. www.technotrade.ua\n\npage 16 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCOMPLETE SET Depending on the order code (see section “Order information”) PTS-1 controller can be supplied either in a view of electrical board (variant of controller supply PTS1-PCB-z), or installed in a mounting box with cables inputs and a power switching button (variant of controller supply PTS1-BOX-z).\n\nVariant of controller supply in a view of electrical board (PTS1-PCB-z)\n\nVariant of controller supply installed in a plastic box with cables inputs and a power switching button (variant of controller supply PTS1-BOX-z) www.technotrade.ua\n\npage 17 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCONNECTION TO POWER SUPPLY It is recommended to use non-shielded cable at connection to power supply. It is recommended to install a ferrite ring core TDK ZCAT 2235-1030 on the power supply cable with 1 coil inside (as shown on image below).\n\nFerrite ring coil should be located on the power supply cable nearby (up to 3 cm) the power supply connector of controller board (in case if controller is supplied in a view of electrical board, variant of supply PTS1-PCB-z) or nearby the power supply cable input of box (in case if controller is supplied in plastic box, variant of supply PTS1-BOX-z). After placing a ferrite ring on the power supply cable, it is required to check correctness of its installation, it is possible to check it by moving ferrite ring along the power supply cable by pushing power supply cable into it from one side and pulling the cable from another side of the ferrite ring.\n\nwww.technotrade.ua\n\npage 18 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCONNECTION TO CONTROL SYSTEM Connection to the control system (POS system, cash register, OPT terminal, etc) is made through a PC port, which has RS-232 interface (3 wires: TxD, RxD, Gnd). Scheme of connections:\n\nIn case if the control system does not have a COM-port – it is possible to use any type of converter to COMport (like USB-to-COM, Ethernet-to-COM, Bluetooth-to-COM, other converters). Communication with PTS controller is made using commands and responses described in UniPump communication protocol (own proprietary protocol of Technotrade LLC) – see document “UniPump communication protocol specification for PTS controller over fuel dispensers and ATG systems” for more information. Thus, PTS controller provides conversion of the common communication protocol UniPump into various proprietary communication protocols of fuel dispensers and ATG systems.\n\nwww.technotrade.ua\n\npage 19 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nINSTALLATION REQUIREMENTS FOR PETROL STATION WARNING! Manufacturer guarantees reliable and stable operation of products only at compliance with below requirements. In case of absence of uninterruptible power supply or incorrect wiring of products to it any claims to malfunction of software are not accepted. 1. Requirements to power supply The described products come into structure of control system (POS) for petrol station. Power supply of the products should be done from a separate power supply with built-in filter of radio frequency interferences and limiter of high voltage pulse interferences. Power supply should have a safety factor of 1.5. At emergency switching off the power supply or in case of power voltage exceeding its permitted ranges the products can switch off with loss or corruption of data and possible damage of hardware and software. Power supply of all electronic blocks of POS and electronic pumpheads of dispensers, which are connected through information lines, should be made from single common uninterruptible power supply source (UPS). Connection of other devices to given UPS is strictly prohibited. UPS should be of continuous action (online) and work with double conversion with output voltage regulation. UPS should have a safety factor of 1.5. Filter of radio frequency interferences and limiter of high voltage pulse interferences should be used for feeding equipment from UPS. Supply of electronic pumpheads of dispensers should be made from the UPS unit using 3-wires scheme with isolated neutral through dedicated two-pole breaker for each dispenser. Connection of other parts of dispenser to UPS unit (expect electronic pumpheads) is strictly prohibited. UPS unit should be connected to a separate three-pole socket fed through the three-wire feeder (phase, neutral, ground wires) with insulated neutral from a dedicated circuit breaker of switchboard. Feeder coming from the switchboard to the socket should located not closer than 0.3 meters to other feeders. The socket should be located at a distance of not more than 1 meter away from the POS. Phase wire of the feeder should not have any other consumer, which are sources of interferences (for example motors). For protection of POS and UPS from secondary effects of atmospheric electricity it is required to install high-voltage arresters (dischargers) at the transformer substation or on poles of power lines. 2. Requirements to grounding In the switchboard the ground wire of feeder socket should be connected to the grounding screw, which should be connected by means of welding with a protection grounding circuit of petrol station by steel wire with a diameter of not less than 5 mm. Protection grounding circuit of petrol station should correspond to safety requirements and be separated from the station lightning protection circuit. Distance from the nearest electrode of protection grounding circuit to electrode of lightning protection circuit must be at least 10 meters. Resistance of the protection grounding circuit should be not more than 4 Ohms and must be confirmed by the test report. Length of wires from the switchboard to the nearest electrode of protection grounding circuit should not exceed 15 meters. 3. Requirements to laying of cable communications Laying of power and information wires to dispensers should be done in separate pipes with distance of not less than 0.3 meters between each other. For informational wires (current loops, RS-485, other interfaces) www.technotrade.ua\n\npage 20 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nit is recommended to use shielded twisted-pair cables (recommended type – FTP CAT 5E). The cable shield must be connected to the ground connector on one side only – on the side of the dispenser.\n\nwww.technotrade.ua\n\npage 21 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCONNECTION TO FUEL DISPENSERS PTS controller can simultaneously control up to 16 fueling places (16 sides of 1-sided dispensers or 8 sides of 2-sided fuel dispensers or mixture of 1-sided and 2-sided dispensers) that use up to 4 various communication protocols (each of the pump ports can be adjusted to a separate communication protocol and baud rate and can connect up to 16 fueling places) (see section “Examples of connection to fuel dispensers”). So, you can connect in total 16 pumps to the same pump port or you can distribute all the 16 pumps between the any of the pump ports.\n\nNOTE: if there are less than 4 various types of fuel dispensers at petrol station (which use various communication protocols) then it is recommended to distribute fuel dispensers between 4 PTS controller ports in approximately equal quantities in order to minimize delays between fuel dispensers querying in the same pump port.\n\nwww.technotrade.ua\n\npage 22 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCONNECTION TO ATG SYSTEMS AND PROBES PTS controller can simultaneously control up to 16 ATG probes (gauges) (separate probes or probes connected to ATG systems / consoles) that use up to 3 various communication protocols (each of the probe ports can be adjusted to a separate communication protocol and baud rate and connect up to 16 ATG probes) (see section “Examples of connection to ATG systems”).\n\nNOTE: DISP port provides a possibility to connect ATG system (probes) over either RS-485 or RS-232 interfaces – interface is selected using a configuration parameter in PTS controller.\n\nwww.technotrade.ua\n\npage 23 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nSENDING OF PUMPS SALES DATA TO CONSOLES At communication to ATG consoles PTS controller can be used for sending fuel dispensers sales data to consoles in order to make console provide tanks reconciliation reports and automatic tanks calibration:\n\nwww.technotrade.ua\n\npage 24 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCONVERSION BETWEEN PUMPS PROTOCOLS In case if POS system already knows some open communication protocol of dispensers then it can use PTS controller for its conversion to any other pump protocols without any additional integration. Communication of PTS controller with control system (POS system, cash register, OPT terminal, etc) for provision of control over dispensers can be done using popular open pump protocols. At this connection is made through one of the pump ports, which has RS-485 interface (2 wires: A, B). Any of the pump ports can be configured to work as input port for communication with control system. Scheme of connections:\n\nIn this case the control system should know pump communication protocol. PTS controller in this case serves as a protocols converter: converts input pump protocol into any other supported pump protocols. At this control over pumps can be done in parallel from control systems connected through pump port and PC port, PTS controller internally tracks which control system locks control over dispensers:\n\nwww.technotrade.ua\n\npage 25 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nCONVERSION BETWEEN ATG CONSOLES PROTOCOLS In case if POS system already knows some open communication protocols of ATG consoles then it can use PTS controller for its conversion to any other ATG console or probe protocols without any additional integration. Communication of PTS controller with control system (POS system, cash register, OPT terminal, etc) for getting measurement data from probes can be done using popular open ATG console protocols. At this connection is made through one of the probe ports, which has RS-232 interface (3 wires: TxD, RxD, Gnd) or RS-485 interface (2 wires: A, B). Any of the probe ports can be configured to work as input port for communication with control system. Scheme of connections:\n\nIn this case the control system should know communication protocol of ATG console. PTS controller in this case serves as a protocol’s converter: converts input ATG console protocol into any other supported ATG consoles and probe protocols.\n\nwww.technotrade.ua\n\npage 26 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nMONITORING OVER FUEL DISPENSERS AND TANKS In case if there is an existing POS system already installed on the station PTS controller allows to monitor operation of the fuel dispensers and tanks (and optionally to make sales when required). At this PTS controller is connected between existing POS system and fuel dispensers and ATG console (tank probes), PTS controller communicates with fuel dispensers and ATG console (probes) using their proprietary communication protocols and with POS system – using open communication protocols for pumps and ATG console. Monitoring system can connect to PC port of PTS controller and get all data of fuel dispensers sales and tanks real time, at this it can also provide control over the dispensers when required. Scheme of connections:\n\nwww.technotrade.ua\n\npage 27 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nFUEL DISPENSERS SALES DATA FOR ATG CONSOLES FOR RECONCILIATION PTS controller can be applied for listening of communication exchange between POS system and dispensers and sending of dispensers’ transactions to the ATG console for provision of tanks’ reconciliation and automatic calibration. Installation of the PTS controller between POS system and dispensers solves this problem without any additional integration from the side of POS system. Additionally, it is possible to apply PTS controller inside the casing of the ATG console. At this a scheme of connection specified on the above image is saved, but at some extra development of the console GUI it is possible to make a completely new function of the console – provision of monitoring and control over dispensers from the console in parallel with POS system. As a result, the console becomes a common system of control, monitoring and account providing: - connection of console to any POS system, OPT terminal for provision of control over dispensers - possibility to connect various brands of probes, which communication protocols are not supported by the console - transmission from PTS controller to console data on sales transaction of dispensers for formation of reconciliation reports and automatic tanks calibration - additional possibility to monitor and control fuel dispenser operation from the console display in parallel to POS system already installed at petrol station (needs update of console software) Scheme of connections:\n\nwww.technotrade.ua\n\npage 28 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nPTS CONTROLLER MULTI POS SYSTEMS OPERATION PTS controller allows a possibility to lead management over the same fuel dispensers from several POS systems and share ATG probes measurement values between several interconnected PTS controllers. Thus every interconnected PTS controller is able to provide control over any of the connected fuel dispensers and know ATG system measurement data of every other interconnected PTS controller.\n\nNOTE! In order to enable PTS controller interconnection interface of DISP port should be configured to RS485 in configuration parameters of PTS controller and DISP port should not be configured for any ATG system (see section “PTS controller configuration”).\n\nConfiguration: At necessity to organize several working places at petrol station (several POS systems) each of the POS systems should have its own PTS controller connected. PTS controllers should be interconnected with each other through a dispatcher PTS port (DISP port on RS-485 interface) and also connected with fuel dispensers. Thus control over each fuel dispenser at petrol station can be made from every POS system and each PTS controller will know measurement data of every ATG probe connected to any of the interconnected PTS controllers. At authorization of a fuel dispenser from one POS system the fuel dispenser becomes locked by PTS controller of this POS system and while it is locked all other POS systems can not control over given fuel dispenser, they can only monitor current state of the fuel dispenser. When operation of given POS system is finished with given fuel dispenser, PTS controller of this POS system unlocks the fuel dispenser and it becomes commonly available for all other PTS controllers, which makes it possible to be controlled (locked) by any of the PTS controllers connected to other POS systems. NOTE! In order to provide control over same fuel dispensers from several PTS controllers locking and unlocking of dispensers is required. For this reason in configuration of PTS controller in parameters for PTS controller “Lock” and “Unlock” commands should be set to be used (see section “Configuration of parameters for PTS controller”). NOTE! In order to provide correct exchange of ATG systems measurement data between interconnected PTS controllers logical addresses of connected ATG probes in configuration of interconnected PTS controllers should not intersect (have various values in different PTS controllers).\n\nwww.technotrade.ua\n\npage 29 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nPTS CONTROLLER CONFIGURATION AND TESTING UTILITY General information PTS controller configuration and testing utility Pts_config.exe serves for configuration and testing of the PTS controller. This utility is open source, which allows developers to use its source code in their development. Currently utility is developed under Visual Studio using C# and Visual Basic .NET languages under Windows OS. Development of the utility is also done in other programming languages under other operating systems. For direct communication with PTS controller the utility uses UniPump communication protocol (own proprietary protocol of Technotrade LLC) – see document “UniPump communication protocol specification for PTS controller over fuel dispensers and ATG systems” for more information.\n\nPTS controller configuration and testing utility Pts_config.exe is a multipurpose utility for PTS controller. It provides the following possibilities: - provision of control over the connected pumps and probes - configuration of pumps (fuel dispensers) ports and probes (ATG systems) ports - configuration of PTS controller parameters - update of the PTS controller firmware - logging of PTS controller communication exchange with connected equipment - self-diagnostics of PTS controller communication ports and switches\n\nwww.technotrade.ua\n\npage 30 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nScheme of connections\n\nNOTE! On some PCs for correct operation COM-port FIFO settings should be adjusted to Tx: 1, Rx: 1. This may also apply to situations when a PC does not have a native COM-port and external COM-port converter are applied (like USB-to-COM, PCI-to-COM, Ethernet-to-COM, Bluetooth-to-COM etc).\n\nStarting PTS configuration utility Run Pts_config.exe utility. Make sure that in main menu in tab “Connection” type of PTS controller connection “Direct connection to COM-port” is selected (other types of connection serve for connection of PTS controller through fiscal modules). Set up a correct COM-port number and press “Connect” button.\n\nwww.technotrade.ua\n\npage 31 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTab “General”\n\nTab “General” serves for 3 main purposes: - reading of PTS controller firmware version information: firmware date and a list of supported communication protocols of pumps and ATG systems (probes) - saving of all PTS controller configuration to a file on PC and restoring of all PTS controller configuration from a file on PC - resetting of PTS controller configuration NOTE! Pay attention that the PTS controller is using latest version of the firmware. Latest version of firmware can be received upon request from Technotrade LLC company or downloaded from Technotrade LLC company website. Normally new firmware for PTS controller is issued together with PTS configuration utility update having latest features of PTS controller, so updated version of the PTS controller configuration utility Pts_config.exe should be also requested and downloaded. Information on how to update PTS controller firmware please find below in section “Tab ‘Firmware update’”. In case if firmware version used in PTS controller is older than required for Pts_config.exe utility – then a warning message about it will appear in Events review field. A list of all supported communication protocols and baud rates by PTS controller as well as description and settings of all parameters are described in file pts_config_en.xml (file may have other name depending on the used language). www.technotrade.ua\n\npage 32 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTab “Pumps configuration”\n\nTab “Pumps configuration” is used for reading and writing of configuration of pump ports in PTS controller. Configuration of pump ports includes setting of communication protocol and baud rate for each of the pump ports and also assigning of pumps to each of the pump ports. Each of the pumps can be assigned to any of the pump ports and requires specification of the pump physical address. Logical address of the pump means the address on which the control system (POS system, cash register, OPT, etc) will see given fueling place. Physical address of the pump means address of the real fueling place, which is programmed or set in configuration of the fuel dispenser fueling place. For some pump protocols it is also necessary to configure parameters, which is to be done on tab “Parameters” of the utility. Button “Param.” is used to transfer to “Parameters” tab to configure parameters for the selected pump. Button “Configure pump parameters now” is used to transfer to “Parameters” tab to configure parameters for all pumps. After configuration is finished it is necessary to click a button “Set pumps configuration”, which will write current pump ports configuration to controller. Information about result of operation of writing of configuration to controller (whether it is made successfully or there was some problem) will be written in the events review field on the form. www.technotrade.ua\n\npage 33 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTab “Probes configuration”\n\nTab “Probes configuration” is used for reading and writing of configuration of probe ports in PTS controller. Configuration of probe ports includes setting of communication protocol and baud rate for each of the probe ports and also assigning of probes to each of the probe ports. Each of the probes can be assigned to any of the probe ports and requires specification of the probe physical address. Logical address of the probe means the address on which the control system (POS system, cash register, OPT, etc) will see given probe. Physical address of the probe means address of the ATG system probe, which is programmed or set in configuration of the ATG system console or probe. For some probe protocols it is also necessary to configure parameters, which is to be done on tab “Parameters” of the utility. Button “Param.” is used to transfer to “Parameters” tab to configure parameters for the selected probe. Button “Configure pump parameters now” is used to transfer to “Parameters” tab to configure parameters for all probes. After configuration is finished it is necessary to click a button “Set probes configuration”, which will write current probe ports configuration to controller. Information about result of operation of writing of configuration to controller (whether it is made successfully or there was some problem) will be written in the events review field on the form. www.technotrade.ua\n\npage 34 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTab “Parameters”\n\nTab “Parameters” serves for: - configuration of parameters for PTS controller - configuration of parameters for pumps protocols - configuration of parameters for probes protocols All parameters are listed in a table with detailed description. Default parameters values are specified in a separate column. To get a current value of the parameter it is necessary to read them from PTS controller. Configuration of PTS controller parameters includes various adjustments for PTS controller operation. Some of the pumps and probes communication protocols also require setting of parameters. These parameters are set for the specified logical address of the pump (or probe) and do not refer to other pumps (or probes) in the PTS controller. Description and settings of all parameters as well as a list of all supported communication protocols and baud rates by PTS controller are described in file pts_config_en.xml (file may have other name depending on the used language).\n\nwww.technotrade.ua\n\npage 35 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nExamples of the device protocol parameters:\n\nParameters for pump - Dart communication protocol parameters for pump 1\n\nParameters for probe – Gilbarco Veeder Root communication protocol parameters for probe 1 www.technotrade.ua\n\npage 36 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTab “Control”\n\nTab “Control” serves for provision of control over connected pumps and probes. Section “Pumps” is used for displaying state of all 16 pumps of PTS controller, current taken up nozzle, state whether the pump is locked by PTS controller, currently executed command and also volume, money amount and price of dispensed fuel. Selection of the pump is made by selecting a pumps row in a table. Section “Pump order” is made for provision of control over the pumps: - selection of pump - field for setting a dose to be dispensed by selected pump - selection of operation mode: volume preset, money amount preset, full tank - commands to be given to selected pump: authorize, stop, suspend, resume, get total counters, get and set price, get tag ID, turn lights on or off. - fields for getting/setting prices of each nozzle of the selected pump Section “Probes” is used for displaying measurement data of each of 16 probes of PTS controller.\n\nwww.technotrade.ua\n\npage 37 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nSection “Settings” includes the following settings: - “Use extended commands” sets if communication with PTS controller should be doe using general commands of extended (extended commands are to be used instead of general commands when there is necessity to get/set values to PTS controller, which size is biger than provided by general UniPump protocol format) - “Use Lock/Unlock commands” – if this option is selected then PTS controller will try to lock the pump before giving command to it and unlock it after the command is performed, it this option is not set then PTS controller will not send LockRequest and UnlockRequest commands. This option should be equal to PTS parameter “Use command LockRequest and UnlockRequest”. - “Automatically authorize pump in full tank mode at nozzle up” – if this option is set then PTS controller will automatically authorize the pump with volume on 999999 liters automatically at once when the nozzle is up. This is made to set dispensing in completely automatic mode without any actions to be performed on computer to start dispensing. - “Automatically request total counters in end of dispensing” – I this optionis set then PTS controlle will automatically request total counters from the pump at the end of dispensing (after a transaction is closed). - “Quantity of decimal digits”: these options set number of decimal places used in pump in fields of volume, money amount, price, volume and money amount total counters. The quantity of decimal digits in these fields should correspond to their quantity in the pump in order to make numbers displays in pump same as in this PTS configuration utility. Events review fields displays results of all performed operations.\n\nwww.technotrade.ua\n\npage 38 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTab “Logging”\n\nTab “Logging” serves for logging of communication exchange between the PTS controller and connected pumps or probes. With a reason to quickly locate and remove possible bugs in PTS controller communication with connected equipment (fuel dispensers and ATG systems) PTS controller has a possibility of logging of its exchange with connected equipment. Use Pts_config.exe utility to save in a control system exchange logs of PTS controller with connected equipment.\n\nConfiguration of PTS controller to get a log In order to get the log it is necessary first to set a port to be logged. For this connect PTS controller to PC and run Pts_config utility. In Pts_config utility go to tab “Parameters” and there set a parameter for PTS controller named “Port to log” for the PTS controller port, from which a log should be taken (see below screenshot). Save this configuration.\n\nwww.technotrade.ua\n\npage 39 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nwww.technotrade.ua\n\nReview date: 21 March, 2020\n\npage 40 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nProcedure to get a log For taking a log it is necessary to connect the PC to PTS controller port LOG as shown on the scheme below. At this PTS controller should be working with connected equipment and control system. Log is taken online – all current actions on the selected port are written to the log-file (no log is stored inside PTS).\n\nOn the tab “Logging” it is necessary to select a folder, where the log-file is to be stored and press “Start log” button. Log process will be displayed in the “Log verification” section and size of the log-file capture will be displayed on the form. “Log verification” section displays log process by indicating the direction of currently taken log: 1. Control system transfers data to PTS 2. PTS transfers data to Control system 3. PTS transfers data to Slave device 4. Slave device transfers data to PTS\n\nwww.technotrade.ua\n\npage 41 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nIn case if there is no data transferred – the “Log verification” section displays a message “Log is not taken, please recheck log parameters in PTS controller and connections!”. If you see this message – you need to recheck all the configuration and connections to get a log. Each of the boxes in “Log verification” section display a direction of messages sent in PTS controller communication. NOTE! At taking a log make sure that the red boxes on the right side blink indicating exchange between the PTS and Slave device. If they do not blink – it means that the log of exchange on selected port is not written, at this you should recheck your logging port parameter in PTS controller parameter or check communication between the PTS controller and connected device on the specified port. Log is accumulated to a file, size of file should be growing during the logging process, if it does not grow – then the log is not taken, you will probably see a message “Log is not taken, please recheck log parameters in PTS controller and connections!” in “Log verification” section as described above. Log-file has a name with indication of the time of log taken, for example: log_2014_07_04_12_14_58.bin, which means that the log was taken on 4th of July, 2014 at 12:14:58. In case if log process is switched on – a new log-file with a new name is created each 30 minutes (old logfile is saved). This allows to avoid log-file overfilling when its size comes to critical to the operating system. www.technotrade.ua\n\npage 42 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nThus, you can switch on logging and wait until any problem happens. When it happens and you approximately know time of this problem – you can take appropriate (by name) log-file and send to Technotrade LLC for analysis. Log in accumulated in the encrypted form. After a log of exchange is taken it is required to pass a received bin file to Technotrade LLC company for examining and elimination of possible problems, for reasons of which it was taken.\n\nwww.technotrade.ua\n\npage 43 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTab “Firmware update”\n\nTab “Firmware update” servers for updating of firmware of PTS controller and other interface converters. PTS controller firmware is constantly being improved and new versions of firmware with new added communication protocols and fixed bugs of the previous firmware versions are proposed to be applied. New versions of PTS controller's firmware are always available for downloading for customers. For update of firmware update it is necessary to make one of 2 possible actions: 1. Set 4th DIP-switch SA1 in position ON:\n\n4th DIP-switch SA1 set to position ON\n\nwww.technotrade.ua\n\npage 44 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\n2. Set a PTS controller parameter “ALLOW FIRMWARE UPDATE” to enable firmware update of PTS controller:\n\nConnection of the PTS controller is done directly to COM-port of PC.\n\nwww.technotrade.ua\n\npage 45 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nOn tab “Firmware update” it is necessary select the COM-port number of the PC, check that connection is not opened (COM-port is closed) and select the firmware file before starting the firmware update process.\n\nFirmware update process will start upon clicking on button “Start update”. In case if the firmware is not being updated – power off the PTS controller, click to start firmware update and power on the PTS controller. At this the firmware update process should start. NOTE! In order to prevent PTS controller firmware from accidental update it is strictly recommended to keep 4th DIP-switch SA1 in OFF position and disable PTS controller parameter “ALLOW FIRMWARE UPDATE” in any moment of time except for firmware update needs. NOTE! Pay attention that your PTS controller is using latest version of the firmware. Latest version of firmware can be received upon request from Technotrade LLC company or downloaded from Technotrade LLC company website. Normally new firmware for PTS controller is issued together with PTS configuration utility update having latest features of PTS controller, so updated version of the PTS controller configuration utility Pts_config.exe should be also requested and downloaded. Information on the present firmware version of PTS controller can be checked on tab “General” (mentioned above). Due to a reason that some firmware versions may erase all configuration of the PTS controller it recommended to save all configuration of PTS controller to file before making an update (see on tab “General” section “Save current configuration to file”) and in case if after the update the PTS controller configuration turns out to be erased – restore all the configuration from the previously saved file (see on tab “General” section “Restore configuration from file”). www.technotrade.ua\n\npage 46 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nTab “Diagnostics ”\n\nTab “Diagnostics” servers for self-diagnostics of PTS controller ports and DIP-switches. Scheme of connections of the PTS controller should be the following: Lines “RS-485 A” in of each pump port and DISP port (RS-485) should be interconnected with each other, also lines “RS-485 B” in of each pump port and DISP port (RS-485) should be interconnected with each other as shown on the picture. In LOG, USER and DISP (RS-232) ports pin TxD should be shortened with pin RxD as shown on the picture.\n\nwww.technotrade.ua\n\npage 47 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nDiagnostics of port with RS-485 interfaces In section “Diagnostics of RS-485 interface channels” results of diagnostics will be shown by color of labels. Green color means that correspondent channel is working correctly (OK), red color – correspondent channel is working incorrectly (BAD). In case if the error counter increases its value – then the errors are taking place. For PTS controller of version PTS-U5 area RTS channel 1 – 4 should not be taken into account cause is used with previous versions of PTS controller (PTS-U, PTS-U2, PTS-U3).\n\nDiagnostics of port with RS-232 interfaces In section “Diagnostics of RS-232 interface channels” results of diagnostics will be shown by color of labels. Green color means that correspondent channel is working correctly (OK), red color – correspondent channel is working incorrectly (BAD). In case if the error counter increases its value – then the errors are taking place.\n\nDiagnostics of DIP-switch SA1 In section “Diagnostics of DIP-switches” current position of switches in SA1 DIP-switch on PTS board is displayed. If displayed position of switches correspond to real position of switches in DIP-switch SA1 on PTS board after checking them in various positions – then DIP-switch SA1 is working correctly.\n\nwww.technotrade.ua\n\npage 48 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nBUILT-IN PUMPS SIMULATOR PTS controller firmware between its pump protocols has a protocol “37. PUMP SIMULATOR”, which allows to simulate presence of connected pumps. Baud rate at this can be set to any possible. It allows to make easy debugging of control over dispensers through PTS controller without real fuel dispensers connected.\n\nPurpose of the pump simulator protocols is to help developers in debugging of the control system software over PTS controller at absence of real dispenser pumphead for connection or software simulators of fuel dispenser. When protocol “37. PUMP SIMULATOR” is selected – then it is possible to debug dispensing of the pumps without any pumphead or simulator connected to PTS controller. Using parameters for this pump protocol it is possible to set the number of taken up nozzle for every pump and also set whether the dispensing should be done immediately or in full process.\n\nwww.technotrade.ua\n\npage 49 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nPump simulators allow to: − authorize a dispenser with preset volume or amount values − simulate dispensing of fuel through this dispenser and stop it at necessity − set prices to dispenser and get prices from dispenser − read total counters values (both amount and volume) (total counters are lead on each of the nozzles separately and are dropped to zero at restart of the PTS controller) − set pause during dispensing and release (continue) dispensing after pause\n\nwww.technotrade.ua\n\npage 50 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nBUILT-IN ATG PROBES SIMULATOR PTS controller firmware between its ATG probes protocols has a protocol “7. ATG SIMULATOR”, which allows to simulate presence of connected ATG probe. Baud rate at this can be set to any possible.\n\nAt this depending on the selected address of the ATG probe output measurement values will be the following.\n\nwww.technotrade.ua\n\npage 51 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nFor ATG probes with logical address 1 – dynamically changing all measurement parameters looping in the following sequence (measurement numbers coming from 1 to 9 and back from 9 to 1):\n\nMeasurement parameter\n\nMeasurement number Product level, mm Water level, mm Product volume, l Water volume, l Temperature, deg. C Product temperature compensated volume, l Product ullage, l Product density, kg/m3 Product mass, kg\n\n1 100 1 8000 80 +11.0\n\n2 120 1.2 9600 96 +11.1\n\n3 150 1.5 12000 120 +11.3\n\n4 160 1.6 12800 128 +11.6\n\n5 200 2 16000 160 +12.0\n\n6 222.5 2.2 17800 176 +12.5\n\n7 250 2.5 20000 200 +13.1\n\n8 300 3 24000 240 +14.0\n\n6400\n\n7680\n\n9600\n\n10240\n\n12800\n\n14240\n\n16000\n\n19200\n\n17000 759 6072\n\n15400 758.8 6829.2\n\n13000 758.5 9102\n\n12200 758.4 9100.8\n\n9000 758 12128\n\n7200 757.8 12882.6\n\n5000 757.5 15150\n\n1000 757 18168\n\nFor ATG probes with logical addresses 2-16 there are statically fixed measurement values: − product level – logical address + 123.4 mm (example - for address 6: 6123.4 mm) − water level – logical address + 56.7 mm (example - for address 9: 956.7 mm) − temperature – logical address + 0.8 deg. C (example - for address 12: 12.8 deg. C) There are parameters for “7. ATG SIMULATOR” probes protocol allowing to simulate reception of automatic in-tank deliveries reports from ATG systems.\n\nwww.technotrade.ua\n\npage 52 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nPTS CONTROLLER API (APPLICATION PROGRAMMING INTERFACES) PTS controller for developers is supplied together with rich set of API (application programming interfaces) for mostly used programming languages and operation platforms: − C and C++: API for communication with a PTS controller through a COM-port, documentation and examples of application in source codes under Windows OS and Linux operation systems − C#: o open source library, which includes classes, methods and properties for communication with PTS controller for provision of control over dispensers and ATG systems and configuration of PTS controller o open-source utility for testing and indication of all operations provided by the PTS controller, allows to perform all operations with the PTS controller o open source fully-functional application for provision of control over up to 8 pumps and 4 ATG systems by the PTS controller, allows to perform all operations with the PTS controller o open source PTS controller configuration and testing utility − Delphi: API for communication with a PTS controller through a COM-port, documentation and examples of application in source codes − Java: o open source library, which includes classes, methods and properties for communication with PTS controller for provision of control over dispensers and ATG systems and configuration of PTS controller o open-source utility for testing and indication of all operations provided by the PTS controller, allows to perform all operations with the PTS controller − Python: API for communication with a PTS controller through a COM-port, documentation and examples of application in source codes − Visual Basic .NET: o open source library, which includes classes, methods and properties for communication with PTS controller for provision of control over dispensers and ATG systems and configuration of PTS controller o open-source utility for testing and indication of all operations provided by the PTS controller, allows to perform all operations with the PTS controller o open source fully-functional application for provision of control over up to 8 pumps and 4 ATG systems by the PTS controller, allows to perform all operations with the PTS controller o open source PTS controller configuration and testing utility − COM-object for PTS controller: o open-source COM-object (written in Microsoft Visual C++ 6.0 IDE in C++ programming language) with methods and properties for communication with PTS controller for provision of control over dispensers and ATG systems and configuration of PTS controller o open-source application in Microsoft Visual Basic 6.0 for testing and indication of all operations provided by the PTS controller, allows to perform all operations with the PTS controller − Description of communication protocol of PTS controller: describes communication parameters, messages structure, commands and responses of communication between POS management system and PTS controller, typical flowchart and diagram of interoperation\n\nwww.technotrade.ua\n\npage 53 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nC and C++ API API represents a set of for communication with a PTS controller through a COM-port, documentation and examples of application in source codes under Windows OS and Linux operation systems API can be compiled as a static or dynamic library. The library can be compiled by different compilers for different operating systems: POSIX compatible (tested with GNU Linux only) and Microsoft Windows. Source code of library are located in ./src directory. Headers of library located in ./include directory. Directoty ./examples contains several examples of using library functions. Directoty ./doc contains html documentation generated by ccdoc programm. Conditionally, API functions can be divided into groups: − Manage API: Open/close, receiving error, set/get API options o pts_open o pts_open_dev o pts_close o pts_last_error o pts_option_get o pts_option_set − Handle of a controller configuration o pts_pump_config_get o pts_atg_config_get o pts_pump_config_set o pts_atg_config_set o pts_version_get − Functions of a read and write parameters of the controller or filling places o pts_param_get o pts_param_set − Functions of management by filling places o pts_authorize o pts_pts_authorize_by_amount o pts_halt o pts_lock o pts_unlock o pts_preset_prices o pts_prices_request o pts_status_request o pts_total_request o pts_trans_close − Functions of reading measurements of Automatic Tank Gauge (ATG) o pts_atg_measure_request Library functions (except for : pts_open, pts_open_dev, pts_close) have common features: − return value: functions return 0 (FM_OK) if no error and error code if error (see include/pts_errors.h for − determine the type of error) www.technotrade.ua\n\npage 54 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\n− −\n\nReview date: 21 March, 2020\n\nfirst of parameter - pts_api_descriptor - integer obtained by the open function: pts_open or pts_open_dev last parameter - pointer to PTS response structure - see include/pts_data.h for determine the data type.\n\nAll commands in protocol involve getting a response. PS: If you want use *.bat files for call make, please edit it for set true path to your favorite language installation.\n\nwww.technotrade.ua\n\npage 55 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nC# PTS controller configuration and testing utility PTS controller configuration and testing utility is written in C# programming language in Visual Studio 2010 Express and requires .NET Framework 2.0. Given application includes 2 projects: −\n\n−\n\nPtsLib - project of PtsLib.dll library for operation with a PTS controller. Includes classes, methods and properties for communication with PTS controller using requests and responses described in UniPump communication protocol for communication with PTS controller for provision of control over dispensers and ATG systems and configuration of PTS controller. Open source utility for configuration of PTS controller, provision of control over pumps and probes, logging of operation, firmware update, self-diagnostics, others (uses classes and methods of PtsLib.dll library).\n\nPTS controller configuration and testing utility: tab “Control”\n\nwww.technotrade.ua\n\npage 56 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nPTS controller configuration and testing utility: tab “Parameters”\n\nPTS controller configuration and testing utility: tab “Pumps configuration” www.technotrade.ua\n\npage 57 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nC# application The application for PTS controller is written in C# programming language in Visual Studio 2010 Express and requires .NET Framework 2.0. Given application includes 2 projects: −\n\n−\n\nPtsLib - project of PtsLib.dll library for operation with a PTS controller. Includes classes, methods and properties for communication with PTS controller using requests and responses described in UniPump communication protocol for communication with PTS controller for provision of control over dispensers and ATG systems and configuration of PTS controller. Fully-functional open source application for provision of control over up to 8 pumps and 4 ATG systems by the PTS controller, allows to perform all operations with the PTS controller (uses classes and methods of PtsLib.dll library).\n\nGeneral view of the application: allows to provide control over up to 8 pumps\n\nwww.technotrade.ua\n\npage 58 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nForm of ATG systems monitoring: allows to monitor up to 4 ATG systems\n\nForm of PTS controller configuration: allows to set configuration for pumps and ATG systems ports and also set parameters www.technotrade.ua\n\npage 59 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nC# API The API for PTS controller is written in C# programming language in Visual Studio 2010 Express and requires .NET Framework 2.0. Given API includes 2 projects: −\n\n−\n\nPtsLib - project of PtsLib_CSharp.dll library for operation with a PTS controller. Includes classes, methods and properties for communication with PTS controller using requests and responses described in UniPump communication protocol for communication with PTS controller for provision of control over dispensers and ATG systems and configuration of PTS controller. Open-source utility for testing and indication of all operations provided by the PTS controller, allows to perform all operations with the PTS controller (uses classes and methods of PtsLib_CSharp.dll library).\n\nForm for testing and indication of all operations provided by the PTS controller\n\nwww.technotrade.ua\n\npage 60 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nForm for configuration of pumps ports of PTS controller\n\nForm for configuration of ATG systems ports of PTS controller www.technotrade.ua\n\npage 61 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nDelphi API Delphi API implements shared library libpts.dll calls. Library libpts.dll was build with Borland compiler C PTS API (source C files you can find in libpts.zip). Source code of library are located in ./src directory. Directoty ./examples contains several examples of using library functions.\n\nGraphical form for testing API for PTS controller written in Delphi Conditionally, API functions can be divided into groups: − Manage API: Open/close, receiving error, set/get API options o pts_open o pts_open_dev o pts_close o pts_last_error o pts_option_get o pts_option_set − Handle of a controller configuration o pts_pump_config_get o pts_atg_config_get o pts_pump_config_set o pts_atg_config_set o pts_version_get − Functions of a read and write parameters of the controller or filling places o pts_param_get o pts_param_set − Functions of management by filling places www.technotrade.ua\n\npage 62 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\n−\n\nReview date: 21 March, 2020\n\no pts_authorize o pts_pts_authorize_by_amount o pts_halt o pts_lock o pts_unlock o pts_preset_prices o pts_prices_request o pts_status_request o pts_total_request o pts_trans_close Functions of reading measurements of Automatic Tank Gauge (ATG) o pts_atg_measure_request\n\nLibrary functions (except for : pts_open, pts_open_dev, pts_close) have common features: − return value: functions return 0 (FM_OK) if no error and error code if error (see include/pts_errors.h for − determine the type of error) − first of parameter - pts_api_descriptor - integer obtained by the open function: pts_open or pts_open_dev − last parameter - pointer to PTS response structure - see include/pts_data.h for determine the data type. All commands in protocol involve getting a response.\n\nwww.technotrade.ua\n\npage 63 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nJava API Java API for PTS controller is written in Java programming language in NetBeans IDE 7.2.1. Given API includes: − JavaPtsLib: library for operation with a PTS controller. Includes classes, methods and properties for communication with PTS controller using requests and responses described in UniPump communication protocol for communication with PTS controller for provision of control over dispensers and ATG systems and configuration of PTS controller. − JavaPtsApp: open-source utility for testing and indication of all operations provided by the PTS controller, allows to perform all operation with the PTS controller (uses classes and methods of JavaPtsLib). Communication over the COM-port (RS-232 interface) is done using RXTX Java library (visit www.rxtx.qbang.org for downloads and information): RXTX is a Java library, using a native implementation (via JNI), providing serial and parallel communication for the Java Development Toolkit (JDK). It is based on the specification for Sun's Java Communications API, though while many of the class descriptions are the same the package used it not, since gnu.io is used instead. For more information please visit the rxtx wiki at http://rxtx.qbang.org/wiki (latest releases of the library can be downloaded there).\n\nForm for testing and indication of all operations provided by the PTS controller www.technotrade.ua\n\npage 64 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nForm for configuration of pumps ports of PTS controller\n\nForm for configuration of ATG systems ports of PTS controller www.technotrade.ua\n\npage 65 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nPython API Before installation of this package it is necessary to install PySerial (http://pyserial.sourceforge.net/). To install PTS module, run python setip.py install, Where python = your desired python version executable.\n\nGraphical form for testing API for PTS controller written in Python The protocol of exchange is realized in the pts.protocol module. The exchange through a serial port is realized with use PySerial module (http://pyserial.sourceforge.net/) (therefore, before installation of this package it is necessary to install PySerial). The package was tested with python of versions 2.7 and 3.0 The pts.constants module contains values of various constants The pts.config module - structures of data, for a controler configuration The pts.response module - structures of the data returned by the controler The pts.protocol module - protocol commands Conditionally, API functions can be divided into groups: − Manage API: Open/close, receiving error, set/get API options o pts_open o pts_open_dev www.technotrade.ua\n\npage 66 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\n−\n\n−\n\n−\n\n−\n\nReview date: 21 March, 2020\n\no pts_close o pts_last_error o pts_option_get o pts_option_set Handle of a controller configuration o pts_pump_config_get o pts_atg_config_get o pts_pump_config_set o pts_atg_config_set o pts_version_get Functions of a read and write parameters of the controller or filling places o pts_param_get o pts_param_set Functions of management by filling places o pts_authorize o pts_pts_authorize_by_amount o pts_halt o pts_lock o pts_unlock o pts_preset_prices o pts_prices_request o pts_status_request o pts_total_request o pts_trans_close Functions of reading measurements of Automatic Tank Gauge (ATG) o pts_atg_measure_request\n\nWork with the protocol can be set for work without exceptions (when error occured), and with generation of exceptions (PtsException). Parameter of initialization of use_exceptions is responsible for it.\n\nwww.technotrade.ua\n\npage 67 from 190\n\nPTS-1 CONTROLLER OVER FUEL DISPENSERS AND ATG SYSTEMS FOR PETROL STATIONS (PTS-1, rev. PTS-U5-v7) Revision: R06\n\nReview date: 21 March, 2020\n\nVisual Basic .NET PTS controller configuration and testing utility PTS controller configuration and testing utility is written in VB.NET programming language in Visual Studio 2010 Express and requires .NET Framework 2.0. Given application includes 2 projects: −\n\n−\n\nPtsLib - project"
    }
}