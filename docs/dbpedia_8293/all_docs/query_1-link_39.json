{
    "id": "dbpedia_8293_1",
    "rank": 39,
    "data": {
        "url": "https://forum.level1techs.com/t/bedhedds-drive-cloning-guide/203671",
        "read_more_link": "",
        "language": "en",
        "title": "bedHedd's drive cloning guide",
        "top_image": "https://forum.level1techs.com/uploads/default/original/4X/4/4/7/4473bca17625fe67c6fa21554992da2cb26f8d9a.png",
        "meta_img": "https://forum.level1techs.com/uploads/default/original/4X/4/4/7/4473bca17625fe67c6fa21554992da2cb26f8d9a.png",
        "images": [
            "https://forum.level1techs.com/user_avatar/forum.level1techs.com/bedhedd/48/428767_2.png",
            "https://forum.level1techs.com/user_avatar/forum.level1techs.com/bedhedd/48/428767_2.png",
            "https://forum.level1techs.com/uploads/default/original/4X/4/4/7/4473bca17625fe67c6fa21554992da2cb26f8d9a.png",
            "https://forum.level1techs.com/uploads/default/original/4X/c/6/f/c6f283e32347c72c6f2dd8f05ff3a53bff9479d1.png",
            "https://forum.level1techs.com/uploads/default/original/4X/1/b/f/1bf5b08eb8ff2c33b2761ece9aef4b4df7dc6ebe.png",
            "https://forum.level1techs.com/uploads/default/original/4X/6/8/3/68388a2cbd4be68cfbb43773ec8733715fae85b9.png",
            "https://forum.level1techs.com/uploads/default/original/4X/8/7/4/874e60e3bc988e825a5112076e60235e5251e870.png",
            "https://forum.level1techs.com/uploads/default/original/4X/d/c/6/dc61563ff670d3448b783eb465ca05c680000f19.png",
            "https://forum.level1techs.com/uploads/default/original/4X/9/6/e/96ebb2e083e992982d64ae6aafb4fb08acfc8ecd.png",
            "https://forum.level1techs.com/uploads/default/original/4X/4/6/9/4696399b2c1e3a8e736c336b2ff6eb287e2cdf65.png",
            "https://forum.level1techs.com/uploads/default/original/4X/f/9/7/f9778b82267c0b40d0fa851b2a830d6344290135.png",
            "https://forum.level1techs.com/uploads/default/original/4X/a/e/8/ae89e19ca10eb4c43b32d72a8156d8aec0dc9279.png",
            "https://forum.level1techs.com/uploads/default/original/4X/a/3/9/a391e5b3d40f81d29919b21185cdbca457578bbf.png",
            "https://forum.level1techs.com/uploads/default/original/4X/4/e/6/4e6ffb4aa608778d50daad410fe5a43624c48e43.png",
            "https://forum.level1techs.com/uploads/default/original/4X/7/5/9/759d8ad6419b06f8a81dd2bdd0f85eac3ed17bbc.png",
            "https://forum.level1techs.com/uploads/default/original/4X/e/c/c/ecc53ff977ea3e7194a097467c35d099b72fc757.png",
            "https://forum.level1techs.com/uploads/default/original/4X/a/a/9/aa927b123c68acffa163d4cc6382eff77a958afe.png",
            "https://forum.level1techs.com/uploads/default/original/4X/e/2/4/e244696eb6385e18a07d20db647d3e3881c6b4e5.png",
            "https://forum.level1techs.com/uploads/default/original/4X/f/d/7/fd7494a2e5dc08c34b9bb8aa9c8a3e70c72d8441.png",
            "https://forum.level1techs.com/uploads/default/original/4X/e/e/0/ee0adb0f835699e38df34302ab0120abf4d293aa.png",
            "https://forum.level1techs.com/uploads/default/original/4X/e/8/e/e8e499f1359db66b66e3e24faa19488c6e903836.png",
            "https://forum.level1techs.com/uploads/default/optimized/4X/d/7/6/d766aab2b925f0f6eab10b091fc42b8b29d3e291_2_720x304.png",
            "https://forum.level1techs.com/user_avatar/forum.level1techs.com/bedhedd/48/428767_2.png",
            "https://forum.level1techs.com/images/emoji/twitter/slight_smile.png?v=12"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            "linux",
            "guide"
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2024-04-01T08:48:40+00:00",
        "summary": "",
        "meta_description": "background\nI bought a new ssd  and forgot how I did it previously. \n\n\n\n\nAfter rereading my posts this time, I decided document the process better so that it’s easier for the third time. My goal was to swap my desktop d&hellip;",
        "meta_lang": "en",
        "meta_favicon": "https://forum.level1techs.com/uploads/default/optimized/4X/d/c/c/dcc30fcd7668c3666508943d587b2a40b729f370_2_32x32.png",
        "meta_site_name": "Level1Techs Forums",
        "canonical_link": "https://forum.level1techs.com/t/bedhedds-drive-cloning-guide/203671",
        "text": "background\n\nI bought a new ssd and forgot how I did it previously.\n\nAfter rereading my posts this time, I decided document the process better so that it’s easier for the third time. My goal was to swap my desktop drive with the new one\n\nThis guide assumes the following:\n\nyou are familiar with burning a livecd to a usb drive\n\nhave a usb drive for the live cd\n\nhave a old drive you wish to clone from\n\nhave a new drive you wish to clone to\n\nare comfortable using the terminal\n\nclonezilla\n\nfollow these instructions\n\nhttps://clonezilla.org/show-live-doc-content.php?topic=clonezilla-live/doc/03_Disk_to_disk_clone\n\nmy instructions are adapted from the link above\n\nstart by by burning the clonezilla iso following the instructions from the clonezilla live page url. I used fedora media writter, but you can also use your preferred burning software. On windows, I use rufus.\n\nwith your clonezilla usb prepped, power off the computer with the drive you want to clone.\n\nconnect your replacement drive to computer.\n\nIf your mottherboard has additional m.2 ports plug it in. In my case I didn’t, so I used a m.2 to usb key and plugged it into a usb super speed port.\n\nplug in your usb key\n\npower on your pc, interrupt the default boot command to open the boot\n\nin my case, it was F11\n\nwithin the boot menu, select your usb drive with clonezilla\n\nclonezilla will show a boot menu\n\nwithin tthis boot menu select the Clonezilla live (default settings, VGA 800x600)\n\nselect your preferred language and keyboard mapping\n\nwith your language and key mapping selected, select start clonezilla\n\nwith clonezilla started, it will ask you to select the mode, in our case, select the device-device work directly from a disk or partition or partition to a disk or partition\n\nafter selecting the mode, select beginner\n\nnext you’ll be prompted to select a mode, select disk_to_local_disk\n\nyou’ll now be prompted to select your source disk (this is the disk you want to copy\n\nin this example they select 21.5 gb\n\nonce you select your disk, you’ll be prompted to select the target disk\n\nin this case they selected the 68.7 gb disk\n\nwith your disks selected, you’ll be prompted to select the advanced parameters\n\nI selected fsck-y Auto, but if you need it quick, select skip checking\n\nafter passing the advanced parameters, you’ll be prompted with creating a partition table. Select -k0\n\nin theory, -k1 should be selected if you are moving to a drive of a different size, but in my experience, I have had trouble booting into fedora when I selected -k1. It’s much easier to resize partitions in fedora than from the emergency shell. I sunk a ton of time trying to fix the partition from the dracut emergency shell and should have cut my losses earlier.\n\nafter setting the partitions, you’ll be prompted to select a action when clonezilla is finished.\n\nI selected choose because if clonezilla finishes faster than I expect or if glitches out I’d rather have it restart than needing to reboot and get into the clonezilla live cd\n\nwith your settings set, you will be given a final warning before clonezilla initiates cloning, hit enter and read the warnings\n\nmake sure the drive you want to target drive matches the name of your drive\n\nwait for clonezilla to scan and clone the drive\n\nonce clonezilla is finished, it will prompt you with next steps, pick power off if it didn’t throw any errors\n\nI found that at usb super speed, it will take 10-20 minutes for a half filled 500gb ssd\n\npower off your pc\n\nremove the old drive from your pc and boot\n\navoid having both drives at the same time, as it will confuse the boot manager\n\nwhat to do if you get stuck in the emergency shell\n\nif you accidentally have the 2 drives or something is misconfigured, you might enter the fedora emergency shell.\n\nyou might see error such as\n\n/dev/mapper/fedora-root does not exist /dev/mapper/fedora-swap does not exist /dev/mapper/fedora-home does not exist\n\nthe errors you might see at boot (hit escape while you see the fedora symbol at boot to see the service startup sequence)\n\nI found the section “The Dracut Emergency Shell” from this article to help debug it for me\n\nThese commands were helpful\n\nls /dev/mapper\n\nthe ls command tells us what the boot manager has loaded\n\nlvm lvscan\n\nthe lvscan command tells us what lvm are active and detected\n\nlvm lvchange -a y fedora/root\n\nthe lvchange command tells the shell to use the inactive lvm from lvscan\n\nexpanding the partition\n\nI’ve adapted these instructions from this post.\n\nI’ve added notes for the what the commands do\n\nInspect Current Disk\n\nnotes: this command will list all the partitions the system can see\n\nCommand:\n\nlsblk -o NAME,FSTYPE,SIZE,MOUNTPOINT,LABEL,UUID /dev/nvme0n1\n\nSample Output:\n\nNAME FSTYPE SIZE MOUNTPOINT LABEL UUID nvme0n1 476.9G ├─nvme0n1p1 vfat 600M /boot/efi 6542-F15B ├─nvme0n1p2 ext4 1G /boot 08fa06a0-672f-4231-b84e-b3ca6a832cbe └─nvme0n1p3 LVM2_member 236.9G UwB9Uf-03PH-pbh8-q0F8-WllR-h8FN-Sh4PzL\n\nPartition the Unallocated Space\n\nnotes: this command will create a initialize a linux filesystem on the drive from the command line (you can also use any gui tool too, but it will have a different name in the later steps)\n\nCommand:\n\nsudo fdisk /dev/nvme0n1\n\nSteps:\n\nEnter n to create a new partition\n\nPress Enter to accept the default partition number\n\nPress Enter again to accept the default first sector\n\nPress Enter once more to allocate the entire remaining space, or specify a specific size/end sector if desired.\n\nType w to write changes and exit.\n\n* Sample output (at the end)\n\nCreated a new partition 4 of type 'Linux' and of size XXX.XX GiB.\n\nCreate Physical Volume on Unallocated Space:\n\nnotes: this command will tell the os to use the partition and create a physical volume\n\nCommand:\n\nsudo pvcreate /dev/nvme0n1p4\n\nSample Output:\n\nWARNING: ext4 signature detected on /dev/nvme0n1p4 at offset 1080. Wipe it? [y/n]: y Wiping ext4 signature on /dev/nvme0n1p4. Physical volume \"/dev/nvme0n1p4\" successfully created.\n\nVerify Physical Volumes and Available Space:\n\nnotes: this command checks to confirm if our past commands worked\n\nCommands:\n\nsudo pvs\n\nSample Output:\n\nPV VG Fmt Attr PSize PFree /dev/nvme0n1p3 fedora_localhost-live lvm2 a-- <236.89g 0 /dev/nvme0n1p4 lvm2 --- 238.46g 238.46g\n\nsudo vgdisplay | grep \"Free PE\"\n\nFree PE / Size 61046 / 238.46 GiB\n\nnotes: if you get a empty output from vgdisplay, use\n\nsudo vgdisplay fedora_localhost-live | grep \"Free PE / Size\"\n\nSample Output\n\nFree PE / Size 183140 / 715.39 GiB\n\nExtend Logical Volume (root):\n\nnotes: this command will tell the os how much of the partition should be used for our directories. in this example we are expanding the root directory. Repeat this step for the other partitions (for example home and swap)\n\nCommand:\n\nsudo lvextend -l +50%FREE /dev/mapper/fedora_localhost--live-root\n\nSample Output:\n\nSize of logical volume fedora_localhost-live/root changed from 70.00 GiB (17920 extents) to 189.23 GiB (48491 extents).\n\nVerify Changes:\n\nnotes: check if there’s a new partition in the new nvme partition, in our case it should be on nvme4\n\nCommand:\n\nlsblk -o NAME,FSTYPE,SIZE,MOUNTPOINT,LABEL,UUID /dev/nvme0n1\n\nSample Output:\n\nNAME FSTYPE SIZE MOUNTPOINT LABEL UUID nvme0n1 953.9G ├─nvme0n1p1 vfat 600M /boot/efi 6542-F15B ├─nvme0n1p2 ext4 1G /boot 08fa06a0-672f-4231-b84e-b3ca6a832cbe ├─nvme0n1p3 LVM2_member 236.9G UwB9Uf-03PH-pbh8-q0F8-WllR-h8FN-Sh4PzL │ ├─fedora_localhost--live-root ext4 427.7G / 19ef8134-2f63-4c22-ba02-e0cf0409e853 │ ├─fedora_localhost--live-swap swap 7.9G [SWAP] f6ed0d66-b805-4eb4-86ee-9e1245539caf │ └─fedora_localhost--live-home ext4 337.8G /home c60a9949-e17f-46a3-be7b-7c51e346113a └─nvme0n1p4 LVM2_member 715.4G 8t13xm-NHfU-qhbS-j8NG-6ztw-wnoL-zHelot ├─fedora_localhost--live-root ext4 427.7G / 19ef8134-2f63-4c22-ba02-e0cf0409e853 └─fedora_localhost--live-home ext4 337.8G /home c60a9949-e17f-46a3-be7b-7c51e346113a\n\nResize the Filesystem for Root to Utilize the New Space:\n\nnotes: this will add the extra space to your file system. rerun the command substituting root with home or swap if you expanded it in the Extend Logical Volume (root): step from earlier\n\nCommand:\n\nsudo resize2fs /dev/mapper/fedora_localhost--live-root\n\nSample Output:"
    }
}