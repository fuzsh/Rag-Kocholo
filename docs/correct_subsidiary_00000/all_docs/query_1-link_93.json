{
    "id": "correct_subsidiary_00000_1",
    "rank": 93,
    "data": {
        "url": "http://blog.itvce.com/2015/06/29/configuring-unique-portal-themes-per-virtual-server-vserver-in-netscaler-11-unified-gateway-guest-blog-post-by-john-meek/",
        "read_more_link": "",
        "language": "en",
        "title": "Configuring Unique Portal Themes per Virtual Server (vServer) in NetScaler 11 Unified Gateway Guest Blog Post by John Meek",
        "top_image": "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_1.png",
        "meta_img": "",
        "images": [
            "http://blog.itvce.com/wp-content/uploads/2012/03/weblogo_v2.png",
            "http://blog.itvce.com/wp-content/uploads/2012/Social/youtube.png",
            "http://blog.itvce.com/wp-content/uploads/2012/Social/rss.png",
            "http://static.hupso.com/share/buttons/share-medium.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/john-300x300.jpg",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_1.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_2.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_3.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_4.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_5.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_6.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_7.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_8.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_9.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_10.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_11.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_12.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_13.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_14.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_15.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_16.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_17.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_18.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_19.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_20.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_21.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_22.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_23.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_24.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_25.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_26.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_27.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_28.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_29.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_30.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_31.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_32.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_33.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_34.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_35.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_36.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_37.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_38.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_39.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_40.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_41.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_42.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_43.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_44.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_45.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_46.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_47.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_48.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_49.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_50.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_51.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_52.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_53.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_54.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_55.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_56.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_57.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_58.png",
            "http://blog.itvce.com/wp-content/uploads/2015/06/062615_2227_59.png",
            "http://static.hupso.com/share/buttons/share-medium.png",
            "http://blog.itvce.com/wp-content/themes/infocus/lib/scripts/timthumb/thumb.php?src=http://blog.itvce.com/wp-content/themes/infocus/images/assets/post_thumb.png&w=122&h=75&zc=1&q=100",
            "http://blog.itvce.com/wp-content/themes/infocus/lib/scripts/timthumb/thumb.php?src=http://blog.itvce.com/wp-content/themes/infocus/images/assets/post_thumb.png&w=122&h=75&zc=1&q=100",
            "http://blog.itvce.com/wp-content/themes/infocus/lib/scripts/timthumb/thumb.php?src=http://blog.itvce.com/wp-content/themes/infocus/images/assets/post_thumb.png&w=122&h=75&zc=1&q=100",
            "http://blog.itvce.com/wp-content/themes/infocus/lib/scripts/timthumb/thumb.php?src=http://blog.itvce.com/wp-content/themes/infocus/images/assets/post_thumb.png&w=122&h=75&zc=1&q=100",
            "http://blog.itvce.com/wp-content/themes/infocus/lib/scripts/timthumb/thumb.php?src=http://blog.itvce.com/wp-content/themes/infocus/images/assets/post_thumb.png&w=122&h=75&zc=1&q=100",
            "http://blog.itvce.com/wp-content/themes/infocus/lib/scripts/timthumb/thumb.php?src=http://blog.itvce.com/wp-content/themes/infocus/images/assets/post_thumb.png&w=122&h=75&zc=1&q=100",
            "http://blog.itvce.com/wp-content/themes/infocus/lib/scripts/timthumb/thumb.php?src=http://blog.itvce.com/wp-content/themes/infocus/images/assets/post_thumb.png&w=122&h=75&zc=1&q=100",
            "http://blog.itvce.com/wp-content/themes/infocus/lib/scripts/timthumb/thumb.php?src=http://blog.itvce.com/wp-content/themes/infocus/images/assets/post_thumb.png&w=122&h=75&zc=1&q=100",
            "http://2.gravatar.com/avatar/ead132eb05853380e6c5612c02b8aa66?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://0.gravatar.com/avatar/6015c789edc42c69b344f45ecac4a2bb?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://0.gravatar.com/avatar/6015c789edc42c69b344f45ecac4a2bb?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://1.gravatar.com/avatar/4f8a26387d117e88d7921953f8cea9e0?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://1.gravatar.com/avatar/7ec7129dded9fe975fdc68aedfa554b4?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://0.gravatar.com/avatar/6015c789edc42c69b344f45ecac4a2bb?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://0.gravatar.com/avatar/00ad478c0519a8103fafe4d0c46b750c?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://1.gravatar.com/avatar/a57af3bb526d1e6535ff17b1e21dcad8?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://1.gravatar.com/avatar/4f8a26387d117e88d7921953f8cea9e0?s=60&d=http%3A%2F%2Fblog.itvce.com%2Fwp-content%2Fthemes%2Finfocus%2Fimages%2Fassets%2Fgravatar_default.png&r=g",
            "http://blog.itvce.com/wp-content/plugins/collapsing-categories/img/expand.gif",
            "http://blog.itvce.com/wp-content/plugins/collapsing-categories/img/expand.gif",
            "http://blog.itvce.com/wp-content/plugins/collapsing-categories/img/collapse.gif",
            "http://blog.itvce.com/wp-content/plugins/collapsing-categories/img/expand.gif",
            "http://blog.itvce.com/wp-content/plugins/collapsing-categories/img/expand.gif",
            "http://blog.itvce.com/wp-content/plugins/collapsing-categories/img/expand.gif"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            "access gateway",
            "active directory",
            "ad",
            "cag",
            "citrix",
            "citrix receiver",
            "hdx",
            "load balancing",
            "microsoft",
            "netscaler",
            "rds",
            "sbc",
            "server",
            "vdi",
            "virtual desktops",
            "virtual machine",
            "virtualization",
            "vmware",
            "vsphere",
            "windows 7",
            "windows 8",
            "xenapp",
            "xendesktop",
            "xenserver"
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2015-06-29T00:00:00",
        "summary": "",
        "meta_description": "",
        "meta_lang": "en",
        "meta_favicon": "",
        "meta_site_name": "",
        "canonical_link": "http://blog.itvce.com/2015/06/29/configuring-unique-portal-themes-per-virtual-server-vserver-in-netscaler-11-unified-gateway-guest-blog-post-by-john-meek/",
        "text": "Over the last several years, I’ve had the honor of working with a Citrix and VMware virtualization focused engineer named John Meek. Bitten by the blogging bug, John is at it again with his second guest blog post! For this blog post John has volunteered to share his experiences with the NetScaler 11 Beta and a new feature I’m particularly excited about that enables customers to have multiple themes on the same NetScaler appliances. Previously, portal customizations were difficult and manual to configure, and would be applied globally to the virtual or physical appliances, so this is a very nice feature! If you have content you would like to contribute and be a guest blogger (or regular) on itvce.com, feel free to reach out to me at dane@itvce.com or on Twitter @youngtech so we can discuss. Without further ado, below is the guest blog post by John Meek, you can find him on LinkedIn or on Twitter.\n\nI was very excited when I heard about the new theme capabilities in the Unified Gateway (formerly Access Gateway) settings of NetScaler 11. In the soon to be released newfangled version of NetScaler you can create multiple themes, and each Gateway can have its own.\n\nHaving multiple themes may not matter much to smaller businesses that have need of only one Gateway. However, for some of the larger clients I work with they have separate Citrix “Sites” and would like to have their own customization’s per site. I often get asked how to set up different themes for multiple Gateways in NetScaler 10.x, which unfortunately you cannot. These Gateways can be for different departments, child companies, partner access, etc. pointing to segregated resources.\n\nFor this blog, I decided to go through the whole process of creating your load balancer, your Gateway, the session policies, etc. I figured this could help anyone that is new to configuring NetScaler for StoreFront access. You will need to have the StoreFront server, Desktop Delivery Controller, and VDA’s configured to follow this process. If you are experienced please skip to below where I show some of the new “Portal Theme” customization options.\n\nPlease note as well that once you log in to the NetScaler Gateway StoreFront will not be customized and will still have the green bubble theme. As I play more with the new theme features of StoreFront 3.0 I may update this article to get StoreFront to match the Gateway.\n\nCreating the StoreFront Load Balancer\n\nFirst we will create an internal load balancer to handle traffic and monitoring of our StoreFront server. This will be bound to the Access Gateway where we will configure a custom theme.\n\nLog in to the NetScaler GUI. Select Traffic Management -> Load Balancing -> Virtual Servers. Click Add.\n\nEnter your Load Balancing Virtual Server settings. The IP address is the Virtual IP that you wish to use for the load balancer, which will correspond to your internal DNS record for accessing StoreFront.\n\nClick OK.\n\nSelect No Load Balancing Virtual Service Binding.\n\nClick the + to add a new Service.\n\nEnter in your Service details. The IP address is the IP of your StoreFront server.\n\nClick OK.\n\nIf this is in production I would recommend adding a new StoreFront type monitor for better server monitoring. Follow the instructions at the link to configure production StoreFront monitors on the Services.\n\nhttp://support.citrix.com/proddocs/topic/netscaler-traffic-management-10-1-map/ns-lb-monitors-builtin-ctx-storefront-stores-tsk.html\n\nConfigure a NetScaler Access Gateway for StoreFront\n\nIn the steps below we will configure a new NetScaler Gateway ICA Proxy that we can use to create our custom themes.\n\nLog into your NetScaler and select the NetScaler Gateway tab. Under Getting Started select the NetScaler Gateway Wizard.\n\nSelect Get Started.\n\nEnter the settings for the NetScaler Gateway. Make sure to check the box for Redirect requests from port 80 to secure port so the wizard will configure the HTTP redirect for you automatically.\n\nBrowse and select your certificate. In my lab I have a wildcard third-party certificate. If you do not have a certificate either create one from your Active Directory Certificate Services, or use the Create Test Certificate option on the NetScaler Gateway Wizard.\n\nEnter in your LDAP settings.\n\nIP Address: Your domain controller\n\nBase DN: The Base DN of your domain (or you can specify a specific user OU)\n\nService account: Account used to query Active Directory for users\n\nPassword: The password of the service account\n\nServer Logon Name Attribute: I typically use sAMAccountName\n\nClick Continue.\n\nVerify the configuration was successful.\n\nSince this Gateway is using StoreFront directly and not VPN it will be an ICA proxy which we need to configure. In the NetScaler GUI go to NetScaler Gateway -> Virtual Servers and Edit your Access Gateway.\n\nSelect the Edit icon next to Basic Settings.\n\nSelect More.\n\nSelect ICA Only. Click OK.\n\nConfigure the Session Policy for the Receiver Client\n\nNext scroll down the page to Policies. Here we will add a new Session Policy to direct traffic to our StoreFront server.\n\nClick the arrow to the right of Session Policy.\n\nSelect the Session Policy and choose Unbind. We will create new Session Policies for StoreFront for Web as well as the Receiver Client.\n\nSelect Add Binding.\n\nNext to Select Policy select the + icon.\n\nEnter in your Session Policy Name. Next to Action select the + icon.\n\nSelect the Client Experience tab. Change the Plug-in Type to Java.\n\nScroll further down and also select Single Sign-on to Web Applications.\n\nSelect the Security tab. Change Default Authorization Action to ALLOW.\n\nSelect the Published Applications tab. Change ICA Proxy to ON. For Web Interface Address and Account Services Address enter either the IP or FQDN of your StoreFront load balancer. Change the Single Sign-on Domain to the NETBIOS name of your domain.\n\nClick OK.\n\nSelect Expression Editor.\n\nEnter the following values. Click Done and then Create.\n\nClick Select.\n\nSelect Bind.\n\nConfigure a Session Policy for Receiver for Web\n\nNext to Policies select the + icon.\n\nClick Continue.\n\nSelect Add Binding.\n\nNext to Select Policy click the + icon to add a new policy.\n\nEnter in the Name. Next to Action click the + icon to add a new action.\n\nSelect the Client Experience tab. Change Clientless Access to Allow. Scroll down the page.\n\nPlug-in Type should be set to Java. Enable Single Sign-on to Web Applications.\n\nSelect the Security tab. Set the Default Authorization Action to ALLOW.\n\nSelect the Published Applications tab. For the Web Interface Address enter in http(s)://<VIP-IP\\FQDN>/Citrix/<StoreName>Web. In the Receiver for Web policy you do not need to enter in the Account Services Address.\n\nClick Create.\n\nSelect Expression Editor.\n\nEnter in the following Expression manually, or use the Expression Editor.\n\nREQ.HTTP.HEADER User-Agent NOTCONTAINS CitrixReceiver\n\nNow you have configured your Receiver_pol and your Receiver_for_Web_pol and can access your XenApp/XenDesktop resources.\n\nNow create the DNS A Record pointing to your NetScaler Gateway or update your hosts file. Confirm you can login through your gateway and get to StoreFront and your certificate is valid.\n\nCreate a New NetScaler Gateway Portal Theme\n\nIn the NetScaler GUI expand NetScaler Gateway and click on Portal Themes.\n\nClick Add.\n\nGive the theme a Theme Name. I am using GreenBubble as my Template Theme. Click OK.\n\nSelect Change Background Image. Select Browse and locate your image file. Scroll down and click OK.\n\nClick Done.\n\nSelect Virtual Servers. Select your Gateway and click Edit.\n\nScroll down to Portal Themes. Click the Arrow to select a new theme.\n\nSelect Add Binding.\n\nSelect the arrow.\n\nSelect your new Theme Name and click Select.\n\nSelect Bind. (I know, it’s a lot of steps and could probably be streamlined…)\n\nVerify the new background image works. The process is much more streamlined than using WinSCP to replace the .png files on the NetScaler appliance.\n\nNote however, that if you have accessed this theme more than once, to get new changes to show in your browser you may need to either clear your browser cache or launch the browser in private/incognito mode to ignore old cached files.\n\nNow we will make a few more updates.\n\nIn the Portal Theme page next to Common Attributes select the Edit icon.\n\nSelect Change Center Logo and Browse to your logo. This will update the NetScaler logo in the middle of the Gateway page with your company logo.\n\nThe size of the Center Logo must be near the size in height and width of the NetScaler logo to not get cut off. You can inspect the element in your browser to get the specific size, I used GIMP to create my logo and my size was 245W x 60H and it showed up pretty well.\n\nSelect Login Page under Advanced Settings.\n\nScroll down and edit the Login Page settings. Here you can change the text that displays on the main login page.\n\nVery nice! As you can see in this screenshot I have updated the background, added my lab company logo, updated the header to the credentials box, and updated the text for the user name.\n\nCreate a Second NetScaler Gateway Virtual Server Portal Theme\n\nNow to show you that different themes can be applied to different gateways, I created a new Gateway for the European division of my fantasy lab company XenWorks and created a new theme to apply it using the steps above. Here is a screen capture of the European gateway.\n\nThere are also several other NetScaler Endpoint Analysis theme settings you can edit, as well as VPN settings. These settings include headers, information messages, warnings, etc. but for this blog I wanted to focus more on the look of the Gateway page. However it would be a good idea to review these settings if you use VPN or End Point Analysis.\n\nSummary\n\nCitrix has done a great job in listening to its user base and making the NetScaler interface more intuitive and responsive. From starting the removal of Java for HTML5, better configuration wizards, and now to making customizations easier, the improvements to NetScaler have been impressive.\n\nAll network traffic that accesses server resources should be going through an Application Delivery Controller for isolation, security, resilience, and performance reasons, and by making improvements to the UX on the NetScaler it makes it hard to say no to deploying these appliances in your datacenters. NetScaler is one of the more powerful and fun tools I get to work with on a regular basis and I can’t wait to see what is in store for the future.\n\nHopefully this blog post has been beneficial to you. If you have any comments, questions, or just want to leave feedback, please do so in the comments section below.\n\nCheers,\n\nJohn Meek"
    }
}