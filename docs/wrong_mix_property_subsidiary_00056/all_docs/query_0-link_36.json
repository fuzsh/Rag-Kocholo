{
    "id": "wrong_mix_property_subsidiary_00056_0",
    "rank": 36,
    "data": {
        "url": "http://joernhees.de/blog/",
        "read_more_link": "",
        "language": "en",
        "title": "Science, code and stuff…",
        "top_image": "http://joernhees.de/blog/wp-content/uploads/2014/10/cropped-IMG_0056.jpg",
        "meta_img": "",
        "images": [
            "http://joernhees.de/blog/wp-content/uploads/2014/10/cropped-IMG_0056.jpg"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2015-11-23T03:18:15+01:00",
        "summary": "",
        "meta_description": "",
        "meta_lang": "en",
        "meta_favicon": "",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "So you’re the guy who is allowed to setup a local DBpedia mirror or more generally a local Linked Data mirror for your work group? OK, today is your lucky day and you’re in the right place. I hope you’ll be able to benefit from my many hours of trials and errors. If anything goes wrong (or everything works fine), feel free to leave a comment below.\n\nVersions of this guide\n\nThere are four older versions of this guide:\n\nOct. 2010: The first version focusing on DBpedia 3.5 – 3.6 and Virtuoso 6.1\n\nMay 2012: A bigger update to DBpedia 3.7 (new local language versions) and Virtuoso 6.1.5+ (with a lot of updates making pre-processing of the dumps easier)\n\nApr. 2014: Update to DBpedia 3.9 and Virtuoso 7\n\nNov. 2014: Update to DBpedia 2014 and other Datasets and Virtuoso 7.1.0\n\nIn this step by step guide I’ll tell you how to install a local Linked Data mirror of the DBpedia 2015-04, hosting a combination of the regular English and (exemplary) the i18n German datasets adding up to nearly 850 M triples.\n\nI’ll also mention how you can add the following datasets / vocabularies adding up to nearly 6 G triples:\n\nFreebase (~ 3 G triples)\n\nLinkedGeoData (~ 1 G triples)\n\nWikidata (~ 841 M triples)\n\nDBLP (~ 82 M triples)\n\nYago Labels (~ 45 M triples)\n\nUmbel (~ 480 K triples)\n\nSchema.org (~ 9 K triples)\n\nAs DBpedia is quite modular and has many internationalized (i18n) versions it has its own section in this guide, the other datasets don’t, as they maximally need minor repacking and a single line to load as explained below.\n\nUsed Versions\n\nDBpedia 2015-04\n\nVirtuoso OpenSource 7.2.1\n\nUbuntu 14.04 LTS or Debian 8\n\nPrerequisites\n\nA strong machine with root access and enough RAM: We used a VM with 4 Cores and 32 GBs of RAM for DBpedia only. If you intend to also load Freebase and other datasets i recommend at least 64 GBs of RAM (we actually ended up using a 16 Core, 256 GB RAM Server in our research group). For installing i recommend more than 128 GB free HD space for DBpedia alone, 512 GB if you want to load Freebase as well, especially for downloading and repacking the datasets, as well as the growing database file when importing (mine grew to 64 GBs for DBpedia and 320 GB with all the datasets mentioned above).\n\nThis guide applies to a clean install. Please check that there’s no older version of Virtuoso installed with dpkg -l | grep virtuoso ; which isql ; which isql-vt (no output is good). If there is, please know what you’re doing. Virtuoso 6 and 7 use different default locations for their DBs, but in general newer versions should be able to upgrade older DB files if correctly configured to use the same DB file. In general i’d suggest to either uninstall the older version and its config files and then install the new one according to this guide or to isolate the newer one with the docker approach mentioned below.\n\nFor the impatient and docker affine\n\nAs an alternative to the following sections, which will explain how to build everything from source yourself and go into details about the DBpedia dump files, i also provide a docker image (source) that you can use to automate and simplify the process a lot:\n\ndump_dir=~/dumps/dbpedia/2015-04 db_dir=~/virtuoso_db mkdir -p \"$dump_dir\" cd \"$dump_dir\" # downloading wget -r -nc -nH --cut-dirs=1 -np -l1 \\ -A '*.nt.bz2' -A '*.owl' -R '*unredirected*' \\ http://downloads.dbpedia.org/2015-04/core/ # repacking apt-get install pigz pbzip2 for i in */*.nt.bz2 ; do echo $i ; pbzip2 -dc \"$i\" | pigz - > \"${i%bz2}gz\" && rm \"$i\"; done mkdir classes cd classes wget http://downloads.dbpedia.org/2015-04/dbpedia_2015-04.owl cd # install some VAD packages for DBpedia into our db which we'll keep in db_dir docker run -d --name dbpedia-vadinst \\ -v \"$db_dir\":/var/lib/virtuoso-opensource-7 \\ joernhees/virtuoso run && docker exec dbpedia-vadinst wait_ready && docker exec dbpedia-vadinst isql-vt PROMPT=OFF VERBOSE=OFF BANNER=OFF \\ \"EXEC=vad_install('/usr/share/virtuoso-opensource-7/vad/rdf_mappers_dav.vad');\" && docker exec dbpedia-vadinst isql-vt PROMPT=OFF VERBOSE=OFF BANNER=OFF \\ \"EXEC=vad_install('/usr/share/virtuoso-opensource-7/vad/dbpedia_dav.vad');\" && docker stop dbpedia-vadinst && docker rm -v dbpedia-vadinst && # starting the import docker run --rm \\ -v \"$db_dir\":/var/lib/virtuoso-opensource-7 \\ -v \"$dump_dir\"/classes:/import:ro \\ joernhees/virtuoso import 'http://dbpedia.org/resource/classes#' && # docker import of the actual data (will use 64 GB RAM and take about 1 hour) docker run --rm \\ -v \"$db_dir\":/var/lib/virtuoso-opensource-7 \\ -v \"$dump_dir\"/core:/import:ro \\ -e \"NumberOfBuffers=$((64*85000))\" \\ joernhees/virtuoso import 'http://dbpedia.org' && # running the local endpoint on port 8891 with 32 GB RAM: docker run --name dbpedia \\ -v \"$db_dir\":/var/lib/virtuoso-opensource-7 \\ -p 8891:8890 \\ -e \"NumberOfBuffers=$((32*85000))\" \\ joernhees/virtuoso run # access one of the following for example: # http://localhost:8891/sparql # http://localhost:8891/resource/Bonn # http://localhost:8891/conductor (user: dba, pw: dba)\n\nThe manual version\n\nDownload and build Virtuoso\n\nWe’ll download Virtuoso OpenSource: either from SourceForge or GitHub (make sure you get v7.2.1 as in this guide or a newer version).\n\nUnlike in earlier versions of this guide we’ll now first build the .deb packages and then install them with apt-get.\n\nAs building will install a lot of extra packages that you only need for building, i prepared another docker image (source) that will do the whole building job inside a container for you and put the resulting .deb packages (and DBpedia VAD) into your ~/virtuoso_deb folder:\n\ndocker run --rm -it -v ~/virtuoso_deb:/export/ joernhees/dpkg_build \\ https://github.com/openlink/virtuoso-opensource/releases/download/v7.2.1/virtuoso-opensource-7.2.1.tar.gz \\ -j5 # this should run for about 15 minutes # compilation by default sadly does not create the dbpedia VAD package, so # to do that, the above command stops after compilation in interactive mode. # in there just execute this: cd /tmp/build/virtuoso*/ && ./configure --with-layout=debian --enable-dbpedia-vad && cd binsrc && make && cp dbpedia/dbpedia_dav.vad /export && exit\n\nIf you used this, you can skip the following down to installing the .deb packages.\n\nIf not, to do the building manually run this to download the file, put it in your home dir on the server, then extract it and switch to the directory:\n\nmkdir ~/virtuoso_deb cd ~/virtuoso_deb wget https://github.com/openlink/virtuoso-opensource/releases/download/v7.2.1/virtuoso-opensource-7.2.1.tar.gz tar -xvzf virtuoso-7.2.1.tar.gz cd virtuoso-opensource-7.2.1 # or newer, depending what you got\n\nAfterwards you can use the following to install the build dependencies and actually build the .deb packages:\n\n# install build tools sudo apt-get install -y build-essential devscripts # to install Virtuoso build dependencies mk-build-deps -irt'apt-get --no-install-recommends -yV' && dpkg-checkbuilddeps # to build Virtuoso with 5 processes in parallel # choose something like your server's #CPUs + 1 dpkg-buildpackage -us -uc -5\n\nThis will take about 15 min.\n\nAfterwards if everything worked out, you should have the *.deb files in ~/virtuoso_deb.\n\nWe continue to also build the DBpedia VAD:\n\n./configure --with-layout=debian --enable-dbpedia-vad && \\ cd binsrc && make \\ cp dbpedia/dbpedia_dav.vad ~/virtuoso_deb/\n\nFinally, let’s create a small local repository out of the .deb files you just built. The advantage of this is that you can simply install virtuoso-server with its dependencies with apt. In theory you could also resolve them manually and install everything with dpkg -i ..., but where’s the fun in that?\n\ncd ~/virtuoso_deb dpkg-scanpackages ./ | gzip > Packages.gz\n\nInstalling Virtuoso\n\nNo matter if you used the docker or manual building approach for the .deb packages of Virtuoso, you should now be able to install them with apt-get install ... after telling it where to look for the files for example by doing this:\n\nsudo echo \"deb file:~/virtuoso_deb ./\" >> /etc/apt/sources.list.d/virtuoso_local_packages.list sudo apt-get update\n\nAfter this just install Virtuoso with the following command (it should warn you about untrusted sources of the Virtuoso packages, which is because we just built them ourselves):\n\nsudo apt-get install virtuoso-server \\ virtuoso-vad-bpel \\ virtuoso-vad-conductor \\ virtuoso-vad-demo \\ virtuoso-vad-doc \\ virtuoso-vad-isparql \\ virtuoso-vad-ods \\ virtuoso-vad-rdfmappers \\ virtuoso-vad-sparqldemo \\ virtuoso-vad-syncml \\ virtuoso-vad-tutorial\n\nThe above will ask you for a DBA password. Please pick one.\n\nInstalling the VAD packages here will actually not install them in the Virtuoso DB file, but just move them in the right place so they can for example be installed as mentioned later.\n\nTo also move the DBpedia VAD in place for later you can just run this:\n\nsudo cp ~/virtuoso_deb/dbpedia_dav.vad /usr/share/virtuoso-opensource-7/vad/\n\nConfiguring Virtuoso\n\nNow change the following values in /etc/virtuoso-opensource-7/virtuoso.ini, the performance tuning stuff is according to http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFPerformanceTuning:\n\n# note: Virtuoso ignores lines starting with whitespace and stuff after a ; [Parameters] # you need to include the directory where your datasets will be downloaded # to, in our case /usr/local/data/datasets: DirsAllowed = ., /usr/share/virtuoso/vad, /usr/local/data/datasets # IMPORTANT: for performance also do this [Parameters] # the following two are as suggested by comments in the original .ini # file in order to use the RAM on your server: NumberOfBuffers = 2720000 MaxDirtyBuffers = 2000000 # each buffer caches a 8K page of data and occupies approx. 8700 bytes of # memory. It's suggested to set this value to 65 % of ram for a db only server # so if you have 32 GB of ram: 32*1000^3*0.65/8700 = 2390804 # default is 2000 which will use 16 MB ram ;) # Make sure to remove whitespace if you uncomment existing lines! [Database] MaxCheckpointRemap = 625000 # set this to 1/4th of NumberOfBuffers [SPARQL] # I like to increase the ResultSetMaxrows, MaxQueryCostEstimationTime # and MaxQueryExecutionTime drastically as it's a local store where we # do quite complex queries... up to you (don't do this if a lot of people # use it). # In any case for the importer to be more robust add the following setting # to this section: ShortenLongURIs = 1\n\nAfterwards restart Virtuoso:\n\nsudo /etc/init.d/virtuoso-opensource-7 stop\n\nYou should now have a running Virtuoso server.\n\nDBpedia URIs (en) vs. DBpedia IRIs (i18n)\n\nThe DBpedia 2015-04 consists of several datasets: one “standard” English version and several localized versions for other languages (i18n). The standard version mints URIs by going through all English Wikipedia articles. For all of these the Wikipedia cross-language links are used to extract corresponding labels in other languages for the en URIs (e.g., core/labels-en-uris_de.nt.bz2). This is problematic as for example articles which are only in the German Wikipedia won’t be extracted. To solve this problem the i18n versions exists and create IRIs in the form of de.dbpedia.org for every article in the German Wikipedia (e.g., core-i18n/de/labels_de.nt.bz2).\n\nThis approach has several implications. For backwards compatibility reasons the standard DBpedia makes statements about URIs such as http://dbpedia.org/resource/Gerhard_Schr%C3%B6der while the local chapters, like the German one, make statements about IRIs such as http://de.dbpedia.org/resource/Gerhard_Schröder (note the ö). In other words and as written above: the standard DBpedia uses URIs to identify things, while the localized versions use IRIs. This also means that http://dbpedia.org/resource/Gerhard_Schröder shouldn’t work. That said, clicking the link will actually work as there is magic going on in your browser to give you what you probably meant. Using curl curl -i -L -H \"Accept: application/rdf+xml\" http://dbpedia.org/resource/Gerhard_Schröder or SPARQLing the endpoint will nevertheless not be so nice/sloppy and can cause quite some headache. Observe how the following two SPARQL queries return different results: select * where { dbpedia:Gerhard_Schröder ?p ?o. } vs. select * where { <http://dbpedia.org/resource/Gerhard_Schr%C3%B6der> ?p ?o. }. In order to mitigate this historic problem a bit DBpedia actually offers owl:sameAs links from IRIs to URIs: core/iri-same-as-uri_en.nt.bz2 which you should load, so you at least have a link to what you want if someone tries to get info about an IRI.\n\nAs the standard DBpedia provides labels, abstracts and a couple other things in several languages, there are two types of files in the localized DBpedia folders: There are triples directly associating the English URIs with for example the German labels ({core,core-i18n/de}/labels-en-uris_de.nt.bz2) and there are the localized triple files which associate for example the DE IRIs with the German labels (core-i18n/de/labels_de.nt.bz2).\n\nDownloading the DBpedia dump files, de-duplication & Repacking\n\nFor our group we decided that we wanted a reasonably complete mirror of the standard DBpedia (EN) (have a look at the core directory, which contains all datasets loaded into the public DBpedia SPARQL Endpoint), but also the i18n versions for the German DBpedia loaded in separate graphs, as well as each of their pagelink datasets in yet another separate graph each. For this we download the corresponding files in (NT) format as follows. If you need something different do so (and maybe report back if there were problems and how you solved them).\n\n# see comment above, you could also get another DBpedia version... mkdir -p /usr/local/data/datasets/dbpedia/2015-04 cd /usr/local/data/datasets/dbpedia/2015-04 wget -r -nc -nH --cut-dirs=1 -np -l1 -A '*.nt.bz2' -A '*.owl' -R '*unredirected*' http://downloads.dbpedia.org/2015-04/{core/,core-i18n/en,core-i18n/de,dbpedia_2015-04.owl}\n\nAs already mentioned, the DBpedia 2015-04 introduced a core folder which contains all files loaded on the public DBpedia endpoint. Be aware that if you download other folders like above you’ll be downloading some files twice in other folders (e.g., labels-en-uris_de.nt.bz2 can be found in both, the core folder and the core-i18n/de folder). Quite obvious, but especially the core-i18n/en folder contains very many duplicate files from core. If want to see which downloaded files are duplicates (independent of their name) and especially which core-i18n/en files were not loaded on the public endpoint, so are not in core, you can do the following:\n\n# compute md5 hashes for all downloaded files find . -mindepth 2 -type f -print0 | xargs -0 md5sum > md5sums # first check if there are duplicates in other folders without core LC_ALL=C sort md5sums | grep -v '/core/' | uniq -w32 -D ba3fc042b14cb41e6c4282a6f7c45e02 ./core-i18n/en/instance-types-dbtax-dbo_en.nt.bz2 ba3fc042b14cb41e6c4282a6f7c45e02 ./core-i18n/en/instance_types_dbtax-dbo.nt.bz2\n\nSo it seems the ./core-i18n/en/instance-types-dbtax-dbo_en.nt.bz2 and ./core-i18n/en/instance_types_dbtax-dbo.nt.bz2 files are actually the same.\n\nTo list all the files in core-i18n/en which are duplicates do this:\n\n# list all dup files in core-i18n/en LC_ALL=C sort md5sums | uniq -w32 -D | grep '/core-i18n/en' 068975f6dd60f29d13c8442b0dbe403d ./core-i18n/en/skos-categories_en.nt.bz2 14a770f293524a5713f741a1a448bcfa ./core-i18n/en/short-abstracts_en.nt.bz2 1904ad5bc4579fd7efe7f40673c32f79 ./core-i18n/en/specific-mappingbased-properties_en.nt.bz2 1958649209bc90944c65eccd30d37c6c ./core-i18n/en/infobox-property-definitions_en.nt.bz2 2774d36ce14e0143ca4fa25ed212a598 ./core-i18n/en/external-links_en.nt.bz2 314162db2acb516a1ef5fcb3a2c7df2b ./core-i18n/en/geonames_links_en.nt.bz2 3b42f351fc30f6b6b97d3f2a16ef6db3 ./core-i18n/en/instance-types-transitive_en.nt.bz2 3b61b11bdcb50a0d44ca8f4bd68f4762 ./core-i18n/en/revision-ids_en.nt.bz2 43a8b17859c50d37f4cab83573c2992e ./core-i18n/en/instance_types_sdtyped-dbo_en.nt.bz2 4c847b2754294c555236d09485200435 ./core-i18n/en/instance-types_en.nt.bz2 63e2cde88e7bdefb6739c62aa234fc1e ./core-i18n/en/category-labels_en.nt.bz2 64cbbac14769aadf560496b4d948d5e1 ./core-i18n/en/interlanguage-links-chapters_en.nt.bz2 75f2d135459c824feee1d427e4165a4f ./core-i18n/en/transitive-redirects_en.nt.bz2 82fe80c3868a89d54fec26c919a4fa50 ./core-i18n/en/revision-uris_en.nt.bz2 8407c84d262b573418326bdd8f591b95 ./core-i18n/en/mappingbased-properties_en.nt.bz2 87df057913a05dbb5666f360d20fa542 ./core-i18n/en/freebase-links_en.nt.bz2 8cc921fbab5d02ad83b1fda2f87c23f0 ./core-i18n/en/wikipedia-links_en.nt.bz2 9152e34db96df2dd4991e78b7e53ff3f ./core-i18n/en/article-categories_en.nt.bz2 94b48e9df78f746e60a9d0c1aafa3241 ./core-i18n/en/infobox-properties_en.nt.bz2 a254ce4596d045cc047959831edd318a ./core-i18n/en/disambiguations_en.nt.bz2 ab29899e43fab1c6f060cdb8955c5b19 ./core-i18n/en/images_en.nt.bz2 ae046e03be0cf29eac1e3b8a8b3d6b03 ./core-i18n/en/persondata_en.nt.bz2 b4710d36b8dc915f07f5cec2d9971a27 ./core-i18n/en/page-ids_en.nt.bz2 ba3fc042b14cb41e6c4282a6f7c45e02 ./core-i18n/en/instance-types-dbtax-dbo_en.nt.bz2 ba3fc042b14cb41e6c4282a6f7c45e02 ./core-i18n/en/instance_types_dbtax-dbo.nt.bz2 bd90ce4064a120794b5eb5a8d024a97d ./core-i18n/en/long-abstracts_en.nt.bz2 e4c422d1d23c69eff3b9d7d7df3f2f80 ./core-i18n/en/homepages_en.nt.bz2 eafc557cde69fd1cd8f78565c385ee16 ./core-i18n/en/iri-same-as-uri_en.nt.bz2 ef48deae48c9c9c5e17585e3f0243663 ./core-i18n/en/labels_en.nt.bz2 fa8800165c7e80509a4ebddc5f0caf90 ./core-i18n/en/geo-coordinates_en.nt.bz2 # to delete the duplicates from /core-i18n/en, leaving just one of each: LC_ALL=C sort md5sums | uniq -w32 -D | grep '/core-i18n/en' | uniq -w32 | cut -d' ' -f3 | xargs rm # afterwards these should be left: ls -1 core-i18n/en core-i18n/en/anchor-text_en.nt.bz2 core-i18n/en/article-templates_en.nt.bz2 core-i18n/en/flickr-wrappr-links_en.nt.bz2 core-i18n/en/genders_en.nt.bz2 core-i18n/en/instance_types_dbtax-dbo.nt.bz2 core-i18n/en/instance_types_dbtax_ext.nt.bz2 core-i18n/en/instance_types_lhd_dbo_en.nt.bz2 core-i18n/en/instance_types_lhd_ext_en.nt.bz2 core-i18n/en/interlanguage-links_en.nt.bz2 core-i18n/en/out-degree_en.nt.bz2 core-i18n/en/page-length_en.nt.bz2 core-i18n/en/page-links_en.nt.bz2 core-i18n/en/pnd_en.nt.bz2 core-i18n/en/redirects_en.nt.bz2 core-i18n/en/topical-concepts_en.nt.bz2\n\nAs Virtuoso can only import plain (uncompressed) or gzipped files, but the DBpedia dumps are bzipped, you can either repack them into gzip format or extract them. On our server the importing procedure was reasonably slower from extracted files than from gzipped ones (ignoring the vast amount of wasted disk space for the extracted files). File access becomes a bottleneck if you have a couple of cores idling. This is why I decided on repacking all the files from bz2 to gz. As you can see I do the repacking with the parallel versions of bz2 and gz. If that’s not suitable for you, feel free to change it. You might also want to change this if you want to do it in parallel to downloading. The repackaging process below took about 30 minutes but was worth it in the end. The more CPUs you have, the more you can parallelize this process.\n\n# if you want to save space do this: apt-get install pigz pbzip2 for i in core/*.nt.bz2 core-i18n/*/*.nt.bz2 ; do echo $i ; pbzip2 -dc \"$i\" | pigz - > \"${i%bz2}gz\" && rm \"$i\" ; done # else do: #pbzip2 */*.bz2 # notice that the extraction (and repacking) of *.bz2 takes quite a while (about 30 minutes) # gzipped data is reasonably packed, but still very fast to access (in contrast to bz2), so maybe this is the best choice.\n\nData Cleaning and The bulk loader scripts\n\nIn contrast to the previous versions of this article the Virtuoso import will take care of shortening too long IRIs itself. Also it seems the bulk loader script is included in the more recent Virtuoso versions, so as a reference only: see the old version for the cleaning script and VirtBulkRDFLoaderExampleDbpedia and\n\nhttp://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtBulkRDFLoaderScript for info about the bulk loader scripts.\n\nImporting DBpedia dumps into Virtuoso\n\nNow AFTER the re-/unpacking of the DBpedia dumps we will register all files in the DBpedia dir (recursively ld_dir_all) to be added to the DBpedia graph. If you use this method make sure that only files reside in the given subtree that you really want to import.\n\nAlso don’t forget to import the dbpedia_2015-04.owl file!\n\nIf you only want one directory’s files to be added (non recursive) use ld_dir('dir', '*.*', 'graph');.\n\nIf you manually want to add some files, use ld_add('file', 'graph');.\n\nSee the VirtBulkRDFLoaderScript file for details.\n\nBe warned that it might be a bad idea to import the normal and i18n dataset into the same graph if you didn’t select specific languages, as it might introduce a lot of duplicates that are hard to disentangle.\n\nIn order to keep track (and easily reproduce) what was selected and imported into which graph, I actually link (ln -s) the repacked files into a directory structure beneath /usr/local/data/datasets/dbpedia/2015-04/importedGraphs/ and import from there instead. To make sure you think about this, I use that path below, so it won’t work if you didn’t pay attention. If you really want to import all downloaded files, just import /usr/local/data/datasets/dbpedia/2015-04/.\n\nAlso be aware of the fact that if you load certain parts of dumps in different graphs (such as I did with the pagelinks, as well as the i18n versions of the DE and FR datasets) that only triples from the http://dbpedia.org graph will be shown when you visit the local pages with your browser (SPARQL is unaffected by this)!\n\nSo if you only want to load the same datasets as loaded on the official endpoint then importing the core folder (first section below) and dbpedia_2015-04.owl file should be enough.\n\nThe following will prepare the linking for the datasets we loaded:\n\ncd /usr/local/data/datasets/dbpedia/2015-04/ mkdir importedGraphs cd importedGraphs mkdir dbpedia.org cd dbpedia.org # ln -s ../../dbpedia*.owl ./ # see below! ln -s ../../core/*.nt.gz ./ cd .. mkdir ext.dbpedia.org cd ext.dbpedia.org ln -s ../../core-i18n/en/anchor-text_en.nt.gz ./ ln -s ../../core-i18n/en/article-templates_en.nt.gz ./ ln -s ../../core-i18n/en/genders_en.nt.gz ./ ln -s ../../core-i18n/en/instance_types_dbtax-dbo.nt.gz ./ ln -s ../../core-i18n/en/instance_types_dbtax_ext.nt.gz ./ ln -s ../../core-i18n/en/instance_types_lhd_dbo_en.nt.gz ./ ln -s ../../core-i18n/en/instance_types_lhd_ext_en.nt.gz ./ ln -s ../../core-i18n/en/out-degree_en.nt.gz ./ ln -s ../../core-i18n/en/page-length_en.nt.gz ./ cd .. mkdir pagelinks.dbpedia.org cd pagelinks.dbpedia.org ln -s ../../core-i18n/en/page-links_en.nt.gz ./ cd .. mkdir topicalconcepts.dbpedia.org cd topicalconcepts.dbpedia.org ln -s ../../core-i18n/en/topical-concepts_en.nt.gz ./ cd .. mkdir de.dbpedia.org cd de.dbpedia.org ln -s ../../core-i18n/de/article-categories_de.nt.gz ./ ln -s ../../core-i18n/de/article-templates_de.nt.gz ./ ln -s ../../core-i18n/de/category-labels_de.nt.gz ./ ln -s ../../core-i18n/de/disambiguations_de.nt.gz ./ ln -s ../../core-i18n/de/external-links_de.nt.gz ./ ln -s ../../core-i18n/de/freebase-links_de.nt.gz ./ ln -s ../../core-i18n/de/geo-coordinates_de.nt.gz ./ ln -s ../../core-i18n/de/geonames_links_de.nt.gz ./ ln -s ../../core-i18n/de/homepages_de.nt.gz ./ ln -s ../../core-i18n/de/images_de.nt.gz ./ ln -s ../../core-i18n/de/infobox-properties_de.nt.gz ./ ln -s ../../core-i18n/de/infobox-property-definitions_de.nt.gz ./ ln -s ../../core-i18n/de/instance-types_de.nt.gz ./ ln -s ../../core-i18n/de/instance_types_lhd_dbo_de.nt.gz ./ ln -s ../../core-i18n/de/instance_types_lhd_ext_de.nt.gz ./ ln -s ../../core-i18n/de/instance-types-transitive_de.nt.gz ./ ln -s ../../core-i18n/de/interlanguage-links-chapters_de.nt.gz ./ ln -s ../../core-i18n/de/interlanguage-links_de.nt.gz ./ ln -s ../../core-i18n/de/iri-same-as-uri_de.nt.gz ./ ln -s ../../core-i18n/de/labels_de.nt.gz ./ ln -s ../../core-i18n/de/long-abstracts_de.nt.gz ./ ln -s ../../core-i18n/de/mappingbased-properties_de.nt.gz ./ ln -s ../../core-i18n/de/out-degree_de.nt.gz ./ ln -s ../../core-i18n/de/page-ids_de.nt.gz ./ ln -s ../../core-i18n/de/page-length_de.nt.gz ./ ln -s ../../core-i18n/de/persondata_de.nt.gz ./ ln -s ../../core-i18n/de/pnd_de.nt.gz ./ ln -s ../../core-i18n/de/revision-ids_de.nt.gz ./ ln -s ../../core-i18n/de/revision-uris_de.nt.gz ./ ln -s ../../core-i18n/de/short-abstracts_de.nt.gz ./ ln -s ../../core-i18n/de/skos-categories_de.nt.gz ./ ln -s ../../core-i18n/de/specific-mappingbased-properties_de.nt.gz ./ ln -s ../../core-i18n/de/transitive-redirects_de.nt.gz ./ ln -s ../../core-i18n/de/wikipedia-links_de.nt.gz ./ cd .. mkdir pagelinks.de.dbpedia.org cd pagelinks.de.dbpedia.org ln -s ../../core-i18n/de/page-links_de.nt.gz ./ cd ..\n\nThis should have prepared your importedGraphs directory. From this directory you can run the following command which prints out the necessary isql-vt commands to register your graphs for importing:\n\nfor g in * ; do echo \"ld_dir_all('$(pwd)/$g', '*.*', 'http://$g');\" ; done\n\nOne more thing (thanks to Romain): In order for the DBpedia.vad package (which is installed at the end) to work correctly, the dbpedia_2014.owl file needs to be imported into graph http://dbpedia.org/resource/classes#.\n\nNote: In the following i will assume that your Virtuoso isql command is called isql-vt. If you’re in lack of such a command, it might be called isql or isql-v, but this usually means you installed it using some other method than described in here\n\nisql-vt # enter Virtuoso isql mode\n\n-- we are in sql mode now ld_add('/usr/local/data/datasets/remote/dbpedia/2015-04/dbpedia_2015-04.owl', 'http://dbpedia.org/resource/classes#'); ld_dir_all('/usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org', '*.*', 'http://dbpedia.org'); ld_dir_all('/usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org', '*.*', 'http://de.dbpedia.org'); ld_dir_all('/usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org', '*.*', 'http://ext.dbpedia.org'); ld_dir_all('/usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/pagelinks.dbpedia.org', '*.*', 'http://pagelinks.dbpedia.org'); ld_dir_all('/usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/pagelinks.de.dbpedia.org', '*.*', 'http://pagelinks.de.dbpedia.org'); ld_dir_all('/usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/topicalconcepts.dbpedia.org', '*.*', 'http://topicalconcepts.dbpedia.org'); -- do the following to see which files were registered to be added: select * from DB.DBA.LOAD_LIST; -- if unsatisfied use: -- delete from DB.DBA.LOAD_LIST; EXIT;\n\nYou can now also register other datasets like Freebase, DBLP, Yago, Umbel and Schema.org … that you want to be loaded after downloading them to the appropriate directories like this:\n\nld_add('/usr/local/data/datasets/remote/schema.org/2015-11-04/all.nt', 'http://schema.org'); ld_dir_all('/usr/local/data/datasets/remote/umbel/External Ontologies', '*.n3', 'http://umbel.org/umbel/rc'); ld_add('/usr/local/data/datasets/remote/umbel/Ontology/umbel.n3', 'http://umbel.org/umbel'); ld_add('/usr/local/data/datasets/remote/umbel/Reference Structure/umbel_reference_concepts.n3', 'http://umbel.org/umbel/rc'); ld_add('/usr/local/data/datasets/remote/yago/yago3/2015-11-04/yagoLabels.ttl.gz', 'http://yago-knowledge.org/resource'); ld_add('/usr/local/data/datasets/remote/dblp/l3s/2015-11-04/dblp.nt.gz', 'http://dblp.l3s.de'); ld_dir_all('/usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026', '*.nt.gz', 'http://www.wikidata.org'); ld_dir_all('/usr/local/data/datasets/remote/freebase/2015-08-09', '*.nt.gz', 'http://rdf.freebase.com'); ld_dir_all('/usr/local/data/datasets/remote/linkedgeodata/2014-09-09', '*.*', 'http://linkedgeodata.org');\n\nOur full DB.DBA.LOAD_LIST currently looks like this:\n\nselect ll_graph, ll_file from DB.DBA.LOAD_LIST;\n\nll_graph ll_file VARCHAR VARCHAR NOT NULL ____________________________________ http://dblp.l3s.de /usr/local/data/datasets/remote/dblp/l3s/2015-11-04/dblp.nt.gz http://dbpedia.org/resource/classes# /usr/local/data/datasets/remote/dbpedia/2015-04/dbpedia_2015-04.owl http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/amsterdammuseum_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/article-categories_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/bbcwildlife_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/bookmashup_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/bricklink_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/category-labels_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/cordis_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/dailymed_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/dblp_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/dbpedia_2015-04.owl http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/dbtune_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/disambiguations_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/diseasome_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/drugbank_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/eunis_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/eurostat_linkedstatistics_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/eurostat_wbsg_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/external-links_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/factbook_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/flickrwrappr_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/freebase-links_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/gadm_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/geo-coordinates_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/geonames_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/geonames_links_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/geospecies_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/gho_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/gutenberg_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/homepages_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/images_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/infobox-properties_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/infobox-property-definitions_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/instance-types-transitive_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/instance-types_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/instance_types_sdtyped-dbo_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/interlanguage-links-chapters_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/iri-same-as-uri_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/italian_public_schools_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_ar.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_de.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_es.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_fr.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_it.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_ja.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_nl.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_pl.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_pt.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_ru.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels-en-uris_zh.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/labels_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/linkedgeodata_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/linkedmdb_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/lobid.org-manifestation.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/lobid.org-organization.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_ar.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_de.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_es.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_fr.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_it.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_ja.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_nl.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_pl.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_pt.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_ru.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts-en-uris_zh.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/long-abstracts_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/mappingbased-properties_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/musicbrainz_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/nuts_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/nytimes_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/opencyc_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/openei_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/page-ids_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/persondata_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/revision-ids_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/revision-uris_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/revyu_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_ar.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_de.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_es.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_fr.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_it.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_ja.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_nl.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_pl.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_pt.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_ru.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts-en-uris_zh.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/short-abstracts_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/sider_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/skos-categories_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/specific-mappingbased-properties_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/tcm_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/transitive-redirects_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/transparency_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/uk-university_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/umbel_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/uscensus_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/viaf_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/wikicompany_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/wikipedia-links_en.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/wordnet_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/yago_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/yago_taxonomy.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/yago_type_links.nt.gz http://dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/dbpedia.org/yago_types.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/article-categories_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/article-templates_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/category-labels_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/disambiguations_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/external-links_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/freebase-links_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/geo-coordinates_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/geonames_links_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/homepages_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/images_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/infobox-properties_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/infobox-property-definitions_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/instance-types-transitive_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/instance-types_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/instance_types_lhd_dbo_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/instance_types_lhd_ext_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/interlanguage-links-chapters_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/interlanguage-links_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/iri-same-as-uri_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/labels_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/long-abstracts_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/mappingbased-properties_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/out-degree_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/page-ids_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/page-length_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/persondata_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/pnd_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/revision-ids_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/revision-uris_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/short-abstracts_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/skos-categories_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/specific-mappingbased-properties_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/transitive-redirects_de.nt.gz http://de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/de.dbpedia.org/wikipedia-links_de.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/anchor-text_en.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/article-templates_en.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/genders_en.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/instance_types_dbtax-dbo.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/instance_types_dbtax_ext.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/instance_types_lhd_dbo_en.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/instance_types_lhd_ext_en.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/out-degree_en.nt.gz http://ext.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/ext.dbpedia.org/page-length_en.nt.gz http://pagelinks.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/pagelinks.dbpedia.org/page-links_en.nt.gz http://pagelinks.de.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/pagelinks.de.dbpedia.org/page-links_de.nt.gz http://topicalconcepts.dbpedia.org /usr/local/data/datasets/remote/dbpedia/2015-04/importedGraphs/topicalconcepts.dbpedia.org/topical-concepts_en.nt.gz http://rdf.freebase.com /usr/local/data/datasets/remote/freebase/2015-08-09/fb2w.nt.gz http://rdf.freebase.com /usr/local/data/datasets/remote/freebase/2015-08-09/freebase-rdf-2015-08-09-00-01.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Abutters.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Abutters.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-AerialwayThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-AerialwayThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-AerowayThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-AerowayThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Amenity.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Amenity.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-BarrierThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-BarrierThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Boundary.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Boundary.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Craft.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Craft.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-CyclewayThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-CyclewayThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-EmergencyThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-EmergencyThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-HistoricThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-HistoricThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Leisure.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Leisure.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-LockThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-LockThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-ManMadeThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-ManMadeThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-MilitaryThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-MilitaryThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Office.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Office.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Place.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Place.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-PowerThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-PowerThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-PublicTransportThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-PublicTransportThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-RailwayThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-RailwayThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-RouteThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-RouteThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Shop.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-Shop.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-SportThing.node.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-SportThing.way.sorted.nt.gz http://linkedgeodata.org /usr/local/data/datasets/remote/linkedgeodata/2014-09-09/2014-09-09-ontology.sorted.nt.gz http://schema.org /usr/local/data/datasets/remote/schema.org/2015-11-04/all.nt http://umbel.org/umbel/rc /usr/local/data/datasets/remote/umbel/External Ontologies/dbpedia-ontology.n3 http://umbel.org/umbel/rc /usr/local/data/datasets/remote/umbel/External Ontologies/geonames.n3 http://umbel.org/umbel/rc /usr/local/data/datasets/remote/umbel/External Ontologies/opencyc.n3 http://umbel.org/umbel/rc /usr/local/data/datasets/remote/umbel/External Ontologies/same-as.n3 http://umbel.org/umbel/rc /usr/local/data/datasets/remote/umbel/External Ontologies/schema.org.n3 http://umbel.org/umbel/rc /usr/local/data/datasets/remote/umbel/External Ontologies/wikipedia.n3 http://umbel.org/umbel /usr/local/data/datasets/remote/umbel/Ontology/umbel.n3 http://umbel.org/umbel/rc /usr/local/data/datasets/remote/umbel/Reference Structure/umbel_reference_concepts.n3 http://www.wikidata.org /usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026/wikidata-instances.nt.gz http://www.wikidata.org /usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026/wikidata-properties.nt.gz http://www.wikidata.org /usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026/wikidata-property-taxonomy.nt.gz http://www.wikidata.org /usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026/wikidata-simple-statements.nt.gz http://www.wikidata.org /usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026/wikidata-sitelinks.nt.gz http://www.wikidata.org /usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026/wikidata-statements.nt.gz http://www.wikidata.org /usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026/wikidata-taxonomy.nt.gz http://www.wikidata.org /usr/local/data/datasets/remote/wikidata/tools.wmflabs.org/wikidata-exports/rdf/exports/20151026/wikidata-terms.nt.gz http://yago-knowledge.org/resource /usr/local/data/datasets/remote/yago/yago3/2015-11-04/yagoLabels.ttl.gz 219 Rows. -- 8 msec.\n\nOK, now comes the fun (and long part: about 1.5 hours (new Virtuoso 7 is cool 😉 for DBpedia alone, +~6 hours for Freebase)… After we registered the files to be added, now let’s finally start the process. Fire up screen if you didn’t already. (For more detailed metering than below see VirtTipsAndTricksGuideLDMeterUtility.)\n\nsudo apt-get install screen screen isql-vt\n\nrdf_loader_run(); -- DO NOT USE THE DB BESIDES THE FOLLOWING COMMANDS: -- depending on the amount of CPUs and your IO performance you can run -- more rdf_loader_run(); commands in other isql-vt sessions which will -- speed up the import process. -- you can watch the progress from another isql-vt session with: -- select * from DB.DBA.LOAD_LIST; -- if you need to stop the loading for any reason: rdf_load_stop(); -- if you want to force stopping: rdf_load_stop(1); checkpoint; commit work; checkpoint; EXIT;\n\nAfter this:\n\nTake a look into var/lib/virtuoso/db/virtuoso.log and run this:\n\nisql-vt BANNER=OFF VERBOSE=OFF 'EXEC=SELECT * FROM DB.DBA.LOAD_LIST WHERE ll_error IS NOT NULL;'\n\nShould you find any errors in there… FIX THEM! You might be able to use the dump, but it’s incomplete in those cases. Any error quits out of the loading of the corresponding file and continues with the next one, so you’re only using the part of that file up to the place where the error occurred. (Should you find errors you can’t fix, please leave a comment.)\n\nFinal polishing\n\nYou can & should now install the DBpedia and RDF Mappers packages from the Virtuoso Conductor.\n\nhttp://your-server:8890\n\nlogin: dba pw: dba\n\nGo to System Admin / Packages. Install the DBpedia (v. 1.4.30) and rdf_mappers (v. 1.34.74) packages (takes about 5 minutes).\n\nTesting your local mirror\n\nGo to the sparql-endpoint of your server http://your-server:8890/sparql (or in isql-vt prefix with: SPARQL)\n\nsparql SELECT count(*) WHERE { ?s ?p ?o } ;\n\nThis shouldn’t take long in Virtuoso 7 anymore and for me now returns 849,521,186 for DBpedia (en+de) or 5,959,006,725 with all the datasets mentioned above.\n\nI also like this query showing all the graphs and how many triples are in them:\n\nsparql SELECT ?g COUNT(*) as ?c { GRAPH ?g {?s ?p ?o.} } GROUP BY ?g ORDER BY DESC(?c); g c LONG VARCHAR LONG VARCHAR __________________________________________________________ http://rdf.freebase.com 3126890738 http://linkedgeodata.org 1013866920 http://www.wikidata.org 841008708 http://dbpedia.org 411914840 http://pagelinks.dbpedia.org 158878272 http://de.dbpedia.org 119876594 http://ext.dbpedia.org 99042212 http://dblp.l3s.de 81987210 http://pagelinks.de.dbpedia.org 59622795 http://yago-knowledge.org/resource 44963422 http://umbel.org/umbel/rc 480616 http://www.openlinksw.com/schemas/RDF_Mapper_Ontology/1.0/ 256065 http://topicalconcepts.dbpedia.org 157560 http://dbpedia.org/resource/classes# 28880 http://schema.org 8727 http://localhost:8890/DAV/ 4806 http://www.openlinksw.com/schemas/virtrdf# 2472 http://umbel.org/umbel 1584 http://open.vocab.org/terms 1480 http://purl.org/ontology/bibo/ 1226 http://purl.org/goodrelations/v1 937 http://purl.org/dc/terms/ 857 http://www.openlinksw.com/schemas/opengraph 804 http://www.openlinksw.com/schemas/linkedin 741 http://www.openlinksw.com/schemas/googleplus 696 http://www.openlinksw.com/schemas/google-base 691 http://www.openlinksw.com/schemas/cv 661 virtrdf-label 638 http://xmlns.com/foaf/0.1/ 557 http://rdfs.org/sioc/ns# 553 http://www.openlinksw.com/schemas/evri 482 http://www.openlinksw.com/schemas/crunchbase 444 http://bblfish.net/work/atom-owl/2006-06-06/ 386 http://scot-project.org/scot/ns# 332 http://www.openlinksw.com/schemas/zillow 311 http://www.w3.org/2004/02/skos/core 252 http://www.openlinksw.com/schemas/cnet 225 http://www.openlinksw.com/schemas/tesco 183 http://www.openlinksw.com/schemas/bestbuy 172 http://www.w3.org/2002/07/owl# 160 http://www.w3.org/2002/07/owl 160 http://www.openlinksw.com/schemas/angel# 144 http://www.openlinksw.com/schemas/amazon 143 http://purl.org/dc/elements/1.1/ 139 http://www.w3.org/2007/05/powder-s# 117 http://www.openlinksw.com/schemas/twitter 103 http://www.openlinksw.com/schemas/stackoverflow# 102 http://www.openlinksw.com/schemas/klout 90 http://www.w3.org/2000/01/rdf-schema# 87 http://www.w3.org/1999/02/22-rdf-syntax-ns# 85 http://www.openlinksw.com/schemas/ebay 79 http://www.openlinksw.com/schema/attribution# 68 http://www.openlinksw.com/schemas/nyt 41 http://www.openlinksw.com/schemas/wolframalpha# 32 http://www.openlinksw.com/schemas/oplbase 26 http://www.openlinksw.com/schemas/cert# 23 http://www.openlinksw.com/schemas/dbpedia-spotlight# 21 http://www.openlinksw.com/schemas/money 21 http://localhost:8890/sparql 14 http://dbpedia.org/schema/property_rules# 12 dbprdf-label 6 http://www.w3.org/ns/ldp# 3 62 Rows. -- 58092 msec.\n\nCongratulations, you just imported nearly 850 million triples (or nearly 6 G triples for all datasets).\n\nBacking up this initial state\n\nNow is a good moment to backup the whole db (takes about half an hour):\n\nsudo -i cd / /etc/init.d/virtuoso-opensource stop && tar -cvf - /var/lib/virtuoso | lzop > virtuoso-7.1.0-DBDUMP-$(date '+%F')-dbpedia-2015-04-en_de.tar.lzop && /etc/init.d/virtuoso-opensource start\n\nAfterwards you might want to repack this with xz (lzma) like this:\n\n# apt-get install xz pxz for f in virtuoso-7.1.0-DBDUMP-*.tar.lzop ; do lzop -d -c \"$f\" | pxz > \"${f%lzop}.xz\" ; done\n\nYay, done 😉\n\nAs always, feel free to leave comments if i made a mistake or to tell us about your problems or how happy you are :D.\n\nThanks\n\nMany thanks to the DBpedia team for their endless efforts of providing us all with a great dataset. Also many thanks to the Virtuoso crew for releasing an OpenSource version of their DB.\n\nUpdates\n\n2015-12-07: added a check for older installed versions.\n\nEver wondered what the top subjects / predicates / objects are in DBpedia?\n\nI recently came across this problem while trying to draw a random sample of nodes from DBpedia which follow a given degree distribution for my PhD.\n\nTurns out this is actually more difficult than i expected. Mostly due to the fact that quad stores don’t optimize for such queries. This means that you can’t just ask a SPARQL endpoint (not even your local one) to give you the top subjects, predicates or objects with a query like this:\n\nselect ?n count(*) as ?c where { ?n ?p ?o. } order by desc(?c) limit 10\n\nTry yourself here if you don’t believe me… (i set it to time out after 15 seconds and it will return quite a dangerously nonsensical result if you’re not aware that you might get partial answers).\n\nSome Rant\n\nSo this lead me to the fascinating conclusion that our beloved RDF query language doesn’t even allow us to answer simple questions such as “which node is most often used as a subject / predicate / object?” (we’re talking with a single SPARQL endpoint here, don’t even try dragging me into an open/closed world assumption discussion, …).\n\nSo, all is great, let’s just not ask those evil questions…\n\n… said no (computer) scientist ever.\n\nSo let’s get our hands dirty and use some unix tool magic…\n\nWorking with Dumps in NT Format\n\nLuckily, I already had all the dumps laid out locally as described here, and lucky again, they are in N-Triples format.\n\nN-Triples is a line based format, which means we have exactly one triple per line. I don’t exactly know whom to thank for this, but should you ever read this (wait, why are you reading my blog?) THANK YOU. It means that neither subject nor predicate nor object can contain (unescaped) newlines. And this means that you can actually quite sanely sort and parse .nt files with standard unix tools that have been optimized by generations of smart people.\n\nI think you see where this is going: a good old bash one-liner with grep, cut, sort and uniq, by far the fastest tools i know for the job.\n\nA Word about Sort Orders and Locales\n\nSort orders depend on your locale! This means that files sorted with a locale such as en_US.UTF-8 are not properly sorted for someone with a locale such as de_DE.UTF-8. Hence it’s wise to always run this in a shell before working with sort:\n\nexport LC_ALL=C\n\nIt resets your locale to a classic C byte-wise one, having the nice side effect that it’s faster as well.\n\nDeduplication\n\nFirst, it turns out the DBpedia dumps actually contain quite an astonishing amount of duplicate triples. This is not a problem if loaded into a quad store as they’ll just count once, but for counting them like we will, it is a problem.\n\nTo split them apart let’s do the following: we pick up all the dump files that are loaded into our endpoint with pv a handy little tool similar to cat, but it shows a nice progress bar. Then we decompress with zcat, remove comments from the files with grep and then call sort. We actually tell sort to use a ton of RAM (32 GB), but actually not even that is enough for the > 80 GB decompressed dumps, so we need temp files. We can direct sort to put them onto an SSD instead of just in /tmp as by default, and we can also compress those temp files on the fly. lzop is a very fast compression tool and the perfect fit for this (not compressing the files with this actually degrades performance even at 300 MB/s write speeds of the SSD!). After this we use tee to multiplex our stream into two channels: one plain uniq and gzipped with pigz (like gzip but parallel, as gzipping > 80 GB becomes quite the bottleneck here otherwise) into dbpedia_uniq.nt.gz and another invocation of uniq -c -d which only counts the duplicate lines and gzips (this is ok to be single threaded, as it’s not sooo big) them into dbpedia_dups.txt.gz.\n\npv /usr/local/data/datasets/remote/dbpedia/2014/importedGraphs/{dbpedia.org,ext.dbpedia.org,pagelinks.dbpedia.org,topicalconcepts.dbpedia.org}/* | zcat | # decompress grep -v -E '^\\s*#' | # ignore comments in the nt files sort -S32G -T/ssd/tmp/ --compress-program=lzop | tee \\ >( uniq | pigz > dbpedia_uniq.nt.gz ) \\ >( uniq -c -d | gzip > dbpedia_dups.txt.gz ) \\ >/dev/null\n\nAs you can see from the first line include external, pagelinks and topicalconcepts datasets, but the process is really the same no matter what.\n\nAfter ~ 10 minutes we’re left with a 6.5 GB dbpedia_uniq.nt.gz (547,084,682 unique triples) and a 238 MB dbpedia_dups.txt.gz.\n\nTop Duplicates\n\nThe top duplicates as acquired with\n\nzcat dbpedia_dups.txt.gz | sort -n -r -S8G | head -n20\n\nare (full file (238 MB)):\n\n4891 <http://commons.wikimedia.org/wiki/Special:FilePath/Flag_of_Slovenia.svg?width=300> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Flag_of_Slovenia.svg> . 4891 <http://commons.wikimedia.org/wiki/Special:FilePath/Flag_of_Slovenia.svg> <http://xmlns.com/foaf/0.1/thumbnail> <http://commons.wikimedia.org/wiki/Special:FilePath/Flag_of_Slovenia.svg?width=300> . 4891 <http://commons.wikimedia.org/wiki/Special:FilePath/Flag_of_Slovenia.svg> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Flag_of_Slovenia.svg> . 1520 <http://commons.wikimedia.org/wiki/Special:FilePath/Naval_Ensign_of_the_United_Kingdom.svg?width=300> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Naval_Ensign_of_the_United_Kingdom.svg> . 1520 <http://commons.wikimedia.org/wiki/Special:FilePath/Naval_Ensign_of_the_United_Kingdom.svg> <http://xmlns.com/foaf/0.1/thumbnail> <http://commons.wikimedia.org/wiki/Special:FilePath/Naval_Ensign_of_the_United_Kingdom.svg?width=300> . 1520 <http://commons.wikimedia.org/wiki/Special:FilePath/Naval_Ensign_of_the_United_Kingdom.svg> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Naval_Ensign_of_the_United_Kingdom.svg> . 1195 <http://commons.wikimedia.org/wiki/Special:FilePath/Airplane_silhouette.svg?width=300> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Airplane_silhouette.svg> . 1195 <http://commons.wikimedia.org/wiki/Special:FilePath/Airplane_silhouette.svg> <http://xmlns.com/foaf/0.1/thumbnail> <http://commons.wikimedia.org/wiki/Special:FilePath/Airplane_silhouette.svg?width=300> . 1195 <http://commons.wikimedia.org/wiki/Special:FilePath/Airplane_silhouette.svg> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Airplane_silhouette.svg> . 1188 <http://commons.wikimedia.org/wiki/Special:FilePath/Med_1.png?width=300> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Med_1.png> . 1188 <http://commons.wikimedia.org/wiki/Special:FilePath/Med_1.png> <http://xmlns.com/foaf/0.1/thumbnail> <http://commons.wikimedia.org/wiki/Special:FilePath/Med_1.png?width=300> . 1188 <http://commons.wikimedia.org/wiki/Special:FilePath/Med_1.png> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Med_1.png> . 1159 <http://commons.wikimedia.org/wiki/Special:FilePath/Flag_of_the_British_Army.svg?width=300> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Flag_of_the_British_Army.svg> . 1159 <http://commons.wikimedia.org/wiki/Special:FilePath/Flag_of_the_British_Army.svg> <http://xmlns.com/foaf/0.1/thumbnail> <http://commons.wikimedia.org/wiki/Special:FilePath/Flag_of_the_British_Army.svg?width=300> . 1159 <http://commons.wikimedia.org/wiki/Special:FilePath/Flag_of_the_British_Army.svg> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Flag_of_the_British_Army.svg> . 914 <http://en.wikipedia.org/wiki/Special:FilePath/Cricket_no_pic.png?width=300> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Cricket_no_pic.png> . 914 <http://en.wikipedia.org/wiki/Special:FilePath/Cricket_no_pic.png> <http://xmlns.com/foaf/0.1/thumbnail> <http://en.wikipedia.org/wiki/Special:FilePath/Cricket_no_pic.png?width=300> . 914 <http://en.wikipedia.org/wiki/Special:FilePath/Cricket_no_pic.png> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Cricket_no_pic.png> . 885 <http://dbpedia.org/resource/List_of_Tachinidae_genera> <http://dbpedia.org/ontology/wikiPageWikiLink> <http://dbpedia.org/resource/List_of_Tachinidae_genera> . 784 <http://commons.wikimedia.org/wiki/Special:FilePath/Illinois_-_outline_map.svg?width=300> <http://purl.org/dc/elements/1.1/rights> <http://en.wikipedia.org/wiki/File:Illinois_-_outline_map.svg> .\n\nGetting S,P,O Counts\n\nOK, now let’s count the subject, predicate and object occurrences.\n\nSubjects, predicates and objects are delimited with a single space (” “), everything else in the line we just count as an object (so we just count the final ” .” to the object).\n\nSimilar to the above pipeline, we use tee again to multiplex the stream into three pipelines for subject, predicate and object counts.\n\nEach of them is mostly based on cut, first to get the fields (-f1 for subject, -f2 predicate, -f3- object), then for limiting very long strings to only the first 1024 chars. While this actually introduces some false positive matches for long literals, it’s probably safe for URIs, and reduces sort times and file sizes for the object chunk a lot. If you want very accurate counts you should probably re-run without the cut -c-1024 lines.\n\nAfterwards in each pipeline the occurrences of a node in the s,p,o positions are sorted and counted with uniq -c, then gzipped with pigz.\n\npv dbpedia_uniq.nt.gz | zcat | tee \\ >( cut -f1 -d' ' | cut -c-1024 | sort -S16G -T/ssd/tmp/ --compress-program=lzop | uniq -c | pigz > dbpedia_1_subject_counts.txt.gz ) \\ >( cut -f2 -d' ' | cut -c-1024 | sort -S16G -T/ssd/tmp/ --compress-program=lzop | uniq -c | pigz > dbpedia_2_predicate_counts.txt.gz ) \\ >( cut -f3- -d' ' | cut -c-1024 | sort -S16G -T/ssd/tmp/ --compress-program=lzop | uniq -c | pigz > dbpedia_3_object_counts.txt.gz ) \\ >/dev/null\n\nAfter 15 minutes we’re left with 3 files:\n\ndbpedia_1_subject_counts.txt.gz (214M), dbpedia_2_predicate_counts.txt.gz (387K), dbpedia_3_object_counts.txt.gz (1.9G)\n\nAs expected there are only relatively few different predicates and the objects actually take up quite a lot of data.\n\nBefore getting the tops it’s quite useful to exclude subjects and objects that occur less than 10 times with awk, which greatly reduces the filesizes and subsequent sort times:\n\nzcat dbpedia_1_subject_counts.txt.gz | awk ' $1 > 9 { print } ' | pigz > dbpedia_1_subject_counts_o9.txt.gz zcat dbpedia_3_object_counts.txt.gz | awk ' $1 > 9 { print } ' | pigz > dbpedia_3_object_counts_o9.txt.gz\n\ndbpedia_1_subject_counts_o9.txt.gz (89M), dbpedia_3_object_counts_o9.txt.gz (30M).\n\nAs we can see from the size reduction already there’s actually way more objects occurring less than 10 times than subjects.\n\nSimilar to before the tops can be acquired with something like this:\n\nfor f in dbpedia_1_subject_counts_o9.txt.gz dbpedia_2_predicate_counts.txt.gz dbpedia_3_object_counts_o9.txt.gz ; do zcat $f | sort -n -r | pigz > ${f%.txt.gz}_tops.txt.gz done\n\nSo here they are, the …\n\nTop 100 Subjects:\n\ndbpedia_1_subject_counts_o9_tops.txt.gz (95M)\n\n8118 <http://dbpedia.org/resource/Alphabetical_list_of_communes_of_Italy> 7110 <http://dbpedia.org/resource/List_of_places_in_Afghanistan> 6162 <http://dbpedia.org/resource/Index_of_Andhra_Pradesh-related_articles> 5857 <http://dbpedia.org/resource/List_of_populated_places_in_Bosnia_and_Herzegovina> 5712 <http://dbpedia.org/resource/2013_in_film> 5550 <http://dbpedia.org/resource/List_of_municipalities_of_Brazil> 5458 <http://dbpedia.org/resource/List_of_dialling_codes_in_Germany> 5405 <http://dbpedia.org/resource/IUCN_Red_List_vulnerable_species_(Plantae)> 5392 <http://dbpedia.org/resource/List_of_CJK_Unified_Ideographs,_part_3_of_4> 5392 <http://dbpedia.org/resource/List_of_CJK_Unified_Ideographs,_part_2_of_4> 5392 <http://dbpedia.org/resource/List_of_CJK_Unified_Ideographs,_part_1_of_4> 5182 <http://dbpedia.org/resource/IUCN_Red_List_vulnerable_species_(Animalia)> 5152 <http://dbpedia.org/resource/Index_of_India-related_articles> 5090 <http://dbpedia.org/resource/List_of_law_clerks_of_the_Supreme_Court_of_the_United_States> 5068 <http://dbpedia.org/resource/List_of_Social_Democratic_Party_of_Germany_members> 4942 <http://dbpedia.org/resource/List_of_painters_in_the_Web_Gallery_of_Art> 4873 <http://dbpedia.org/resource/List_of_stage_names> 4829 <http://dbpedia.org/resource/List_of_CJK_Unified_Ideographs,_part_4_of_4> 4795 <http://dbpedia.org/resource/List_of_Harvard_University_people> 4743 <http://dbpedia.org/resource/List_of_OMIM_disorder_codes> 4726 <http://dbpedia.org/resource/List_of_populated_places_in_Serbia> 4698 <http://dbpedia.org/resource/List_of_populated_places_in_Serbia_(alphabetic)> 4690 <http://dbpedia.org/resource/Index_of_philosophy_articles_(I%E2%80%93Q)> 4603 <http://dbpedia.org/resource/List_of_molluscan_genera_represented_in_the_fossil_record> 4493 <http://dbpedia.org/resource/List_of_American_television_programs_by_date> 4457 <http://dbpedia.org/resource/List_of_biographical_films> 4443 <http://dbpedia.org/resource/List_of_brachiopod_genera> 4355 <http://dbpedia.org/resource/List_of_English_writers> 4345 <http://dbpedia.org/resource/List_of_composers_by_name> 4341 <http://dbpedia.org/resource/List_of_historical_German_and_Czech_names_for_places_in_the_Czech_Republic> 4329 <http://dbpedia.org/resource/2012_in_film> 4275 <http://dbpedia.org/resource/List_of_people_from_Illinois> 4219 <http://dbpedia.org/resource/List_of_people_from_Texas> 4218 <http://dbpedia.org/resource/List_of_village_development_committees_of_Nepal> 4194 <http://dbpedia.org/resource/List_of_postal_codes_in_Portugal> 4159 <http://dbpedia.org/resource/IUCN_Red_List_data_deficient_species_(Chordata)> 4140 <http://dbpedia.org/resource/List_of_trilobite_genera> 4137 <http://dbpedia.org/resource/List_of_aircraft_engines> 4130 <http://dbpedia.org/resource/List_of_moths_of_Taiwan> 4084 <http://dbpedia.org/resource/List_of_flora_of_the_Sonoran_Desert_Region_by_common_name> 3992 <http://dbpedia.org/resource/List_of_film_score_composers> 3984 <http://dbpedia.org/resource/List_of_marine_gastropod_genera_in_the_fossil_record> 3930 <http://dbpedia.org/resource/List_of_performances_on_Top_of_the_Pops> 3886 <http://dbpedia.org/resource/List_of_gliders> 3873 <http://dbpedia.org/resource/List_of_Lepidoptera_of_Romania> 3839 <http://dbpedia.org/resource/List_of_20th-century_classical_composers> 3768 <http://dbpedia.org/resource/Rosters_of_the_top_basketball_teams_in_European_club_competitions> 3740 <http://dbpedia.org/resource/List_of_airports_by_ICAO_code:_K> 3705 <http://dbpedia.org/resource/List_of_United_States_counties_and_county_equivalents> 3659 <http://dbpedia.org/resource/List_of_Russian_people> 3646 <http://dbpedia.org/resource/List_of_Lepidoptera_of_Germany> 3615 <http://dbpedia.org/resource/List_of_Lepidoptera_of_Switzerland> 3597 <http://dbpedia.org/resource/List_of_Lepidoptera_of_Slovakia> 3589 <http://dbpedia.org/resource/List_of_protected_areas_of_China> 3583 <http://dbpedia.org/resource/List_of_Advanced_Dungeons_&_Dragons_2nd_edition_monsters> 3541 <http://dbpedia.org/resource/Index_of_U.S._counties> 3502 <http://dbpedia.org/resource/List_of_Lepidoptera_of_Hungary> 3499 <http://dbpedia.org/resource/The_opera_corpus> 3466 <http://dbpedia.org/resource/List_of_German_Christian_Democratic_Union_politicians> 3466 <http://dbpedia.org/resource/2012%E2%80%9313_UEFA_Europa_League_qualifying_phase_and_play-off_round> 3439 <http://dbpedia.org/resource/List_of_viruses> 3439 <http://dbpedia.org/resource/Google_Street_View_in_the_United_States> 3432 <http://dbpedia.org/resource/2013%E2%80%9314_UEFA_Europa_League_qualifying_phase_and_play-off_round> 3430 <http://dbpedia.org/resource/List_of_Lepidoptera_of_the_Czech_Republic> 3392 <http://dbpedia.org/resource/List_of_Lepidoptera_of_Greece> 3378 <http://dbpedia.org/resource/List_of_surnames_in_Russia> 3378 <http://dbpedia.org/resource/List_of_film_director_and_actor_collaborations> 3377 <http://dbpedia.org/resource/2010%E2%80%9311_UEFA_Europa_League_qualifying_phase_and_play-off_round> 3342 <http://dbpedia.org/resource/2009%E2%80%9310_UEFA_Europa_League_qualifying_phase_and_play-off_round> 3327 <http://dbpedia.org/resource/Index_of_World_War_II_articles_(U)> 3321 <http://dbpedia.org/resource/List_of_moths_of_Madagascar> 3295 <http://dbpedia.org/resource/List_of_country_houses_in_the_United_Kingdom> 3277 <http://dbpedia.org/resource/List_of_counties_by_U.S._state> 3273 <http://dbpedia.org/resource/List_of_licensed_and_localized_editions_of_Monopoly:_Europe> 3255 <http://dbpedia.org/resource/List_of_moths_of_North_America_(MONA_8322-11233)> 3254 <http://dbpedia.org/resource/List_of_local_administrative_units_of_Romania> 3236 <http://dbpedia.org/resource/Catalog_of_paintings_in_the_National_Gallery,_London> 3233 <http://dbpedia.org/resource/IUCN_Red_List_endangered_species_(Animalia)> 3232 <http://dbpedia.org/resource/IUCN_Red_List_near_threatened_species_(Animalia)> 3209 <http://dbpedia.org/resource/List_of_Chopped_episodes> 3201 <http://dbpedia.org/resource/List_of_Lepidoptera_of_Poland> 3200 <http://dbpedia.org/resource/List_of_directorial_debuts> 3192 <http://dbpedia.org/resource/List_of_postal_codes_in_Germany> 3175 <http://dbpedia.org/resource/2010_in_film> 3163 <http://dbpedia.org/resource/Index_of_philosophy_articles_(R%E2%80%93Z)> 3156 <http://dbpedia.org/resource/List_of_bannered_U.S._Routes> 3136 <http://dbpedia.org/resource/Timeline_of_Google_Street_View> 3135 <http://dbpedia.org/resource/Index_of_Byzantine_Empire-related_articles> 3129 <http://dbpedia.org/resource/Index_of_Singapore-related_articles> 3114 <http://dbpedia.org/resource/List_of_postal_codes_of_Switzerland> 3107 <http://dbpedia.org/resource/2009_in_film> 3088 <http://dbpedia.org/resource/List_of_University_of_Pennsylvania_people> 3071 <http://dbpedia.org/resource/List_of_children's_television_series_by_country> 3065 <http://dbpedia.org/resource/List_of_populated_places_in_the_Netherlands> 3044 <http://dbpedia.org/resource/List_of_ZX_Spectrum_games> 3039 <http://dbpedia.org/resource/October_2011_in_sports> 3022 <http://dbpedia.org/resource/List_of_flora_of_Ohio> 3019 <http://dbpedia.org/resource/List_of_PlayStation_2_games> 3016 <http://dbpedia.org/resource/List_of_Lepidoptera_of_Bulgaria> 3005 <http://dbpedia.org/resource/List_of_voice_actors>\n\nObservations:\n\nThe top subjects are clearly dominated by list-like resources. Very big “normal” articles such as those of countries like dbpedia:United_States (1375 occurrences as subject) or dbpedia:Germany (1331 occurrences as subject) can only be found below ranks of 1518 or 1673. Scrolling through the top subject counts it seems that the amount of “List” vs. non-“List” resources slowly seems to equalize around 1000 occurrences (rank 3800+), but even for subjects that “only” occur ~500 times (rank 21000+) there seem to be ~1/4 “Lists” still.\n\nTop 100 Predicates:\n\ndbpedia_2_predicate_counts_tops.txt.gz (384K)\n\n149707899 <http://dbpedia.org/ontology/wikiPageWikiLink> 86391520 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> 33958849 <http://www.w3.org/2002/07/owl#sameAs> 18731754 <http://purl.org/dc/terms/subject> 13926391 <http://www.w3.org/2000/01/rdf-schema#label> 13494896 <http://dbpedia.org/ontology/wikiPageRevisionID> 13494875 <http://www.w3.org/ns/prov#wasDerivedFrom> 13494819 <http://dbpedia.org/ontology/wikiPageID> 10948106 <http://dbpedia.org/ontology/wikiPageOutDegree> 10948106 <http://dbpedia.org/ontology/wikiPageLength> 10948086 <http://xmlns.com/foaf/0.1/primaryTopic> 10948086 <http://xmlns.com/foaf/0.1/isPrimaryTopicOf> 10948086 <http://purl.org/dc/elements/1.1/language> 7081593 <http://dbpedia.org/ontology/wikiPageExternalLink> 6473988 <http://dbpedia.org/ontology/wikiPageRedirects> 5926272 <http://dbpedia.org/ontology/abstract> 5925778 <http://www.w3.org/2000/01/rdf-schema#comment> 4267352 <http://xmlns.com/foaf/0.1/name> 4041585 <http://dbpedia.org/property/hasPhotoCollection> 3781737 <http://dbpedia.org/property/name> 2342002 <http://purl.org/dc/elements/1.1/rights> 2268299 <http://www.w3.org/2004/02/skos/core#broader> 2084717 <http://purl.org/dc/elements/1.1/description> 1514496 <http://dbpedia.org/ontology/team> 1374565 <http://xmlns.com/foaf/0.1/depiction> 1374185 <http://dbpedia.org/ontology/thumbnail> 1363398 <http://dbpedia.org/ontology/wikiPageDisambiguates> 1289141 <http://dbpedia.org/property/title> 1231780 <http://dbpedia.org/property/subdivisionType> 1171004 <http://xmlns.com/foaf/0.1/thumbnail> 1122598 <http://www.w3.org/2004/02/skos/core#prefLabel> 1080114 <http://xmlns.com/foaf/0.1/givenName> 1058532 <http://www.georss.org/georss/point> 1052578 <http://dbpedia.org/property/shortDescription> 1052115 <http://xmlns.com/foaf/0.1/surname> 1005079 <http://dbpedia.org/ontology/birthPlace> 995639 <http://dbpedia.org/ontology/birthDate> 983813 <http://dbpedia.org/property/subdivisionName> 973597 <http://dbpedia.org/ontology/birthYear> 968085 <http://dbpedia.org/property/dateOfBirth> 907869 <http://www.w3.org/2003/01/geo/wgs84_pos#lat> 906919 <http://www.w3.org/2003/01/geo/wgs84_pos#long> 861765 <http://dbpedia.org/property/goals> 846283 <http://dbpedia.org/property/placeOfBirth> 846182 <http://dbpedia.org/ontology/isPartOf> 838381 <http://dbpedia.org/property/birthPlace> 826348 <http://dbpedia.org/property/years> 656559 <http://dbpedia.org/property/length> 653929 <http://dbpedia.org/property/date> 649375 <http://xmlns.com/foaf/0.1/homepage> 643162 <http://dbpedia.org/ontology/careerStation> 641528 <http://dbpedia.org/ontology/years> 574296 <http://dbpedia.org/property/birthDate> 556627 <http://dbpedia.org/property/genre> 553122 <http://dbpedia.org/ontology/country> 539366 <http://dbpedia.org/property/clubs> 529649 <http://dbpedia.org/property/location> 525787 <http://dbpedia.org/property/rd1Team> 512507 <http://dbpedia.org/ontology/numberOfGoals> 501875 <http://dbpedia.org/ontology/genre> 492028 <http://dbpedia.org/ontology/numberOfMatches> 453911 <http://dbpedia.org/ontology/deathDate> 449759 <http://dbpedia.org/ontology/deathYear> 448696 <http://dbpedia.org/property/dateOfDeath> 448362 <http://www.w3.org/2002/07/owl#equivalentClass> 446799 <http://dbpedia.org/property/caption> 446238 <http://www.w3.org/2000/01/rdf-schema#subClassOf> 440121 <http://dbpedia.org/property/votes> 437797 <http://dbpedia.org/property/wordnet_type> 435648 <http://dbpedia.org/property/type> 431262 <http://dbpedia.org/property/caps> 418391 <http://dbpedia.org/ontology/utcOffset> 362378 <http://dbpedia.org/property/percentage> 362327 <http://dbpedia.org/ontology/type> 355814 <http://dbpedia.org/property/country> 346584 <http://dbpedia.org/property/candidate> 340788 <http://dbpedia.org/property/starring> 338307 <http://dbpedia.org/ontology/location> 327879 <http://dbpedia.org/ontology/family> 326730 <http://dbpedia.org/property/longew> 326699 <http://dbpedia.org/property/latns> 315041 <http://dbpedia.org/property/writer> 314566 <http://dbpedia.org/ontology/starring> 312958 <http://dbpedia.org/property/label> 310020 <http://dbpedia.org/property/rd2Team> 306816 <http://dbpedia.org/property/settlementType> 306271 <http://dbpedia.org/property/longd> 306246 <http://dbpedia.org/property/latd> 306195 <http://dbpedia.org/ontology/populationTotal> 293237 <http://dbpedia.org/property/team> 283282 <http://dbpedia.org/property/producer> 279814 <http://dbpedia.org/ontology/occupation> 278108 <http://dbpedia.org/ontology/order> 277006 <http://dbpedia.org/property/episodenumber> 275430 <http://dbpedia.org/property/longm> 275416 <http://dbpedia.org/property/latm> 272562 <http://dbpedia.org/ontology/deathPlace> 267256 <http://dbpedia.org/ontology/class> 265454 <http://dbpedia.org/property/timezone> 264081 <http://dbpedia.org/ontology/viafId>\n\nObservations:\n\nThe predicates are clearly dominated by dbpedia-owl:wikiPageWikiLink and rdf:type relations.\n\nWhat’s a bit surprising for me is that dcterms:subject occurs less often than rdf:type, but my guess is that it’s probably due to YAGO and also hierarchy materialization (Athlete is also a Person). There’s a slight mismatch between dbpedia-owl:wikiPageRevisionID and prov:wasDerivedFrom. There are more dbpedia-ontology:abstracts than rdfs:comments and more geo:lats than geo:longs.\n\nTop 100 Objects:\n\ndbpedia_3_object_counts_o9_tops.txt.gz (33M)\n\n10948086 <http://xmlns.com/foaf/0.1/Document> . 10948086 \"en\"^^<http://www.w3.org/2001/XMLSchema#string> . 6239553 \"1\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 2250659 <http://dbpedia.org/class/yago/PhysicalEntity100001930> . 2169386 <http://dbpedia.org/class/yago/Object100002684> . 2155200 <http://www.w3.org/2002/07/owl#Thing> . 1974654 <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#Agent> . 1974654 <http://dbpedia.org/ontology/Agent> . 1816213 <http://dbpedia.org/class/yago/YagoLegalActorGeo> . 1650316 <http://xmlns.com/foaf/0.1/Person> . 1649647 <http://wikidata.dbpedia.org/resource/Q5> . 1649647 <http://wikidata.dbpedia.org/resource/Q215627> . 1649647 <http://schema.org/Person> . 1649646 <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#NaturalPerson> . 1649646 <http://dbpedia.org/ontology/Person> . 1621660 <http://dbpedia.org/class/yago/Whole100003553> . 1318799 <http://dbpedia.org/resource/Category:Living_people> . 1290718 <http://dbpedia.org/class/yago/YagoLegalActor> . 1257968 <http://dbpedia.org/class/yago/YagoPermanentlyLocatedEntity> . 1192248 <http://www.w3.org/2004/02/skos/core#Concept> . 1090313 <http://dbpedia.org/class/yago/LivingThing100004258> . 1090140 <http://dbpedia.org/class/yago/Organism100004475> . 1046726 <http://dbpedia.org/class/yago/Person100007846> . 1020287 <http://dbpedia.org/class/yago/CausalAgent100007347> . 868376 <http://dbpedia.org/resource/United_States> . 816854 <http://www.ontologydesignpatterns.org/ont/d0.owl#Location> . 816837 <http://schema.org/Place> . 816837 <http://dbpedia.org/ontology/Wikidata:Q532> . 816837 <http://dbpedia.org/ontology/Place> . 814269 <http://dbpedia.org/class/yago/YagoGeoEntity> . 726965 <http://dbpedia.org/class/yago/Abstraction100002137> . 658562 <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#Situation> . 643162 <http://dbpedia.org/ontology/CareerStation> . 561841 <http://dbpedia.org/class/yago/LivingPeople> . 547827 <http://dbpedia.org/ontology/PopulatedPlace> . 547037 \"0\"^^<http://www.w3.org/2001/XMLSchema#integer> . 539993 \"1\"^^<http://www.w3.org/2001/XMLSchema#integer> . 531929 <http://www.opengis.net/gml/_Feature> . 528794 <http://dbpedia.org/class/yago/Artifact100021939> . 526256 <http://www.w3.org/2003/01/geo/wgs84_pos#SpatialThing> . 524742 <http://dbpedia.org/class/yago/Location100027167> . 505425 <http://dbpedia.org/class/yago/Region108630985> . 476724 \"2\"^^<http://www.w3.org/2001/XMLSchema#integer> . 469006 <http://dbpedia.org/ontology/Settlement> . 438713 <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#InformationEntity> . 425044 <http://schema.org/CreativeWork> . 425044 <http://dbpedia.org/ontology/Work> . 419234 <http://dbpedia.org/resource/List_of_sovereign_states> . 401287 \"N\"@en . 400317 <http://dbpedia.org/resource/Animal> . 377252 \"3\"^^<http://www.w3.org/2001/XMLSchema#integer> . 358891 <http://dbpedia.org/class/yago/GeographicalArea108574314> . 350209 <http://dbpedia.org/class/yago/District108552138> . 347718 <http://dbpedia.org/class/yago/Group100031264> . 336091 <http://dbpedia.org/ontology/Athlete> . 335320 \"4\"^^<http://www.w3.org/2001/XMLSchema#integer> . 321614 <http://dbpedia.org/class/yago/AdministrativeDistrict108491826> . 313062 <http://dbpedia.org/class/yago/SocialGroup107950920> . 302658 <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#SocialPerson> . 302658 <http://schema.org/Organization> . 302658 <http://dbpedia.org/ontology/Organisation> . 292395 \"28\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 288074 \"29\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 287957 \"27\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 286256 \"5\"^^<http://www.w3.org/2001/XMLSchema#integer> . 283702 <http://dbpedia.org/class/yago/Organization108008335> . 279633 \"yes\"@en . 279134 <http://dbpedia.org/ontology/SportsTeamMember> . 279134 <http://dbpedia.org/ontology/OrganisationMember> . 277439 \"30\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 277025 \"26\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 276000 \"6\"^^<http://www.w3.org/2001/XMLSchema#integer> . 264578 \"31\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 263773 <http://dbpedia.org/class/yago/Contestant109613191> . 261435 <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#Organism> . 261435 <http://dbpedia.org/ontology/Species> . 260007 \"E\"@en . 256474 <http://dbpedia.org/ontology/Eukaryote> . 255993 \"25\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 252172 <http://dbpedia.org/resource/England> . 249675 \"32\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 240706 <http://dbpedia.org/resource/Iran_Standard_Time> . 234043 \"24\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 231236 \"33\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 228539 \"7\"^^<http://www.w3.org/2001/XMLSchema#integer> . 221419 \"0\". 219180 <http://dbpedia.org/class/yago/Player110439851> . 218573 \"23\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 218297 <http://dbpedia.org/class/yago/PsychologicalFeature100023100> . 217297 \"34\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 215320 <http://dbpedia.org/class/yago/Athlete109820263> . 214359 \"18\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 208654 <http://dbpedia.org/class/yago/Tract108673395> . 208383 <http://dbpedia.org/resource/Arthropod> . 206076 \"22\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 205888 \"8\"^^<http://www.w3.org/2001/XMLSchema#integer> . 204693 <http://dbpedia.org/resource/Lepidoptera> . 204220 \"21\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> . 203472 <http://dbpedia.org/class/yago/Instrumentality103575240> . 202270 \"35\"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger> .\n\nObservations:\n\nThe object counts are dominated on top with an order of magnitude difference by foaf:Document and “en”. The non-negative “1” follows an order of magnitude ahead of the normal “0” and “1” 😉 In between a lot of very useful types follow, and we can see that we have a lot of information about physical things, people, concepts and places. It’s also nice to see http://wikidata.dbpedia.org/resource/Q5 right under foaf:Person, even though the URI doesn’t resolve anymore(?) 🙁\n\nThe first “real” “A-Box” resource is dbpedia:United_States, followed by dbpedia:Animal, dbpedia:England, dbpedia:Iran_Standard_Time, dbpedia:Arthropod, dbpedia:Lepidoptera, dbpedia:Canada, dbpedia:Insect, dbpedia:France, dbpedia:United_Kingdom, dbpedia:India, dbpedia:Germany. In general it seems as if apart from ontology types many instances of types country, biological genus and city occur very often as objects.\n\nThe top literals seem to be numbers, especially years and single letters.\n\nConclusion\n\nWe’ve seen that it’s sadly not possible to get basic top-degree-counts for big datasets via SPARQL, as the endpoints don’t seem to be optimized for these kind of queries. I hope this changes in the future as it’s quite useful to know degree distributions for all kinds of queries. Especially in the machine learning sector it seems quite essential to know if you’re dealing with a “normal” node or one of the exceptional top nodes that is several orders of magnitude bigger than the rest.\n\nHope you enjoyed. Feedback welcome, as always.\n\nFurther reading\n\nThanks for all the feedback i got on this post. There are somewhat similar works, that you might be interested in:\n\nDinesh Reddy, Magnus Knuth, Harald Sack: DBpedia GraphMeasures based on the wikiPageWikiLink property, computes PageRank, HITS, Inlink and Outlink degree for each Wikipedia Article. (These datasets are actually loaded on http://dbpedia.org/sparql, just not in the default graph http://dbpedia.org.)\n\nhttp://dbtrends.aksw.org/ calculates some stats similar to this post (and some more), but atm sadly only for DBpedia 3.9 and without stats about Literals and http://dbpedia.org/resource/Category:* resources.\n\nUpdates:\n\n2015-02-01: Further reading\n\nNewer version available: Setting up a Linked Data mirror from RDF dumps (DBpedia 2015-04, Freebase, Wikidata, LinkedGeoData, …) with Virtuso 7.2.1 and Docker (optional)\n\nSo you’re the guy who is allowed to setup a local DBpedia mirror or more generally a local Linked Data mirror for your work group? OK, today is your lucky day and you’re in the right place. I hope you’ll be able to benefit from my many hours of trials and errors. If anything goes wrong (or everything works fine), feel free to leave a comment below.\n\nVersions of this guide\n\nThere are three older versions of this guide:\n\nOct. 2010: The first version focusing on DBpedia 3.5 – 3.6 and Virtuoso 6.1\n\nMay 2012: A bigger update to DBpedia 3.7 (new local language versions) and Virtuoso 6.1.5+ (with a lot of updates making pre-processing of the dumps easier)\n\nApr. 2014: Update to DBpedia 3.9 and Virtuoso 7\n\nIn this step by step guide I’ll tell you how to install a local Linked Data mirror of the DBpedia 2014, hosting a combination of the regular English and (exemplary) the i18n German datasets adding up to over half a billion triples. If this isn’t enough you can also follow the links to the Freebase, DBLP, Yago, Umbel and Schema.org datasets / vocabularies adding up to over 3.5 billion triples.\n\nLet’s jump in.\n\nUsed Versions\n\nDBpedia 2014\n\nVirtuoso OpenSource 7.1.0\n\nUbuntu 14.04 LTS\n\nPrerequesits\n\nA strong machine with root access and enough RAM: We used a VM with 4 Cores and 32 GBs of RAM for DBpedia only. If you intend to also load Freebase and other datasets i recommend at least 64 GBs of RAM (we actually ended up using a 16 Core, 256 GB RAM Server). For installing i recommend more than 128 GB free HD space for DBpedia alone, 256 GB if you want to load Freebase as well, especially for downloading and repacking the datasets, as well as the growing database file when importing (mine grew to 50 GBs for DBpedia and 180 GB with Freebase).\n\nLet’s go\n\nDownload and install virtuoso\n\nGo and download virtuoso opensource: either from http://sourceforge.net/projects/virtuoso/ (make sure you get v7.1.0 as in this guide or a newer version).\n\nPut the file in your home dir on the server, then extract it and switch to the directory:\n\ncd ~ tar -xvzf virtuoso-7.1.0.tar.gz cd virtuoso-opensource-7.1.0 # or newer, depending what you got\n\nNow do the following to install the prerequisites and then build virtuoso:\n\nsudo aptitude install libxml2-dev libssl-dev autoconf libgraphviz-dev \\ libmagickcore-dev libmagickwand-dev dnsutils gawk bison flex gperf # NOTICE: the following will _not_ install into /usr/local but into /usr # (so might clash with packages by your distribution if you install # \"the\" virtuoso package) # You'll find the db in /var/lib/virtuoso/db ! # check output for errors and FIX THEM! (e.g., install missing packages) export CFLAGS=\"-O2 -m64\" ./configure --with-layout=debian --enable-dbpedia-vad --enable-rdfmappers-vad # the following will build with 5 processes in parallel # choose something like your server's #CPUs + 1 make -j5\n\nThis will take about 5 min\n\nsudo make install\n\nNow change the following values in /var/lib/virtuoso/db/virtuoso.ini, the performance tuning stuff is according to http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFPerformanceTuning:\n\n# note: virtuoso ignores lines starting with whitespace and stuff after a ; [Parameters] # you need to include the directory where your datasets will be downloaded # to, in our case /usr/local/data/datasets: DirsAllowed = ., /usr/share/virtuoso/vad, /usr/local/data/datasets # IMPORTANT: for performance also do this [Parameters] # the following two are as suggested by comments in the original .ini # file in order to use the RAM on your server: NumberOfBuffers = 2720000 MaxDirtyBuffers = 2000000 # each buffer caches a 8K page of data and occupies approx. 8700 bytes of # memory. It's suggested to set this value to 65 % of ram for a db only server # so if you have 32 GB of ram: 32*1000^3*0.65/8700 = 2390804 # default is 2000 which will use 16 MB ram ;) # Make sure to remove whitespace if you uncomment existing lines! [Database] MaxCheckpointRemap = 625000 # set this to 1/4th of NumberOfBuffers [SPARQL] # I like to increase the ResultSetMaxrows, MaxQueryCostEstimationTime # and MaxQueryExecutionTime drastically as it's a local store where we # do quite complex queries... up to you (don't do this if a lot of people # use it). # In any case for the importer to be more robust add the following setting # to this section: ShortenLongURIs = 1\n\nThe next step installs an init-script (autostart) and starts the virtuoso server. (If you’ve changed directories to edit /var/lib/virtuoso/db/virtuoso.ini, go back to the virtuoso source dir!):\n\nsudo cp debian/init.d /etc/init.d/virtuoso-opensource && sudo chmod a+x /etc/init.d/virtuoso-opensource && sudo bash debian/virtuoso-opensource.postinst.debhelper\n\nYou should now have a running virtuoso server.\n\nDBpedia URIs (en) vs. DBpedia IRIs (i18n)\n\nThe DBpedia 2014 consists of several datasets: one “standard” English version and several localized versions for other languages (i18n). The standard version mints URIs by going through all English Wikipedia articles. For all of these the Wikipedia cross-language links are used to extract corresponding labels in other languages for the en URIs (e.g., de/labels_en_uris_de.nt.bz2). This is problematic as for example articles which are only in the German Wikipedia won’t be extracted. To solve this problem the i18n versions exists and create IRIs in the form of de.dbpedia.org for every article in the German Wikipedia (e.g., de/labels_de.nt.bz2).\n\nThis approach has several implications. For backwards compatibility reasons the standard DBpedia makes statements about URIs such as http://dbpedia.org/resource/Gerhard_Schr%C3%B6der while the local chapters, like the German one, make statements about IRIs such as http://de.dbpedia.org/resource/Gerhard_Schröder (note the ö). In other words and as written above: the standard DBpedia uses URIs to identify things, while the localized versions use IRIs. This also means that http://dbpedia.org/resource/Gerhard_Schröder shouldn’t work. That said, clicking the link will actually work as there is magic going on in your browser to give you what you probably meant. Using curl curl -i -L -H \"Accept: application/rdf+xml\" http://dbpedia.org/resource/Gerhard_Schröder or SPARQLing the endpoint will nevertheless not be so nice/sloppy and can cause quite some headache: select * where { dbpedia:Gerhard_Schröder ?p ?o. } vs. select * where { <http://dbpedia.org/resource/Gerhard_Schr%C3%B6der> ?p ?o. }. In order to mitigate this historic problem a bit DBpedia actually offers owl:sameAs links from IRIs to URIs: en/iri_same_as_uri_en which you should load, so you at least have a link to what you want if someone tries to get info about an IRI.\n\nAs the standard DBpedia provides labels, abstracts and a couple other things in several languages, there are two types of files in the localized DBpedia folders: There are triples directly associating the English URIs with for example the German labels (de/labels_"
    }
}