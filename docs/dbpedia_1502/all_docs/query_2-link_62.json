{
    "id": "dbpedia_1502_2",
    "rank": 62,
    "data": {
        "url": "https://metacpan.org/dist/Dpkg/changes",
        "read_more_link": "",
        "language": "en",
        "title": "metacpan.org",
        "top_image": "",
        "meta_img": "",
        "images": [
            "https://metacpan.org/static/images/metacpan-logo.svg",
            "https://metacpan.org/static/images/sponsors/bytemark_logo.svg",
            "https://metacpan.org/static/images/sponsors/liquidweb_logo.png",
            "https://metacpan.org/static/images/sponsors/deriv.svg",
            "https://metacpan.org/static/images/sponsors/geocodelogo.svg",
            "https://metacpan.org/static/images/sponsors/fastly_logo.svg",
            "https://metacpan.org/static/images/sponsors/open-cage.svg",
            "https://metacpan.org/static/images/sponsors/elastic.svg",
            "https://metacpan.org/static/images/sponsors/route4me.png"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "",
        "meta_lang": "en",
        "meta_favicon": "/static/icons/favicon.ico",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "dpkg (1.22.11) unstable; urgency=medium [ Guillem Jover ] * Perl modules: - Dpkg::Shlibs::Cppfilt: Do not normalize angle brackets for operators. Closes: #1076067 * Documentation: - doc: Replace references to crypto-refresh and RFC4880 with RFC9580. * Build system: - Use 'command -v' instead of 'which'. - Remove generated spacesyms.o and spacesyms.c on clean. - Add declaration for funcs symbols in spacesyms.c. * Test suite: - Fix coding style in perl test cases. - Improve Dpkg::Changelog data test case message. - Refactor setup_changelog() in Dpkg::Changelog test. - Unroll Dpkg::Changelog file tests loop. - Refactor load_objdump_obj(). [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. [ Sven Joachim ] * Localization: - Update German programs translation. -- Guillem Jover <guillem@debian.org> Thu, 01 Aug 2024 12:39:16 +0200 dpkg (1.22.10) unstable; urgency=medium [ Guillem Jover ] * Perl modules: - Dpkg::Changelog::Entry::Debian: Remove obsolete /o modifier from regex. - Dpkg::Changelog: Remove useless escaping for -. * Make fragments: - Revert \"scripts/mk: Reduce the number of subprocesses\". Closes: #1076904, #1077005 * Build system: - Do not define macros for C/C++ standard level. - Use pre-defined macros to check C/C++ conformance requirements. - Fix length for comment bar line after autoconf functions. - Fix dpkg_cv_c99 assignment in DPKG_C_C99 macro. - Simplify C standard check output. -- Guillem Jover <guillem@debian.org> Sat, 27 Jul 2024 05:43:38 +0200 dpkg (1.22.9) unstable; urgency=medium [ Guillem Jover ] * dpkg-deb: Add long options for short-only compression ones. * dpkg-deb: Print pathname instead of filename and directory in error output. * start-stop-daemon: Use a stop context to track the current state. * Make fragments: - Fix pkg-info.mk evaluation by adding new DEB_TIMESTAMP variable. Closes: #1076863 * Code internals: - dpkg-deb: Track maintscript information in a new struct. * Test suite: - Fix typos in Makefile comments. -- Guillem Jover <guillem@debian.org> Wed, 24 Jul 2024 23:02:45 +0200 dpkg (1.22.8) unstable; urgency=medium [ Guillem Jover ] * Perl modules: - Dpkg::Archive::Ar: Rework _read_buf() error messages to make l10n easier. * Make fragments: - Ensure dpkg_datadir is computed once. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Fix make variable expansions passed to dpkg-buildflags. Thanks to Nicolas Boulenguez <nicolas@debian.org>. Closes: #1076568 * Documentation: - doc: Update Doxygen configuration from version 1.9.8. * Code internals: - libdpkg: Fix execname support on GNU/Hurd. * Build system: - Update lcov usage for version 2.0. * Localization: - Update Catalan translations. [ Sven Joachim ] * Localization: - Update German programs translation. -- Guillem Jover <guillem@debian.org> Sun, 21 Jul 2024 20:18:23 +0200 dpkg (1.22.7) unstable; urgency=medium [ Guillem Jover ] * dpkg-buildpackage: Remove fallback handling for missing required targets. * dpkg-buildpackage: Fix the debian/rules executable check to respect -R. * dpkg-realpath: Rewrite in C. * Revert \"test: Pass -T+1 to xz to workaround spurious warning with xz 5.6.0\". * dpkg-genbuildinfo: Parse Provides as virtual packages. * dpkg: Do not run hooks or loggers with --dry-run or while unprivileged. Closes: #1071124 * dpkg-shlibdeps: Add support for new --package option. * dpkg-buildpackage: Make newline injection during signing GnuPG specific. See https://dev.gnupg.org/T7106. * dpkg-realpath: Do not allow an empty pathname argument. * dpkg-buildpackage: Add support for building from a specified .dsc or dir. * dpkg-buildpackage: Reference the .dsc in .buildinfo if building from one. Closes: #882511 * Perl modules: - Dpkg::BuildDriver: Refactor build driver out of dpkg-buildpackage. - Dpkg::Vendor::Ubuntu: Use -fcf-protection=none instead of -fno-cf-protection. Thanks to Matthias Klose <doko@ubuntu.com>. - Dpkg::Vendor::Debian: On native builds map *_FOR_BUILD flags to * flags. Closes: #1072332 - Dpkg::OpenPGP::ErrorCodes: Update error codes from SOP draft version 10. See https://ietf.org/archive/id/draft-dkg-openpgp-stateless-cli-10.html. - Dpkg::Vendor::Debian: Set -Wno-error on qa=-bug-implicit-func. Closes: #1075769 - Dpkg::Shlibs::Cppfilt: Normalize demangled symbols with llvm or C++11 format. - Dpkg::Archive::Ar: New module. - Dpkg::Vendor::Debian: Guarantee UTF-8 locale codeset on sanitize-env. - Dpkg::Substvars: Add support for required substvars assigned with !=. - Dpkg::Source::Package: Document method additions with an object. - Dpkg::Source::Package::V3::Bzr: Remove unused variables. - Dpkg::Source::Package: Add a new get_basedirname() method. * Make fragments: - Protect files against double inclusion. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Use filter instead of findstring. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Use explicit test of $(origin) instead of ?=. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Search once for parallel= in DEB_BUILD_OPTIONS. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Generate the _FOR_BUILD variant of each variable automatically. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Reduce the number of subprocesses. Thanks to Nicolas Boulenguez <nicolas@debian.org>. Closes: #872381 - Stop hard-coding dpkg_datadir. Thanks to Nicolas Boulenguez <nicolas@debian.org>. * Documentation: - doc: Add missing full stop to end of sentence. - man: Document DEB_BUILD_ARCH and DEB_HOST_ARCH usage in commands. Prompted by Thorsten Glaser <tg@mirbsd.de>. - man: Add new libdpkg(7) manual page. - man: Document DPKG_COLORS and DPKG_NLS for all perl scripts honoring them. - man: Document missing Packages front-end fields in dpkg-query(1). - man: Document weak checksum algorithms. - man: Update verify format example to also include M. - doc: Fix grammar for fallback. - doc: Fix casing after admonition. * Code internals: - libdpkg: Factor out filesystem database file loading into new function. Based on a patch by Simon Richter <sjr@debian.org>. - libcompat: Include missing <string.h> in strnlen module. Reported by Simon Richter <sjr@debian.org>. - dpkg-buildpackage: Refactor build target hook execution. - libdpkg: Handle readlink() failures in file_readlink(). - libdpkg: Change varbuf_get_str() to return \"\" instead of initializing it. - libdpkg: Rename varbuf_get_str() to varbuf_str(). - Use varbuf_str() instead of direct access. - libdpkg: Always NUL terminate varbufs. - libdpkg: Remove varbuf_end_str() function. - libdpkg: Add support for DPKG_NLS environment variable. - libdpkg: Add new varbuf prefix and suffix handling functions. - libdpkg: Add new file_getcwd() function. - dpkg: Use a variable for each conffile pathname type. - src: Fix timestamp parse error reporting. See #1069846. - src: Check whether SOURCE_DATE_EPOCH is set before parsing it. Based on a patch by Rainer Weikusat <rweikusat@cyberadapt.com>. Closes: #1069846 - libdpkg: Add missing header includes. - libdpkg: Make file_slurp_fd() NUL-terminate the varbuf. - libdpkg: Refactor lax problem reporting into parse_lax_problem() function. - libdpkg: Turn the warning on Provides version relation into a lax error. See #930317. - libdpkg: Make varbuf_detach() always return a string. - libdpkg: Factor fsys_list_parse_buffer() out of ensure_packagefiles_available(). - dpkg-shlibdeps: Refactor executable CLI parsing. - dpkg: Refactor conffile disappearing check into a new function. - Merge conffile obsolete and remove-on-upgrade into a single flags member. - lib, src: Include missing <stdbool.h>. Reported by Simon Richter <sjr@debian.org>. - dpkg-ar: New internal ar implementation script. - start-stop-daemon: Fix typos in code comments. - libcompat: Fix vasprintf() to error out if vsnprintf() returns >= INT_MAX. - libdpkg: Do not accept len >= INT_MAX in fd_read() and fd_write(). - dpkg-realpath: Switch direct varbuf accesses to varbuf_str(). - Revert \"dpkg-realpath: Switch direct varbuf accesses to varbuf_str()\". See https://bugs.debian.org/1076061. - dpkg-realpath: Guarantee varbufs have been allocated. - Check for < 0 instead of == -1 from syscall return values. - Check for >= 0 instead of != -1 for syscall return values. - dpkg: Check for < 0 instead of == -1 for conffderef() return values. - libdpkg: Check for limit >= 0 instead of != -1 in buffer_copy(). - libdpkg: Check for updateslength < 0 instead of == -1 in ulist_select(). - dselect: Use enum values instead of literal integers. - libdpkg: Add new execname module. - libdpkg: Try to print the executable name of the lock contending process. Closes: #1070027 - perl: Use new Dpkg::Source::Package->get_basedirname() method. * Build system: - Re-enable the sanitizer for functional tests in CI. - Add missing space before backslash line continuation character. - Unconditionally include <stddef.h>. - Do not check for memcpy(). Reported by Simon Richter <sjr@debian.org>. - Do not check for functions used unconditionally. - Partially revert the sanitizer for some functional tests in CI. - Print the release version at the end of configure. - Add support to track release VCS commit id. - Pass abs_srcdir and abs_builddir to the TAP driver. - Rework subst handling for built or installed artifacts. - Workaround Tap::Harness verbose misbehavior on parallel mode. See https://github.com/Perl-Toolchain-Gang/Test-Harness/issues/105. - Fix test verbose and parallel option propagation. - Add missing files and sort POTFILES.in. - Check whether HAVE_* macros for headers are defined. - Include a .dist-vcs-url file in the distributed tarball. - Do not include VCS specific files in the distributed tarball. * Packaging: - Suppress start-stop-daemon compat symlink if /sbin is missing. Thanks to Johannes Schauer Marin Rodrigues <josch@debian.org>. Closes: #1071078 * Test suite: - Do not fail the functional test suite due to memory leaks. - Pass --check-level=exhaustive to cppcheck. - Unset DEB_BUILD_MAINT_OPTIONS in build flags tests. - Simplify buildflags.mk test of _MAINT_APPEND when TEST_ is empty. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Use loops instead of repetitions in mk fragment tests. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Replace double quotes with single quote in shell recipes. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Test exported variables in addition to Make variables. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Test variable override. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Test DEB_CXXFLAGS_MAINT_SET. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Add missing test for CPP build tool. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Test override of a build tool. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Refactor real and virtual package setup. Based on a patch by Johannes Schauer Marin Rodrigues <josch@debian.org>. - Set CC to gcc in make fragments functional tests. - Parametrize all Makefile fragment functional tests. - Clarify the Makefile fragment variable being tested via comments. - Add new DPKG_CHECK_DIFF macro to abstract file comparisons. - Only execute Dpkg::Shlibs checks on ELF platforms. - Unify all ar invocations into create, extract and list. - Refactor ar handling into m4 macros. - Switch ar m4 macros to use internal dpkg-ar implementation. * Localization: - Update Dutch man pages translations. Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. Closes: #1070144 - Update Swedish translations. Thanks to Peter Krefting <peter@softwolves.pp.se>. Closes: #1070011 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. [ Sven Joachim ] * Localization: - Update German programs translation. -- Guillem Jover <guillem@debian.org> Wed, 17 Jul 2024 01:10:42 +0200 dpkg (1.22.6) unstable; urgency=medium [ Guillem Jover ] * dpkg-deb: Fix up compressor parameters for default legacy format. * Perl modules: - Dpkg::Vendor::Debian: Make it possible to disable qa=-bug-implicit-func. Closes: #1065371 - Dpkg::Vendor::Debian: Unconditionally set qa bug-implicit-func. See #1065371. * Documentation: - man: Document dpkg versions supporting SOURCE_DATE_EPOCH for various tools. * Code internals: - libdpkg: Use array access instead of pointer arithmetic for meminfo parser. - libdpkg: Use a macro to define the zstd default compression level. * Build system: - Test with minimal library dependencies in CI. - Add gen-release script. * Packaging: - Fix typo in man page reference in changelog. * Test suite: - Refactor OpenPGP backend and commands list. - Refactor certfile and keyfile filenames for OpenPGP test. - Skip OpenPGP tests if the backend does not have a verify command. Closes: #1065648 * Localization: - Fix typos in Swedish man pages translations. Thanks to Andreas Rönnquist <gusnan@debian.org>. Closes: #1065672 - Fix typos in Swedish man pages translations. Closes: #1065575 - Update Dutch man pages translations. Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. Closes: #1065518 - Update Portuguese man pages translations. Thanks to Américo Monteiro <a_monteiro@gmx.com>. Closes: #1065401 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. -- Guillem Jover <guillem@debian.org> Sun, 10 Mar 2024 20:21:24 +0100 dpkg (1.22.5) unstable; urgency=medium [ Guillem Jover ] * dpkg-buildapi: Remove -v alias for --version. * dpkg-query: Fix exit codes for --show. Closes: #1064036 * Perl modules: - Dpkg::OpenPGP::Backend::Sequoia: Update to new CLI API changes. - Dpkg::OpenPGP::Backend::GnuPG: Add support for Sequoia gpg Chameleon. - Dpkg::Vendor::Debian: Only append branch compiler flags if $flag is set. - Dpkg::Vendor: Make the add_build_flags() a non-private method. - Dpkg::Vendor::Ubuntu: Pass compiler flags to disable features. Based on a patch by Matthias Klose <doko@ubuntu.com>. - Dpkg::Vendor::Debian: Enable time64 feature by default except on <some>-i386. Closes: #1037136 Based on a patch by Steve Langasek <steve.langasek@ubuntu.com>. - Dpkg::Vendor::Debian: Enable qa=+bug-implicit-func for abi=+time64 feature. Based on a patch by Steve Langasek <steve.langasek@ubuntu.com>. * Documentation: - man, doc: Fix dpkg-buildapi option and command grouping in descriptions. - man: Add spaces around make variable assignments. - man: Do not duplicate list of known feature areas in dpkg-buildflags. - man: Document known feature areas in DEB_BUILD_OPTIONS for dpkg-buildpackage. - man: Improve build flags feature specification in environment variables. Closes: #1063641 - man: Use L</> markup for inter link reference. - man: Mention Build-Depends-Packages in dpkg-shlibdeps(1). * Code internals: - libdpkg: Add comment clarifying GNU long name tar format expectations. - libdpkg: Use an intermediate mode variable in secure_unlink_statted(). - dpkg: Rename symlink_len to linksize. - dpkg: Rename r variable for readlink() return value to linksize. - dpkg: Reduce variable scope in conffderef(). - libdpkg: Refactor file_readlink() function. - libdpkg: Deindent an else clause. - lib, src: Fold if with last previous else. - perl: Fold if into previous else. - dpkg-mergechangelogs: Refactor merge_tail() sub from anonymous sub. - dpkg-query: Rename rc variables tracking no matches to misses. - dpkg-query: Rename failures variables tracking no matches to misses. * Build system: - Rename pkexec variables to polkitactions. - Move directory definitions to configure. - Use PACKAGE_TARNAME for pathname components in directories. - Split each automake variable value into its own line. - Reorder automake variables. - Move update-alternatives rules within automake conditional. - Move MD_LIBS from LDFLAGS to LDADD for libdpkg. - Fix libdpkg library flags for static and dynamic linking. - Add infrastructure for bash-completions. * Test suite: - Pass -T+1 to xz to workaround spurious warning with xz 5.6.0. Closes: #1064856 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. -- Guillem Jover <guillem@debian.org> Tue, 27 Feb 2024 04:28:03 +0100 dpkg (1.22.4) unstable; urgency=medium [ Guillem Jover ] * Code internals: - dpkg: Rename r variable for readlink() return value to symlink_len. - dpkg: Rename r variable for fd_read() return value to n. - dpkg-deb: Rename r variable for fd_read() return value to nread. - dpkg-deb: Rename r variables for fd_read() call chain return value to rc. - dpkg-split: Rename r variable for strtoimax() return value to ret. - libdpkg: Rename r variable for path_quote_filename() return to ret. - libdpkg: Rename r variable for fclose() return value to rc. - libdpkg: Rename r variables for printf()-like return values to n. - libdpkg: Handle tar long GNU names and links not being NUL terminated. Closes: #1061404 - perl: Use qw() when importing symbols. - dpkg-gensymbols: Move foreach inlined array elements into a list. - dpkg-scansources: Fix newline breaks for ternary operators. * Packaging: - Update copyright years. -- Guillem Jover <guillem@debian.org> Wed, 24 Jan 2024 13:12:31 +0100 dpkg (1.22.3) experimental; urgency=medium [ Guillem Jover ] * dpkg-buildtree: New program. * Perl modules: - Dpkg::Vendor::Debian: Parametrize fortify level. - Dpkg::Vendor::Ubuntu: Default to fortify level 3. - Dpkg::OpenPGP::Backend::SOP: Add reference to another gosop blocker. - Dpkg::OpenPGP::Backend::GnuPG: Accept keybox format keyrings as-is. - Dpkg::OpenPGP::Backend: Remove unused strict_verify option. - Dpkg::OpenPGP::Backend::GnuPG: Look harder for trustedkeys keyring. - Dpkg::Changelog::Debian: Remove wrong import arguments. - Dpkg::Vendor::Debian: Split bug-implicit-func from bug feature in qa area. * Documentation: - man: Use semantic line breaks (must requirements). - man: Remove trailing full stop before parenthetical. - man: Use «package maintainer script» instead of «Debian package scripts». * Code internals: - libcompat: Make long_options array const. * Packaging: - Make the logdir variable local to its function in postrm. - Install start-stop-daemon under /usr/sbin. Closes: #1059982 - Make get_vendor honor DEB_VENDOR environment variable. - Check for usrmerge in bug-script on the same vendors as postinst. - Do not install dpkg-fsys-usrunmess on Debian and Ubuntu. * Localization: - Fix L<> markup. - Unfuzzy translations after semantic line break changes. - Update Dutch man pages translation. Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. Closes: #1061085 - Update Swedish translations. Thanks to Peter Krefting <peter@softwolves.pp.se>. Closes: #1059527 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. -- Guillem Jover <guillem@debian.org> Fri, 19 Jan 2024 12:10:52 +0100 dpkg (1.22.2) unstable; urgency=medium [ Guillem Jover ] * dpkg-shlibdeps: Do not require debian/control when parsing CLI options. Closes: #1055536 * Architecture support: - Remove arm64ilp32 support. See https://lists.debian.org/debian-dpkg/2023/11/msg00007.html. - Remove uclinux support. See https://lists.debian.org/debian-dpkg/2023/11/msg00012.html. - Remove knetbsd-any support. - Restrict kfreebsd ports to amd64 and i386. - Restrict kopensolaris ports to amd64 and i386. - Restrict hurd ports to amd64 and i386. - Restrict dragonflybsd ports to amd64. - Restrict aix ports to powerpc and ppc64. - Restrict solaris ports to amd64, i386, sparc and sparc64. - Restrict darwin ports to amd64, arm, arm64, i386, powerpc and ppc64. - Restrict freebsd ports to amd64, arm, arm64, i386, powerpc, ppc64, riscv. - Split tupletable header names description into two paragraphs. * Perl modules: - Dpkg::OpenPGP::Backend::Sequoia: Switch to use --signer-file. - Dpkg::Vendor::Debian: Mask PIE for alpha and ia64. Closes: #1040062 - Dpkg::Control::Types: Add aliases for type enumerations. * Documentation: - man: Add dpkg-build-api behavior for Rules-Requires-Root field defaults. - man: Improve description for dpkg-build-api v1 items. - doc, man: Clarify terminology for Debian control files. * Code internals: - libcompat: Disable VLA usage for gettext.h. - libdpkg: Remove dead code after non-returning error function call. - libdpkg: Mark varbuf constructor as explicit. - Reduce variables scope. - update-alternatives: Wrap the bad_format() function pointer call into a new function. - start-stop-daemon: Rename local variables shadowing global info() function name. - libdpkg: Add underscore after NO to FHFF_NONEW and FHFF_NOCOPY enum values. - Use FHFF_NONE instead of a literal 0 in calls to fsys_hash_find_node(). Reported by Alexandre Detiste <alexandre.detiste@gmail.com>. - dpkg-split: Change heading print logic to use a proper boolean. - dpkg-shlibdeps: Defer add_library_dir() calls after option parsing. - libdpkg: Remove unused DEFAULTSHELL and DEFAULTPAGER macros. - dpkg-buildapi: Do not include newline in Usage text to be translated. * Build system: - Check whether we need to linkg against libtinfo explicitly. - Add support for structured procfs via struct psinfo. - Replace action-if-found with : for extra libselinux check. - Check and print sizeof off_t and time_t on the configure summary. * Packaging: - Use installtest instead of test target in autopkgtests. * Test suite: - Reorder check on whether pkg is NULL. - Split and sort cppcheck arguments to be one per line. - Remove unused cppcheck suppressions. - Improve cppcheck coverage. - Pass -I<builddir> to cppcheck instead of «.» if <builddir> is defined. * Localization: - Update Catalan translations. - Update Dutch translations. Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. Closes: #1058631, #1058637 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. -- Guillem Jover <guillem@debian.org> Mon, 18 Dec 2023 03:37:08 +0100 dpkg (1.22.1) unstable; urgency=medium [ Guillem Jover ] * dpkg-deb: Reject --no-uniform-compression with format 0.939000. * dpkg-deb: Force deb format 0.939000 to use gzip compression. * update-alternatives: Fix typo in comment. * update-alternatives: Unvendor documentation and --version output. * scripts: Remove unused GCJ and GCJFLAGS support. * scripts: Add basic support for _FOR_BUILD build flags. * Perl modules: - Dpkg::BuildAPI: Move DESCRIPTION before package declaration. - Dpkg::Source::Archive: Use $Dpkg::PROGTAR instead of tar in error message. - Dpkg::Source::Patch: Warn when patching hard linked files. - Dpkg::Vendor::Debian: Mark loong64 as having pie builtin. Thanks to yalingfang <fangyaling@loongson.cn>. Closes: #1053778 - Dpkg::BuildFlags: Refactor flags initialization by using a single list. - Dpkg::Deps: Implicitly enable build_deps option on tests_deps. Closes: #1053481 - Dpkg::Vendor::Debian: Fix stackclash condition to enable the feature on armhf and armel. Closes: #1054583 * Make fragments: - Wrap DPKG_BUILDFLAGS_LIST into one entry per line. * Documentation: - man: Fix typo in stackclash feature name in dpkg-buildflags(1). - doc: Fix typos in code comments. - doc: Use macOS instead of Mac OS X in code comments. - man: Document the list of editors tried on dpkg-source --commit. Closes: #1051209 - doc: Update R³ default values to take dpkg-build-api into account. - man: Clarify Maintainer field in dpkg-parsechangelog(1). See #1053705. - man: Document all dpkg-parsechangelog(1) output fields. - doc, man: Use manual page instead of manpage. - doc, man: Use field name or field-name instead of fieldname. - man: Use web interface instead of both terms concatenated. - man: Hyphenate 32-bit and 64-bit. - doc, man: Use L</> markup for inter link references. - doc: Use name() POD syntax instead of C<>, B<> or L<> for function names. - doc: Use name() POD syntax instead of a bare function name. - doc: Simplify references in CHANGES sections. - doc, man: Use L<> for manual page references. - doc, man: Use media discs instead of CD-ROM. - man: Use /media/bdrom instead of /media/cdrom. - man: Fix grammar in dpkg --force-confdef description. - man: Avoid redundant action list in dpkg invoke hook description. - man: Document the intermediary filenames used during unpack and configure. Prompted by Florian Weimer <fweimer@redhat.com>. See https://sourceware.org/pipermail/libc-alpha/2023-October/152245.html. - man: Update dpkg EXAMPLES section. - man: Recommend debsig-verify instead of debsums for additional functionality. - doc: Clarify compiler flag variables are for the host. * Code internals: - src: Use DEBEXT instead of hard-coding \".deb\". - dpkg-deb: Initialize threads_max in no-uniform-compression mode. - dpkg-deb: Refactor legacy compress_params. - libdpkg: Refactor struct treewalk_funcs compound initializer into a macro. - libdpkg: Initialize TREEWALK_OBJECT with a 0. - libdpkg: Define DPKG_NULL to nullptr on C23 mode. - libcompat: Fix comparison of integers of different sign in obstack_blank(). - libcompat: Declare exit_failure as an extern variable. * Build system: - Remove dpkg prefix from default deb compressor configure knobs. - Parametrize dpkg-deb default compressor in man page. - Use TAR variable from configure instead of hard-coded tar. - Split sanitizer CI unit tests from author checks. - Rename the shared library CI tests to shlib-tests. - Run make in parallel for autotest and TAP CI test jobs. - Make default shell and pager selectable at configure time. - Handle almost-POSIX shells that do not support -- after -c. See https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=274650. - Check for available pagers during configure. - Add comment for the system the DPKG_LIB_SOCKET m4 macro is needed. * Packaging: - Do not stop the dpkg-db-backup timer and service during upgrade. Closes: #1051085 - Fix typos in debian/control comments. * Test suite: - Update cppcheck suppressions for 2.12.0. - Add installtest target and make test use the build tree programs. - Add new DPKG_CWD m4 macro. - Do not use -T for ln calls. - Generate the .deb from scratch instead of adapting them. - Update suppressions for codespell 2.2.6. - Use «\\\\n» after «a» and «c» sed commands. - Use perl instead of dd to create a zero-filled file. - Pass argument S to ar to avoid generating a symbol table. - Replace SED usage with PERL. - Include <sys/mkdev.h> on Solaris for major() and minor(). * Localization: - Update Dutch translations. Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. Closes: #1053235, #1053236, #1053237 - Update Portuguese man pages translation. Thanks to Américo Monteiro <a_monteiro@gmx.com>. Closes: #1051634 - Update Romanian dselect translation. Thanks to Remus-Gabriel Chelu <remusgabriel.chelu@disroot.org>. Closes: #1053364 - Update Romanian programs translation. Thanks to Remus-Gabriel Chelu <remusgabriel.chelu@disroot.org>. Closes: #1054196 - Update Swedish translations. Thanks to Peter Krefting <peter@softwolves.pp.se>. Closes: #1054510 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. [ Sven Joachim ] * Localization: - Update German programs translation. -- Guillem Jover <guillem@debian.org> Mon, 30 Oct 2023 04:14:22 +0100 dpkg (1.22.0) unstable; urgency=medium [ Guillem Jover ] * dpkg: Do not reset the line number for each --command-fd parsed command. * dselect: Add non-free-firmware archive area support. * dselect: Relicense ftp method from GPL-2 to GPL-2+. * dpkg-deb: Do not print trailing spaces in --info output. * dpkg: Clarify that commands can take package-name or --pending in error message. Closes: #1034466 * Remove avr32, m32r and tilegx obsolete architectures. See Linux commit 26202873bb51fafdaa51be3e8de7aab9beb49f70 (avr32). See Linux commit 553b085c2075f6a4a2591108554f830fa61e881f (m32r). See Linux commit bb9d812643d8a121df7d614a2b9c60193a92deb0 (tile). * dpkg-db-keeper: Add helper script to assist with tracking database changes. * dpkg-buildpackage: Add support for new preinit hook. Closes: #1023753 * dselect: Remove handling of .GZ, .Z and .z compressed Package files. * dselect: Fix stdout+stderr discarding redirection in ftp method. Prompted by shellcheck. * dpkg-buildpackage: Fix build hook action substitution string handling. * dpkg-buildpackage: Set the hook options in an environment variable. Closes: #902856 * dpkg-buildpackage: Set DPKG_BUILDPACKAGE_HOOK_NAME envvar for hooks. * dpkg-buildpackage: Handle missing information for hook substitutions. * dpkg-deb: Fix short lived memory leak after fork(). * Switch from pkg-config to pkgconf. * dpkg: Handle non-existent .dpkg-tmp files on read-only filesystems. Closes: #1030149 * dpkg-buildpackage: Fix R³ namespace check to only refuse unknown dpkg keywords. Closes: #1036865 * dpkg-buildapi: New tool to fetch the dpkg-build-api level. * dpkg-shlibdeps: On dpkg-build-api >= 1 require -l instead of LD_LIBRARY_PATH. * dpkg-buildpackage: On dpkg-build-api >= 1 default R³ to no. * dpkg-buildpackage: On dpkg-build-api >= 1 avoid build target heuristics. * Mark dpkg-build-api level 1 as stable. * Architecture support: - Restore \"arch: Add support for loong64 CPU\". Closes: #1028654 * Perl modules: - Dpkg::OpenPGP::ErrorCodes: Add new OPENPGP_CMD_CANNOT_SIGN error code. - Dpkg::OpenPGP::Backend::GnuPG: On signing failure use OPENPGP_CMD_CANNOT_SIGN. Closes: #1030271 - Dpkg::Shlibs::Objdump::Object: Split from Dpkg::Shlibs::Objdump. - Dpkg::Control::HashCore::Tie: Split from Dpkg::Control::HashCore. - Dpkg::Vars: Fold into Dpkg::Package. - Dpkg::Package: Rename source_package symbols to source_name. - Dpkg::Changelog::Parse: Fix indentation of copyright and license notice. - Dpkg::Version: Update POD for removed semantic_change::overload::bool warning. - Dpkg::Gettext: Relicense from BSD-2 to GPL-2+. - Dpkg::Source::Archive: Fix file normalization for relative pathnames. - Dpkg::Source::Archive: Reflow regex match in _add_entry(). - Dpkg::Control::FieldsCore: Deprecate implicit field_transfer_single() argument. - Dselect::Method::Ftp: Rename from Dselect::Ftp. - Dselect::Method::Ftp: Modify config and site subs towards method independence. - Dselect::Method: Move to be generic functions from Dselect::Ftp. - Dselect::Method::Ftp: Update package name. - Dpkg::Vendor::Debian: Add time64 feature in the future area. Based on a patch by Helge Deller <deller@gmx.de>. Closes: #1030159 - Dpkg::Control::HashCore::Tie: Rename $last to $prev. - Dpkg::Substvars: Handle exponential expansion gracefully. - Dpkg::Shlibs::Objdump: Remove unsupported ELF machine types. - Dpkg::Shlibs::Objdump: Add ELF machine types for all supported arches. - Dpkg::Shlibs::Objdump: Add RISC-V ELF ABI tracking. - Dpkg::Shlibs::Objdump: Add OR1K ELF ABI tracking. - Dpkg::Shlibs::Objdump: Switch get_format() to return a colon-separated string. - Dpkg::Shlibs::Objdump: Add back the ARM ABI mismatch mask but commented out. See #853793. - Dpkg::Source::Quilt: Switch get_db_file() to be based off get_db_dir(). - Dpkg::Vendor::Debian: Mark PIE as builtin on hurd-amd64. - Dpkg::Vendor::Debian: Only use ABI bits to suppress LFS or time64 features. - Dpkg::Vendor::Debian: Only enable LFS when time64 is enabled for glibc. - Dpkg::Vendor::Debian: Invert time64 suppression list logic. - Dpkg::Vendor::Debian: Ignore musl libc systems for time64 suppression. - Dpkg::Vendor::Debian: Add fallback values for ABI attributes. - Dpkg::Source::Package::V2: Mark single-debian-patch as not needing forwarding. Closes: #1038121 - Dpkg::Vendor::Debian: Sync builtin pie arches with gcc-13. - Dpkg::Vendor::Debian: Move time64 buildflags feature from future to abi. Suggested by Steve Langasek <vorlon@debian.org>. - Dpkg::Vendor::Debian: Move lfs from future to abi area and create an alias. Suggested by Steve Langasek <vorlon@debian.org>. - Dpkg::Vendor::Debian: Move builtin default setup before init_build_features(). - Dpkg::Vendor::Debian: Handle abi feature flags as builtin. - Dpkg::Vendor::Debian: Add support for new hardening branch feature. Closes: #1021292 - Dpkg::Vendor::Debian: Add support for new stackclash hardening feature. Closes: #918914 - Dpkg::Source::Quilt: Switch get_patch_file() to be based off get_patch_dir(). - Dpkg::BuildAPI: New module. * Make fragments: - Add new buildapi.mk support. - On dpkg-build-api >= 1 default to dpkg_vendor_derives_from_v1. - On dpkg-build-api >= 1 include buildtools.mk in default.mk. * Documentation: - man: Add notes about reproducibility properties for path fixing build features. Prompted by Sven Joachim <svenjoac@gmx.de>. - man: Itemize remaining lists. - man: Unify admonition markup and formatting. - man: Move shell redirection operator close to the redirected file. - man: Add versions where build flag features were added. - doc: Update triggers spec. - man: Fix OpenPGP backends list in dpkg-buildpackage(1). - doc: Use «honor» and «behavior» uniformly in documentation and output. - man: Clarify that dpkg-reconfigure is part of the debconf project. - doc: Add a Status field to frontend-api spec. - man: Clarify shared library name formats and their purpose. - man: Add SECURITY sections. - man: Spell out «manual page». - man: Clarify C.UTF-8 locale setting hint. Closes: #1028296 - man: Update methods provided by dselect(1). - man: Turn buildinfo filename format selection into a list. - man: Itemize supported deb-changelog(5) keyword/value entries. - doc: Move Perl version baseline as the first perl coding style subsection. - doc: Clarify required C/C++ standards. - doc: Require POSIX.1-2008. - man: Mention .buildinfo in dpkg-buildpackage --sign-command description. - doc: Fix typo. - man: Document known DEB_BUILD_OPTIONS options. Closes: #1038888 - man: Clarify the md5sums checks as integrity and not security checks. Prompted by Sebastian Andrzej Siewior <sebastian@breakpoint.cc>. - man: Clarify dpkg-architecture -c option. Prompted by Paul Wise <pabs@debian.org>. - man: Document version when new programs where introduced. - man: Fix typo in future lfs feature introduction version. - man: Open up dpkg-build-api level 1. * Code internals: - libdpkg: Move early return into the loop. - libdpkg: Remove impossible condition. - libdpkg: Turn bitmask parse_nv_flags into an actual enum parse_nv_mode. - libdpkg: Move parse_nv() next word check inside else block. - dpkg: Remove path_quote_filename() usage. - dselect: Reduce variables scope. - libcompat: Reduce variables scope. - libdpkg: Reduce variables scope. - update-alternatives: Reduce variables scope. - src: Reduce variables scope. - libdpkg: Rename mlib module to mustlib. - dselect: Remove unused trailing semicolons. - libdpkg: Surround macro within a do-while block. - perl: Add $VERSION to all embedded perl packages. - perl: Add POD to all private modules. Closes: #1030660 - perl: Move POD sections before what they describe. - scripts: Unpack function arguments. - scripts: Remove duplicate variable declaration. - dselect: Reduce variable scope to avoid shadowing. - perl: Move $VERSION into package keyword. - perl: Remove unused Dpkg::Version semantic_change warning suppression. - scripts: Use «(undef) x N» to ignore tuples or function returns. - perl: Stop removing «.» from @INC before loading modules. - dpkg-scansources: Reorder captured variable and regex match. - perl: Use List::Util instead of fixed string matches within a regex. - perl: Pass $_ explicitly to field_transfer_single(). - perl: Rename filename related variables to distinguish them from field ones. - dpkg-genchanges: Move comment describing %sourcedefault before declaration. - perl: Rename Dpkg::Control variables from $f to $c or $ctrl. - perl: Use an $f variable for fields instead of the topic variable. - perl: Use fixed string comparisons for field name matches. - scripts: Switch code to use chained comparisons. - dselect: Update Andy Guy email address. - dselect: Remove unused ismulti() function from media method actions. - dpkg-deb: Use intermediate variable for exec mark on --info output. - dpkg-deb: Refactor maintscript interpreter parser. - dpkg-deb, dpkg-query: Rename option flags to opt_NAME. - dpkg-trigger: Rename CLI option variables from f_ to opt_. - libcompat: Declare variables before definitions. - libdpkg: Make local variables static. - libdpkg: Rename FHFF_NONE to FHFF_NONEW. - libdpkg: Switch bitmasks enumerations into precise masks. - libdpkg: Add enumerations for the default, unset and max cases. - libdpkg: Add warning suppression macros. - lib: Add an enum flags attribute. - lib, src, utils: Use new enum flag C attributes. - libdpkg: Unconditionally initialize c variable in parse_stanza(). - start-stop-daemon: Initialize variables in run_stop_schedule(). - dpkg-genchanges: Refactor .changes file description formatting into a function. - dpkg-genchanges: Replace Encode usage with utf8 encode/decode functions. - dpkg-gensymbols: Use File::Compare instead of Digest::MD5. - dselect: Reword odd code comment. - dselect: Use «color» uniformly in variables and comments. - libdpkg: Handle missing Version when formatting source:Upstream-Version. Reported by John Scott <jscott@posteo.net>. - perl: Remove «1;» from end of script in programs. - libdpkg: Pass -- after sh -c to avoid bogus option parsing. Prompted by Joe Simmons-Talbott <josimmon@redhat.com> (on libc-alpha). - libdpkg: Mask the mode from the tar entry to only the file mode bits. - lib: Define __has_include fallback if the compiler does not support it. - libdpkg: Simplify progress output by using fputs() and putchar(). - libdpkg: Mark the progress percentage for translation. See #1034378. - dpkg-buildpackage: Turn items into lists for easier extensibility. - libdpkg: Make headers self-contained. Thanks to Simon Richter <sjr@debian.org>. - libdpkg: Mark functions in headers as inline. Thanks to Simon Richter <sjr@debian.org>. - scripts: Do not set LANG unnecessarily. - dpkg: Move comment next to the code it is describing. - dpkg-buildpackage: Move hook invocation closer to artifact creation. - dpkg-buildpackage: Default the enabled run_hook() parameter to true. - dpkg-buildpackage: Turn the run_hook() enabled argument into a hash option. - libcompat: Use ptrdiff_t directly instead of using a macro. - libcompat: Update getopt code from gnulib. - libdpkg: Remove redundant check. - lib, src: Add const qualifiers to variables. - dselect: Add constVariableReference as a cppcheck suppression. - libdpkg: Fix varbuf memory leak in pkg_source_version(). - dpkg-shlibdeps: Switch from exec() to Dpkg::IPC::spawn(). Prompted by Paul Wise <pabs@debian.org>. - libdpkg: Fix coding style for varbuf module. - libdpkg: Reorder varbuf functions. - libdpkg: Add varbuf_add_varbuf() function. - libdpkg: Add varbuf_add_strn(). - libdpkg: Add varbuf setter functions. - libdpkg: Switch ustar filename construction to use varbuf_add_strn(). - dpkg-split: Use varbuf instead of ad-hoc allocation in read_info. - Use varbuf_add_varbuf() instead of varbuf_add_buf()/_str(). - Use varbuf_set_*() instead of ad-hoc initialization. - libdpkg: Generalize command_in_path() from find_command(). * Build system: - Fix version script linker support detection. - Enable -Wextra-semi compilation warning. - Explicitly set the date when generating perl module man pages. - Bump minimal Perl version to 5.32.1. - Enable more compiler warnings. - Remove unused AC_SIZEOF checks. - Check for the host architecture attributes during configure. - Detect whether we need librt for clock_gettime(). - Use an export symbols file if there is no version script support. - Add -no-undefined libtool flag. - Add support for .git-blame-ignore-revs file. - Fix typo in .gitignore filename by renaming it. Thanks to Simon Richter <sjr@debian.org>. - Remove vim swap file entry from .gitignore. - Ignore tags files. Based on a patch by Simon Richter <sjr@debian.org>. - Add perl prefixes into the Code Internals changelog section. - Namespace COMPILER_*FLAGS with DPKG_. - Add support for compiler sanitizer flags. - Add support for compiler analyzer flags. - Add new gcc-13 warnings. - Warn on alloca() usage. - Remove distcleancheck_listfiles override for CPAN dist-cpan target. - Avoid Perl's exec() falling back to system(). Thanks to Paul Wise <pabs@debian.org>. See https://perldoc.perl.org/functions/exec.html. * Packaging: - Merge copyright statements for the same holder. - Remove executable permissions from maintscripts in source. - Remove no longer needed alternatives fixup from postint. - Remove no longer needed maintscripts for method renames. - Fix removal of file method state directory on purge. - Wrap fields in debian/tests/control file. - Set Persistent=true for dpkg-db-backup systemd timer. Thanks to Teemu Likonen <tlikonen@iki.fi>. Closes: #1041730 - Do not start the dpkg-db-backup timer during installation. * Test suite: - Update perlcritic checks and suppressions. - Disable perlcritic checks that are not relevant. - Reduce scope of variable to avoid shadowing others. - Do not use potentially bogus variable value. - Enable perlcritic RegularExpressions::ProhibitCaptureWithoutTest. - Disable -Wassign-enum for tests using out of range enum values. - Make some perlcritic checks more strict. - Update rationale for perlcritic check suppressions. - Use the TAR detected at configure time in autotests. - Use the SED detected at configure time in autotests. - Use m4 to implement seq instead of assuming GNU seq is present. - Add missing argument to DPKG_FILE_SIZE m4 function. - Add more substvar recursive replace cases. - Define lzma based on xz if missing. - Switch deb non-uniform members test to use uncompressed control.tar. - Use AT_DATA instead of touch to create empty files. - Refactor deb-format package template generation into a new macro. - Split deb-format tests per compressor. - Fix t-disappear-depended test. - Add cases for disappearing with diversions. - Add cases for disappearance on diverted overwrites and third parties. Suggested by Simon Richter <sjr@debian.org>. - Quote command variables in case these contain spaces. - Use the GREP/EGREP detected at configure time in autotests. - Pass -n to gzip for all invocations. - Generate the pkg-old.deb from controlled parts. - Compute the sizes for «dpkg-deb -I» output dynamically. - Add test cases for dpkg-buildpackage hook support. - Use dpkg-buildpackage --no-sign instead of each --unsigned-* option. - Add new stop words for codespell 2.2.5. - Update cppcheck suppressions for 2.11. - Define macros to help cppcheck analyze code. - Fix varbuf memory leak in t-pkg-format test. - Rename merge_changlogs test to match the command being tested. - Add new test case checking Conflicts with Replaces. - Fix t-conffile-divert-conffile case. - Use «ar qc» to create archives with duplicate members. - Move test_data_file() to test.h. * Localization: - Add Portuguese scripts translations. Thanks to Américo Monteiro <a_monteiro@gmx.com>. Closes: #1032562 - Clarify license for translation files. - Fix Project-Id-Version to match the gettext domain. - Unify translation header description. - Update Dutch header boilerplate with an actual copyright line. - Update French scripts translation. Thanks to Sébastien Poher <sebastien@volted.net>. - Update Romanian dselect translation. Thanks to Remus-Gabriel Chelu <remusgabriel.chelu@disroot.org>. Closes: #1040869 - Use Dpkg Developers instead of listing them individually. [ Helge Kreutzmann ] * man: Remove a now superfluous character from dpkg(1). * Localization: - Update German man pages translation. - Update German scripts translation. [ Sven Joachim ] * Localization: - Update German dselect translation. - Update German programs translation. -- Guillem Jover <guillem@debian.org> Wed, 30 Aug 2023 05:39:24 +0200 dpkg (1.21.20) unstable; urgency=medium [ Guillem Jover ] * Documentation: - man: Remove duplicate word in dpkg-buildflags(1). Thanks to Peter Krefting <peter@softwolves.pp.se>. * Packaging: - Fix versioned Build-Depends on debhelper. Closes: #1030288 - Update lintian overrides. * Test suite: - Update suppressions for cppcheck 2.10. - Skip auto-generated policykit policy file. * Localization: - Add Dutch scripts translation. Closes: #1030712 Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. - Unfuzzy translations due to typo fix. - Update Czech translations. Closes: #1029706, #1030267 Thanks to Miroslav Kure <kurem@upcase.inf.upol.cz>. - Update Dutch translations. Closes: #1030710, #1030711 Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. - Update French man page translation. Closes: #1030618 Thanks to Jean-Pierre Giraud <jenapierregiraud75@free.fr>. - Update French programs translations. Thanks to Sébastien Poher <sebastien@volted.net>. - Update Hungarian programs translation. Thanks to Nagy Elemér Károly <nagy.elemer.karoly@gmail.com>. - Update Korean dselect translation. Thanks to Sangdo Jun <sebuls@gmail.com>. - Update Occitan programs translation. Thanks to Quentin PAGÈS <quentinantonin@free.fr>. - Update Portuguese programs translation. Thanks to Miguel Figueiredo <elmig@debianpt.org>. - Update Romanian programs translation. Thanks to Remus-Gabriel Chelu <remusgabriel.chelu@disroot.org>. - Update Russian translations. Closes: #1030162, #1030378 Thanks to Yuri Kozlov <yuray@komyakino.ru>. - Update Simplified Chinese translations. Thanks to Boyuan Yang <byang@debian.org>. - Update Spanish dselect translation. Thanks to jonatan porras <jonatanpc8@gmail.com>. - Update Swedish translations. Thanks to Peter Krefting <peter@softwolves.pp.se>. - Update Thai programs translation. Thanks to Theppitak Karoonboonyanan <thep@debian.org>. - Update Traditional Chinese dselect translation. Thanks to Cheng-Chia Tseng <pswo10680@gmail.com>. - Workaround po4a formatting issue in French translation. -- Guillem Jover <guillem@debian.org> Tue, 07 Feb 2023 12:19:12 +0100 dpkg (1.21.19) unstable; urgency=medium [ Guillem Jover ] * Architecture support: - Revert \"arch: Add support for loong64 CPU\". See #1028654. * Perl modules: - Dpkg::OpenPGP::Backend::GnuPG: Set secure signing preferred algorithms. Closes: #1028961 - Dpkg::OpenPGP::Backend::GnuPG: Touch trustedkeys.gpg on temporary gpg home. - Dpkg::OpenPGP::Backend::GnuPG: Fallback to use «gpg dearmor» if present. Reported by Sven Joachim <svenjoac@gmx.de> (on IRC). - Dpkg::Vendor::Ubuntu: Fix lto feature to honor DEB_BUILD_OPTIONS. * Test suite: - Set the permissions explicitly for the copied ChangeLog.old file. - Add unit tests for lto build flags handling in Ubuntu. Thanks to Shengjing Zhu <shengjing.zhu@canonical.com>. See https://bugs.launchpad.net/bugs/2002582. * Localization: - Update Catalan translation. - Update Portuguese man pages translation. Thanks to Américo Monteiro <a_monteiro@gmx.com>. Closes: #1028981 [ Sven Joachim ] * Localization: - Update German programs translation. [ Helge Kreutzmann ] * Localization: - Update German man pages translation. -- Guillem Jover <guillem@debian.org> Tue, 24 Jan 2023 23:39:50 +0100 dpkg (1.21.18) unstable; urgency=medium [ Guillem Jover ] * Perl modules: - Dpkg::BuildFlags: Fix strip method to always work with duplicates. Closes: #1028044 * Documentation: - man: Add a note to dpkg-fsys-usrunmess(8) about Debian support. Closes: #1008486 * Code internals: - libdpkg: Move compression level max bound check from dpkg-deb. - libdpkg: Switch dpkg_lzma_strerror() to use struct io_lzma. - libdpkg: Split compression filter operation tracking from its status. - libdpkg: Generalize compression stream action handling. - libdpkg: Abstract compression stream status tracking. - libdpkg: Add zstd support for .deb archives. Closes: #892664 * Build system: - Update .mailmap mappings. * Packaging: - Update copyright years. * Test suite: - Add dpkg-deb build and extract tests. -- Guillem Jover <guillem@debian.org> Tue, 10 Jan 2023 18:46:37 +0100 dpkg (1.21.17) unstable; urgency=medium [ Guillem Jover ] * dpkg-genbuildinfo: Do not fail if the cross-compiler cannot compile. Closes: #1027966 * Code internals: - dpkg-buildinfo: Fix indentation. * Packaging: - Stop shipping the «git log» changelog in exchange for no trimming. Closes: #1027716 -- Guillem Jover <guillem@debian.org> Thu, 05 Jan 2023 12:34:05 +0100 dpkg (1.21.16) unstable; urgency=medium [ Guillem Jover ] * dpkg-deb: Fix buffer overflow on long directory names with old deb formats. Reported by Georgy Yakovlev <gyakovlev@gentoo.org>. * Perl modules: - Dpkg::Compression: Pass --no-adjust to xz to force compression threaded mode. - Dpkg::Compression: Make xz not emit warnings nor exit non-zero on warnings. - Dpkg::OpenPGP::Backend::SOP: Add sqop as an alternative SOP implementation. - Dpkg::Source::Package::V3::Git: Move error() argument out of g_() call. * Code internals: - libdpkg: Make xz not emit warnings nor exit non-zero on warnings. [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. -- Guillem Jover <guillem@debian.org> Wed, 04 Jan 2023 23:57:40 +0100 dpkg (1.21.15) unstable; urgency=medium [ Guillem Jover ] * Perl modules: - Dpkg::BuildFlags: Add new get_feature() method. - Dpkg::Vendor::Debian: Use get_feature() instead of use_feature() for PIE. Reported by Helmut Grohne <helmut@subdivi.de>. - Dpkg: Temporarily silence deprecation warnings. * Test suite: - Improve TAP descriptions to clarify we are testing patch(1). [ Sven Joachim ] * Localization: - Update German programs translation. -- Guillem Jover <guillem@debian.org> Mon, 02 Jan 2023 12:44:53 +0100 dpkg (1.21.14) unstable; urgency=medium [ Guillem Jover ] * dpkg-source: Add new --threads-max option to control threaded compressors. * dpkg-buildflags: Add support for features handled as builtin defaults. * Perl modules: - Dpkg::Compression::Process: Unify and simplify cmdline handling. - Dpkg::Compression: Change $COMP hashref into a %COMP hash. - Dpkg::Compression: Add new compression_get_file_extension() and switch to it. - Dpkg::Compression: Move the POD for each function immediately before it. - Dpkg::Compression: Clarify the compression_get/set_default_level() are global. - Dpkg::Compression: Use %COMP directly in functions when it is safe. - Dpkg::Compression: Add new compression_get/set_level() and switch to it. - Dpkg::Compression: Add new compression_get/set_cmdline_de/compress(). - Dpkg::Compression: Deprecate compression_get_property(). - Dpkg::Compression: Add multi-threaded xz support. - Dpkg::Vendor::Devuan: Add new vendor module. Requested by Ivan J. <parazyd@dyne.org>. - Dpkg::BuildFlags: Make it possible to not load the vendor defaults on new(). - Dpkg::BuildFlags: Add a new use_feature() method. - Dpkg::BuildFlags: Add a new set/get_option_value() private methods. - Dpkg::BuildFlags: Add missing feature area to is_maintainer_modified() POD. - Dpkg::BuildFlags: Add support for builtin build flags. - Dpkg::Vendor::Debian: Track option values state as a build flag options. - Dpkg::Vendor::Debian: Generalize feature areas defaults. - Dpkg::Vendor::Ubuntu: Use a string comparison instead of debarch_eq(). - Dpkg::Vendor::Ubuntu: Use new build flag option override support to set -O3. - Dpkg::Vendor::Ubuntu: Handle LTO by default using new feature overrides. - Dpkg::BuildEnv: Rename from Dpkg::Build::Env. - Dpkg::BuildTypes: Rename from Dpkg::Build::Types. - Dpkg::BuildInfo: New module to deprecate the Dpkg::Build::Info module. * Documentation: - man: Document dpkg-source -q option. - doc: Update TODO. - man: Document start-stop-daemon options that might be no-ops on some systems. - man: Turn spaces followed by tabs into spaces in start-stop-daemon(8). - man: Use stanza instead of paragraph, block or record for deb822 parts. * Code internals: - libdpkg: Use correct return type in meminfo functions definitions. - libdpkg: Split DPKG_ATTR_ declarations. - lib: Refactor format attributes into a common *_ATTR_FMT. - lib: Use __name__ format for attributes. - lib: Use __has_attribute() to check for attribute availability. - libdpkg: Mark tar on-disk members with attribute nonstring. - scripts: Use stanza instead of entry or block. - libdpkg: Rename functions with names containing record to stanza. - dselect: Rename functions with names containing block to stanza. - perl: Add missing space around equal-based operators. - scripts: Fix indentation. - perl: Fix list and hash literals indentation. - scripts: Cuddle else and elsif. - perl: Remove excess blank lines. - dselect, src, utils: Remove excess blank lines. - dpkg-scansources: Turn spaces followed by tabs into spaces. * Packaging: - Clarify new xz multi-threaded support is for decompression. - Bump Standards-Version to 4.6.2. * Test suite: - Add unit tests for most of Dpkg::Compression. * Localization: - Update Dutch translations. Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. Closes: #1027312, #1027313 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. -- Guillem Jover <guillem@debian.org> Sun, 01 Jan 2023 23:48:16 +0100 dpkg (1.21.13) unstable; urgency=medium [ Guillem Jover ] * Perl modules: - Test::Dpkg: Refactor OpenPGP requisite into test_needs_openpgp_backend(). - Dpkg::Backend::GnuPG: Ensure future signing interop with gpg --openpgp. * Documentation: - man: Move parallel-safe note from dpkg-buildpackage -j option to --jobs-force. * Code internals: - start-stop-daemon: Cast struct sockaddr_un to struct sockaddr on bind() call. - lib: Stop using register keyword. - libcompat: Remove unused arguments from ngettext() fallback macro. - libcompat: Switch manual copying to memcpy() in obstack module. - libcompat: Switch obstack to use size_t. - libcompat: Use an union to track chunkfun and freefun. - dpkg-architecture: Fix indentation. - libdpkg: Fix pdb_lax_stanza_parser and pdb_allow_empty aliased values. - libcompat: Add noreturn and sentinel C attributes. - utils: Switch to use libcompat attributes. - libdpkg: Add new multi-threaded xz decompression support. Closes: #956452 - libdpkg: Pass -T+1 instead of -T1 to xz when compressing. - libdpkg: On threads-max > 0 pass --no-adjust to xz to force threaded mode. - Use hyphenated multi-threaded in text. * Build system: - Consider lib and utils prefixes as internal in gen-changelog. - Fix m4 files coding style. - Include <stdio.h> for printf() usage in __progname check. * Packaging: - Require liblzma >= 5.4.0 for multi-threaded decompressor support. - Clarify versioned dependency rationale comments. - Add pkgconf as main Build-Depends alternative to pkg-config. * Test suite: - Skip deb-format tests if required compressors are not present. - Use a custom dpkg database directory for dpkg-buildpackage tests. - Switch Dpkg::Source::Package test to use test_needs_openpgp_backend(). - Skip deb-format tests if gzip is not present. - Skip dpkg-source tests if xz is not present. - Use the PERL detected at configure time in autotests. - Use perl instead of yes+dd to generate a data-file for deb-split. * Localization: - Update Simplified Chinese programs translation. Thanks to Boyuan Yang <byang@debian.org>. Closes: #1025625 -- Guillem Jover <guillem@debian.org> Mon, 19 Dec 2022 02:07:45 +0100 dpkg (1.21.12) unstable; urgency=medium [ Guillem Jover ] * dpkg-architecture: Properly compute required information to gather. Reported by Sören Tempel <soeren@soeren-tempel.net>. * Code internals: - dpkg-architecture: Rename information tracking constants and variables. * Packaging: - Set paths for configure in autopkgtests to match installed ones. - Add libmd-dev to libdpkg-dev Depends. Reported by Alexandre Detiste <alexandre.detiste@gmail.com>. -- Guillem Jover <guillem@debian.org> Tue, 06 Dec 2022 04:27:57 +0100 dpkg (1.21.11) unstable; urgency=medium [ Guillem Jover ] * dpkg-genbuildinfo: Do not fail if there is no cross-compiler. Closes: #1025273 * Documentation: - doc: Update Doxyfile after code reorganization. - doc: Update Doxygen configuration from version 1.9.4. - man: Remove B<> or replace with S< >. * Code internals: - libdpkg: Document str_end parameter for str_strip_quotes(). * Packaging: - Add libmd-dev to the test-root and test-not-root autopkgtests. - Add source lintian-overrides. - Remove obsolete libncursesw5-dev alternative from Build-Depends. - Update copyright years. * Localization: - Unfuzzy translations after markup fixes. [ Helge Kreutzmann ] * Localization: - Update German man pages translation. -- Guillem Jover <guillem@debian.org> Sat, 03 Dec 2022 00:18:29 +0100 dpkg (1.21.10) unstable; urgency=medium [ Guillem Jover ] * dpkg: Avoid setgid(2) call if not needed. Thanks to Christian Göttsche <cgzones@googlemail.com>. Closes: #1014332 * dpkg-architecture: Do not compute values that are not required. * dpkg-buildpackage: Fix swapped long options for -m/-e. * dpkg-buildpackage: Add --source-by and --changed-by aliases for -m/-e. * dpkg-deb: Add support for DPKG_DEB_COMPRESSOR_TYPE/LEVEL. Closes: #550475 * dpkg-genbuildinfo: Refactor build-tainted-by gathering into a function. * dpkg-genbuildinfo: Add new can-execute-cross-built-programs tainted flag. Thanks to Johannes Schauer Marin Rodrigues <josch@mister-muffin.de>. Closes: #1011191 * dpkg: Make -E also take into account the architecture. Thanks to Ian Jackson <ijackson@chiark.greenend.org.uk>. Closes: #1014476 * dpkg-source: Fix confusing regex match for option arguments. * dpkg-buildpackage: Fix --jobs and --jobs-try parsing with no «=». * dpkg-buildpackage: Rename --jobs/--jobs-try argument in --help output. * dpkg-buildpackage: Add new --jobs-force option. * dpkg-buildpackage: Change -j, --jobs semantics to non-force mode. Closes: #905835 * dpkg, dpkg-statoverride: Install SELinux log callback to filter messages. Thanks to Christian Göttsche <cgzones@googlemail.com>. * dselect: Clarify non-free section as optional not free software component. Closes: #30972 * dselect: Require the Dpkg modules for the ftp access method. * dpkg-buildpackage: Remove blank line around signfile output lines. * dpkg-buildpackage: Add new --sign-keyid and alias --sign-key to it. * dpkg-buildpackage: Add --sign-keyfile and DEB_SIGN_KEYFILE support. * dpkg-buildpackage: Add --sign-backend to specify the OpenPGP backend. * dpkg-source: Translate source format specific --help option descriptions. * dpkg-shlibdeps: Cache soname check against shlibs files. Closes: #1022766 * libdpkg, dpkg: Switch triggers database to use reproducible package names. Closes: #990712 * update-alternatives: Switch point at which we increment alternative refcount. * dpkg: Fix setting admindir when root is set. * dpkg-split: Add support for --root and --admindir. * Architecture support: - Move i386 and ia64 in an alphabetical-ish order in the cputable. - Add support for loong64 CPU. Based on a patch by 张丹丹 <zhangdandan@loongson.cn>. Closes: #1023486 * Perl modules: - Dpkg::Source::Package::V1: Remove redundant exit handler for erasedir(). - Dpkg::Source::Package::V2: Update and clarify patch header metadata template. - Dpkg::Deps: Merge dependency string into a single line when parsing. Closes: #1019565 - Dselect::Ftp: Switch to current mirror list for ftp method output. - Dpkg::Source::Package: Use File::Spec instead of ad-hoc concatenation. - Dpkg::Source::Package: Verify signatures before printing source files addition. - Dpkg::Source::Package: Print verifying signature for all source formats. - Dpkg::Vendor: Rename @tries variable to @names. - Dpkg::Vendor: Fix get_vendor_file() to return on first match. Reported by Niels Thykier <niels@thykier.net> (on IRC). - Dpkg::Vendor: Avoid duplicate file loading attempts. - Dpkg::Vendor: Prefer loading lowercase vendor file first as documented. Reported by Niels Thykier <niels@thykier.net> (on IRC). - Dpkg::Vendor: Prefer loading capitalized vendor modules. - Dpkg::Vendor: Use a normalized key to access the cached objects. Reported by Niels Thykier <niels@thykier.net> (on IRC). - Dpkg::Vendor: Fix vendor file loading for vendors with special characters. - Dpkg::Vendor: Fix module loading for vendors with special characters. Reported by Niels Thykier <niels@thykier.net> (on IRC). - Dpkg::Vendor: Deprecate loading vendor files with no special character mapping. - Dpkg::Vendor: Deprecate loading vendor module names starting lower-cased. Reported by Niels Thykier <niels@thykier.net> (on IRC). - Test::Dpkg: Refactor test files search into _test_get_files function(). - Dselect::Ftp: Declare %CONFIG with «our» instead of «my». - Dselect::Ftp: Conditionally load perl modules shipped in the perl package. - Test::Dpkg: Make test_get_temp_path() remove the path before creating it. - Dpkg::File: Add new file_dump() function. - Dpkg::File: Add new file_touch() function. - Dpkg::OpenPGP: Remove unused $exec_opts argument from _exec_openpgp(). - Dpkg::OpenPGP: Pass opts as a hash ref on the first argument. - Dpkg::OpenPGP: Refactor _gpg_import_keys() out of import_key(). - Dpkg::OpenPGP: Refactor GnuPG common options into functions. - Dpkg::OpenPGP: Require gpgv and do not fallback to gpg to verify signatures. - Dpkg::OpenPGP: Refactor _gpg_verify() out from verify_signature(). - Dpkg::OpenPGP: Split verify_signature() into verify() and inline_verify(). - Dpkg::OpenPGP: Rename keyrings option to certs. - Dpkg::OpenPGP: Rename and namespace GnuPG specific symbols. - Dpkg::OpenPGP: Refactor is_armored() out from openpgp_sig_to_asc(). - Dpkg::OpenPGP: Refactor armoring code into an armor() function. - Dpkg::Source::Package: Add armor_original_tarball_signature() member. - Dpkg::OpenPGP: Merge ASCII armored key import into signature verification. - Dpkg::OpenPGP: Add native helpers for ASCII Armor. Thanks to Daniel Kahn Gillmor <dkg@fifthhorseman.net>. See https://salsa.debian.org/debian/devscripts/-/merge_requests/286. - Dpkg::OpenPGP: Switch armor() to use native OpenPGP armor functions. - Dpkg::OpenPGP: Add new dearmor() function. - Dpkg::OpenPGP: Use dearmor() instead of _gpg_import_keys() in _gpg_verify(). - Dpkg::OpenPGP: Move status check from _gpg_exec() to _gpg_verify(). - Dpkg::OpenPGP: Make it a class. - Dpkg::OpenPGP::KeyHandle: Refactor new key handle from dpkg-buildpackage. - Dpkg::OpenPGP: Pass an array instead of an arrayref to _gpg_exec(). - Dpkg::OpenPGP::ErrorCodes: Add new module. - Dpkg::OpenPGP: Switch functions to return Dpkg::OpenPGP::ErrorCodes. - Dpkg::OpenPGP: Change inline_verify to take an output file. Requested by Daniel Kahn Gillmor <dkg@fifthhorseman.net>. - Dpkg::OpenPGP: Make armor idempotent. - Dpkg::Source::Package: Call armor() unconditionally for signature conversion. - Dpkg::OpenPGP: Remove now unnecessary is_armored() method. Prompted by Daniel Kahn Gillmor <dkg@fifthhorseman.net>. - Dpkg::OpenPGP: Call dearmor() unconditionally for GnuPG certificate imports. - Dpkg::OpenPGP: Reintroduce gpg fallback for signature verification. - Dpkg::OpenPGP: Automatically detect both cmd and cmdv. - Dpkg::OpenPGP: Refactor trusted keyrings from Dpkg::Source::Package. - Dpkg::OpenPGP: Refactor signing code from dpkg-buildpackage. - Dpkg::OpenPGP::KeyHandle: Add new needs_keystore() method. - Dpkg::OpenPGP::Backend: Refactor GnuPG functions from Dpkg::OpenPGP. - Dpkg::OpenPGP::Backend: Add new has_verify_cmd() method. - Dpkg::OpenPGP: Add multi-backend loading support. - Dpkg::OpenPGP: Add Sequoia backend support. - Dpkg::OpenPGP: Handle backend requiring a keystore daemon for signing. - Dpkg::Gettext: Fix typo in POD. - Dpkg::Changelog: Rename __sanity_check_range method to _sanitize_range. - Dpkg: Rename _sanity_check and _sanity_check_opts to _check_opts. - Dpkg::Source::Package: Rename _sanity_check to _check_workdir. - Dpkg::Shlibs::Objdump: Rename ELF constants to match more closely the spec. - Dpkg::Gettext: Add new gettext compatibility stub. - Dpkg::Shlibs: Handle unknown executable file formats. Reported by Helmut Grohne <helmut@subdivi.de> (on IRC). - Dpkg::OpenPGP: Add Stateless OpenPGP (SOP) backend support. * Make fragments: - Switch Fortran compiler variables to use gfortran. Spotted by Enrico Zini <enrico@debian.org>. Closes: #1024421 * Documentation: - doc: Spell SELinux correctly. - man: Clarify how --build-by and --release-by get passed to dpkg-genchanges. - doc: Use https:// URLs instead of http:// when possible (round four). - doc: Switch releases download link from ftp.debian.org to deb.debian.org. - doc: Update git repo URL and mention it being the primary one. - doc: Fix typos. - man: Fix typo in markup. - man: Add description of bug closure Perl regex in deb-changelog(5). Based on a patch by Daniel Shahaf <danielsh@apache.org>. See #953911. - man: Clarify when package names get arch-qualified in dpkg-query output. Reported by Jakub Wilk <jwilk@jwilk.net> (on IRC). - doc: Do not use UTF-8 quotes in POD. - doc: Remove __END__ marker for ending POD documentation. - doc: Fix typos in coding-style.txt. - doc: Do not use «e.g.» outside parenthesis. - doc: Use US English spelling. - man: Switch debian-installer modules.txt reference to a git URL. - man: Clarify that dpkg-buildpackage --build components imply a single type. Closes: #927265 - man: Clarify «hold» behavior with explicit actions in --force-hold text. See #985749. - man: Add references to deb-src-symbols(5) from deb-symbols(5). - doc: Fix «i.e.» usage. - man: Clarify dpkg-maintscript-helper switched symlinks/dirs need be shipped. Closes: #974053 - man: Clarify Build-Profiles syntax in deb-src-control(5). Thanks to Christoph Berg <myon@debian.org>. Closes: #1022237 - man: Clarify dpkg-buildpackage --sign-key description. - man: Mark «lto» as bold in list title in dpkg-buildflags(1). - man: Clarify PIE and ASLR acronyms and grammar in dpkg-buildflags(1). - man: Fix --depotdir default pathname in dpkg-split(1). * Code internals: - dpkg-genbuildinfo: Use Dpkg::Version to parse source version. - libdpkg: Fix type name for AIX dpkg_get_progname() implementation. - dpkg-deb: Move DPKG_DEB_THREADS_MAX parsing from libdpkg. - dpkg-deb: Refactor parse_compress_type() from set_compress_type(). - dpkg: Remove redundant «continue» keyword at the end of a loop. - dpkg-fsys-usrunmess: Do not pass to print a ref to *STDERR. - update-alternatives: Call tzset() explicitly now that we use localtime_r(). - dpkg-name: Use none() instead of ad-hoc comparisons. - dpkg: Rename struct relationinfo string member to op. - dpkg: Rewrite relationinfos array variable definition. - dpkg: Use explicit EXIT_SUCCESS/EXIT_FAILURE instead of 0/1 in relationinfos. - libdpkg, dselect: Reformat enum declarations. - libdpkg: Add new varbuf_add_dir() function. - libdpkg, dpkg: Use varbuf_add_dir() instead of _add_str() + _add_char(). - libdpkg: Use updatesdir when using the updates directory. - libdpkg: Use pkg_infodb_get_dir() on opendir() instead of oldname. - libdpkg: Associate each varbuf_state to a varbuf. - libdpkg: Add new varbuf_rollback_len() and varbuf_rollback_start() functions. - libdpkg: Switch updatefn handling to use varbuf snapshots. - libdpkg: Rewrite fnis array variable definition. - libdpkg: Remove trailing «/» from UPDATESDIR definition. - dpkg-genchanges: Use intermediate variables to access fields. - dpkg-genchanges: Refactor $is_backport check into a boolean. - dselect: Unconditionally load perl modules included in perl-base. - dselect: Remove unused Net::FTP import from ftp method scripts. - scripts: Switch to use file_slurp() instead of open coding it. - scripts: Switch to use file_dump() instead of open coding it. - scripts: Switch to use file_touch() instead of open coding it. - dpkg-buildpackage: Rename $signkey to $signkeyid. - dpkg-buildpackage: Move error report into singfile(). - dselect: Use %zd instead of %jd for pointer difference in format string. - libdpkg: Refactor system meminfo gathering into its own module. - libdpkg: Refactor meminfo gathering into a filename generic function. - libdpkg: Use an enum for meminfo return error codes. - libdpkg: Fix available memory computation for xz thread scaling. Closes: #1023870 - dselect: Declare constructor with one argument as explicit. - libdpkg: Fix doxygen comment to match function argument. - libdpkg: Refactor database trigger await option parse/dump. - libdpkg: Parse and dump the explicit trigger await option on interest changes. - libdpkg: Switch trk_explicit_interest_change() to use pkg_spec_parse_pkg(). - libdpkg: Add a new pnaw_same package name printing mode. - libdpkg: Remove unneeded intermediate variable in dpkg_fsys_set_dir(). - dpkg-trigger: Refactor trigger activation into a new function. - dpkg-trigger: Turn do_check() into a cipaction function. - dpkg-trigger: Use ACTION macros and cipaction for CLI action selection. - dpkg-divert: Load database only from within relevant actions. - dpkg-statoverride: Load database only from within relevant actions. - src: Handle --help and --version as proper actions. - libdpkg: Refactor debug_parse_mask(). - libdpkg: Add support for a new DPKG_DEBUG environment variable. - src: Make instdir static. - src: Avoid using instdir directly except for initialization. - libdpkg: Add new options-dirs module to handle directory option parsing. - libdpkg: Automatically initialize fsys and db dirs on demand. Reported by stackomatiker (on stackoverflow). See https://stackoverflow.com/questions/73529576. * Build system: - Add the author testing dependencies to Build-Depends under a profile. - Fully switch to libmd for MD5 implementation. - Simplify author testing. - Consider Dselect prefixes as perl modules too in gen-changelog. - Move authorcheck target to tap.am. - Sort test_data variables. - Use long options for lcov invocations. - Fix coverage reports after code restructuring. - Use long options for autotools commands. - Do not ignore Makefile under the functional test suite. - Consider src and scripts prefixes as internal in gen-changelog. - Consider scripts/mk prefixes as new «Make fragments» in gen-changelog. * Packaging: - Bump Standards-Version to 4.6.1 (no changes needed). - Properly install specs under /usr/share/doc/dpkg/spec/. - Do not compress spec files. - Update bogus lintian tag format. - Update debbugs usertags. - Switch from gpg to gnupg for author testing Build-Depends. - Add build dependencies for release process. * Test suite: - Do not use unportable -a option to cp. - Use «perl» instead of «stat -c '%s'». - Redirect dd stderr to /dev/null instead of using status=none argument. - Remove stray backslash before comma. - Add Dpkg::File unit tests. - Improve OpenPGP unit tests and check verification and signing. - Add unit tests for meminfo module. - Refactor total number of expected known architectures into a variable. - Use long options for aspell invocation. - Use --quiet instead of -q on cppcheck invocations. - Move active line-based cppcheck suppressions into inline comments. - Make cppcheck unknownMacro suppression more specific. - Tell cppcheck the C/C++ standards the code intends to comply with. - Remove unused cppcheck suppressions. - Use pkginstance in a new unit test. - Switch NULL to DPKG_NULL in header file. - Add functional tests for triggers database handling. - Fix typo in update-alternatives test comment. - Fix typo in DPKG_GEN_FSYS_LINK m4 macro. - Rename m4 variables that matched environment variable names. - Add functional tests for --root, --instdir and --admindir options. * Localization: - Fix typo in Japanese translation. Thanks to Kisaragi Marine <kisaragi.effective@gmail.com>. Closes: #1023376 - Update Catalan translations. - Update Dutch translations. Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. Closes: #1021442, #1021443 - Update Portuguese man pages translation. Thanks to Américo Monteiro <a_monteiro@gmx.com>. Closes: #1018682 - Update Simplified Chinese programs translation. Thanks to Boyuan Yang <byang@debian.org>. Closes: #1021281 - Update Swedish translations. Thanks to Peter Krefting <peter@softwolves.pp.se>. Closes: #1021091 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. [ Sven Joachim ] * Localization: - Update German programs translation. -- Guillem Jover <guillem@debian.org> Thu, 01 Dec 2022 12:12:14 +0100 dpkg (1.21.9) unstable; urgency=medium [ Guillem Jover ] * dpkg-deb: Add support for --threads-max and DPKG_DEB_THREADS_MAX. Prompted by vv221 on IRC. * Perl modules: - Dpkg::Source::Package::V2: Always fix the permissions for upstream tarballs. Closes: #1012195 - Dpkg::BuildFlags: Document optimize feature area. * Documentation: - man: Clarify that statoverrides do not need to be known to dpkg. Closes: #1011510 - man: Expand Protected and Essential field use cases. Closes: #1008780 - doc: Rename frontend.txt to frontend-api.txt. - doc: Move specifications under doc/spec. - man: Add references to rootless-builds.txt spec. * Code internals: - libdpkg: Refactor command actions for compression. * Build system: - Split the test-runner into its own script. [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. -- Guillem Jover <guillem@debian.org> Fri, 01 Jul 2022 11:25:58 +0200 dpkg (1.21.8) unstable; urgency=medium [ Guillem Jover ] * dpkg-statoverride: Add support for --force-not-root. Closes: #1009069 Based on a patch by John Spencer <maillist-dpkg@barfooze.de>. * dpkg: Fix «De-configuring» message to allow configuration to use new version. * Perl modules: - Dpkg::Source::Archive: Prevent directory traversal for in-place extracts. Reported by Max Justicz <max@justi.cz>. Fixes CVE-2022-1664. - Dpkg::Substvars: Add support for optional substvars assigned with ?=. * Documentation: - man: Reference deb-substvar(5) from dpkg-source(1) and dpkg-shlibdeps(1). - man: Structure and clarify deb-substvars(5). Prompted by Niels Thykier <niels@thykier.net>. * Build system: - Unhook dist-cpan from make dist target. * Packaging: - Silence warning about merged-usr-via-aliased-dirs on Ubuntu. - Remove useless [] around tr sets. * Localization: - Update Dutch translations. Closes: #1010031, #1010032, #1010033 Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. - Update Portuguese man pages translations. Closes: #1011095 Thanks to Américo Monteiro <a_monteiro@gmx.com>. [ Helge Kreutzmann ] * Localization: - Update German man pages translation. -- Guillem Jover <guillem@debian.org> Wed, 25 May 2022 10:39:29 +0200 dpkg (1.21.7) unstable; urgency=medium - The “Social Contract §3: We will not hide problems” and “Persuasion through bullying and abuse” release. - [ Guillem Jover ] * dpkg-fsys-usrunmess: Handle /lib/modules itself also being untracked. Closes: #1008764 * Documentation: - man: Fix typo. Thanks to Peter Krefting <peter@softwolves.pp.se>. See #1008706. * Packaging: - Silence warning about merged-usr-via-aliased-dirs on Debian. * Localization: - Fix gettext parameter reordering syntax for German translation. Closes: #1008671 - Update Swedish translations. Thanks to Peter Krefting <peter@softwolves.pp.se>. Closes: #1008706 [ Helge Kreutzmann ] * Localization: - Update German man pages translation. -- Guillem Jover <guillem@debian.org> Fri, 01 Apr 2022 02:27:33 +0200 dpkg (1.21.6) unstable; urgency=medium - This also clears a bullying NMU. - [ Guillem Jover ] * Documentation: - man: Document untracked kernel module files handling in dpkg-fsys-usrunmess(8). -- Guillem Jover <guillem@debian.org> Tue, 29 Mar 2022 11:56:58 +0200 dpkg (1.21.5) unstable; urgency=medium [ Guillem Jover ] * dpkg-fsys-usrunmess: Explicitly set user/group and mode for created dirs. Closes: #1008478 * dpkg-fsys-usrunmess: Set a known umask before starting. See #1008478. * dpkg-fsys-usrunmess: Special case untracked kernel module files. Closes: #1008316 * Perl modules: - Dpkg::Control::Types: Use bit shifts instead of literals in enum. - Dpkg::Control::Fields: Fix field_register() to return nothing. - Dpkg::Control::Fields: Refactor manifest types into new ALL_FILE_MANIFEST. - Dpkg::Control::Fields: Fix POD to end sentences with a dot. - Dpkg::Control::Fields: Fix POD to add missing spaces and blank lines. - Dpkg::Control::Fields: Document and clarify return types and values in POD. * Code internals: - libdpkg: Rename f_revision() to f_obs_revision(). - libdpkg: Warn when parsing obsolete Recommended/Optional/Class fields. Prompted by David Kalnischkies <donkult@debian.org>. - libdpkg: Add missing dependency type to obsolete dependency fields. - libdpkg: Update code comment for obsolete fields. * Test suite: - Add test cases for obsolete fields. [ Helge Kreutzmann ] * Localization: - Update German man pages translation. -- Guillem Jover <guillem@debian.org> Tue, 29 Mar 2022 02:52:14 +0200 dpkg (1.21.4) unstable; urgency=medium [ Guillem Jover ] * dpkg-shlibdeps: Require non-empty name and version in SONAME formats. * Perl modules: - Dpkg::Control::Fields: Remove duplicate *Built-Using from field order lists. Reported by David Kalnischkies <donkult@debian.org>. * Documentation: - man: Clarify uses cases for Static-Built-Using. Prompted by Shengjing Zhu <zhsj@debian.org>. * Test suite: - Use actual octal numbers for chmod() calls. - Do not use non-POSIX shell syntax for arithmetic expressions. Based on a patch by Sören Tempel <soeren@soeren-tempel.net>. [ Helge Kreutzmann ] * Localization: - Update German man pages translation. -- Guillem Jover <guillem@debian.org> Sat, 26 Mar 2022 13:38:44 +0100 dpkg (1.21.3) unstable; urgency=medium [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. [ Guillem Jover ] * dpkg-db-backup: Check for required commands before starting. * dpkg: Allow absolute pathnames for configurable external run-time tools. Based on a patch by Adrian Ho <the.gromgit@gmail.com>. Closes: #1007816 * dpkg-fsys-usrunmess: Add options and prompt about regression prevention package. Prompted by Paul Wise <pabs@debian.org>. * dpkg-deb: Move duped control member check inside the detection conditional. * dpkg-deb: Fix movecontrol() to take a directory argument. * dselect: Remove non-multi-cd code from multi_cd method. * dselect: Rename multicd method to media. * dselect: Remove left overs for mount support from disk method. * dselect: Remove bogus quote escaping from method setup scripts. * dselect: Rename disk method to file. * scripts: Use backport-version-regex vendor hook instead of hardcoding the marker. * Perl modules: - Dpkg::Source::Package::V3::Git: Name bundle remote as bundle. - Dpkg::Source::Package::V3::Git: Set origin remote to Vcs-Git if present. - Dpkg::Path: Resolve /dev/null before comparing canonicalized pathnames. - Dpkg::Compression: Conditionally use the gzip --rsyncable option. - Dpkg::Compression: Use gzip -n instead of --no-name. - Dpkg::Vendor: Add a new backport-version-regex hook. - Dpkg::Control::Fields: Add Static-Built-Using field support. * Documentation: - man: Clarify Built-Using field purpose and format. * Code internals: - libdpkg: Refactor file_is_exec(). - libdpkg: Check that executables are regular files. - dpkg-fsys-usrunmess: Refactor prompting into a new function. - dpkg: Rename r variable to remainder. * Packaging: - Clarify the merged-usr-via-aliased-dirs warning. Prompted by Paul Wise <pabs@debian.org>. - Sync original bug-script merged-usr warning with postinst updates. * Test suite: - Check deb format with duplicate debian-binary and control.tar members. - Add further deb-split format checks. - Place deb-old and deb checks on their own test groups. - Check all currently supported deb-old formats. * Localization: - Update Portuguese man pages translation. Thanks to Américo Monteiro <a_monteiro@gmx.com>. Closes: #1001915 -- Guillem Jover <guillem@debian.org> Thu, 24 Mar 2022 21:00:24 +0100 dpkg (1.21.2) unstable; urgency=medium [ Guillem Jover ] * dpkg: Fix memory leak in remove-on-upgrade handling. * dpkg-deb: Fix unexpected end of file conditions on .deb extract. * Use anchor links for the dpkg FAQ URLs. * update-alternatives: Do not skip --config with a single entry. Reported by David Kalnischkies <donkult@debian.org>. * update-alternatives: Refactor alternative_install(). * update-alternatives: Use intermediate variables when parsing actions. * update-alternatives: Clarify option parse errors by printing the wrong values. * update-alternatives: Clarify bad usage message by enclosing in angles and quoting arguments. * dpkg-buildpackage: Switch terse make from -s to --no-print-directory. Closes: #1003164 * scripts: Unify deprecated command-line option warnings. * dpkg-source: Fix alternate changelog file usage with 2.0 and 3.0 formats. Reported by Umut <ue16@gmx.de> (on IRC). * update-alternatives: Use the target timestamp when the symlink does not exist. Closes: #1004557 * dselect: Handle window resizes in help and menu screens. Closes: #382307 * dselect: Do not beep on key press errors in method and package list windows. Closes: #533639 * dselect: Add support for --instdir. * Perl modules: - Dpkg::Control::FieldsCore: Sort control type entries in %FIELD_ORDER. - Dpkg::Control::FieldsCore: Refactor Vcs fields into a common variable. - Dpkg::Control::FieldsCore: Refactor testsuite fields into a common variable. - Dpkg::Control::FieldsCore: Accept Architecture as a debian/tests/control field. - Dpkg::Control::FieldsCore: Add missing allowed fields for (In)Release files. - Dpkg::Control::FieldsCore: Add field order for all control types. - Dpkg::Index: Switch key function for control tests to be a stanza index. Reported by Paul Gevers <elbrus@debian.org>. - Dpkg::Source::Package: Only generate the patch header if needed. Prompted by Umut <ue16@gmx.de> (on IRC). - Dpkg::Source::Package: Use File::Spec instead of ad-hoc concatenation. * Documentation: - man: Mention on what actions triggers get processed in dpkg(1). Closes: #1001010 - man: Clarify that dpkg-divert --list pattern is optional. Thanks to наб <nabijaczleweli@nabijaczleweli.xyz>. Closes: #1001761 - man: Use «main» git branch in examples. - man: Markup each individual element independently. - man: Refer to the relevant maintscript actions explicitly. - man: Add a missing preposition to deb-preinst(5). - man: Do not hardcode DPKG_ADMINDIR in update-alternatives. - man: Document that update-alternatives honors DPKG_ROOT. - man: Clarify --admindir and --instdir default values. Reported by Johannes Schauer Marin Rodrigues <josch@debian.org>. * Code internals: - libdpkg: Check that cip is not NULL before dereferencing it. - libdpkg: Add missing symbols to the version map. - libdpkg: Use the amount of available memory instead phys_mem/2. Thanks to Sebastian Andrzej Siewior <sebastian@breakpoint.cc>. - libdpkg: Refactor liblzma memlimit and cputhreads getters. - libdpkg: Dynamically allocate the buffers for de/compression I/O. - libdpkg: Increase I/O memory buffers from 4 to 32 KiB. - libdpkg: Pass struct compress_params as the first argument. - libdpkg: Pass struct compress_params to decompressors. - libdpkg: Refactor pkg_format_print() out from pkg_format_show(). - libdpkg: Do not restrict source:* virtual fields to installed packages. Closes: #1004372 - libdpkg: Do not allow argv with no arguments. - update-alternatives: Refactor alternative_has_broken_symlink(). - update-alternatives: Move symlink removal inside fsys_symlink(). - update-alternatives: Move filename generation outside alternative setup. - dselect: Rework windows resize to be signal safe. - scripts: Expand long word list into one entry per line. - scripts/mk: Remove unneeded conditionals. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - scripts/mk: Indent code in Makefile fragments. Thanks to Nicolas Boulenguez <nicolas.boulenguez@free.fr>. * Build system: - Terminate lists in variables with «# EOL». - Move build helper tools into build-aux/. - Reorganize dpkg programs source code under src/. - Move autotest suite under src/. - Move C test suite machinery into lib/dpkg/. - Fix relocated autotest test suite runner. - Fix gitignore for build-aux/ directory. - Namespace Config variable usage. Reported by Павловец Сергей Николаевич <s.pavlovets@ivcmf.by>. - Add gitlab CI test for shared library building. - Link all programs against libcompat. Prompted by Jörg Sonnenberger <joerg@NetBSD.org>. - Remove unused TESTDATA variable from autotest suite. - Rework TAP check hooking into the autotools machinery. - Move EXTRA_DIST close to the files it is acting on. - Refactor autotest dependencies into a new variable. - Refactor autotest machinery into an automake include file. - Fold autotest test suite machinery into src/ from src/at/. - Rename do_path_subst to do_make_subst. - Factor out installation variable substitution into a new subst.am file. - Move shell scripts into src/. - Make AS_TR_* calls more clear. - Support compression library names with dashes. - Add zlib-ng support. - Rename HAVE_LZMA_MT to HAVE_LZMA_MT_ENCODER. - Move zsh completion under a subdirectory. - Switch sed pseudo-in-place replace invocations with copy then move. - Add comment about «sed -i» not being portable. Prompted by Nicolas Boulenguez <nicolas@debian.org>. - Mark libcompat and libdpkg as internal components in changelog. - Support specifying previous and next tags to gen-changelog. - Use non-capturing groups in regex in gen-changelog. - Do not hardcode «main» section for title check in gen-changelog. - Use sort flag instead of hardcoding the section in gen-changelog. - Do not put localization entries on their own changelog group. * Packaging: - Ignore directories for the alternatives state fixup. Closes: #1001695 - Update bug-script to clarify usrmerge systems are unsupported. - Install aclocal m4 files into libdpkg-dev. - Install optional localized man pages with dh_installman. - Add a new not-installed file. - Switch to use the dh sequencer. - Make TESTSUITEFLAGS extensible. - Pass -jN to autotools autotest test suite via TESTSUITEFLAGS. - Update lintian overrides. - Use dpkg-error.sh in postinst. - Warn in postinst about merged-/usr-via-aliased-dirs breakage. * Test suite: - Move AT_TESTED to testsuite.at. - Run the tools with --version. - Rename DPKG_GEN_FILE to DPKG_GEN_CTRL_FILE. - Refactor control file template generation. - Rewrite dpkg-realpath test from TAP to autotest. - Rewrite dpkg-divert test from TAP to autotest. - Remove now unused TAP tests support from src/. - Print field type name instead of id in test case description. - Add new pkg-format unit tests. - Fix test_command_exec program invocation. Thanks to Sören Tempel <soeren+git@soeren-tempel.net>. - Use a temporary file instead of unportable «sed -i». Prompted by Nicolas Boulenguez <nicolas@debian.org>. - Add test case for SOURCE_DATE_EPOCH. Thanks to Nicolas Boulenguez <nicolas@debian.org>. - Use «each» instead of «keys» and value fetching. Thanks to Nicolas Boulenguez <nicolas@debian.org>. * Localization: - Remove previous msgid for non-fuzzy translations. - Update Catalan translations. - Update Dutch translation. Closes: #1003671, #1003672, #1003673 Thanks to Frans Spiesschaert <Frans.Spiesschaert@yucom.be>. - Update Swedish translations. Closes: #1003799, #1007116 Thanks to Peter Krefting <peter@softwolves.pp.se>. [ Sven Joachim ] * Localization: - Update German dselect translation. - Update German programs translation. [ Helge Kreutzmann ] * Localization: - Update German man pages translation. - Update German scripts translation. -- Guillem Jover <guillem@debian.org> Sun, 13 Mar 2022 20:17:35 +0100 dpkg (1.21.1) unstable; urgency=medium [ Guillem Jover ] * dpkg-buildpackage: Remove duplicate command print for dpkg-genchanges. * dpkg-buildpackage: Fix build description due to improper multiline match. * dpkg-realpath: Remove spurious heading space from --help output. * update-alternatives: When initializing admindir from DPKG_ADMINDIR append \"/alternatives\". Closes: #1001198 * Code internals: - Remove <ar.h> inclusions. * Packaging: - Install deb-md5sums(5) into dpkg-dev package. -- Guillem Jover <guillem@debian.org> Mon, 06 Dec 2021 21:04:18 +0100 dpkg (1.21.0) unstable; urgency=medium [ Guillem Jover ] * dpkg-genchanges: Include orig tarball on source package renames. Closes: #980066 * scripts: Consider SHA-1 and RIPEMD-160 weak algorithms in OpenPGP signatures. * dpkg: During unpack print a removal message due to Conflicts. Closes: #985401 * scripts: Add zsh completions for dpkg-parsechangelog. Thanks to Daniel Shahaf <danielsh@apache.org>. Closes: #986103 * dpkg-buildpackage: When printing build type match the extension exactly. Closes: #989824 * dpkg-maintscript-helper: Use xargs -I argument instead of deprecated -i. * dpkg-maintscript-helper: Quote variable inside ${} to avoid pattern match. * libdpkg: Fix dpkg_fsys_get_path() to always strip leading / and ./. * libdpkg: Set the default database directory relative to the system root. * dpkg-divert, dpkg-statoverride: Set admindir after instdir. * update-alternatives: Fix admindir setting. Prompted by Johannes Schauer Marin Rodrigues <josch@debian.org>. * dselect: Honor DPKG_ADMINDIR environment variable. * dpkg-query, dpkg-trigger, dselect: Add support for setting the root directory. * dpkg-fsys-usrunmess: Move forced reconfiguration to the last step. See #991190. * dpkg-fsys-usrunmess: Install a local policy-rc.d to ignore service restarts. Closes: #991190 * dpkg-fsys-usrunmess: Do not fail when removing lingering directories. * dpkg-fsys-usrunmess: Generate a regression prevention package. * dpkg-fsys-usrunmess: Fix typo in debug message. * dpkg: Distinguish deconfiguration message for installation and multi-arch syncs. * dpkg-buildpackage: Add new --changes-file option. Prompted by Niels Thykier <niels@thykier.net>. * dpkg-buildpackage: Add new --buildinfo-file option. * dpkg: Rework --assert-<feature> logic to be more robust. Prompted by Helmut Grohne <helmut@subdivi.de>. Prompted by David Kalnischkies <donkult@debian.org>. * dpkg: Improve --assert-<feature> descriptions. * dpkg: Add a new --assert-help option. * scripts/mk: Pass DEB_BUILD_PATH to dpkg-buildflags. See #985553. * dpkg-db-backup: New program factored out from Debian-specific daily cron. * dpkg-db-backup: Accept an option to override the number of rotation cycles. * dpkg-db-backup: Honor the admindir set at configure time. * update-alternatives: Fix --auto and --set-selections output progress. * update-alternatives: Print defaults for configuration and database pathnames. * scripts: Replace shebang in dpkg-error shell library with shellcheck directive. * dpkg-buildpackage: Add support for terse DEB_BUILD_OPTIONS. * dpkg-mergechangelogs: Add new --merge-unreleased option. Closes: #582921 * dpkg: Restore fallback to \"new-prerm failed-upgrade\" for downgrades. Analysis by Ian Jackson <ijackson@chiark.greenend.org.uk>. Closes: #996959 * dselect: Use safe temporary file creation in methods setup. * dselect: Remove bashism from update script in multicd method. * dpkg: Fix --verify to handle missing or inaccessible pathnames. Closes: #963087 * dpkg: Add partial --verify support for mode checks. * Use «digest» instead of «hash» in output messages. Reported by Sven Joachim <svenjoac@gmx.de>. * dselect: use `grep -E` instead of `egrep`. Thanks to Ville Skyttä <ville.skytta@iki.fi>. Closes: #999600 * libdpkg: Fix memory leak on End Of Tape condition in tar parser. * dpkg: Fix short lived memory leak with --recursive. * dpkg: Fix conffile removal-on-upgrade handling. Closes: #995387 * dpkg-deb: Fix conffile name length tracking on remove-on-upgrade parsing. Reported by uau on IRC. * Architecture support: - Clarify that the regex columns need to be ordered to match first. - Add support for ARCv2 CPU. Closes: #980963 Based on a patch by Alexey Brodkin <Alexey.Brodkin@synopsys.com>. * Portability: - start-stop-daemon: Define SOCK_NONBLOCK to 0 if not defined. - libdpkg: Add support for AIX to dpkg_get_progname(). * Perl modules: - Dpkg::Source::Quilt: Add hint to check missing files on patch apply failures. Reported by Joseph Nahmias <jello@debian.org>. - Dpkg::Changelog::Parse: Require format plugins to inherit from Dpkg::Changelog. - Dpkg::OpenPGP: Refactor openpgp implementation execution into a new function. - Dpkg::Vendor::Debian: Refactor compiler flag names into an array. - Dpkg::Vendor::Debian: Add new lto feature in new optimize area. Closes: #940571 - Test::Dpkg: Print actual error messages in test_neutralize_checksums(). - Dpkg::Deps: Use current_sub feature for __SUB__. - Dpkg::BuildFlags: Add support for ASFLAGS. See https://salsa.debian.org/debian/debhelper/-/merge_requests/50. - Dpkg::Compression: Use gzip --rsyncable unconditionally. - Dpkg::Changelog::Entry::Debian: Fix full month misuse warning. - Dpkg::Shlibs::Symbol: Emit a warning on fully qualified symver patterns. Closes: #993991 - Dpkg::Control::HashCore: Add new keep_duplicate option. - Dpkg::Control::FieldsCore: Add new field_parse_binary_source(). Closes: #980527 - Dpkg::Control::FieldsCore: Fix types allowed for field_parse_binary_source(). Reported by Johannes Schauer Marin Rodrigues <josch@debian.org>. - Dpkg::Shlibs::Objdump: Fix apply_relocations to work with versioned symbols. Closes: #1000421 - Dpkg::Vendor::Ubuntu: Update Maintainer field logic to include “canonical”. Based on a patch by William 'jawn-smith' Wilson <william.wilson@canonical.com>. Closes: #1000557 - Dpkg::Source::Package::V2: Add hint about version matching source tree. Based on a patch by Samuel Henrique <samueloph@debian.org>. Closes: #996044 * Documentation: - man: Itemize dpkg-gensymbols -c levels. - man: Add man page for deb-md5sums(5). Reported by Maxim Cournoyer (on IRC). - man: Switch the Architecture field in deb-control(5) to required. Reported by Maxim Cournoyer (on IRC). - man: Make clear that dpkg-query arguments accept multiple values. Prompted by Rémi Rampin <remirampin@gmail.com>. See #913781. - man: Document dpkg-query --search and --listfiles output formats. - doc: Fix incorrect use of ‘an’ article. - doc: Update coding style to document POD instead of troff. - doc: Update THANKS file. - doc: Annotate current maintainer start year. - doc: Sort maintenance information chronologically. - man: Add versions since features where introduced. - man: Further clarify when re-inclusions of excluded pathnames happen. Closes: #871420 - doc: Update Doxygen configuration from version 1.9.1. - doc: Improve description of dpkg suite. Prompted by Fabrice Bauzac-Stehly <noon@mykolab.com>. - man: Add a reference to where the Installed-Size algorithm is described. - man: Improve dpkg --verify-format rpm format documentation. - man: Document in deb-substvars(5) what ${} is good for. Prompted by Paul Wise <pabs@debian.org>. - man: Document in dpkg-architecture(1) target being useful for emulators too. Prompted by Helmut Grohne <helmut@subdivi.de>. - man: Document in dpkg-query(1) full --search and --listfiles output format. Prompted by Johannes Schauer Marin Rodrigues <josch@debian.org>. * Code internals: - Remove irrelevant or obsolete FIXME markers. - Turn FIXME markers denoting pending actions into TODO markers. - Turn FIXME markers giving historic information into simple Notes. - update-alternatives: Turn FIXME for explicit behavior choice into an XXX. - Use localtime_r() instead of localtime(). - libdpkg: Remove MDEBUG support from m_malloc() implementation. - libdpkg: Mark dpkg_arch_unmark() arch_remove argument as const. - libdpkg: Mark treewalk_open() func argument as const. - dpkg: Mark ignore_depends() pkg argument as const. - dpkg: Mark deb_parse_conffiles() pkg argument as const. - libcompat: Remove local setexecfilecon() and require libselinux 2.3. - libdpkg: Add missing DPKG_{BEGIN,END}_DECLS in header files. - dpkg: Move SELinux function declarations into its own header file. - dpkg: Move the command action enum to its own header file. - dpkg: Switch from including \"main.h\" to \"force.h\". - dselect: Rename dme() to display_menu_entry(). - dpkg: Split function handling deconfiguration due to install and removal. - libdpkg: Add new ACTION_MUX macro for continued options. - dpkg: Refactor --assert-<feature> handling to be data driven. - dpkg-fsys-usrunmess: Do not use interpolated strings for literals. - dpkg-db-backup: Add a license header comment. * Build system: - Fallback to $^X and 'perl' if $Config{perlpath} is unset or empty. - Bump minimal Perl version to 5.28.1. - Remove redundant localedir and pkgconfdir initializations. - Check for libsocket. - Do not set have_libmd on the found branch in AC_SEARCH_LIBS. - Switch DPKG_FUNC_C99_SNPRINTF from AC_LANG_SOURCE to AC_LANG_PROGRAM. - Check whether fsync(3) works on directories. - Remove obsolete AC_HEADER_STDC. - Detect appropriate sed program at configure time. - Rename DPKG_DEB_PROG_TAR to DPKG_PROG_TAR. - Parametrize the backups directory with a configure option. - Add a check for symlinks in the git repository. - Rename shell scripts to .sh. - Switch from hardcoded /run to parametrized runstatedir. - Use new Dpkg::Control keep_duplicate option in gen-changelog. - Use title-case for field in gen-changelog. - Execute run-script via CONFIG_SHELL. Reported by Larkin Nickle <me@larbob.org>. - Quote variables containing pathnames in m4 macros. - Add support for commit message fix up machinery in gen-changelog. * Packaging: - Use absolute pathnames in .install debhelper fragments. - Remove unused dh_installcron call for arch-indep targets. - Add support for a native systemd timer. Closes: #985444 - Create auotpkgtest installation directory. - Bump Standards-Version to 4.6.0 (no changes needed). * Test suite: - Pass --ignore-builtin-builddeps to dpkg-buildpackage. - Use can_run() instead of find_command(). - Add descriptions to makefile test runners. - Add unit tests for architecture bijective mapping property. - Suppress cppcheck constParameter check. - Suppress bogus cppcheck for nullPointerRedundantCheck. - Mark external sourced shell files for checking. - Ignore new shellcheck checks. - Remove shipped dpkg database. - Add re-inclusion of symlink case to t-filtering. See #871420. - Generate symlink during test build time. - Remove superfluous long filename. - Refactor parse_ctrl() from parse_dsc(). - Update codespell stopwords. [ Helge Kreutzmann ] * deb-md5sums.pod: Fix typo. [ Add programs translations ] * Occitan (Quentin PAGÈS). [ Update dselect translations ] * German (Sven Joachim). [ Update man pages translations ] * German (Helge Kreutzmann). [ Update programs translations ] * German (Sven Joachim). * Polish (Marcin Owsiany, Łukasz Dulny). [ Update scripts translations ] * German (Helge Kreutzmann). -- Guillem Jover <guillem@debian.org> Sun, 05 Dec 2021 16:32:45 +0100 dpkg (1.20.8) unstable; urgency=medium [ Guillem Jover ] * start-stop-daemon: Open the --output file in append mode. * dpkg: Fix --auto-deconfigure for essential and protected during installation. Reported by Julian Andres Klode <jak@debian.org>. See #983014. * dpkg-realpath: Fix resolution for absolute symlinks on «/». Closes: #983855 * dpkg-realpath: Fix symlink loop tracker. * Perl modules: - Test::Dpkg: Fix test data path fetching on CPAN. - Dpkg::Exit: Preserve exit code in END block. * Build system: - Group Test::Dpkg changelog entries into “Perl modules” section. * Packaging: - Run autopkgtest test suites in verbose mode. * Test suite: - Set PERL in the perl test suite. - Use gunzip instead of zcat and assume it might not be present. - Mock dpkg and gcc for architecture detection code. - Initialize DEB_BUILD_ARCH and DEB_HOST_ARCH to avoid computing them. - Update suppressions for cppcheck 2.4. [ Update man pages translations ] * Dutch (Frans Spiesschaert). Closes: #981884 * German (Helge Kreutzmann). * Portuguese (Américo Monteiro). Closes: #980018 [ Update programs translations ] * Dutch (Frans Spiesschaert). Closes: #981882 [ Update scripts translations ] * German (Helge Kreutzmann). Closes: #983865 -- Guillem Jover <guillem@debian.org> Tue, 13 Apr 2021 22"
    }
}