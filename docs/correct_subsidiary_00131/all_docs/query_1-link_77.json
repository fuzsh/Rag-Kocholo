{
    "id": "correct_subsidiary_00131_1",
    "rank": 77,
    "data": {
        "url": "https://sourcehat.com/audits/LodestarFinance/",
        "read_more_link": "",
        "language": "en",
        "title": "Lodestar Finance Smart Contract Audit by SourceHat",
        "top_image": "https://sourcehat.com/images/smart_contract_audit_company.png",
        "meta_img": "https://sourcehat.com/images/smart_contract_audit_company.png",
        "images": [
            "https://sourcehat.com/images/smart_contract_audit.png",
            "https://sourcehat.com/images/smart_contract_audit.png",
            "https://sourcehat.com/audits/LodestarFinance/crypto_audit.png"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            "smart contract audit",
            "blockchain audit",
            "smart contract security",
            "smart contract auditing",
            "solidity smart contract",
            "smart contract audit cost",
            "security audits",
            "token audit",
            "defi audit",
            "nft smart contract audit",
            "crypto audits",
            "crypto audit companies",
            "custom smart contracts",
            "audit for DApps",
            "smart contract audit for exchanges",
            "smart contract protocol audit",
            "smart contract token audit",
            "Smart ethereum smart contract audit",
            "bsc smart contract audit",
            "polygon smart contract audit",
            "avalanche smart contract audit",
            "fantom smart contract audit",
            "arbitrum smart contract audit",
            "smart contract audit report",
            "smart contract audit company",
            "audit smart contract"
        ],
        "tags": null,
        "authors": [
            "SourceHat",
            "Smart Contract Audit",
            "Development Services"
        ],
        "publish_date": "2022-12-30T00:00:00+00:00",
        "summary": "",
        "meta_description": "SourceHat has audited Lodestar Finance. Lodestar Finance is a lending platform allowing users to borrow assets after supplying collateral.",
        "meta_lang": "en",
        "meta_favicon": "https://sourcehat.com/favicon.ico",
        "meta_site_name": "SourceHat - Smart Contract Audit Services",
        "canonical_link": "https://sourcehat.com/audits/LodestarFinance/",
        "text": "Lodestar Finance\n\nSmart Contract Audit Report\n\nAudit Summary\n\nLodestar Finance is a lending platform allowing users to borrow assets after supplying collateral.\n\nFor this audit, we reviewed the project team's contracts folder at commit 9c94356249e8a05cbdcf3c30ab6ec9f254e4443e on the team's GitHub repository.\n\nAudit Findings\n\nInformational findings were identified and the team may want to review them. In addition, centralized aspects are present.\n\nDate: December 30th, 2022.\n\nUpdated: February 20th, 2023 with changes from commit 8a8128d178a938613f0350ddf68a190f7e9e18bc to commit 9c94356249e8a05cbdcf3c30ab6ec9f254e4443e.\n\nFinding #1 - GLPOracle - High (Resolved)\n\nDescription: The price returned by the getPlvGLPPrice() function is based on the amount of assets in the contract.\n\nRisk/Impact: Please see our analysis of this exploit here.\n\nRecommendation: The team should consider a Time-Weighted Average Price (TWAP) Oracle. Alternatively, plvGLP tokens should not be added as valid collateral on the platform.\n\nResolution: The team has implemented a new plvGLP Oracle described below.\n\nFinding #2 - SushiOracle - High (Acknowledged)\n\nDescription: The price returned by the getPrice() function is based on the ratio of tokens in the Liquidity Pool.\n\nRisk/Impact: A malicious user can inflate the value of an LP token by temporarily supplying a large amount of tokens to the Liquidity Pool. This inflated value can be used to borrow more assets than they should be allowed to under normal conditions. This can lead to the platform being left with a large amount of debt from the user that will not be repaid or liquidated.\n\nRecommendation: The team should consider a Time-Weighted Average Price (TWAP) Oracle. Alternatively, LP tokens should not be added as valid collateral on the platform.\n\nResolution: The team only intends to use the Oracle for frontend values and not as a pricing mechanism within the platform.\n\nFinding #3 - ComptrollerG7 & ComptrollerNoGov - Informational (Resolved)\n\nDescription: The getCompAddress() returns the address of Compound Finance's COMP token.\n\nRecommendation: The team should ensure to update this address to the EFF token's address before deploying either of these contracts.\n\nResolution: The team has removed the ComptrollerG7 and ComptrollerNoGov contracts.\n\nFinding #4 - WhitePaperInterestRateModel, JumpRateModel & JumpRateModelV2 - Informational\n\nDescription: The baseRatePerBlock, multiplierPerBlock, and jumpMultiplierPerBlock are calculated using a constant and estimated blocksPerYear value.\n\nRecommendation: The team should consider using time elapsed in seconds for the above variables to prevent inaccuracies if the average block speed changes.\n\nFinding #5 - Comptroller & ComptrollerNoGov - Informational (Resolved)\n\nDescription: The contract contains the fixBadAccruals() function. This function was intended to fix an exploit in the Compound Finance protocol and is unneeded in a new implementation.\n\nRecommendation: The team should consider removing this function to save on contract size and deployment costs.\n\nResolution: The team has removed the fixBadAccruals() function.\n\nContracts Overview\n\nThe contracts utilize ReentrancyGuard to protect against reentrancy attacks in applicable functions.\n\nAs the contracts are implemented with Solidity v0.8.10, they are safe from any possible overflows/underflows.\n\nComp Contract:\n\nThis contract defines the LODE token.\n\nLODE tokens are the main token of the Lodestar protocol and allow users to vote on the management of the protocol.\n\nLODE tokens are earned in the Comptroller contract by being a borrower, supplier, or contributor.\n\nThe total supply of the token is initially set to 20 million $LODE [20,000,000].\n\nA specified address is transferred the total supply upon deployment.\n\nNo mint or burn functions exist, though the circulating supply can be decreased by sending tokens to the 0x..dead address.\n\nEach LODE token additionally represents votes intended to be used in a DAO where one token represents one vote.\n\nUsers may delegate their votes to another address allowing them to vote on behalf of the user.\n\nOnce votes are delegated, the user must explicitly delegate back to themselves to regain their votes.\n\nUsers also have the option to delegate through the use of a signed message, allowing for a gasless delegation for the user.\n\nUnitroller Contract:\n\nThis contract is used to delegate functionality to a valid implementation contract; this is intended to be a Comptroller contract.\n\nThe fallback function is used to delegate execution to the current implementation.\n\nThe admin may set a pending implementation at any time.\n\nThe pending implementation may then accept and become the current implementation at any time.\n\nThe admin may set a new pending admin at any time.\n\nThe pending admin may then accept and become the admin at any time.\n\nComptroller Contract:\n\nThis contract is used to determine if users can perform various actions with lTokens. It is also used to distribute LODE tokens to suppliers, borrowers, and contributors.\n\nBorrowers and suppliers will earn a reward per block based on the \"borrow speed\" and \"supply speed\" of the specified lToken.\n\nContributors will earn a reward per block based on the individual contributor's \"comp speed\".\n\nUsers may manually claim their LODE at any time. A manual claim will update their earned amount from borrowing and supplying.\n\nContributors must manually trigger an update of their contributor rewards for them to be included in claims.\n\nUsers may enter or exit any number of markets by providing the address of the corresponding lToken.\n\nUsers may only exit a market if they do not have any outstanding borrowed tokens in the market being exited and they would have sufficient collateral after redeeming the specified lTokens.\n\nAny address may mint a specified lToken if the token's \"mint guardian\" is not paused, the token has a listed market, and the mint would not take the total supply of the lToken over the \"supply cap\".\n\nAny address may redeem their lTokens for the underlying asset if they would have sufficient collateral after redeeming the specified amount of tokens.\n\nA user may borrow an lToken's underlying asset if:\n\nThey have entered the market for the lToken.\n\nThe lToken's \"borrow guardian\" is not paused.\n\nThe borrow would not cause the total assets borrowed to exceed the lToken's total borrow cap.\n\nThey have supplied sufficient collateral for the amount of the asset they intend to borrow.\n\nUsers may liquidate a borrower's position if they do not have sufficient collateral deposited.\n\nA maximum of the \"close factor\" percentage of the user's borrowed amount may be liquidated.\n\nA user's entire borrowed amount may be liquidated regardless of their position's deposited collateral if the borrowed token is deprecated.\n\nAn lToken is considered deprecated if:\n\nIts collateral factor is 0.\n\nThe borrow guardian is paused.\n\nThe reserve factor is 1.\n\nTokens may be \"seized\" during a liquidation if the \"seize guardian\" is not paused and both the collateral and asset use the same Comptroller.\n\nUsers will receive a \"liquidation incentive\" amount of the borrowed tokens depending on the amount being liquidated and the relative prices of the collateral tokens and borrowed tokens.\n\nA user may transfer lTokens if the token's \"transfer guardian\" is not paused and the transfer would not bring the sender below the minimum collateral needed for their total borrows.\n\nThe admin may set the Price Oracle address at any time.\n\nThe admin may set the close factor to any value at any time.\n\nThe admin may set the collateral factor to any value less than 0.9 at any time.\n\nThe admin may set the liquidation incentive to any value at any time.\n\nThe admin may add an lToken address as a supported market at any time.\n\nThe admin or the BorrowCapGuardian address may update the borrow cap for any market to any value at any time.\n\nThe admin may set the BorrowCapGuardian, PauseGuardian, and SupplyCapGuardian addresses at any time.\n\nThe admin and SupplyCapGuardian may set the supply cap for any token at any time.\n\nThe PauseGuardian address may pause mints, borrows, transfers, and seizes at any time.\n\nThe admin may pause and unpause mints, borrows, transfers, and seizes at any time.\n\nThe admin may update the LODE supply accrual rate and borrow accrual rate to any value for any lToken at any time.\n\nThe admin may transfer any amount of LODE tokens from the contract to any address at any time.\n\nThe admin may update the LODE contributor accrual rate for any address to any value at any time.\n\nThese contracts contain a _become() function allowing them to be a valid Unitroller implementation.\n\nCToken Contract:\n\nThis contract defines the logic for lTokens. lTokens are ERC-20 tokens that are used to represent an underlying asset.\n\nlTokens may only be transferred if allowed within the Comptroller address.\n\nInterest is accrued when any action is taken within the contract.\n\nThe interest rate is determined by the current InterestRateModel contract based on this contract's underlying asset balance, total reserves, and total borrowed.\n\nAll borrow and reserve amounts will then increase based on the interest rate and the number of blocks since the last time interest was accrued.\n\nAny user may mint lTokens if allowed in the Comptroller.\n\nThe user must supply the underlying asset as collateral. They will then be minted lTokens based on the current exchange rate.\n\nUsers will receive the \"initial exchange rate\" amount of tokens if the total supply of lTokens is 0.\n\nOtherwise, users will receive tokens depending on the ratio of the amount of the underlying asset and total borrows to the total supply of lTokens currently minted.\n\nUsers may redeem their lTokens for the underlying asset if the redemption is allowed in the Comptroller.\n\nUsers may specify either an amount of lTokens to redeem or an amount of the underlying asset to receive.\n\nUsers may borrow a specified amount of the underlying asset if allowed in the Comptroller and there is a sufficient amount of the asset in the contract.\n\nAny address that is whitelisted in the Whitelist contract may borrow on the behalf of a user.\n\nUsers may repay some or all of their borrowed assets with interest if allowed in the Comptroller.\n\nAny address may repay some or all of a user's borrowed assets on their behalf.\n\nUsers may liquidate another user's position if both the liquidation and subsequent seizure of lTokens are allowed in the Comptroller.\n\nUsers must provide a specified amount of the borrowed asset. In return, they will receive an amount of lTokens determined in the Comptroller.\n\nIf this contract is the collateral token, a \"protocol share\" of tokens will be seized by the contract and added to the contract's total reserves.\n\nThe admin may set the pending admin to any address at any time.\n\nThe pending admin may then accept and become the current admin at any time.\n\nThe admin may update the Comptroller address at any time.\n\nThe admin may set the reserve factor to any value less than or equal to the current reserve factor.\n\nAny address may add to the contract's reserves of the underlying asset.\n\nThe admin may withdraw any amount of the underlying asset reserves at any time.\n\nThe admin may update the InterestRateModel at any time.\n\nThe admin may withdraw any non-asset ERC20 token transferred to the contract.\n\nWhitePaperInterestRateModel, JumpRateModel & JumpRateModelV2 Contracts:\n\nThese contracts are used to determine interest rates for individual markets.\n\nInterest rate is determined from the \"utilization rate\" of a market.\n\nAs the amount of borrowed tokens increases relative to the cash value in the market the utilization rate will increase.\n\nThe interest rate will begin with a \"base rate per block\" when the utilization rate is 0.\n\nThe interest rate will increase linearly as the utilization rate increases until the utilization rate reaches the \"kink\".\n\nThe interest rate will then increase at the \"jump multiplier per block\" rate rather than the \"multiplier per block\" rate.\n\nThe WhitePaperInterestRateModel will always linearly increase with no kink or jump multiplier rate.\n\nGovernorAlpha Contract:\n\nThis contract is used to manage the DAO voting and proposal functionality within the platform.\n\nUsers with more votes than the \"proposal threshold\" may submit a proposal.\n\nA proposal consists of up to 10 transactions on a target contract.\n\nAny previous proposals must have succeeded, been defeated, or been cancelled, if the proposer has previously submitted a proposal.\n\nUsers' voting power is determined from their LODE token balance and delegated votes.\n\nUsers may vote for or against a proposal.\n\nUsers also have the option to vote through the use of a signed message, allowing for a gasless vote for the user.\n\nA proposal must reach a \"quorum threshold\" and have more votes for the proposal than against it to succeed.\n\nAfter a proposal is submitted, votes may not be cast until the \"voting delay\" has passed.\n\nThe proposal will remain open for votes for the entire \"voting period\".\n\nAfter the voting period and if the proposal succeeded, any address may queue the proposal's transactions within the Timelock contract.\n\nAny user may trigger the execution of the proposal's transactions once the Timelock's delay period has passed.\n\nBefore a proposal is executed, any address may cancel the proposal if the proposer no longer has sufficient votes to meet the proposal threshold.\n\nThe Guardian address may cancel any non-executed transaction at any time.\n\nThe Guardian address may abdicate, setting the Guardian to the 0 address, at any time.\n\nThe Guardian address may queue a transaction to set a new Timelock pending admin at any time.\n\nThe Guardian address may execute a previously queued set pending admin Timelock transaction at any time.\n\nThe Guardian address may accept the admin role in the Timelock address, if they are the current pending admin, at any time.\n\nGovernorBravo Contract:\n\nThis contract is used to inherit the DAO voting and proposal functionality from the GovernorAlpha contract.\n\nAfter the admin initiates the contract, users with more votes than the \"proposal threshold\" or whitelisted users may submit a proposal.\n\nA proposal consists of up to 10 transactions on a target contract.\n\nAny previous proposals must have succeeded, been defeated, or been cancelled, if the proposer has previously submitted a proposal.\n\nUsers' voting power is determined from their LODE token balance and delegated votes.\n\nUsers may vote for, against, or abstain from a proposal.\n\nUsers also have the option to vote through the use of a signed message, allowing for a gasless vote for the user.\n\nA proposal must reach a \"quorum threshold\" and have more votes for the proposal than against it to succeed.\n\nAfter a proposal is submitted, votes may not be cast until the \"voting delay\" has passed.\n\nThe proposal will remain open for votes for the entire \"voting period\".\n\nAfter the voting period and if the proposal succeeded, any address may queue the proposal's transactions within the Timelock contract.\n\nAny user may trigger the execution of the proposal's transactions once the Timelock's delay period has passed.\n\nBefore a proposal is executed, any address may cancel the proposal if the proposer no longer has sufficient votes to meet the proposal threshold and the proposer was not whitelisted.\n\nOnly the WhitelistGuardian address may cancel a proposal where the proposer no longer has sufficient votes and is whitelisted.\n\nOnce after deployment, the admin may initiate the contract. This will set the initial proposal ID based on the number of proposals in the GovernorAlpha contract.\n\nThe admin may set the voting delay within the minimum and maximum voting delays at any time.\n\nThe admin may set the length of the voting period between the minimum and maximum voting periods at any time.\n\nThe admin may set the proposal threshold within the minimum and maximum thresholds at any time.\n\nThe admin and WhitelistGuardian may add an address to the whitelist until a specified timestamp at any time.\n\nThe admin may set the WhitelistGuardian address at any time.\n\nThe owner may set a pending admin address at any time. The pending admin may then accept the role at any time.\n\nTimelock Contract:\n\nThis contract is used to execute arbitrary transactions after a delay has passed.\n\nThe admin address may queue a transaction by supplying a signed message hash and an execution time.\n\nThe execution time must be at least the \"delay\" greater than the current timestamp.\n\nThe transaction will be stored using the hash of all supplied values.\n\nThe admin address may execute the transaction once the execution time has passed and before the grace period has ended.\n\nThe transaction is then executed on the target address.\n\nThe admin may cancel a queued transaction at any time. The transaction must be queued again in order to be executed.\n\nThis contract may set a pending admin through the use of a queued transaction.\n\nThe pending admin may then accept and become the admin at any time.\n\nThis contract may update the execution delay within the minimum and maximum delay through a queued transaction.\n\nPriceOracleProxyETH Contract:\n\nThis contract acts as a proxy for other Oracle contracts.\n\nThe price of a token is determined in other aggregator contracts.\n\nThe price of lEther tokens is a constant 1 ether.\n\nThe price of plvGLP tokens is determined in the plvGLPOracle contract.\n\nThe price of lLode tokens is determined in the Lode Oracle contract.\n\nAll other lToken prices are determined using Chainlink aggregators. This is the industry standard and is resistant to manipulation.\n\nThe admin may update the Guardian and admin addresses at any time.\n\nThe admin may update the Lode Oracle and glpOracle addresses at any time.\n\nThe admin and Guardian may update the aggregator address for a lToken at any time.\n\nSushiOracle Contract:\n\nThis contract is used to determine the price of a Sushiswap LP token.\n\nThe price of an LP token is determined based on the current token reserves in the Liquidity Pool.\n\nThe admin address may update the liquidity pool address at any time.\n\nThe admin address may update the admin address at any time.\n\nplvGLPOracle Contract:\n\nThis contract is used to track an average price of plvGLP tokens.\n\nThe price is determined as an average of a \"window size\" number of \"indexes\".\n\nOnly whitelisted addresses may record an index.\n\nEach index may only change at most a \"max swing\" from the previous index.\n\nIf the newest index exceeds the max swing then the previous index will be used instead.\n\nIf the true index change exceeds the max swing the contract will always record the most recent index taken.\n\nThe current reported plvGLP price index is determined through an exchange rate from plvGLP tokens to GLP tokens and value per GLP token.\n\nThe value per GLP token is determined in the GLP Manager contract. This contract is outside the scope of this audit so we are unable to give an assessment in regard to security.\n\nThe owner may update the plvGLP, GLP, and GLP Manager addresses at any time.\n\nThe owner may update the window size at any time.\n\nReservoir Contract:\n\nThis contract is used to distribute a specified token to a recipient address.\n\nAny address may trigger a \"drip\".\n\nA drip will transfer the \"drip rate\" amount of tokens to the recipient address for each block since the last drip.\n\nThe tokens being distributed must be supplied to the contract.\n\nThe contract will distribute tokens until it has exhausted its supply.\n\nWhitelist Contract:\n\nThis contract is used to manage whitelisted users for the CToken contract.\n\nThe contract will return the current whitelist status of an address when queried.\n\nThe owner may add and remove any address from the whitelist at any time.\n\nAudit Results\n\nContract Source Summary and Visualizations\n\nAbout SourceHat\n\nSourceHat has quickly grown to have one of the most experienced and well-equipped smart contract auditing teams in the industry. Our team has conducted 1800+ solidity smart contract audits covering all major project types and protocols, securing a total of over $50 billion U.S. dollars in on-chain value!\n\nOur firm is well-reputed in the community and is trusted as a top smart contract auditing company for the review of solidity code, no matter how complex. Our team of experienced solidity smart contract auditors performs audits for tokens, NFTs, crowdsales, marketplaces, gambling games, financial protocols, and more!\n\nContact us today to get a free quote for a smart contract audit of your project!\n\nWhat is a SourceHat Audit?\n\nTypically, a smart contract audit is a comprehensive review process designed to discover logical errors, security vulnerabilities, and optimization opportunities within code. A SourceHat Audit takes this a step further by verifying economic logic to ensure the stability of smart contracts and highlighting privileged functionality to create a report that is easy to understand for developers and community members alike.\n\nHow Do I Interpret the Findings?\n\nEach of our Findings will be labeled with a Severity level. We always recommend the team resolve High, Medium, and Low severity findings prior to deploying the code to the mainnet. Here is a breakdown on what each Severity level means for the project:\n\nHigh severity indicates that the issue puts a large number of users' funds at risk and has a high probability of exploitation, or the smart contract contains serious logical issues which can prevent the code from operating as intended.\n\nMedium severity issues are those which place at least some users' funds at risk and has a medium to high probability of exploitation.\n\nLow severity issues have a relatively minor risk association; these issues have a low probability of occurring or may have a minimal impact.\n\nInformational issues pose no immediate risk, but inform the project team of opportunities for gas optimizations and following smart contract security best practices."
    }
}