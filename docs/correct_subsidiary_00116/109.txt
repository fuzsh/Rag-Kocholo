1. All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 1 of 43 CCNA Security Chapter 2 Lab A: Securing the Router for Administrative Access Topology Note: ISR G2 devices use GigabitEthernet interfaces instead of FastEthernet Interfaces. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 2 of 43 IP Addressing Table Device

2. Interface IP Address Subnet Mask Default Gateway Switch Port R1 Fa0/1 192.168.1.1 255.255.255.0 N/A S1 Fa0/5 S0/0/0 (DCE) 10.1.1.1 255.255.255.252 N/A N/A R2 S0/0/0 10.1.1.2 255.255.255.252 N/A N/A S0/0/1 (DCE) 10.2.2.2 255.255.255.252 N/A N/A R3 Fa0/1 192.168.3.1 255.255.255.0 N/A S3 Fa0/5 S0/0/1 10.2.2.1 255.255.255.252 N/A N/A PC-A NIC 192.168.1.3 255.255.255.0 192.168.1.1 S1 Fa0/6 PC-C NIC 192.168.3.3 255.255.255.0 192.168.3.1 S3 Fa0/18 Objectives Part 1: Basic Network Device Configuration

3. Part 2: Control Administrative Access for Routers Part 3: Configure Administrative Roles Part 4: Configure Cisco IOS Resilience and Management Reporting Secure the Cisco IOS image and configuration files. devices using NTP.

4. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 3 of 43 PC. Part 5: Configure Automated Security Features configuration. and to lock down services. Background/Scenario The router is a key component that controls the movement of data into and out of the network and between devices within the network. It is particularly important to protect network routers because the failure of a routing device could make sections of the network or the entire network inaccessible. Controlling access to routers and enabling reporting on routers are critical to network security and should be part of a comprehensive security policy. In this lab, you build a multi-router network and configure the

5. routers and hosts. You use various CLI and CCP tools to secure local and remote access to the routers, analyze potential vulnerabilities, and take steps to mitigate them. You also enable management reporting to monitor router configuration changes. The router commands and output in this lab are from Cisco 1841s using Cisco IOS software, release 12.4(20)T (advanced IP image). Other routers and Cisco IOS versions can be used. See the Router Interface Summary table at the end of the lab to determine which interface identifiers to use based on the equipment in the lab. Depending on the model of the router, the commands available and output produced may vary from what is shown in this lab. Note: Make sure that the routers and the switches have been erased and have no startup configurations. Required Resources 12.4(20)T1 or comparable) -A: Windows XP, Vista, or Windows 7 with CCP 2.5, PuTTy SSH Client (no ACS required) -C: Windows XP, Vista or Windows 7 with PuTTy SSH Client and Kiwi or Tftpd32 Syslog server rs via the console port

6. CCP Notes: run CCP. Hardware/software recommendations for CCP include Windows XP, Vista, or Windows 7 with Java version 1.6.0_11 up to 1.6.0_21, Internet Explorer 6.0 or above and Flash Player Version 10.0.12.36 and later. Vista or Windows 7, it may be necessary to right-click on the CCP icon or menu item, and choose Run as administrator. n CCP, it may be necessary to temporarily disable antivirus programs and O/S firewalls. Make sure that all pop-up blockers are turned off in the browser. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 4 of 43 Part 1: Basic Router Configuration In Part 1 of this lab, you set up the network topology and configure basic settings such as interface IP addresses and static routing.

7. Step 1: Cable the network. Attach the devices shown in the topology diagram and cable as necessary. Step 2: Configure basic settings for each router. a. Configure host names as shown in the topology. b. Configure interface IP addresses as shown in the IP Addressing Table. c. Configure a clock rate for routers with a DCE serial cable attached to their serial interface. Router R1 is shown here as an example. R1(config)# interface S0/0/0 R1(config-if)# clock rate 64000 d. To prevent the router from attempting to translate incorrectly entered commands as though they were host names, disable DNS lookup. Router R1 is shown here as an example. R1(config)# no ip domain-lookup Step 3: Configure static routing on the routers. a. Configure a static default route from R1 to R2 and from R3 to R2. b. Configure a static route from R2 to the R1 LAN and from R2 to the R3 LAN.

8. Step 4: Configure PC host IP settings. Configure a static IP address, subnet mask, and default gateway for PC-A and PC-C as shown in the IP Addressing Table. Step 5: Verify connectivity between PC-A and R3. a. Ping from R1 to R3. Were the ping results successful? __________ If the pings are not successful, troubleshoot the basic device configurations before continuing. b. Ping from PC-A on the R1 LAN to PC-C on the R3 LAN. Were the ping results successful? __________ If the pings are not successful, troubleshoot the basic device configurations before continuing. Note: If you can ping from PC-A to PC-C you have demonstrated that static routing is configured and functioning correctly. If you cannot ping but the device interfaces are up and IP addresses are correct, use the show run and show ip route commands to help identify routing protocol related problems. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information.

9. Page 5 of 43 Step 6: Save the basic running configuration for each router. Use the Transfer > Capture text option in HyperTerminal or some other method to capture the running configs for each router. Save the three files so that they can be used to restore configs later in the lab. Part 2: Control Administrative Access for Routers In Part 2 of this lab, you will: e and encrypt passwords. software and configure the SSH client. Note: Perform all tasks, on both R1 and R3. The procedures and output for R1 are shown here. Task 1: Configure and Encrypt Passwords on Routers R1 and R3 Step 1: Configure a minimum password length for all router passwords. Use the security passwords command to set a minimum password length of 10 characters.

10. R1(config)# security passwords min-length 10 Step 2: Configure the enable secret password. Configure the enable secret encrypted password on both routers. R1(config)# enable secret cisco12345 How does configuring an enable secret password help protect a router from being compromised by an attack? _____________________________________________________ _______________________________ _____________________________________________________ _______________________________ _____________________________________________________ _______________________________ Step 3: Configure basic console, auxiliary port, and virtual access lines. Note: Passwords in this task are set to a minimum of 10 characters but are relatively simple for the benefit of performing the lab. More complex passwords are recommended in a production network. a. Configure a console password and enable login for routers. For additional security, the exec- timeout command causes the line to log out after 5 minutes of inactivity. The logging synchronous command prevents console messages from interrupting command entry.

11. Note: To avoid repetitive logins during this lab, the exec- timeout command can be set to 0 0, which prevents it from expiring. However, this is not considered a good security practice. R1(config)# line console 0 R1(config-line)# password ciscocon R1(config-line)# exec-timeout 5 0 CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 6 of 43 R1(config-line)# login R1(config-line)# logging synchronous When you configured the password for the console line, what message was displayed? _____________________________________________________ ___________________________ b. Configure a new password of ciscoconpass for the console. c. Configure a password for the AUX port for router R1.

12. R1(config)# line aux 0 R1(config-line)# password ciscoauxpass R1(config-line)# exec-timeout 5 0 R1(config-line)# login d. Telnet from R2 to R1. R2> telnet 10.1.1.1 Were you able to login? Why or why not? _______________________________________________ What messages were displayed? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ e. Configure the password on the vty lines for router R1. R1(config)# line vty 0 4 R1(config-line)# password ciscovtypass R1(config-line)# exec-timeout 5 0 R1(config-line)# login f. Telnet from R2 to R1 again. Were you able to login this time? _______________________________

13. g. Enter privileged EXEC mode and issue the show run command. Can you read the enable secret password? Why or why not? _____________________________________________________ ___________________________ Can you read the console, aux, and vty passwords? Why or why not? _________________________ h. Repeat the configuration portion of steps 3a through 3g on router R3. Step 4: Encrypt clear text passwords. a. Use the service password-encryption command to encrypt the console, aux, and vty passwords. R1(config)# service password-encryption b. Issue the show run command. Can you read the console, aux, and vty passwords? Why or why not? _____________________________________________________ _______________________ c. At what level (number) is the enable secret password encrypted? _____ d. At what level (number) are the other passwords encrypted? _____ e. Which level of encryption is harder to crack and why?

14. ____________________________________. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 7 of 43 Task 2: Configure a Login Warning Banner on Routers R1 and R3 Step 1: Configure a warning message to display prior to login. a. Configure a warning to unauthorized users with a message-of- the-day (MOTD) banner using the banner motd command. When a user connects to one of the routers, the MOTD banner appears before the login prompt. In this example, the dollar sign ($) is used to start and end the message. R1(config)# banner motd $Unauthorized access strictly prohibited and prosecuted to the full extent of the law$ R1(config)# exit b. Issue the show run command. What does the $ convert to in the output? _____________________________________________________ ___________________________

15. c. Exit privileged EXEC mode using the disable or exit command and press Enter to get started. Does the MOTD banner look like what you created with the banner motd command? _____ Note: If the MOTD banner is not as you wanted it, recreate it using the banner motd command. Task 3: Configure Enhanced Username Password Security on Routers R1 and R3. Step 1: Investigate the options for the username command. In global configuration mode, enter the following command: R1(config)# username user01 password ? What options are available? _____________________________________________________ _______________________________ _____________________________________________________ _______________________________ _____________________________________________________ _______________________________ Step 2: Create a new user account using the username command. a. Create the user01 account, specifying the password with no encryption. R1(config)# username user01 password 0 user01pass b. Use the show run command to display the running

16. configuration and check the password that is enabled. Even though unencrypted (0) was specified, you still cannot read the password for the new user account, because the service password-encryption command is in effect. Step 3: Create a new user account with a secret password. a. Create a new user account with MD5 hashing to encrypt the password. R1(config)# username user02 secret user02pass b. Exit global configuration mode and save your configuration. c. Display the running configuration. Which hashing method is used for the password? _____________________________________________________ ___________________________ CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 8 of 43 Step 4: Test the new account by logging in to the console. a. Set the console line to use the locally defined login accounts.

17. R1(config)# line console 0 R1(config-line)# login local R1(config-line)# end R1# exit b. Exit to the initial router screen which displays: R1 con0 is now available, Press RETURN to get started. c. Log in using the user01 account and password previously defined. What is the difference between logging in at the console now and previously? _____________________________________________________ ___________________________ d. After logging in, issue the show run command. Were you able to issue the command? Why or why not? _____________________________________________________ _______________________ e. Enter privileged EXEC mode using the enable command. Were you prompted for a password? Why or why not? _____________________________________________________ _________________

18. Step 5: Test the new account by logging in from a Telnet session. a. From PC-A, establish a Telnet session with R1. PC-A> telnet 192.168.1.1 Were you prompted for a user account? Why or why not? _____________________________________________________ ___________________________ b. Set the vty lines to use the locally defined login accounts. R1(config)# line vty 0 4 R1(config-line)# login local c. From PC-A, telnet to R1 again. PC-A> telnet 192.168.1.1 Were you prompted for a user account? Why or why not? _____________________________________________________ ___________________________ d. Log in as user01 with a password of user01pass. e. While Telnetted to R1, access privileged EXEC mode with the enable command. What password did you use? _____________________________________________________ ____ f. For added security, set the AUX port to use the locally defined login accounts.

19. R1(config)# line aux 0 R1(config-line)# login local g. End the Telnet session with the exit command. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 9 of 43 Task 4: Configure Enhanced Virtual Login Security on Routers R1 and R3 Step 1: Configure the router to protect against login attacks. Use the login block-for command to help prevent brute-force login attempts from a virtual connection, such as Telnet, SSH, or HTTP. This can help slow down dictionary attacks and help protect the router from a possible DoS attack. a. From the user EXEC or privileged EXEC prompt, issue the show login command to see the current router login attack settings. R1# show login No login delay has been applied.

20. No Quiet-Mode access list has been configured. Router NOT enabled to watch for login Attacks b. Use the login block-for command to configure a 60 second login shutdown (quiet mode timer) if two failed login attempts are made within 30 seconds. R1(config)# login block-for 60 attempts 2 within 30 c. Exit global configuration mode and issue the show login command. R1# show login Is the router enabled to watch for login attacks? _____ What is the default login delay? _____________________________________________________ ___________________________ Step 2: Configure the router to log login activity. a. Configure the router to generate system logging messages for both successful and failed login attempts. The following commands log every successful login and log failed login attempts after every second failed login. R1(config)# login on-success log R1(config)# login on-failure log every 2 R1(config)# exit

21. b. Issue the show login command. What additional information is displayed? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ Step 3: Test the enhanced login security login configuration. a. From PC-A, establish a Telnet session with R1. PC-A> telnet 10.1.1.1 b. Attempt to log in with the wrong user ID or password two times. What message was displayed on PC- A after the second failed attempt? _____________________________________________________ What message was displayed on the router R1 console after the second failed login attempt? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ c. From PC-A, attempt to establish another Telnet session to R1 within 60 seconds. What message was displayed on PC-A after the attempted Telnet connection? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________

22. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 10 of 43 What message was displayed on router R1 after the attempted Telnet connection? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ d. Issue the show login command within 60 seconds. What additional information is displayed? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ Task 5: Configure the SSH Server on Router R1 and R3 Using the CLI In this task, you use the CLI to configure the router to be managed securely using SSH instead of Telnet. Secure Shell (SSH) is a network protocol that establishes a secure terminal emulation connection to a router or other networking device. SSH encrypts all information that passes over the network link and provides authentication of the remote computer. SSH is rapidly replacing Telnet as the remote login tool of choice for

23. network professionals. Note: For a router to support SSH, it must be configured with local authentication, (AAA services, or username) or password authentication. In this task, you configure an SSH username and local authentication. Step 1: Configure a domain name. Enter global configuration mode and set the domain name. R1# conf t R1(config)# ip domain-name ccnasecurity.com Step 2: Configure a privileged user for login from the SSH client. a. Use the username command to create the user ID with the highest possible privilege level and a secret password. R1(config)# username admin privilege 15 secret cisco12345 b. Exit to the initial router login screen, and log in with this username. What was the router prompt after you entered the password? _____________________________________________________ ___________________________ Step 3: Configure the incoming vty lines. Specify a privilege level of 15 so that a user with the highest privilege level (15) will default to privileged EXEC mode when accessing the vty lines. Other users will

24. default to user EXEC mode. Use the local user accounts for mandatory login and validation, and accept only SSH connections. R1(config)# line vty 0 4 R1(config-line)# privilege level 15 R1(config-line)# login local R1(config-line)# transport input ssh R1(config-line)# exit Note: The login local command should already be configured in a previous step. It is included here to provide all commands if you were doing this for the first time. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 11 of 43 Note: If you add the keyword telnet to the transport input command, users can log in using Telnet as well as SSH, however, the router will be less secure. If only SSH is specified, the connecting host must have an SSH client installed.

25. Step 4: Erase existing key pairs on the router. R1(config)# crypto key zeroize rsa Note: If no keys exist, you might receive this message: % No Signature RSA Keys found in configuration. Step 5: Generate the RSA encryption key pair for the router. The router uses the RSA key pair for authentication and encryption of transmitted SSH data. Configure the RSA keys with 1024 for the number of modulus bits. The default is 512, and the range is from 360 to 2048. R3(config)# crypto key generate rsa general-keys modulus 1024 The name for the keys will be: R3.ccnasecurity.com % The key modulus size is 1024 bits % Generating 1024 bit RSA keys, keys will be non- exportable...[OK] R3(config)# *Dec 16 21:24:16.175: %SSH-5-ENABLED: SSH 1.99 has been enabled R3(config)# exit

26. Note: The details of encryption methods are covered in Chapter 7. Step 6: Verify the SSH configuration. a. Use the show ip ssh command to see the current settings. R1# show ip ssh b. Fill in the following information based on the output of the show ip ssh command. SSH version enabled: ____________________ Authentication timeout: ___________________ Authentication retries: ____________________ Step 7: Configure SSH timeouts and authentication parameters. The default SSH timeouts and authentication parameters can be altered to be more restrictive using the following commands. R1(config)# ip ssh time-out 90 R1(config)# ip ssh authentication-retries 2 Step 8: Save the running-config to the startup-config. R1# copy running-config startup-config CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc.

27. All rights reserved. This document is Cisco Public Information. Page 12 of 43 Task 6: Research Terminal Emulation Client Software and Configure the SSH Client Step 1: Research terminal emulation client software. Conduct a web search for freeware terminal emulation client software, such as TeraTerm or PuTTy. What are some capabilities of each? _____________________________________________________ __________________________________ _____________________________________________________ __________________________________ _____________________________________________________ __________________________________ Step 2: Install an SSH client on PC-A and PC-C. a. If the SSH client is not already installed, download either TeraTerm or PuTTY. b. Save the application to the desktop. Note: The procedure described here is for PuTTY and pertains to PC-A. Step 3: Verify SSH connectivity to R1 from PC-A. a. Launch PuTTY by double-clicking the putty.exe icon. b. Input the R1 Fa0/1 IP address 192.168.1.1 in the Host Name

28. or IP address field. c. Verify that the SSH radio button is selected. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 13 of 43 d. Click Open. e. In the PuTTY Security Alert window, click Yes. f. Enter the admin username and password cisco12345 in the PuTTY window. g. At the R1 privileged EXEC prompt, enter the show users command. R1# show users What users are connected to router R1 at this time? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________

29. h. Close the PuTTY SSH session window. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 14 of 43 i. Try to open a Telnet session to your router from PC-A. Were you able to open the Telnet session? Why or why not? _____________________________________________________ _____________ j. Open a PuTTY SSH session to the router from PC-A. Enter the user01 username and password user01pass in the PuTTY window to try connecting for user who does not have privilege level of 15. Were you able to login? _____ What was the prompt? ____________________________________ k. Use the enable command to enter privilege EXEC mode and enter the enable secret password cisco12345. l. Disable the generation of system logging messages for successful login attempts. R1(config)# no login on-success log Step 4: Save the configuration.

30. Save the running configuration to the startup configuration from the privileged EXEC prompt. R1# copy running-config startup-config Note: Complete steps 3 and 4 between PC-C and router R3. Part 3: Configure Administrative Roles In Part 3 of this lab, you will: and R3. The role-based CLI access feature allows the network administrator to define views, which are a set of operational commands and configuration capabilities that provide selective or partial access to Cisco IOS EXEC and configuration (config) mode commands. Views restrict user access to the Cisco IOS CLI and configuration information. A view can define which commands are accepted and what configuration information is visible. Note: Perform all tasks on both R1 and R3. The procedures and output for R1 are shown here. Task 1: Enable Root View on R1 and R3 If an administrator wants to configure another view to the

31. system, the system must be in root view. When a system is in root view, the user has the same access privileges as a user who has level-15 privileges, but the root view user can also configure a new view and add or remove commands from the view. When you are in a CLI view, you have access only to the commands that have been added to that view by the root view user. Step 1: Enable AAA on router R1. To define views, AAA must be enabled. R1# config t R1(config)# aaa new-model R1(config)# exit Note: AAA is covered in Chapter 3. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 15 of 43 Step 2: Enable the root view. Use the command enable view to enable the root view. Use the enable secret password cisco12345. If the router does not have an enable secret password, create one now.

32. R1# enable view Password: cisco12345 *Dec 16 22:41:17.483: %PARSER-6-VIEW_SWITCH: successfully set to view 'root'. Task 2: Create New Views for the Admin1, Admin2, and Tech Roles on R1 and R3 Step 1: Create the admin1 view, establish a password, and assign privileges. a. The admin1 user is the top-level user below root that is allowed to access this router. It has the most authority. The admin1 user can use all show, config, and debug commands. Use the following command to create the admin1 view while in the root view. R1(config)# parser view admin1 R1(config-view)# *Dec 16 22:45:27.587: %PARSER-6-VIEW_CREATED: view 'admin1’ successfully created. R1(config-view)# Note: To delete a view, use the command no parser view viewname.

33. b. Associate the admin1 view with an encrypted password. R1(config-view)# secret admin1pass R1(config-view)# c. Review the commands that can be configured in the admin1 view. Use the commands ? command to see available commands. The following is a partial listing of the available commands. R1(config-view)# commands ? RITE-profile Router IP traffic export profile command mode RMI Node Config Resource Policy Node Config mode RMI Resource Group Resource Group Config mode RMI Resource Manager Resource Manager Config mode RMI Resource Policy Resource Policy Config mode SASL-profile SASL profile configuration mode aaa-attr-list AAA attribute list config mode aaa-user AAA user definition accept-dialin VPDN group accept dialin configuration mode accept-dialout VPDN group accept dialout configuration mode

34. address-family Address Family configuration mode <output omitted> d. Add all config, show, and debug commands to the admin1 view and then exit from view configuration mode. R1(config-view)# commands exec include all show R1(config-view)# commands exec include all config terminal R1(config-view)# commands exec include all debug R1(config-view)# end e. Verify the admin1 view. R1# enable view admin1 Password:admin1pass CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 16 of 43 *Dec 16 22:56:46.971: %PARSER-6-VIEW_SWITCH: successfully set to view

35. 'admin1' R1# show parser view R1# Current view is ‘admin1’ f. Examine the commands available in the admin1 view. R1# ? Exec commands: configure Enter configuration mode debug Debugging functions (see also 'undebug') enable Turn on privileged commands exit Exit from the EXEC show Show running system information g. Examine the show commands available in the admin1 view. R1# show ? aaa Show AAA values accounting Accounting data for active sessions adjacency Adjacent nodes alignment Show alignment information appfw Application Firewall information

36. archive Archive of the running configuration information arp ARP table <output omitted> Step 2: Create the admin2 view, establish a password, and assign privileges. The admin2 user is a junior administrator in training who is allowed to view all configurations but is not allowed to configure the routers or use debug commands. a. Use the enable view command to enable the root view, and enter the enable secret password cisco12345. R1# enable view Password:cisco12345 b. Use the following command to create the admin2 view. R1(config)# parser view admin2 R1(config-view)# *Dec 16 23:02:27.587: %PARSER-6-VIEW_CREATED: view 'admin2’ successfully created. R1(config-view)#

37. c. Associate the admin2 view with a password. R1(config-view)# secret admin2pass R1(config-view)# d. Add all show commands to the view and then exit from view configuration mode. R1(config-view)# commands exec include all show R1(config-view)# end e. Verify the admin2 view. R1# enable view admin2 Password: admin2pass *Dec 16 23:05:46.971: %PARSER-6-VIEW_SWITCH: successfully set to view 'admin2' CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 17 of 43 R1# show parser view R1# Current view is ‘admin2’

38. f. Examine the commands available in the admin2 view. R1# ? Exec commands: enable Turn on privileged commands exit Exit from the EXEC show Show running system information What is missing from the list of admin2 commands that is present in the admin1 commands? _____________________________________________________ _____________________ Step 3: Create the tech view, establish a password, and assign privileges. a. The tech user typically installs end-user devices and cabling. Tech users are only allowed to use selected show commands. b. Use the enable view command to enable the root view, and enter the enable secret password cisco12345. R1# enable view Password:cisco12345 c. Use the following command to create the tech view.

39. R1(config)# parser view tech R1(config-view)# *Dec 16 23:10:27.587: %PARSER-6-VIEW_CREATED: view 'tech’ successfully created. d. Associate the tech view with a password. R1(config-view)# secret techpasswd R1(config-view)# e. Add the following show commands to the view and then exit from view configuration mode. R1(config-view)# commands exec include show version R1(config-view)# commands exec include show interfaces R1(config-view)# commands exec include show ip interface brief R1(config-view)# commands exec include show parser view R1(config-view)# end f. Verify the tech view. R1# enable view tech Password:techpasswd

40. *Dec 16 23:13:46.971: %PARSER-6-VIEW_SWITCH: successfully set to view 'tech' R1# show parser view R1# Current view is ‘tech’ g. Examine the commands available in the tech view. R1# ? Exec commands: enable Turn on privileged commands exit Exit from the EXEC show Show running system information h. Examine the show commands available in the tech view. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 18 of 43 R1# show ? flash: display information about flash: file system

41. interfaces Interface status and configuration ip IP information parser Show parser commands version System hardware and software status i. Issue the show ip interface brief command. Were you able to do it as the tech user? Why or why not? _____________________________________________________ ____________________ j. Issue the show ip route command. Were you able to do it as the tech user? _________________ k. Return to root view with the enable view command. R1# enable view Password: cisco12345 l. Issue the show run command to see the views you created. For tech view, why are the show and show ip commands listed as well as show ip interface and show ip interface brief? _____________________________________________________ ___________________________ Step 4: Save the configuration on routers R1 and R3.

42. Save the running configuration to the startup configuration from the privileged EXEC prompt. Part 4: Configure IOS Resilience and Management Reporting In Part 4 of this lab, you will: for other devices. re the logging trap level on a router. PC. Note: Perform all tasks on both R1 and R3. The procedure and output for R1 is shown here. Task 1: Secure Cisco IOS Image and Configuration Files on R1 and R3 The Cisco IOS Resilient Configuration feature enables a router to secure the running image and maintain a working copy of the configuration so that those files can withstand malicious attempts to erase the contents of persistent storage (NVRAM and flash). The feature secures the smallest working set of files to preserve persistent storage space. No extra space is required to secure the primary Cisco IOS image file. In this task, you configure the Cisco IOS Resilient Configuration feature.

43. Step 1: Display the files in flash memory for R1. R1# show flash -# - --length-- -----date/time------ path 1 37081324 Dec 16 2008 21:57:10 c1841-advipservicesk9- mz.124-20.T1.bin 2 6389760 Dec 16 2008 22:06:56 sdm.tar CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 19 of 43 3 1505280 Dec 16 2008 22:08:52 common.tar 4 527849 Dec 16 2008 17:13:40 128MB.sdf 5 1821 Dec 16 2008 00:11:30 sdmconfig-18xx.cfg 6 931840 Dec 16 2008 17:14:42 es.tar 7 112640 Dec 16 2008 17:15:06 home.tar 8 1038 Dec 16 2008 17:15:22 home.shtml 9 1697952 Dec 16 2008 17:17:54 securedesktop-ios- 3.1.1.45-k9.pkg

44. 10 415956 Dec 16 2008 17:21:16 sslclient-win-1.1.4.176.pkg 14815232 bytes available (49197056 bytes used) Step 2: Secure the Cisco IOS image and archive a copy of the running configuration. a. The secure boot-image command enables Cisco IOS image resilience, which hides the file from dir and show commands. The file cannot be viewed, copied, modified, or removed using EXEC mode commands. (It can be viewed in ROMMON mode.) When turned on for the first time, the running image is secured. R1(config)# secure boot-image .Dec 17 25:40:13.170: %IOS_RESILIENCE-5- IMAGE_RESIL_ACTIVE: Successfully secured running image b. The secure boot-config command takes a snapshot of the router running configuration and securely archives it in persistent storage (flash). R1(config)# secure boot-config .Dec 17 25:42:18.691: %IOS_RESILIENCE-5- CONFIG_RESIL_ACTIVE: Successfully secured config archive [flash:.runcfg-20081219-

45. 224218.ar] Step 3: Verify that your image and configuration are secured. a. You can use only the show secure bootset command to display the archived filename. Display the status of configuration resilience and the primary bootset filename. R1# show secure bootset IOS resilience router id FTX1111W0QF IOS image resilience version 12.4 activated at 25:40:13 UTC Wed Dec 17 2008 Secure archive flash:c1841-advipservicesk9-mz.124-20.T1.bin type is image (elf) [] file size is 37081324 bytes, run size is 37247008 bytes Runnable image, entry point 0x8000F000, run from ram IOS configuration resilience version 12.4 activated at 25:42:18 UTC Wed Dec 17 2008

46. Secure archive flash:.runcfg-20081219-224218.ar type is config configuration archive size 1986 bytes b. What is the name of the archived running config file and on what is the name based? _____________________________________________________ ___________________________ Step 4: Display the files in flash memory for R1. a. Display the contents of flash using the show flash command. R1# show flash -# - --length-- -----date/time------ path CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 20 of 43 1 6389760 Dec 16 2008 22:06:56 sdm.tar 2 1505280 Dec 16 2008 22:08:52 common.tar 3 527849 Dec 16 2008 17:13:40 128MB.sdf 4 1821 Dec 16 2008 00:11:30 sdmconfig-18xx.cfg 5 512000 Dec 16 2008 17:14:24 dg_sdm.tar

47. 6 931840 Dec 16 2008 17:14:42 es.tar 7 112640 Dec 16 2008 17:15:06 home.tar 8 1038 Dec 16 2008 17:15:22 home.shtml 10 1697952 Dec 16 2008 17:17:54 securedesktop-ios- 3.1.1.45-k9.pkg 11 415956 Dec 16 2008 17:21:16 sslclient-win-1.1.4.176.pkg 14807040 bytes available (49205248 bytes used) b. Is the Cisco IOS image or the archived running config file listed? _____________________________ c. How can you tell that the Cisco IOS image is still there? _____________________________________________________ ___________________________ Step 5: Disable the IOS Resilient Configuration feature. a. Disable the Resilient Configuration feature for the Cisco IOS image. R1# config t R1(config)# no secure boot-image .Dec 17 25:48:23.009: %IOS_RESILIENCE-5- IMAGE_RESIL_INACTIVE: Disabled secure image archival

48. b. Disable the Resilient Configuration feature for the running config file. R1(config)# no secure boot-config .Dec 17 25:48:47.972: %IOS_RESILIENCE-5- CONFIG_RESIL_INACTIVE: Disabled secure config archival [removed flash:.runcfg-20081219- 224218.ar] Step 6: Verify that the Cisco IOS image is now visible in flash. R1# show flash -# - --length-- -----date/time------ path 1 37081324 Dec 16 2008 21:57:10 c1841-advipservicesk9- mz.124-20.T1.bin 2 6389760 Dec 16 2008 22:06:56 sdm.tar 3 1505280 Dec 16 2008 22:08:52 common.tar 4 527849 Dec 16 2008 17:13:40 128MB.sdf 5 1821 Dec 16 2008 00:11:30 sdmconfig-18xx.cfg 6 931840 Dec 16 2008 17:14:42 es.tar 7 112640 Dec 16 2008 17:15:06 home.tar 8 1038 Dec 16 2008 17:15:22 home.shtml 9 1697952 Dec 16 2008 17:17:54 securedesktop-ios- 3.1.1.45-k9.pkg

49. 10 415956 Dec 16 2008 17:21:16 sslclient-win-1.1.4.176.pkg 14815232 bytes available (49197056 bytes used) Step 7: Save the configuration on both routers. Save the running configuration to the startup configuration from the privileged EXEC prompt. Task 2: Configure a Synchronized Time Source Using NTP Router R2 will be the master NTP clock source for routers R1 and R3. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 21 of 43 Note: R2 could also be the master clock source for switches S1 and S3, but it is not necessary to configure them for this lab. Step 1: Set Up the NTP Master using Cisco IOS commands. R2 is the master NTP server in this lab. All other routers and switches learn the time from it, either directly or indirectly. For this reason, you must ensure that R2 has the correct Coordinated Universal Time set.

50. Note: If you are using CCP to configure R2 to support NTP, skip this step and go to Step 2. a. Use the show clock command to display the current time set on the router. R2# show clock *01:19:02.331 UTC Mon Dec 15 2008 b. To set the time on the router, use the clock set time command. R2# clock set 20:12:00 Dec 17 2008 R2# *Dec 17 20:12:18.000: %SYS-6-CLOCKUPDATE: System clock has been updated from 01:20:26 UTC Mon Dec 15 2008 to 20:12:00 UTC Wed Dec 17 2008, configured from console by admin on console. c. Configure R2 as the NTP master using the ntp master stratum-number command in global configuration mode. The stratum number indicates the distance from the original source. For this lab, use a stratum number of 3 on R2. When a device learns the time from an NTP source, its stratum number becomes one greater than the stratum number of its source. R2(config)# ntp master 3

51. Step 2: Configure R1 and R3 as NTP clients using the CLI. a. R1 and R3 will become NTP clients of R2. To configure R1, use the global configuration command ntp server hostname. The host name can also be an IP address. The command ntp update- calendar periodically updates the calendar with the NTP time. R1(config)# ntp server 10.1.1.2 R1(config)# ntp update-calendar b. Verify that R1 has made an association with R2 with the show ntp associations command. You can also use the more verbose version of the command by adding the detail argument. It might take some time for the NTP association to form. R1# show ntp associations address ref clock st when poll reach delay offset disp ~10.1.1.2 127.127.1.1 3 14 64 3 0.000 -280073 3939.7 *sys.peer, # selected, +candidate, -outlyer, x falseticker, ~ configured c. Issue the debug ntp all command to see NTP activity on R1 as it synchronizes with R2.

52. R1# debug ntp all NTP events debugging is on NTP core messages debugging is on NTP clock adjustments debugging is on NTP reference clocks debugging is on NTP packets debugging is on Dec 17 20.12:18.554: NTP message sent to 10.1.1.2, from interface 'Serial0/0/0' (10.1.1.1). CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 22 of 43 Dec 17 20.12:18.574: NTP message received from 10.1.1.2 on interface 'Serial0/0/0' (10.1.1.1). Dec 17 20:12:18.574: NTP Core(DEBUG): ntp_receive: message received Dec 17 20:12:18.574: NTP Core(DEBUG): ntp_receive: peer is

53. 0x645A3120, next action is 1. Dec 17 20:12:18.574: NTP Core(DEBUG): receive: packet given to process_packet Dec 17 20:12:18.578: NTP Core(INFO): system event 'event_peer/strat_chg' (0x04) status 'sync_alarm, sync_ntp, 5 events, event_clock_reset' (0xC655) Dec 17 20:12:18.578: NTP Core(INFO): synchronized to 10.1.1.2, stratum 3 Dec 17 20:12:18.578: NTP Core(INFO): system event 'event_sync_chg' (0x03) status 'leap_none, sync_ntp, 6 events, event_peer/strat_chg' (0x664) Dec 17 20:12:18.578: NTP Core(NOTICE): Clock is synchronized. Dec 17 20:12:18.578: NTP Core(INFO): system event 'event_peer/strat_chg' (0x04) status 'leap_none, sync_ntp, 7 events, event_sync_chg' (0x673)

54. Dec 17 20:12:23.554: NTP: Calendar updated. d. Issue the undebug all or the no debug ntp all command to turn off debugging. R1# undebug all e. Verify the time on R1 after it has made an association with R2. R1# show clock *20:12:24.859 UTC Wed Dec 17 2008 Step 3: (Optional) Configure R1 and R3 as NTP clients using CCP. You can also use CCP to configure the router to support NTP. If you configured R1 as an NTP client using Cisco IOS commands in Step 2, you can skip this step. However, read through it to become familiar with the process. If you configured R1 and R3 as NTP clients using Cisco IOS commands in Step 2, you can still perform this step but you need to issue the following commands first on each router. R1(config)# no ntp server 10.1.1.2 R1(config)# no ntp update-calendar a. From the CLI, enable the http server on R1. R1(config)# ip http server R1(config)# username admin privilege 15 secret cisco12345

55. R1(config)# ip http authentication local b. Start CCP on PC-A. In the Mange Devices window, add the R1 IP address 192.168.1.1 in the first IP address field. Enter admin in the Username field, and cisco12345 in the Password field. Click the OK button. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 23 of 43 ` c. At the CCP Dashboard, click the Discover button to discover and connect to R1. If discovery fails, use the Discovery Details button to determine what the problem is. Resolve it. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 24 of 43 d. To configure an NTP server, click the Configure button and

56. choose Router > Time > NTP and SNTP. Click Add. e. In the NTP Server IP Address field, enter the IP address of the R2 master NTP router (10.1.1.2) and click OK. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 25 of 43 f. In the Deliver Configuration to Router window, make sure that the Save running config to router’s startup config check box is checked and click Deliver. g. Click OK in the Commands Delivery Status window. h. Open a console connection to the router, and verify the associations and time on R1 after it has made an association with R2. It might take some time for the NTP association to form. R1# show ntp associations address ref clock st when poll reach delay offset disp ~10.1.1.2 127.127.1.1 3 14 64 3 0.000 -280073 3939.7

57. *sys.peer, # selected, +candidate, -outlyer, x falseticker, ~ configured R1# show clock *20:12:24.859 UTC Wed Dec 17 2008 Task 3: Configure syslog Support on R1 and PC-A Step 1: Install the syslog server. The Kiwi Syslog Daemon is a dedicated syslog server. Another application is Tftpd32, which includes a TFTP server, TFTP client, and a syslog server and viewer. You can use either with this lab. Both are available as a free version and run with Microsoft Windows. If a syslog server is not currently installed on the host, download the latest version of Kiwi from http://www.kiwisyslog.com or Tftpd32 from http://tftpd32.jounin.net and install it on your desktop. If it is already installed, go to Step 2. Note: This lab uses the Kiwi syslog server. Step 2: Configure R1 to log messages to the syslog server using the CLI. a. Verify that you have connectivity between R1 and the host by pinging the R1 Fa0/1 interface IP address 192.168.1.1. If it is not successful, troubleshoot as necessary before continuing. b. NTP was configured in Task 2 to synchronize the time on the

58. network. Displaying the correct time and date in syslog messages is vital when using syslog to monitor a network. If the correct time and date of a message is not known, it can be difficult to determine what network event caused the message. Verify that the timestamp service for logging is enabled on the router using the show run command. Use the following command if the timestamp service is not enabled. R1(config)# service timestamps log datetime msec c. Configure the syslog service on the router to send syslog messages to the syslog server. R1(config)# logging host 192.168.1.3 Step 3: Configure the logging severity level on R1. Logging traps can be set to support the logging function. A trap is a threshold that when reached triggers a log message. The level of logging messages can be adjusted to allow the administrator to determine what kinds of messages are sent to the syslog server. Routers support different levels of logging. The eight levels range from 0 (emergencies), indicating that the system is unstable, to 7 (debugging), which sends messages that include router information. http://www.kiwisyslog.com/ http://tftpd32.jounin.net/

59. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 26 of 43 Note: The default level for syslog is 6, informational logging. The default for console and monitor logging is 7, debugging. a. Use the logging trap command to determine the options for the command and the various trap levels available. R1(config)# logging trap ? <0-7> Logging severity level alerts Immediate action needed (severity=1) critical Critical conditions (severity=2) debugging Debugging messages (severity=7) emergencies System is unusable (severity=0) errors Error conditions (severity=3) informational Informational messages (severity=6) notifications Normal but significant conditions (severity=5) warnings Warning conditions (severity=4)

60. <cr> b. Define the level of severity for messages sent to the syslog server. To configure the severity levels, use either the keyword or the severity level number (0–7). Severity Level Keyword Description Severity level Keyword Meaning 0 emergencies System unusable 1 alerts Immediate action required 2 critical Critical conditions 3 errors Error conditions 4 warnings Warning conditions 5 notifications Normal but significant condition 6 informational Informational messages 7 debugging Debugging messages Note: The severity level includes the level specified and anything with a lower severity number. If you set the level to 4 or use the keyword warnings, you capture messages with severity level 4, 3, 2, 1, and 0. c. Use the logging trap command to set the severity level for R1. R1(config)# logging trap warnings d. What is the problem with setting the level of severity too high or too low? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________

61. _____________________________________________________ ___________________________ e. If the command logging trap critical were issued, which severity levels of messages would be logged? _____________________________________________________ ____ Step 4: Display the current status of logging for R1. a. Use the show logging command to see the type and level of logging enabled. R1# show logging Syslog logging: enabled (0 messages dropped, 1 messages rate- limited, 0 flushes, 0 overruns, xml disabled, filtering disabled) No Active Message Discriminator. No Inactive Message Discriminator. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information.

62. Page 27 of 43 Console logging: level debugging, 271 messages logged, xml disabled, filtering disabled Monitor logging: level debugging, 0 messages logged, xml disabled, filtering disabled Buffer logging: disabled, xml disabled, filtering disabled Logging Exception size (4096 bytes) Count and timestamp logging messages: disabled Persistent logging: disabled No active filter modules. ESM: 0 messages dropped Trap logging: level warnings, 0 message lines logged Logging to 192.168.1.3 (udp port 514, audit disabled, authentication disabled, encryption disabled, link up),

63. 0 message lines logged, 0 message lines rate-limited, 0 message lines dropped-by-MD, xml disabled, sequence number disabled filtering disabled b. At what level is console logging enabled? _______________________ c. At what level is trap logging enabled? __________________________ d. What is the IP address of the syslog server? _____________________ e. What port is syslog using? ___________________________________ Step 5: (Optional) Use CCP to configure R1 to log messages to the syslog server. You can also use CCP to configure the router for syslog support. If you previously configured R1 for syslog and trap levels, you can skip this step. If you used Cisco IOS commands in Step 4 to configure R1 syslog and trap levels you can still perform this step but you need to issue the following commands first on the router: R1(config)# no logging 192.168.1.3 R1(config)# no logging trap warnings

64. a. Open CCP and discovery R1 by entering the R1 IP address 192.168.1.1 in the Address field. Use admin for the username and cisco12345 for the password. b. Choose Configure > Router > Logging, and double-click Syslog. c. In the Logging window, click Add and enter the IP address of the syslog server, PC-A (192.168.1.3). Click OK. d. From the Logging Level drop-down menu, select the logging level of Warnings (4). e. Deselect Logging Buffer, and then click OK. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 28 of 43 f. Click Yes in the CCP Warning dialog box. g. In the Deliver Configuration to Router window, click Deliver. Click OK in the Commands Delivery Status window. h. Click Save on the toolbar. Click Yes in the CCP Write to Startup Config Warning window.

65. Step 6: Start the Kiwi Syslog Server. Open the Kiki Syslog Daemon application on your desktop or click the Start button and choose Programs > Kiwi Enterprises > Kiwi Syslog Daemon. Step 7: Verify that logging to the syslog server is occurring. On the syslog server host PC-A, observe messages as they are sent from R1 to the syslog server. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 29 of 43 a. Send a test log message to the kiwi syslog server by choosing File > Send test message to local host. b. Generate a logging message by shutting down the Serial0/0/0 interface on R1 or R2 and then re- enabling it. R1(config)# interface S0/0/0 R1(config-if)# shutdown R1(config-if)# no shutdown

66. The Kiwi syslog screen should look similar to the one below. c. What would happen if you shut down the Fa0/1 interface on R1 (do not actually perform this action)? _____________________________________________________ ___________________________ d. From the R1 global configuration mode, enable the logging of user info when enabling privileged mode and reset the trap level to informational. R1(config)# logging userinfo R1(config)# logging trap informational e. On the Kiwi Syslog Daemon, choose View > Clear Display to clear the log display. f. Exit to the login screen, and enable the admin1 view that you created in Part 3 of this lab. Enter the password admin1pass. R1> enable view admin1 Password: Note: You can enable the desired view from the user EXEC prompt. This allows different users to login without having to know the privileged EXEC mode enable secret password. g. Exit to the login screen again, and enable the admin1 view again. This time enter the password

67. incorrectly. What message was displayed on the syslog server? _____________________________________________________ __________________________ Your screen should look similar to the one below: CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 30 of 43 Part 5: Configure Automated Security Features In Part 5 of this lab, you will do as follows: udit tool on router R1 to identify security risks. Task 1: Restore Router R3 to Its Basic Configuration To avoid confusion as to what was already entered and what AutoSecure provides for the router configuration, start by restoring router R3 to its basic

68. configuration. Step 1: Erase and reload the router. a. Connect to the R3 console and log in as admin. b. Enter privileged EXEC mode. c. Erase the startup config and then reload the router. Step 2: Restore the basic configuration. a. When the router restarts, restore the basic configuration for R3 that was created and saved in Part 1 of this lab. b. Issue the show run command to view the current running configuration. Are there any security related commands? _____________________________________________________ ___________ c. Test connectivity by pinging from host PC-A on the R1 LAN to PC-C on the R3 LAN. If the pings are not successful, troubleshoot the router and PC configurations until they are. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 31 of 43

69. d. Save the running config to the startup config using the copy run start command. Task 2: Use AutoSecure to Secure R3 By using a single command in CLI mode, the AutoSecure feature allows you to disable common IP services that can be exploited for network attacks and enable IP services and features that can aid in the defense of a network when under attack. AutoSecure simplifies the security configuration of a router and hardens the router configuration. Step 1: Use the AutoSecure Cisco IOS feature. a. Enter privileged EXEC mode using the enable command. b. Issue the auto secure command on R3 to lock down the router. Router R2 represents an ISP router, so assume that R3 S0/0/1 is connected to the Internet when prompted by the AutoSecure questions. Respond to the AutoSecure questions as shown in the following output. The responses are bolded. R3# auto secure --- AutoSecure Configuration --- *** AutoSecure configuration enhances the security of the router, but it will not make it absolutely resistant to all security attacks ***

70. AutoSecure will modify the configuration of your device. All configuration changes will be shown. For a detailed explanation of how the configuration changes enhance security and any possible side effects, please refer to Cisco.com for Autosecure documentation. At any prompt you may enter '?' for help. Use ctrl-c to abort this session at any prompt. Gathering information about the router for AutoSecure Is this router connected to internet? [no]: yes Enter the number of interfaces facing the internet [1]: Press ENTER to accept the default of 1 in square brackets. Interface IP-Address OK? Method Status Protocol FastEthernet0/0 unassigned YES NVRAM administratively down down

71. FastEthernet0/1 192.168.3.1 YES NVRAM up up Serial0/0/0 unassigned YES NVRAM administratively down down Serial0/0/1 10.2.2.1 YES NVRAM up up Enter the interface name that is facing the internet: serial0/0/1 Securing Management plane services... CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 32 of 43 Disabling service finger Disabling service pad Disabling udp & tcp small servers Enabling service password encryption Enabling service tcp-keepalives-in Enabling service tcp-keepalives-out

72. Disabling the cdp protocol Disabling the bootp server Disabling the http server Disabling the finger service Disabling source routing Disabling gratuitous arp Here is a sample Security Banner to be shown at every access to device. Modify it to suit your enterprise requirements. Authorized Access only This system is the property of So-&-So-Enterprise. UNAUTHORIZED ACCESS TO THIS DEVICE IS PROHIBITED. You must have explicit permission to access this device. All activities performed on this device are logged. Any violations of access policy will result in disciplinary action.

73. Enter the security banner {Put the banner between k and k, where k is any character}: # Unauthorized Access Prohibited # Enable secret is either not configured or is the same as enable password Enter the new enable secret: cisco12345 Confirm the enable secret : cisco12345 Enter the new enable password: cisco67890 Confirm the enable password: cisco67890 Configuration of local user database Enter the username: admin Enter the password: cisco12345 Confirm the password: cisco12345 Configuring AAA local authentication Configuring Console, Aux and VTY lines for local authentication, exec-timeout, and transport

74. Securing device against Login Attacks Configure the following parameters Blocking Period when Login Attack detected: 60 Maximum Login failures with the device: 2 Maximum time period for crossing the failed login attempts: 30 Configure SSH server? [yes]: Press ENTER to accept the default of yes Enter the domain-name: ccnasecurity.com CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 33 of 43 Configuring interface specific AutoSecure services Disabling the following ip services on all interfaces:

75. no ip redirects no ip proxy-arp no ip unreachables no ip directed-broadcast no ip mask-reply Disabling mop on Ethernet interfaces Securing Forwarding plane services... Enabling CEF (This might impact the memory requirements for your platform) Enabling unicast rpf on all interfaces connected to internet Configure CBAC Firewall feature? [yes/no]: no Tcp intercept feature is used prevent tcp syn attack on the servers in the network. Create autosec_tcp_intercept_list to form the list of servers to which the tcp traffic is to be observed

76. Enable tcp intercept feature? [yes/no]: yes This is the configuration generated: no service finger no service pad no service udp-small-servers no service tcp-small-servers service password-encryption service tcp-keepalives-in service tcp-keepalives-out no cdp run no ip bootp server no ip http server no ip finger no ip source-route no ip gratuitous-arps no ip identd banner motd ^C Unauthorized Access Prohibited ^C

77. security passwords min-length 6 security authentication failure rate 10 log enable secret 5 $1$FmV1$.xZUegmNYFJwJv/oFwwvG1 enable password 7 045802150C2E181B5F username admin password 7 01100F175804575D72 aaa new-model aaa authentication login local_auth local line con 0 login authentication local_auth exec-timeout 5 0 transport output telnet line aux 0 login authentication local_auth exec-timeout 10 0 transport output telnet CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc.

78. All rights reserved. This document is Cisco Public Information. Page 34 of 43 line vty 0 4 login authentication local_auth transport input telnet line tty 1 login authentication local_auth exec-timeout 15 0 login block-for 60 attempts 2 within 30 ip domain-name ccnasecurity.com crypto key generate rsa general-keys modulus 1024 ip ssh time-out 60 ip ssh authentication-retries 2 line vty 0 4 transport input ssh telnet service timestamps debug datetime msec localtime show- timezone service timestamps log datetime msec localtime show-timezone logging facility local2

79. logging trap debugging service sequence-numbers logging console critical logging buffered interface FastEthernet0/0 no ip redirects no ip proxy-arp no ip unreachables no ip directed-broadcast no ip mask-reply no mop enabled interface FastEthernet0/1 no ip redirects no ip proxy-arp no ip unreachables no ip directed-broadcast no ip mask-reply no mop enabled

80. interface Serial0/0/0 no ip redirects no ip proxy-arp no ip unreachables no ip directed-broadcast no ip mask-reply interface Serial0/0/1 no ip redirects no ip proxy-arp no ip unreachables no ip directed-broadcast no ip mask-reply interface Vlan1 no ip redirects no ip proxy-arp no ip unreachables no ip directed-broadcast no ip mask-reply

81. no mop enabled ip cef access-list 100 permit udp any any eq bootpc interface Serial0/0/1 ip verify unicast source reachable-via rx allow-default 100 ip tcp intercept list autosec_tcp_intercept_list CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 35 of 43 ip tcp intercept drop-mode random ip tcp intercept watch-timeout 15 ip tcp intercept connection-timeout 3600 ip tcp intercept max-incomplete low 450 ip tcp intercept max-incomplete high 550 ! end

82. Apply this configuration to running-config? [yes]: <ENTER> Applying the config generated to running-config The name for the keys will be: R3.ccnasecurity.com % The key modulus size is 1024 bits % Generating 1024 bit RSA keys, keys will be non- exportable...[OK] R3# 000037: *Dec 19 21:18:52.495 UTC: %AUTOSEC-1- MODIFIED: AutoSecure configuration has been Modified on this device Step 2: Establish an SSH connection from PC-C to R3. a. Start PuTTy or another SSH client, and log in with the admin account and password cisco12345 created when AutoSecure was run. Enter the IP address of the R3 Fa0/1 interface 192.168.3.1. b. Because AutoSecure configured SSH on R3, you will receive a PuTTY security warning. Click Yes to connect anyway. c. Enter privileged EXEC mode, and verify the R3 configuration using the show run command.

83. d. Issue the show flash command. Is there a file that might be related to AutoSecure, and if so what is its name and when was it created? _____________________________________________________ ___________________________. e. Issue the command more flash:pre_autosec.cfg. What are the contents of this file, and what is its purpose? _____________________________________________________ _______________ f. How would you restore this file if AutoSecure did not produce the desired results? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ Step 3: Contrast the AutoSecure-generated configuration of R3 with the manual configuration of R1. a. What security-related configuration changes were performed on R3 by AutoSecure that were not performed in previous sections of the lab on R1? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________

84. _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 36 of 43 b. What security-related configuration changes were performed in previous sections of the lab that were not performed by AutoSecure? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ c. Identify at least five unneeded services that were locked down by AutoSecure and at least three security measures applied to each interface. Note: Some of the services listed as being disabled in the AutoSecure output above might not appear in the show running-config output because they are already disabled by default for this router and Cisco IOS version.

85. Services disabled include: _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ For each interface, the following were disabled: _____________________________________________________ _____________________ _____________________________________________________ _____________________ _____________________________________________________ _____________________ Step 4: Test connectivity. Ping from PC-A on the R1 LAN to PC-C on the router R3 LAN. Were the pings successful? _____ If pings from PC-A to PC-C are not successful, troubleshoot before continuing. Task 3: Restore R1 to Its Basic Configuration To avoid confusion as to what was previously configured and what CCP Security Audit tool provides for the router configuration, start by restoring router R1 to its basic configuration. Step 1: Erase and reload the router.

86. a. Connect to the R1 console and log in as admin. b. Enter privileged EXEC mode. c. Erase the startup config and then reload the router. Step 2: Restore the basic config. a. When the router restarts, cut and paste the basic startup config for R1 that was created and saved in Part 1 of this lab. b. Test connectivity by pinging from host PC-A to R1. If the pings are not successful, troubleshoot the router and PC configurations to verify connectivity before continuing. c. Save the running config to the startup config using the copy run start command. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 37 of 43 Task 4: Use the CCP Security Audit Tool on R1 to Identify Security Risks In this task, you use the CCP graphical user interface to analyze security vulnerabilities on router R1. CCP is faster than typing each command and provides greater control than the AutoSecure feature.

87. Step 1: Verify that CCP is installed on Host PC. Note: CCP can only be run from a host PC. If CCP is not installed on the PC, consult your instructor for directions. Step 2: Create a CCP user and enable the HTTP secure server on R1. a. Create a privilege-level 15 username and password on R1. R1(config)# username admin privilege 15 secret 0 cisco12345 b. Enable the HTTP secure server on R1. R1(config)# ip http secure-server % Generating 1024 bit RSA keys, keys will be non- exportable...[OK] R1(config)# *Dec 19 17:01:07.763: %SSH-5-ENABLED: SSH 1.99 has been enabled *Dec 19 17:01:08.731: %PKI-4-NOAUTOSAVE: Configuration was modified. Issue "write memory" to save new certificate c. Enable local HTTP authentication on R1. R1(config)# ip http authentication local

88. R1(config)# end d. Save the running config to the startup config. R1# copy run start Step 3: Start CCP. a. From PC-A, run the CCP application. Note: Make sure that all pop-up blockers are turned off in the browser, and make sure that Java is installed and updated. b. In the Manage Devices window, add R1 IP address 192.168.1.1 in the first IP address field. Enter admin in the username field, and cisco12345 in the password field. Click the Connect Securely check box to use secure-server for your connection. Check the Discover All Devices check box then click on the OK button. c. When the Security Certification Alert is displayed, click Yes. d. If the Discovery fails, use the Discovery Details button to determine the problem and resolve it. Step 4: Back up the current router configuration using CCP. a. Back up the router configuration from within CCP by choosing Utilities > Save Configuration to PC. b. Save the configuration on the desktop using the default name of RunningConfig_192.168.1.1.txt.

89. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 38 of 43 Step 5: Begin the security audit. a. Choose Configure > Security > Security Audit. b. Click the Perform security audit button to start the Security Audit wizard, which analyzes potential vulnerabilities. This helps you become familiar with the types of vulnerabilities that Security Audit can identify. You will be given an opportunity to fix all or selected security problems after the audit finishes. Note: The Security Audit tool also provides a One-step lockdown option that performs a function similar to AutoSecure but does not prompt the user for input. c. After you have familiarized yourself with the wizard instructions, click Next. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information.

90. Page 39 of 43 d. On the Security Audit Interface Configuration window, indicate which of the interfaces that are shown are inside (trusted) and which are outside (untrusted). For interface Fa0/1, select Inside (trusted). For interface S0/0/0, select Outside (untrusted). e. Click Next to check security configurations. You can watch the security audit progress. Step 6: Review Security Audit unneeded services list and recommended configurations. a. Scroll through the Security Audit results screen. What are some of the major vulnerabilities listed as Not Passed? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ b. After reviewing the Security Audit report, click Save Report. Save the report to the desktop using the default name CPSecurityAuditReportCard.html. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information.

91. Page 40 of 43 c. Open the report card HTML document you saved on the desktop to view the contents and then close it. Task 5: Fix Security Problems on R1 Using the Security Audit Tool In this task, you will use the Security Audit wizard to make the necessary changes to the router configuration. Step 1: Review the Security Problems Identified window for potential items to fix. a. In the Security Audit window, click Close. b. A window appears listing the items that did not pass the security audit. Click Next without choosing any items. What message did you get? ________________________________________________ c. Click OK to remove the message. Step 2: Fix security problems. With the Security Audit tool, you can fix selected problems or all security problems identified. a. Click Fix All and then click Next to fix all security problems. b. When prompted, enter an enable secret password of cisco12345 and confirm it. c. Enter the text for the login banner: Unauthorized Access

92. Prohibited. Click Next. d. Add the logging host IP address 192.168.1.3, and accept the logging defaults. Click Next. Note: The Advanced Firewall Configuration Wizard window appears, click Next. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 41 of 43 e. Accept the default security settings for inside and outside interfaces and click Next. Note: Click OK to accept the warning. f. For the security level, select Low Security and click Next. g. At the Firewall Configuration Summary, review the configuration and click Finish. h. Scroll through the Summary screen. This screen shows what Security Audit will configure for the router. i. Click Finish to see the actual commands that are delivered to the router. Scroll to review the commands. j. Make sure that Save running config to router’s startup config

93. is selected, and click Deliver. k. Click OK in the Commands Delivery Status window to exit the Security Audit tool. How many commands were delivered to the router? ________________________ Task 6: Review Router Security Configurations with CCP and the CLI In this task, you will use Cisco CCP to review changes made by Security Audit on router R1 and compare them to those made by AutoSecure on R3. Step 1: View the running configs for R1 and R3. a. From the PC-A CCP session with R1, in the utilities area at the bottom left corner, click the View > Running Configuration. b. Using PuTTY, open an SSH connection to router R3, and log in as admin. c. Enter privileged EXEC mode, and issue the show run command. Step 2: Contrast AutoSecure with CCP Security Audit. a. Compare the function and ease of use between AutoSecure and CCP Security Audit. What are some similarities and differences? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________

94. _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ b. Refer to the AutoSecure configuration on R3 and the CCP Security Audit configuration on R1. What are some similarities and differences between the configurations that are generated by AutoSecure and Security Audit? _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ _____________________________________________________ ___________________________ CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 42 of 43 Step 3: Test connectivity.

95. a. Ping from router R1 to the router R3 S0/0/1 interface (10.2.2.1). Were the pings successful? Why or why not? _____________________________________________________ __________________ Note: Firewalls are covered in detail in Chapter 4. b. Ping from PC-A on the R1 LAN to PC-C on the router R3 LAN. Were the pings successful? Why or why not? _____________________________________________________ ___________________ c. Ping from router R3 to the router R2 S0/0/0 interface (10.1.1.2). Were the pings successful? Why or why not? _____________________________________________________ ___________________ d. Ping from router R3 to the router R1 S0/0/0 interface (10.1.1.1). Were the pings successful? Why or why not? _____________________________________________________ ___________________ e. Ping from PC-C on the R3 LAN to PC-A on the router R1 LAN. Were the pings successful? Why or why not? _____________________________________________________ ___________________ Reflection 1. How important is securing router access and monitoring network devices to ensure responsibility and

96. accountability and for thwarting potentially malicious activity. _____________________________________________________ _______________________________ _____________________________________________________ _______________________________ 2. What advantages does SSH have over Telnet? _____________________________________________ 3. What advantages does Telnet have over SSH? _____________________________________________ 4. How scalable is setting up usernames and using the local database for authentication? _____________________________________________________ ______________________________ 5. Why it is better to have centralized logging servers rather than only have the routers log locally? _____________________________________________________ _______________________________ _____________________________________________________ _______________________________ 6. What are some advantages to using automated security mechanisms like AutoSecure and CCP Security Audit? _____________________________________________________ _______________________________ _____________________________________________________ _______________________________ _____________________________________________________ _______________________________ Router Interface Summary Table

97. Router Interface Summary Router Model Ethernet Interface # 1 Ethernet Interface # 2 Serial Interface # 1 Serial Interface # 2 1800 Fast Ethernet 0/0 (Fa0/0) Fast Ethernet 0/1 (Fa0/1) Serial 0/0/0 (S0/0/0) Serial 0/0/1 (S0/0/1) 1900 GigabitEthernet 0/0 GigabitEthernet 0/1 Serial 0/0/0 Serial 0/0/1 CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc.

98. All rights reserved. This document is Cisco Public Information. Page 43 of 43 Router Interface Summary (G0/0) (G0/1) (S0/0/0) (S0/0/1) 2800 Fast Ethernet 0/0 (Fa0/0) Fast Ethernet 0/1 (Fa0/1) Serial 0/0/0 (S0/0/0) Serial 0/0/1 (S0/0/1) 2900 GigabitEthernet 0/0 (G0/0) GigabitEtherne 0/1 (G0/1) Serial 0/0/0 (S0/0/0) Serial 0/0/1 (S0/0/1) Note: To find out how the router is configured, look at the interfaces to identify the type of router and how many interfaces the router has. There is no way to effectively list all the combinations of configurations for each router class. This table includes

99. identifiers for the possible combinations of Ethernet and Serial interfaces in the device. The table does not include any other type of interface, even though a specific router may contain one. An example of this might be an ISDN BRI interface. The string in parenthesis is the legal abbreviation that can be used in Cisco IOS commands to represent the interface. All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 1 of 4 PT Activity: Configure Cisco Routers for Syslog, NTP, and SSH Operations Topology Diagram Addressing Table Device Interface IP Address Subnet Mask Default Gateway Switch Port R1 FA0/1 192.168.1.1 255.255.255.0 N/A S1 FA0/5 S0/0/0 (DCE) 10.1.1.1 255.255.255.252 N/A N/A

100. R2 S0/0/0 10.1.1.2 255.255.255.252 N/A N/A S0/0/1 (DCE) 10.2.2.2 255.255.255.252 N/A N/A R3 FA0/1 192.168.3.1 255.255.255.0 N/A S3 FA0/5 S0/0/1 10.2.2.1 255.255.255.252 N/A N/A PC-A NIC 192.168.1.5 255.255.255.0 192.168.1.1 S1 FA0/6 PC-B NIC 192.168.1.6 255.255.255.0 192.168.1.1 S2 FA0/18 PC-C NIC 192.168.3.5 255.255.255.0 192.168.3.1 S3 FA0/6 CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 2 of 4 Learning Objectives

101. igure VTY lines to accept SSH connections only. Introduction The network topology shows three routers. You will configure NTP and Syslog on all routers. You will configure SSH on R3. Network Time Protocol (NTP) allows routers on the network to synchronize their time settings with an NTP server. A group of NTP clients that obtain time and date information from a single source have more consistent time settings and Syslog messages generated can be analyzed more easily. This can help when troubleshooting issues with network problems and attacks. When NTP is implemented in the network, it can be set up to synchronize to a private master clock, or to a publicly available NTP server on the Internet. The NTP Server is the master NTP server in this lab. You will configure the routers to allow the software clock to be synchronized by NTP to the time server. Also, you will configure the routers to periodically update the hardware clock with the time learned from NTP. Otherwise, the hardware clock will tend to gradually lose or gain time (drift) and the software clock and hardware clock may become out of synchronization with each other. The Syslog Server will provide message logging in this lab. You will configure the routers to identify the remote

102. host (Syslog server) that will receive logging messages. You will need to configure timestamp service for logging on the routers. Displaying the correct time and date in Syslog messages is vital when using Syslog to monitor a network. If the correct time and date of a message is not known, it can be difficult to determine what network event caused the message. R2 is an ISP connected to two remote networks: R1 and R3. The local administrator at R3 can perform most router configurations and troubleshooting; however, since R3 is a managed router, the ISP needs access to R3 for occasional troubleshooting or updates. To provide this access in a secure manner, the administrators have agreed to use Secure Shell (SSH). You use the CLI to configure the router to be managed securely using SSH instead of Telnet. SSH is a network protocol that establishes a secure terminal emulation connection to a router or other networking device. SSH encrypts all information that passes over the network link and provides authentication of the remote computer. SSH is rapidly replacing Telnet as the remote login tool of choice for network professionals. The servers have been pre-configured for NTP and Syslog services respectively. NTP will not require authentication. The routers have been pre-configured with the following:

103. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 3 of 4 Task 1: Configure routers as NTP Clients. Step 1. Test Connectivity -C to R3. ing from R2 to R3. -C to R3. Exit the Telnet session. Step 2. Configure R1, R2 and R3 as NTP clients. Verify client configuration using the command show ntp status. Step 3. Configure routers to update hardware clock. Configure R1, R2 and R3 to periodically update the hardware clock with the time learned from NTP. Verify that the hardware clock was updated using the command show clock. Step 4. Configure routers to timestamp log messages.

104. Configure timestamp service for logging on the routers. Step 0. Task 2: Configure routers to log messages to the Syslog Server. Step 1. Configure the routers to identify the remote host (Syslog Server) that will receive logging messages. The router console will display a message that logging has started. Step 2. Verify logging configuration using the command show logging. Step 3. Examine logs of the Syslog server. Step 0. From the Config tab of the Syslog server’s dialogue box, select the Syslog services button. Observe the logging messages received from the routers. Note: Log messages can be generated on the server by executing commands on the router. For example, entering and exiting global configuration mode will generate an informational configuration message. Task 3: Configure R3 to support SSH connections. Step 1. Configure a domain name. Configure a domain name of ccnasecurity.com on R3. Step 2. Configure users for login from the SSH client on R3. Create a user ID of SSHadmin with the highest possible privilege level and a secret password of ciscosshpa55.

105. Step 3. Configure the incoming VTY lines on R3. Use the local user accounts for mandatory login and validation. Accept only SSH connections. Step 4. Erase existing key pairs on R3. Any existing RSA key pairs should be erased on the router. CCNA Security All contents are Copyright © 1992–2012 Cisco Systems, Inc. All rights reserved. This document is Cisco Public Information. Page 4 of 4 Note: If no keys exist, you might receive this message: % No Signature RSA Keys found in configuration. Step 5. Generate the RSA encryption key pair for R3. The router uses the RSA key pair for authentication and encryption of transmitted SSH data. Configure the RSA keys with a modulus of 1024. The default is 512, and the range is from 360 to 2048. R3(config)# crypto key generate rsa [Enter] The name for the keys will be: R3.ccnasecurity.com Choose the size of the key modulus in the range of 360 to 2048

106. for your General Purpose Keys. Choosing a key modulus greater than 512 may take a few minutes. How many bits in the modulus [512]:1024 % Generating 1024 bit RSA keys, keys will be non- exportable...[OK] Note: The command to generate RSA encryption key pairs for R3 in Packet Tracer differs from those used in the lab. Step 6. Verify the SSH configuration. Use the show ip ssh command to see the current settings. Verify that the authentication timeout and retries are at their default values of 120 and 3. Step 7. Configure SSH timeouts and authentication parameters. The default SSH timeouts and authentication parameters can be altered to be more restrictive. Set the timeout to 90 seconds, the number of authentication retries to 2, and the version to 2. Issue the show ip ssh command again to confirm that the values have been changed. Step 8. Attempt to connect to R3 via Telnet from PC-C.

107. Open the Desktop of PC-C. Select the Command Prompt icon. From PC-C, enter the command to connect to R3 via Telnet. PC> telnet 192.168.3.1 This connection should fail, since R3 has been configured to accept only SSH connections on the virtual terminal lines. Step 9. Connect to R3 using SSH on PC-C. Open the Desktop of PC-C. Select the Command Prompt icon. From PC-C, enter the command to connect to R3 via SSH. When prompted for the password, enter the password configured for the administrator ciscosshpa55. PC> ssh –l SSHadmin 192.168.3.1 Step 10. Connect to R3 using SSH on R2. In order to troubleshoot and maintain the R3 router, the administrator at the ISP must use SSH to access the router CLI. From the CLI of R2, enter the command to connect to R3 via SSH version 2 using the SSHadmin user account. When prompted for the password, enter the password configured for the administrator: ciscosshpa55. R2# ssh –v 2 –l SSHadmin 10.2.2.1 Step 11. Check results. Your completion percentage should be 100%. Click Check Results to see feedback and verification of which