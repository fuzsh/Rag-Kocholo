{
    "id": "correct_subsidiary_00116_3",
    "rank": 31,
    "data": {
        "url": "https://www.juniper.net/documentation/us/en/software/junos/time-mgmt/topics/topic-map/network-time-protocol.html",
        "read_more_link": "",
        "language": "en",
        "title": "Network Time Protocol",
        "top_image": "https://junipernetworks.allegiancetech.com/surveys/images/MRVCXM/juniper_logo.jpg",
        "meta_img": "",
        "images": [
            "https://junipernetworks.allegiancetech.com/surveys/images/MRVCXM/juniper_logo.jpg"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "SUMMARYÂ Network Time Protocol (NTP) is a protocol used to synchronize time on all the devices in a network.",
        "meta_lang": "en",
        "meta_favicon": "",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "Network Time Protocol (NTP) is a widely used protocol used to synchronize the clocks of routers and other hardware devices on the Internet. Primary NTP servers are synchronized to a reference clock directly traceable to Coordinated Universal Time (UTC). Reference clocks include GPS receivers and telephone modem services, NTP accuracy expectations depend on the environment application requirements. However, NTP can generally maintain time to within tens of milliseconds over the public internet.\n\nNTP is defined in the RFC 5905: Network Time Protocol Version 4: Protocol and Algorithms Specification\n\nDevices running Junos OS can be configured to act as an NTP client, a secondary NTP server, or a primary NTP server. These variations are as follows:\n\nPrimary NTP ServerâPrimary NTP servers are synchronized to a reference clock that is directly traceable to UTC. These servers then re-distribute this time data downstream to other Secondary NTP servers or NTP clients.\n\nSecondary NTP ServerâSecondary NTP servers are synchronized to a primary or secondary NTP server. These servers then re-distribute this data downstream to other Secondary NTP servers or NTP clients.\n\nNTP ClientâNTP clients are synchronized to a primary or secondary NTP server. Clients do not re-distribute this time data to other devices.\n\nNote:\n\nThe NTP subnet includes a number of widely accessible public primary time servers that can be used as a networkâs primary NTP server. Juniper Networks strongly recommends that you authenticate any primary servers you use.\n\nEach device on your network can be configured to run in one or more of the following NTP modes:\n\nBroadcast ModeâOne or more devices is set up to transmit time information to a specified broadcast or multicast address. Other devices listen for time sync packets on these addresses. This mode is less accurate than the client/server mode.\n\nClient/Server ModeâDevices are organized hierarchically across the network in client/server relationships.\n\nSymmetric Active (peer) ModeâTwo or more devices are configured as NTP server peers to provide redundancy.\n\nBy default, if an NTP client time drifts so that the difference in time from the NTP server exceeds 128 milliseconds, the NTP client is automatically stepped back into synchronization. The NTP client will still synchronize with the server even if the offset between the NTP client and server exceeds the 1000-second threshold. You can manually request that a device synchronize with an NTP server by using the set date ntp operational command on the router. On devices running Junos OS that have dual Routing Engines, the backup Routing Engine synchronizes directly with the primary Routing Engine.\n\nAll Juniper platforms that run Junos OS support the leap second adjustment. By default, if the NTP server is aware of the leap second calculations, then the Junos device will automatically add the 1 second delay. PTP (Precision Time Protocol) is used to detect and propagate leap second synchronization changes throughout all nodes in a network. NTP is also required for Common Criteria compliance. For more information on the Common Criteria certification, see Public Sector Certifications.\n\nFor more details about the Network Time Protocol, go to the Network Time Foundation website at http://www.ntp.org.\n\nNTP supports IPv4 VPN and IPv6 routing and forwarding (VRF) requests on Junos OS. VRF request is also supported on Junos OS Evolved Release 20.2R1 onwards. This enables an NTP server running on a provider edge (PE) router to respond to NTP requests from a customer edge (CE) router. As a result, a PE router can process any NTP request packet coming from different routing instances.\n\nDebugging and troubleshooting are much easier when the timestamps in the log files of all the routers or switches are synchronized, because events that span the network can be correlated with synchronous entries in multiple logs. We strongly recommend using the Network Time Protocol (NTP) to synchronize the system clocks of routers, switches, and other network equipment.\n\nBy default, NTP operates in an entirely unauthenticated manner. If a malicious attempt to influence the accuracy of a router or switchâs clock succeeds, it could have negative effects on system logging, make troubleshooting and intrusion detection more difficult, and impede other management functions.\n\nThe following sample configuration synchronizes all the routers or switches in the network to a single time source. We recommend using authentication to make sure that the NTP peer is trusted. The boot-server statement identifies the server from which the initial time of day and date is obtained when the router boots. The server statement identifies the NTP server used for periodic time synchronization. The source-address statement enables you to specify one source address per family for each routing instance, The authentication-key statement specifies that an HMAC-Message Digest 5 (MD5) scheme should be used to hash the key value for authentication, which prevents the router or switch from synchronizing with an attackerâs host posing as the time server.\n\n[edit] system { ntp { authentication-key 2 type md5 value \"$ABC123\"; # SECRET-DATA boot-server 10.1.4.1; server 10.1.4.2 key 2; source-address 10.1.4.3 routing-instance ntp-instance; trusted key 2; } }\n\nTime synchronization can be authenticated to ensure that the switch obtains its time services only from known sources. By default, network time synchronization is unauthenticated. The switch will synchronize to whatever system appears to have the most accurate time. We strongly encourage you to configure authentication of network time services.\n\nTo authenticate other time servers, include the trusted-key statement at the [edit system ntp] hierarchy level. The trusted keys refer to the configured key that is trusted and used by NTP for secure clock synchronization. Any configured key not referenced in the trusted-key is not qualified and is rejected by NTP. Only time servers that transmit network time packets containing one of the specified key numbers are eligible to be synchronized. Additionally, the key needs to match the value configured for that key number. Other systems can synchronize to the local switch without being authenticated.\n\n[edit system ntp] trusted-key[ key-numbers ];\n\nEach key can be any 32-bit unsigned integer except 0. Include the key option in the peer, server, or broadcast statements to transmit the specified authentication key when transmitting packets. The key is necessary if the remote system has authentication enabled so that it can synchronize to the local system.\n\nTo define the authentication keys, include the authentication-key statement at the [edit system ntp] hierarchy level:\n\n[edit system ntp] authentication-key key-number type type value password;\n\nnumber is the key number, type is the authentication type (only Message Digest 5 [MD5], SHA1, and SHA256 are supported), and password is the password for this key. The key number, type, and password must match on all systems using that particular key for authentication. There must be no space in the password for configuring the Network Time Protocol (NTP) authentication-key.\n\nNote:\n\nEX4300, EX4600, and related non-MP devices such as QFX5100 (EX and QFX models that run BSD6) support only MD5 authentication for NTP and do not support SHA-1 and SHA-256 authentication types."
    }
}