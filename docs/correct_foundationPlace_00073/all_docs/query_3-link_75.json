{
    "id": "correct_foundationPlace_00073_3",
    "rank": 75,
    "data": {
        "url": "https://forums.autodesk.com/t5/fusion-manufacture/post-processor-problems-with-cnc-6040-5-axis-mill/td-p/10668113",
        "read_more_link": "",
        "language": "en",
        "title": "Solved: Post Processor problems with CNC 6040 5",
        "top_image": "https://forums.autodesk.com/t5/image/serverpage/image-id/973615iAD63A0F82C4F2A82?v=v2",
        "meta_img": "https://forums.autodesk.com/t5/image/serverpage/image-id/973615iAD63A0F82C4F2A82?v=v2",
        "images": [
            "https://forums.autodesk.com/html/@E3EF46B230710BF938EDB3C46A0BE159/assets/machine-translation-info-icon.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/image-id/973615iAD63A0F82C4F2A82/image-size/medium?v=v2&px=400",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/t5/image/serverpage/image-id/975439i2008A363DAACA549/image-size/medium?v=v2&px=400",
            "https://forums.autodesk.com/t5/image/serverpage/image-id/975443iC2BD5ED29957711C/image-size/medium?v=v2&px=400",
            "https://forums.autodesk.com/t5/image/serverpage/image-id/975447i715EDC2A5205EFDE/image-size/medium?v=v2&px=400",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/t5/image/serverpage/image-id/975522iDDCEE995C6D205EB/image-size/medium?v=v2&px=400",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@4AF0D5778CA8F669245BE7852AAAD971/rank_icons/5.png",
            "https://forums.autodesk.com/t5/image/serverpage/avatar-name/default/avatar-theme/chrome/avatar-collection/Default/avatar-display-size/unspecified/version/2?xdesc=1.0",
            "https://forums.autodesk.com/html/@8FD10A6A1378FD5C56E7E603906384B5/rank_icons/11.png",
            "https://forums.autodesk.com/skins/images/548128956897A5A026EE669E33D85696/responsive_peak/images/icon_anonymous_message.png",
            "https://forums.autodesk.com/skins/images/548128956897A5A026EE669E33D85696/responsive_peak/images/icon_anonymous_message.png",
            "https://forums.autodesk.com/t5/image/serverpage/image-id/1383253i9E0524ED60E3BA04/image-size/large?v=v2&px=999",
            "https://forums.autodesk.com/t5/image/serverpage/image-id/1383268i93C59FE60D75CDE9/image-size/large?v=v2&px=999"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "rolds105",
            "forums.autodesk.com",
            "user-id"
        ],
        "publish_date": "2021-10-05T15:56:10+00:00",
        "summary": "",
        "meta_description": "Solved: I have a recently purchased 5-axis Chinese CNC 6040 mill. I’ll comment on the quality of this mill and the support of the Chinese with",
        "meta_lang": "en",
        "meta_favicon": "https://damassets.autodesk.net/content/dam/autodesk/logos/autodesk-symbol-32x32.svg",
        "meta_site_name": "Autodesk Community",
        "canonical_link": "https://forums.autodesk.com/t5/fusion-manufacture/post-processor-problems-with-cnc-6040-5-axis-mill/td-p/10668113",
        "text": "I have a recently purchased 5-axis Chinese CNC 6040 mill. I’ll comment on the quality of this mill and the support of the Chinese with another post.\n\nI'm using a: \"CNC Router Parts(Mach3Mill)/CNC6040\" post processor with my Fusion360. I’ve verified that the edits to enable the A and B axis are correct.\n\nMy problem is the tool keeps running into the mounting plate. Notice the model is at the top of the stock cylinder so there should be no tool paths anywhere near the mounting plate.\n\nThe WCS is at the rotation point of the A&B axis. I've followed all the setup rules as I understand them and tried many variations, but the tool keeps running into the Mounting plate.\n\nThe first thing the G-code does is rotate the A-axis 90-degrees. The absolute tool path ranges should then be Z-axis +- 2”, X and Y 0 to +2”. The actual ranges are X-axis -2.5 to +2.6, Y-axis -3.4 to +2.1, Z-axis 0 to +2.1.\n\nIt’s like the tool path was calculated without taking into account the A-axis 90 degree rotation. I’ve tried moving the WCS to the top of the stock, same result. I’ve tried pointing the Z-axis at the tool after the 90-degree rotation, same result. I’ve tried re-orienting the tool orientation X and Y axis, same result.\n\nThis .f3z and the .tap file are attached along with a diagram of the CNC 6040 mill.\n\nAny clues to what is wrong?\n\nI can be directly contacted at: Rolds105@gmail.com\n\nRodger Olds\n\n(928-925-0397)\n\nPrescott Valley, Arizona\n\n@rolds105\n\nNeed to know which axis your A and B axis revolve around, is the A revolving around the X and the B revolving around the Z ???\n\nAlso you need to go back and sort out your Model, it is not the same height at all corners, consequently code I generate here has for example a B axis move at 0.098 degrees instead of 0.000 degrees, nothing seems to be aligned correctly.\n\nWhen that is sorted out we can then look at your programming and your actual machine setup, I would have expected the Tool orientation to be in the Z and X axis.\n\nCan you also upload a copy of the Post Processor that you are using.\n\nThanks, I appreciate your input.\n\nIf you look at my tetrahedron model I've defined a sketch that enables me to use it as the machining boundry to mill the tetra from the side. I know there are simpler ways to do this and you suggest one of them, but I chose this way because the other four platonic solids are best milled from the side. So the 90 degree A-axis rotation is correct.\n\nI'll find and try a downloaded PP if I can find it.\n\nThe Chinese people who built the CNC 6040 have been very responsive to my requests/concerns. However, their english is marginal at best, and their documentation frankely is bad. They can't even tell me which direction the Axis should point for the Mach3 interface and Fusion360. Since this is a Fusion360 forum I won't discuss the lousy quality of their product.\n\nI've decided to go back to basics and model and mill test pieces. i.e. Flat slab with holes at the cardinal points. This will tell me if the X,Y, and Z axis directions are correct. Next design a 3D test to verify the A, B axis are correct.\n\nI'll report the results later.\n\nThanks again.\n\n@rolds105\n\nTo rotate around an A axis then your WCS should be in the center of the stock if you are doing all four sides, below is an image of a little test file I have for 4th (A axis) machining, it only does three sides but easily converted to do four, just add an operation to the 4th side 🙂\n\nAs you can clearly see the WCS is in the center and the whole thing rotates around that WCS, I have attached the file and I have tried generating G code using the \"CNC Router Parts(Mach3Mill)\" post Processor, it generates the code correctly so there is nothing wrong with the Post Processors, only the way you are setting things up.\n\nIn the code the A axis is correctly moving around the center producing the correct A90 B180 position for the first operation, then A45 B180 for the second operation, this is how this particular PP is configured. The B180 never changes throughout the program because there are no B axis moves programed but is a good example of A axis movement for you 🙂 🙂\n\nCode example below\n\nIf I use a Mach3 or Mach4 Post Processor then it also posts out with no errors 🙂\n\nYou should be able to run the Simulation and correctly generate the G code at your end, set your simulation to \"Tool\" in the Viewpoint options and you should see the stock move around to position for the operations just as it would do in your machine.\n\nP.S. If you get an error about Tool Lengths then go to the area shown below and change the default \"256\" to the \"1500\" as in the image and it will then work OK, apologies, forgot to change the Tool information in the Tool Library in the program, Oops 🙂 🙂\n\nA dummy’s guide to locating the WCS for a CNC 6040 5-Axis Mill\n\nThe five axes CNC 6040’s\n\nin addition to the three X, Y, and Z planar axes, have two rotation axes A and B. The A-Axis rotates around the X-axis and the B-Axis rotates around the Z-Axis. In order for the Fusion360 CAM software post processor to correctly compute a 3D tool path, the Work Coordinate System (WCS) must be located at the center of the A and B axes rotation point. The WCS point in the software and the WCS point of the physical machine must be the same point in 3D space. So how do you sync up these two points?\n\nMany of the beginner uTube videos for Fusion360 say that the WCS can be any arbitrary convenient point. This is not true for 3D 5-Axes milling. The WCS must be placed in the software CAM model where it will be at the machine WCS point when the stock is mounted in the machine. The trick is to measure where the machine WCS point is in relation to where the model stock will be mounted and reflect that in the CAM software setup. That will sync up the two WCS points in 3D space.\n\nThis is done by measuring the distance from the B-table, stock mounting point to the A-axis rotation point. In the CNC 6040 the B-Axis rotation point is easily found to be the center of the rotating B-table. The A-Axis rotation point is a little more difficult.\n\nWith the B-table leveled at A-axis zero degrees, (I use a precision level device) determine the Z-axis/B-rotation axis up to where it intersects the X-Axis/A-rotation axis. This is easier said than done. Normally this type of operation is done with a probing operation. The Mach3 software doesn’t provide a 3D probing function. However, there is an add-on software tool that provides this functionality. There is a blog post on the Fusion360 Autodesk forums called:\n\nFusion360 Post Processor for Mach3 with WCS Probing Support\n\nThat addresses this issue and provides post processor software tools.\n\nIn lieu of this software tool, here is the manual procedure to accomplish this.\n\nTo determine the distance from the B-table to the A rotation axis, rotate the A-Axis +90 degrees. Mount an edge finder or probing tool with the diameter d in the spindle. Using the jogging function locate the edge of the B-table and zero the Y DRO. (Data Readout) Rotate the A-Axis 180 degrees to -90 degrees, locate the B-table edge, record the Y-coordinate call it Y. The distance D from the B-table to the A rotation axis is: D = (|Y|+2d)/2. |Y| means absolute value. My CNC 6040 D = 1.791”\n\nEach individual milling machine will have a unique D and it will not change from project to project. D only needs to be determined once.\n\nMount the stock on the B-table where the software WCS is aligned centered on the B-table rotation Axis i.e. center of the B-table.\n\nIn the Fusion360 CAD setup, locate the WCS the distance D up from the bottom of the stock where it sits on the B-table. This will place the software and hardware WCS’s at the same point in 3D space and the 3D G-code computations will be based on that point.\n\nI constructed a measurement jig that screws into the B-table. It provides a tool probing point that is a distance D up from the B-table. At each tool change, probe the jig to determine what the new tool offset is.\n\nI hope this is not too confusing. Moving from 3 axis 2D milling to 5 axis 3D milling takes some getting used to.\n\nCan somebody enlighten me on the orientation direction of the X, Y, Z axis. The picture I attached in my original post shows axes directions. Lets say the Gcode wants to move the tool on the part one inch in the +X direction. the table has to move 1 inch in the negative direction. So what is that chart showing? The movement of the mill table or the tool movement direction?\n\nI guess some mills fix the stock on the table and moves the tool, but the CNC 6040 fixes the tool (spindle) in the X and Y direction and moves the table. To make things more confusing the Z axis movement moves the tool up and down. Examining the Gcode of the post processor I'm using for the CNC 6040 it seems the post processor is also confused about the axes directions and it gets really confused if there is an A-axis rotation.\n\nTake a look at this test cube model I've attached. The cube is a 3x3x3 inch cube with the WCS at the center of the cube. Pocket1 drills four holes on the top face and Pocket2 drills four holes in the front face. The Gcode does a +90 degree X-axis rotation for the Pocket2 tool paths. That's when the tool paths get crazy starting at line# 1114. After the 90 degree rotation the front face is now the top face. The Z-axis position after the rotation should not go negative, it does.\n\nAm I crazy?"
    }
}