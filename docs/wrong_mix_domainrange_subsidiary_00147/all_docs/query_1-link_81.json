{
    "id": "wrong_mix_domainrange_subsidiary_00147_1",
    "rank": 81,
    "data": {
        "url": "https://www.cisco.com/c/en/us/td/docs/routers/sdwan/configuration/sdwan-xe-gs-book/install-upgrade-17-2-later.html",
        "read_more_link": "",
        "language": "en",
        "title": "Cisco Catalyst SD-WAN Getting Started Guide - Install and Upgrade Cisco IOS XE Catalyst SD-WAN Release 17.2.1r and Later [Cisco SD-WAN]",
        "top_image": "",
        "meta_img": "",
        "images": [
            "https://www.cisco.com/etc/designs/cdc/fw/i/ic_clear_gray.png",
            "https://www.cisco.com/etc/designs/cdc/fw/i/ic_clear_gray.png",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/warn.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/content/dam/en/us/td/i/templates/note.gif",
            "https://www.cisco.com/c/dam/cdc/i/Feedback_OceanBlue.png",
            "https://www.cisco.com/etc/designs/cdc/fw/i/icon_lock_small.png",
            "https://cisco.112.2o7.net/b/ss/cisco-mobile/5/12345"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2024-07-11T06:17:04",
        "summary": "",
        "meta_description": "Starting with Cisco IOS XE Catalyst SD-WAN Release 17.2.1r, use the universalk9 image to deploy both Cisco IOS XE SD-WAN and Cisco IOS XE on Cisco IOS XE devices.",
        "meta_lang": "en",
        "meta_favicon": "",
        "meta_site_name": "Cisco",
        "canonical_link": "https://www.cisco.com/c/en/us/td/docs/routers/sdwan/configuration/sdwan-xe-gs-book/install-upgrade-17-2-later.html",
        "text": "Install and Upgrade Cisco IOS XE Catalyst SD-WAN Release 17.2.1r and Later\n\nNote\n\nTo achieve simplification and consistency, the Cisco SD-WAN solution has been rebranded as Cisco Catalyst SD-WAN. In addition, from Cisco IOS XE SD-WAN Release 17.12.1a and Cisco Catalyst SD-WAN Release 20.12.1, the following component changes are applicable: Cisco vManage to Cisco Catalyst SD-WAN Manager, Cisco vAnalytics to Cisco Catalyst SD-WAN Analytics, Cisco vBond to Cisco Catalyst SD-WAN Validator, Cisco vSmart to Cisco Catalyst SD-WAN Controller, and Cisco Controllers to Cisco Catalyst SD-WAN Control Components. See the latest Release Notes for a comprehensive list of all the component brand name changes. While we transition to the new names, some inconsistencies might be present in the documentation set because of a phased approach to the user interface updates of the software product.\n\nTable 1. Feature History\n\nFeature Name\n\nRelease Information\n\nDescription\n\nStarting with Cisco IOS XE Catalyst SD-WAN Release 17.2.1r, use the universalk9 image to deploy both Cisco IOS XE Catalyst SD-WAN and Cisco IOS XE on Cisco IOS XE Catalyst SD-WAN devices.\n\nStarting Cisco IOS XE Catalyst SD-WAN Release 17.2.1r, UCMK9 image is not available.\n\nThis release helps in seamless upgrades of both the Cisco Catalyst SD-WAN and non Cisco Catalyst SD-WAN features and deployments.\n\nAccess the Cisco IOS XE and Cisco IOS XE Catalyst SD-WAN functionality through Autonomous and Controller execution modes, respectively. The Autonomous mode is the default mode for the routers and includes the Cisco IOS XE functionality. To access Cisco IOS XE Catalyst SD-WAN functionality, switch to the Controller mode. You can use the existing Plug and Play Workflow to determine the mode of the device.\n\nPlatforms Supported in Controller Mode\n\nPlatforms Supported in Controller Mode\n\nCisco ASR 1000 Series Aggregation Services Routers\n\nModular Cisco ASR 1006-X with ASR1000-RP3 module (Cisco IOS XE Catalyst SD-WAN Release 17.5.1a or later, see Cisco ASR 1006-X with an RP3 Module.)\n\nCisco ISR 1000 Series Integrated Services Routers\n\nCisco ISR 4000 Series Integrated Services Routers\n\nCisco 1101 Industrial Integrated Services Router\n\nCisco CSR 1000v Series Cloud Services Routers\n\nCisco Integrated Services Virtual Router (ISRv)\n\nCisco Catalyst 8200 Series Edge Platforms\n\nCisco Catalyst 8300 Series Edge Platforms\n\nCisco Catalyst 8500 Series Edge Platforms\n\nCisco Catalyst 8000V Edge Software (Cisco IOS XE Catalyst SD-WAN Release 17.4.1a or later)\n\nPlatforms Not Supported in Controller Mode\n\nModular platforms based on the following ASR 1000 Series Routers are not supported in controller mode:\n\nASR1000-RP2\n\nCrypto Modules Supported in Controller Mode\n\nThe following crypto modules are required for the ASR 1000 series routers:\n\nASR1001HX-IPSECHW, for the ASR 1001-HX\n\nASR1002HX-IPSECHW, for the ASR 1002-HX\n\nCisco IOS XE Image Compatibility\n\nDeployment Image Version\n\nCisco Catalyst SD-WAN\n\nNon Cisco Catalyst SD-WAN\n\nCisco IOS XE Releases 16.9.x, 16.10.x, 16.11.x, 16.12.x\n\nucmk9\n\nuniversalk9\n\nCisco IOS XE Release 17.1.x\n\nNA\n\nuniversalk9\n\nCisco IOS XE Release 17.2.x and later\n\nuniversalk9*\n\nuniversalk9**\n\n* For Cisco Catalyst SD-WAN use case, non-LI and non-payload encryption image types are not supported.\n\n** For non Cisco Catalyst SD-WAN use case, non-LI and non-payload encryption image types are supported (universalk9_noli, universalk9_npe, universalk9_npe_noli).\n\nUpgrade Considerations\n\nThe following Cisco IOS XE Catalyst SD-WAN devices support multirate interfaces and support the 1GE SFP (optical and CU) and 10GE SFP+ (optical and CU) modules on their 10G interfaces ports:\n\nCisco ASR 1001-HX Router\n\nCisco Catalyst 8500-12X4QC\n\nCisco Catalyst 8500-12X\n\nThese devices support auto-negotiation on 10G interfaces ports with 1GE SFP (optical and CU) modules. The following notes apply to auto-negotiation in both SD-WAN and non-SD-WAN modes:\n\nFor releases before Cisco IOS XE 17.6.1a, auto-negotiation can be configured using the CLI.\n\nFor releases before Cisco IOS XE 17.6.1a, if you use the CLI or Cisco Catalyst SD-WAN to reboot a device with a 10G interface that includes a 10GE SFP+ module, that interface will not come up. In this situation, use Cisco Catalyst SD-WAN or the CLI to configure no negotiation auto for the interface, then reboot the device.\n\nFrom Cisco IOS XE Release 17.6.3a, auto neg values for auto-negotiation are pushed to 10G interfaces on supported devices through feature templates. Ensure that you know which SFP module is on which 10G interface on a device so that you can properly configure the feature template.\n\nFrom Cisco IOS XE Release 17.6.3a, the negotiation auto command is not supported on a 10G interface that includes a 10GE SFP+ module.\n\nFrom Cisco IOS XE Release 17.6.3a, the no negotiation auto command with the default OFF option must be sent through a feature template to all 10G interfaces that include a 10GE SFP+ module. Otherwise, the template push fails.\n\nBefore upgrading to Cisco IOS XE Release 17.6.3a, use a feature template, a CLI add-on feature templates, or the CLI to apply no negotiation auto to all 10G interfaces that include a 10GE SFP+ module.\n\nIf you upgrade to Cisco IOS XE Release 17.6.3a from a release in which auto-negotiation was enabled on a 10G interface that includes a 10GE SFP+ module, that interface will not come up. In this situation, use the CLI to configure no negotiation auto for the interface after the upgrade completes.\n\nBefore upgrading to Cisco Catalyst SD-WAN Manager Release 20.12.1 or Cisco IOS XE Catalyst SD-WAN Release 17.12.1a or later releases, contact Cisco TAC to check and drop any non-compatible indexes. Non-compatible old index can impact successful upgrade to newer version.\n\nRestrictions\n\nRestrictions for single \"universalk9\" image\n\nDual-IOSd is supported only in autonomous mode.\n\nImages without payload encryption and NO-LI (universalk9_npe, universalk9_noli, universalk9_npe_noli) images are not supported in controller mode. Only universalk9 images are supported.\n\nAfter onboarding and determining the mode of operation, changing from Controller mode to Autonomous mode or vice-versa, results in the loss of configuration.\n\nReset button functionality is not supported in controller mode on Cisco ISR 1000 series Integrated Service Routers. The reset button does not function to restore a golden image or configuration in controller mode.\n\nAuto-install (Python and TCL scripts) and ZTP—Autoinstall and ZTP are not supported in controller mode. If DHCP discovers an attempt to install using either of these processes, a mode change to Autonomous mode is triggered.\n\nWebUI—In controller mode, WebUI is not supported and an error message is displayed, if used.\n\nSelf-Signed Trustpoint\n\nA self-signed trustpoint is generated and loaded to a Cisco IOS XE Catalyst SD-WAN device when the device boots up. If this trustpoint is deleted for any reason, you can generate and load a new trustpoint by rebooting the device. The new key may be different than the deleted one.\n\nIntroducing Autonomous and Controller Mode\n\nThe Cisco IOS XE Catalyst SD-WAN Release 17.2.1r release introduces two installation modes – Autonomous and Controller modes. The autonomous mode supports the functionality of Cisco IOS XE non Cisco Catalyst SD-WAN deployment and the controller mode supports the Cisco Catalyst SD-WAN solution.\n\nThe following are the main differences between Autonomous mode and Controller mode:\n\nTable 2.\n\nFeature\n\nAutonomous Mode\n\nController Mode\n\nSoftware Installation for Cisco IOS XE Routers\n\nDownload the Software for Cisco IOS XE Release 17.2.1r or Later\n\nDownload the router-model-universalk9.​release-number. image for Cisco IOS XE Catalyst SD-WAN Release 17.2.1r or later software from the Cisco site https://software.cisco.com .\n\nInstall Software on Cisco ASR, Cisco ISR and Cisco ENCS Platforms\n\nRefer to the following documents for installation instructions:\n\nCisco ISR 1000 Series Integrated Services Router\n\nCisco ISR 4000 Series Integrated Services Routers\n\nCisco ASR 1000 Series Aggregation Services Routers\n\nInstalling Cisco Enterprise NFVIS on Cisco ENCS 5100 and ENCS 5400\n\nInstall Software on Cisco CSR 1000v Platform\n\nBased on the cloud in which you are deploying the CSR 1000v instance, see the following to perform the bootstrap and/or the day 0 configuration:\n\nDeploying the OVA to the VM\n\nManually creating the Cisco CSR 1000v VM using the .iso file (Citrix XenServer)\n\nCreating a CSR 1000v VM using the self installing .run package\n\nManually creating the VM using the .iso file (Microsoft Hyper-V)\n\nBooting the CSR 1000v Instance\n\nDeploying a CSR 1000v VM Using Custom Data\n\nDeploying a CSR 1000v VM on Microsoft Azure\n\nInstall a Cisco Catalyst 8000V Edge Software Platform\n\nTable 3. Feature History\n\nFeature Name\n\nRelease Information\n\nDescription\n\nBeginning with Cisco IOS XE Catalyst SD-WAN Release 17.4.1a, Cisco Catalyst SD-WAN supports the Cisco Catalyst 8000V virtual router platform, which replaces the Cisco CSR1000V and Cisco ISRv. Installing the Cisco Catalyst 8000V in an Cisco Catalyst SD-WAN environment requires Cisco vManage Release 20.4.1 or later.\n\nDownload the Cisco Catalyst 8000V software image that is appropriate for your method of deployment. For example, this can be an OVA file for ESXi, or a QCOW2 image for OpenStack or KVM. Do not choose an ISO image. Have the image ready to upload to the Cisco SD-WAN Manager software image repository. The file name begins with: c8000v-universalk9\n\nFor complete information about the platform, including installation in KVM, ESXi, and OpenStack environments, see the Cisco Catalyst 8000V Edge Software Installation and Configuration Guide. For information about creating a bootstrap file for onboarding the Cisco Catalyst 8000V into Cisco Catalyst SD-WAN, see Bootstrap Process for ​Cisco Catalyst SD-WAN Cloud-Hosted Devices.\n\nClean Install\n\nWe recommend a clean install of the Cisco Catalyst 8000V. This ensures support for all features, provides the most up-to-date licensing, and ensures that devices and the controller stay synchronized. For cases where upgrade is necessary, see the procedure in Upgrade to Cisco IOS XE Release 17.2.1r or Later.\n\nUpgrading a Cisco CSR1000V to a Cisco Catalyst 8000V\n\nUpgrading a Cisco CSR1000V or Cisco ISRv virtual router to Cisco IOS XE Catalyst SD-WAN Release 17.4.1a includes upgrading to the Cisco Catalyst 8000V. Note the following:\n\nThe Cisco Catalyst 8000V preserves all of the functionality available on Cisco CSR1000V or Cisco ISRv platforms.\n\nPerforming the upgrade in Cisco SD-WAN Manager preserves the configuration of the device(s) being upgraded.\n\nOpenStack\n\nInstalling a Cisco Catalyst 8000V on the OpenStack Train release requires using a Cisco IOS XE Catalyst SD-WAN Release 17.7.1a or later image for the Cisco Catalyst 8000V.\n\nCisco does not support installing a Cisco Catalyst 8000V on OpenStack using an earlier image, or installing on OpenStack using an earlier image and upgrading to Cisco IOS XE Catalyst SD-WAN Release 17.7.1a.\n\nPlug and Play in Cisco IOS XE Catalyst SD-WAN Release 17.2.1r and Later Releases\n\nPlug and Play Onboarding Workflow\n\nPlace an order for the device in Cisco Commerce with Smart Account and Virtual Account details of the customer.\n\nThe device information from Cisco Commerce like Device serial number, Smart Account, and Virtual Account are added to the Plug and Play portal.\n\nAdd a Cisco SD-WAN Validator controller profile into the Plug and Play (PnP) portal for the same Smart Account and Virtual Accounts.\n\nAssociate the new device to the Cisco SD-WAN Validator controller profile manually.\n\nPnP sends all relevant information including Cisco SD-WAN Validator details, device serial number, organization name, and network ID to Zero Touch Provisioning (ZTP).\n\nDownload the device serial number file (provisioning file) from PnP and upload it to Cisco SD-WAN Manager. The devices are now available on Cisco SD-WAN Manager. You can also use the Sync Smart Account option on Cisco SD-WAN Manager to sync the device with your virtual account and populate the device in Cisco SD-WAN Manager.\n\nNote\n\nIf the ZTP process for a device is interrupted because the device reloads or power cycles, the ZTP process does not restart and the device comes online with the Cisco SD-WAN Manager image that was in its original configuration. In this situation, upgrade the device to the desired Cisco SD-WAN Manager release manually.\n\nMode Discovery with Plug and Play Onboarding\n\nThe PnP-based discovery process determines the mode in which the device operates, based on the controller discovery and initiates a mode change, if required. The mode change results in a reboot of the device. Once reboot is complete, the device performs appropriate discovery process.\n\nWhen you upgrade to Cisco IOS XE Catalyst SD-WAN Release 17.2.1r or later, on a Cisco device that already runs a Cisco IOS XE or Cisco Catalyst SD-WAN image, the device starts in autonomous mode or controller mode depending on the configured controller.\n\nPlug and Play (PnP) deployment include the following discovery process scenarios:\n\nTable 4.\n\nBoot up Mode\n\nDeployment Mode\n\nOn-boarding agent\n\nCisco SD-WAN Validator\n\nDiscovery Process\n\nMode Change\n\nNon-PnP Onboarding\n\nCreating a Cisco Catalyst SD-WAN Bootstrap Configuration File\n\nSee On-Site Bootstrap Process for ​Cisco Catalyst SD-WAN Devices and Generate a Bootstrap File For Cisco IOS XE Catalyst SD-WAN Devices Using the CLI for information about generating a bootstrap file.\n\nNew Installation: Mode Change Device Day Zero Scenario\n\nIf the device is running a pre-17.2 universalk9 image on a new box, or for an existing box where you performed write erase and reload and loaded a Cisco IOS XE 17.2 or newer image, the device boots in day zero configuration and in autonomous mode.\n\nThe new device determines if a mode change is required based on the bootstrap file.\n\nIf ciscosdwan.cfg or ciscosdwan_cloud_init.cfg bootstrap file in a plugged in the bootstrap location, mode change to controller mode is initiated. After the device boots up in controller mode, the configuration present in the configuration file is applied.\n\nIf a ciscortr.cfg bootstrap file or config-wizard is discovered, mode change is not initiated and the boot up continues in the Autonomous mode.\n\nSwitch Modes Using Cisco CLI\n\nUse the controller-mode command in privileged EXEC mode to switch between controller and autonomous modes.\n\nAutonomous Mode\n\nThe controller-mode disable command switches the device to autonomous mode.\n\nDevice# controller-mode disable\n\nController Mode\n\nThe controller-mode enable command switches the device to controller mode.\n\nDevice# controller-mode enable\n\nNotes\n\nNote\n\nDescription\n\nMode Discovery and Mode Change with Bootstrap Files\n\nOn a device that already runs a Cisco Catalyst SD-WAN image, after upgrading to a Cisco IOS XE Catalyst SD-WAN Release 17.2.1r or later image, the device boots up in controller mode.\n\nUse the controller-mode enable command to switch from autonomous to controller mode and the controller-mode disable command to switch from controller mode to autonomous mode.\n\nTo switch modes using CLI, ensure that the appropriate configuration files mentioned in the table below are present. After the device boots up, the configuration present in the configuration file is applied. The device reads the configuration file and uses the configuration information to come up on the network.\n\nTable 6. Configuration File Prerequisites for Mode Change\n\nCurrent Mode\n\nMode change to\n\nPlatforms\n\nConfiguration file and location\n\nReset Controller Mode Configuration\n\nIf you use request platform software sdwan config reset or request platform software sdwan software reset commands to bring the device back to controller-mode day-zero configuration, the device performs one of the following actions:\n\nPerforms mode discovery. For more information on mode discovery, see Mode Discovery with Plug and Play Onboarding.\n\nUses the appropriate configuration file to perform bootstrap. For more information on the Cisco Catalyst SD-WAN bootstrap configuration file, see Creating a Cisco Catalyst SD-WAN Bootstrap Configuration File.\n\nTo erase the Cisco Catalyst SD-WAN configuration of the current active image, use the following CLI:\n\nDevice# request platform software sdwan config reset %WARNING: Bootstrap file doesn't exist and absence of it can cause loss of connectivity to the controller. For saving bootstrap config, use: request platform software sdwan bootstrap-config save Proceed to reset anyway? [confirm] Backup of running config is saved under /bootflash/sdwan/backup.cfg WARNING: Reload is required for config-reset to become effective.\n\nFor the changes to take effect, you must reload the router after running the CLI. Running this CLI ensures the configuration for the currently installed version is wiped along with crypto keys and the device enters the day zero workflow after the reload.\n\nIf the device is not set up to use PnP for onboarding, then it reads the configuration file in the bootflash and uses the configuration information to come up on the network. If the device is setup to use PnP onboarding, then after reload, the PnP discovery will start again.\n\nConfiguration Reset\n\nWhen you do a configuration reset, the device performs the following:\n\nErases only the configuration of the current running image.\n\nErases the certificates.\n\nReboots the router with the same image. At this point, the device repeats Day-0 boot up.\n\nSoftware Reset\n\nWhen you do a software reset, the device performs the following:\n\nErases all SD-WAN metadata saved in the bootflash:/sdwan folder including certificates.\n\nErases configuration of all the images (running as well as previously activated).\n\nRemoves all image files except the one marked as default.\n\nReboots the router with the default version image. At this point, the device repeats Day-0 boot up.\n\nMode Switching: Additional Information\n\nConfiguration Persistence During Mode Switch\n\nTable 7.\n\nCurrent Configuration Mode\n\nMode Switched to\n\nBehavior\n\nVerify Controller and Autonomous Modes\n\nShow Command Output for Controller Mode\n\nDevice# show logging | include OPMODE_LOG *Dec 8 16:01:17.339: %BOOT-5-OPMODE_LOG: R0/0: binos: System booted in CONTROLLER mode\n\nDevice# show version | inc operating Router operating mode: Controller-Managed\n\nDevice# show platform software device-mode Operating device-mode: Controller Device-mode bootup status: ------------------------------------- Success\n\nDevice# show platform software chasfs r0 brief | inc device_managed_mode /tmp/chassis/local/rp/chasfs/etc/device_managed_mode : [controller] /tmp/fp/chasfs/etc/device_managed_mode : [controller]\n\nDevice# show version | inc Last reload Last reload reason: Enabling controller-mode\n\nShow Command Output for Autonomous Mode\n\nDevice# show logging | include OPMODE_LOG *Dec 8 17:01:17.339: %BOOT-5-OPMODE_LOG: R0/0: binos: System booted in AUTONOMOUS mode\n\nDevice# show version | inc operating Router operating mode: Autonomous\n\nDevice# show platform software device-mode Operating device-mode: Autonomous Device-mode bootup status: -------------------------------------\n\nDevice# show platform software chasfs r0 brief | inc device_managed_mode /tmp/chassis/local/rp/chasfs/etc/device_managed_mode : [autonomous] /tmp/fp/chasfs/etc/device_managed_mode : [autonomous]\n\nDevice# show version | inc Last reload Last reload reason: Enabling autonomous-mode\n\nChange the Console Port Access After Installation, in Controller Mode\n\nBefore You Begin\n\nBefore beginning this procedure, ensure that you have access to the Cisco CSR1000V or Cisco Catalyst 8000V router through the currently configured console access method.\n\nChange the Console Port Access\n\nThis procedure changes the method for connecting to the console to access a Cisco CSR1000V or Cisco Catalyst 8000V software device.\n\nThe image used for deploying the Cisco CSR1000V or Cisco Catalyst 8000V software determines the default type of console access to use, which can be virtual or serial.\n\nThe procedure includes changing the mode from controller to autonomous, and then back to controller, which is required for operation with Cisco Catalyst SD-WAN. These mode changes cause the device to reload.\n\nPerform the following steps to change the console port access.\n\nIn EXEC mode, enter enable to enter privileged EXEC mode.\n\nRouter> enable\n\nDisable controller mode. Enter the following command and follow the prompts to complete the command.\n\nDevice# controller-mode disable\n\nAfter the device restarts, enter enable to enter privileged EXEC mode.\n\nRouter> enable\n\nEnter global configuration mode.\n\nDevice# configure terminal\n\nUse one of the following options to configure the type of access:\n\nvirtual: This option specifies that the device is accessed through the hypervisor virtual VGA console.\n\nDevice(config)# platform console virtual\n\nserial: This option specifies that the device is accessed through the serial port on the virtual machine (VM).\n\nNote\n\nUse this option only if your hypervisor supports serial port console access.\n\nIf the device configuration is stored as a Cisco SD-WAN Manager device template and is attached to the device using Cisco SD-WAN Manager, enter the command\n\nDevice(config)# platform console serial\n\nto the CLI add-on feature template. For more information on CLI Add-On Feature Templates see, ​Cisco Catalyst SD-WAN Systems and Interfaces Configuration Guide. This helps in avoiding Cisco SD-WAN Manager removing the serial port when the device template is attached to the device.\n\nDevice(config)# platform console serial\n\nauto: (This option has been deprecated and is not recommended.) This option specifies that the device console is detected automatically. This is the default setting during the initial installation boot process. For additional information, see Booting the Cisco CSR 1000v as the VM.\n\nExit configuration mode.\n\nDevice(config)# end\n\nSave the configuration.\n\nDevice# write memory\n\nCopy the running configuration to the startup configuration.\n\nDevice# copy system:running-config nvram:startup-config\n\nChange the device back to controller mode. Enter the following command and follow the prompts to complete the command.\n\nDevice# controller-mode enable\n\nUpgrade to Cisco IOS XE Release 17.2.1r or Later\n\nSupported Upgrades\n\nTable 8. Cisco CSR1000V and Cisco ISRv Routers\n\nYou Can Upgrade to...\n\nFrom these Releases\n\nTable 9. All Routers Supported by Cisco Catalyst SD-WAN Except Cisco CSR1000V, Cisco ISRv, and Cisco Catalyst 8000V\n\nYou Can Upgrade to...\n\nFrom these Releases\n\nUse the following procedures to upgrade your device to Cisco IOS XE Catalyst SD-WAN Release 17.2.1r or later images.\n\nNote\n\nIf an upgrade fails, do not attempt to reactivate the new software image. Instead, remove the new software image, identify and correct any configuration settings that might have caused the failure, and try the upgrade procedure again. If the issue persists, contact Cisco for assistance.\n\nUpgrade Using Cisco Catalyst SD-WAN\n\nWe recommend using Cisco SD-WAN Manager to upgrade. This keeps devices and the controller synchronized.\n\nUse the Cisco SD-WAN Manager upgrade and activate procedure described in the ​Cisco Catalyst SD-WAN Monitor and Maintain guide.\n\nUpgrade Using CLI\n\nWe recommend using Cisco SD-WAN Manager to upgrade. This keeps devices and the controller synchronized. If it is necessary to upgrade using the CLI, use the following steps.\n\nBack Up Configuration Files\n\nUse these following steps to make configuration file copies before performing the manual upgrade process. Without these steps, the router will lose its configuration during the upgrade.\n\nUse the following command to make a backup copy of the Cisco IOS XE Catalyst SD-WAN configuration:\n\nshow running-config | redirect bootflash:/sdwan/ios.cli\n\nUse the following command to make a backup copy of the Cisco Catalyst SD-WAN running configuration:\n\nshow sdwan running-config | redirect bootflash:/sdwan/sdwan.cli\n\nUpgrade Procedure\n\nDownload the Cisco IOS XE Release 17.2 image for your device from https://software.cisco.com\n\nUpload the image to the device.\n\nInstall the new software. Example:\n\nDevice# request platform software sdwan software install bootflash:/isr4300-universalk9.17.2.1.SPA.bin\n\nActivate the software. The device reloads when the activation is complete. Example:\n\nDevice# request platform software sdwan software activate 17.2.01r.9.3\n\nVerify that the software is activated.\n\nDevice# show sdwan software VERSION ACTIVE DEFAULT PREVIOUS CONFIRMED TIMESTAMP -------------------------------------------------------------------------------- 16.12.1d.0.48 false true true auto 2020-03-04T10:43:45-00:00 17.2.01r.9.3 true false false user 2020-03-04T11:15:20-00:00 Total Space:388M Used Space:100M Available Space:285M\n\n(Optional) To ensure that the new version is preserved if software reset required, use the following command. Example:\n\nDevice# request platform software sdwan software set-default 17.2.01r.9.3\n\nVerify the upgrade using request platform software sdwan software upgrade-confirm .\n\nDevice# request platform software sdwan software upgrade-confirm\n\nTable 10. Configuration Persistence in Upgrade Scenarios\n\nExisting Installation (image)\n\nUpgraded to (image)\n\nBehavior\n\nDowngrade from Cisco IOS XE Catalyst SD-WAN Release 17.2.1r or Later Releases\n\nDowngrade a Cisco IOS XE Catalyst SD-WAN Device to a Previously Installed Software Image\n\nTo downgrade a Cisco IOS XE Catalyst SD-WAN device to an earlier software image that is currently installed on the device using the CLI, perform the following steps:\n\nDisplay the currently installed images.\n\nDevice# show sdwan software Example: VERSION ACTIVE DEFAULT PREVIOUS CONFIRMED TIMESTAMP ---------------------------------------------------------------------------------- 16.10.400.0.0 false true true auto 2019-11-20T04:40:05-00:00 17.3.1.0.102822 true false false auto 2020-07-31T11:01:22-00:00\n\nActivate the image. This resets the device, deleting any existing configuration. The device starts in day zero configuration.\n\nDevice# request platform software software activate desired-build\n\nExample:\n\nDevice# request platform software software activate 16.10.400.0.0\n\nDowngrade a Cisco IOS XE Catalyst SD-WAN Device to an Older Software Image\n\nTo download an earlier software image and downgrade a Cisco IOS XE Catalyst SD-WAN device to an earlier software image using the CLI, perform the following steps:\n\nDisplay the currently installed images.\n\nDevice# show sdwan software Example: VERSION ACTIVE DEFAULT PREVIOUS CONFIRMED TIMESTAMP ---------------------------------------------------------------------------------- 16.10.400.0.0 false true true auto 2019-11-20T04:40:05-00:00 17.3.1.0.102822 true false false auto 2020-07-31T11:01:22-00:00\n\nIf necessary, remove an existing software image to provide space for loading a new software image.\n\nDevice# request platform software sdwan software remove previous-installed-build\n\nExample:\n\nDevice# request platform software sdwan software remove 16.10.400.0.0\n\nDownload the software image for the downgrade and copy it to the device bootflash.\n\nInstall the downloaded image.\n\nDevice# request platform software sdwan software install bootflash:/desired-build\n\nExample:\n\nDevice# request platform software sdwan software install bootflash:/isr1100be-universalk9.17.02.01a.SPA.bin\n\nDisplay the currently installed images, which now include the new image.\n\nDevice# show sdwan software VERSION ACTIVE DEFAULT PREVIOUS CONFIRMED TIMESTAMP ---------------------------------------------------------------------------------- 17.02.01a.0.211 false true true auto 2020-03-30T09:34:04-00:00\n\nActivate the new image. This resets the device, deleting any existing configuration. The device starts in day zero configuration.\n\nDevice# request platform software sdwan software activate desired-build clean\n\nExample:\n\nDevice# request platform software sdwan software 17.02.01a.0.211 clean\n\nDowngrade Scenarios for Cisco IOS XE Release 17.2.x\n\nTable 11. Configuration Persistence in Downgrade Scenarios\n\nExisting Installation (image)\n\nDowngrade to (image)\n\nBehavior\n\nRestore Smart Licensing and Smart License Reservation\n\nThe smart licensing authorization is lost when a device switches from autonomous to controller mode and back to autonomous mode again.\n\nFor more information about Smart Licensing, refer to Smart Licensing Guide for Access and Edge Routers.\n\nRestore Smart Licensing\n\nReconfigure device to reach Cisco Smart Software Manager (CSSM).\n\nRegister the device using license smart register idtoken token force command in privileged EXEC mode.\n\nSet the required crypto throughput using platform hardware throughput crypto crypto-value .\n\nSave the configuration using write memory in privileged EXEC mode.\n\nReload the device and verify that the new crypto throughput value is applied using the show platform hardware throughput crypto command.\n\nRestore Smart License Reservation\n\nEnable the reservation mode using the license smart reservation command in global configuration mode.\n\nSet the required crypto throughput using platform hardware throughput crypto crypto-value .\n\nSave the configuration using write memory .\n\nReload the device and verify that the new crypto throughput value is applied using the show platform hardware throughput crypto command.\n\nOnboard Cisco Catalyst 8000V Edge Software Hosted by a Cloud Service, Using PAYG Licensing\n\nTo onboard a Cisco Catalyst 8000V platform hosted by a cloud service, using pay as you go (PAYG) licensing, perform these steps.\n\nYou can also use Cisco Cloud onRamp for Multi-Cloud to onboard a Cisco Catalyst 8000V platform using PAYG licensing. For information to integrate public cloud infrastructure into the Cisco Catalyst SD-WAN fabric, see Cloud OnRamp Configuration Guide, Cisco IOS XE Release 17.x.\n\nFrom the Cisco SD-WAN Manager menu, choose Configuration > Devices, and click Add PAYG WAN Edges.\n\nIn the Add PAYG WAN Edges dialog box, enter the number of PAYG devices to onboard into Cisco Catalyst SD-WAN, select the Validate check box, and click Add.\n\nThe Task View page opens, showing the progress as Cisco SD-WAN Manager creates logical devices.\n\nAfter the Task View page shows the logical devices have been created successfully, choose Configuration > Devices to view the new logical devices on the Devices page.\n\nFor the logical devices that you have created, click … and choose Generate Bootstrap Configuration.\n\n(Optional) Attach a device template to the logical devices that you have created.\n\nIn the Generate Bootstrap Configuration dialog box, click Cloud-Init and then click OK.\n\nThe Generate Bootstrap Configuration dialog box shows the content of the bootstrap configuration, which includes the UUID of the logical device, and includes the configuration details provided by the device template if you have attached one.\n\nThere are different methods for loading the bootstrap configuration onto a C8000V instance on a cloud service. The method you use depends on the cloud service. We recommend to click Download in the Generate Bootstrap Configuration dialog box to save a copy of the bootstrap configuration.\n\nIn the cloud services portal, create a PAYG instance of the Cisco Catalyst 8000V. When configuring the instance, use the bootstrap configuration that you created in Cisco SD-WAN Manager. The details of how to load the Cisco Catalyst SD-WAN bootstrap configuration onto the instance are specific to the cloud services provider.\n\nOn the cloud service platform, start the Cisco Catalyst 8000V instance using the bootstrap configuration from an earlier step.\n\nWhen the Cisco Catalyst 8000V instance boots up, it joins the Cisco Catalyst SD-WAN overlay automatically. In Cisco SD-WAN Manager, on the Devices page, this Cisco Catalyst 8000V instance shows a green medal icon in the State column and In Sync in the Device Status column.\n\nBootstrap Process for Cisco Catalyst SD-WAN Cloud-Hosted Devices\n\nBefore You Begin\n\nThe device template provides the configuration details that enable the device to connect to Cisco SD-WAN Manager.\n\nIf you create a logical device and then generate a bootstrap configuration without first attaching a device template, the resulting file will include a minimal configuration. If you attach a device template to the logical device before generating the bootstrap configuration, the resulting file will include a more complete configuration, which can be helpful in enabling the device to connect to the Cisco Catalyst SD-WAN overlay. We recommend that you attach a device template to the logical device before creating the bootstrap configuration.\n\nThis procedure is useful when onboarding a software device, such as the Cisco Catalyst 8000V, to a private cloud, such as KVM, ESXi, or OpenStack.\n\nBootstrap Process for Cisco SD-WAN Cloud-Hosted Devices\n\nFrom the Cisco SD-WAN Manager menu, choose Configuration > Devices.\n\nFor the logical device (includes the UUID) that you are using for a new cloud-hosted instance, click … and choose Generate Bootstrap Configuration.\n\nIn the Generate Bootstrap Configuration dialog box, choose Cloud-Init and click OK. The Generate Bootstrap Configuration dialog box displays the bootstrap configuration, including the OTP token for the license, Cisco SD-WAN Validator address, UUID, and organization information.\n\nThere are different methods for loading the bootstrap configuration onto a device instance on a cloud service. The method you use depends on the cloud service. We recommend that you click Download in the Generate Bootstrap Configuration dialog box to save a copy of the bootstrap configuration.\n\nYou can use the bootstrap configuration when setting up a device instance in the cloud service. The configuration enables the device instance to connect to Cisco Catalyst SD-WAN.\n\nFor information about onboarding a Cisco Catalyst 8000V in a private cloud, see the following:\n\nCisco Catalyst 8000V Edge Software Installation And Configuration Guide, Installing in KVM Environments\n\nCisco Catalyst 8000V Edge Software Installation And Configuration Guide, Installing in VMware ESXi Environment\n\nCisco Catalyst 8000V Edge Software Installation And Configuration Guide, Installing in OpenStack\n\nFor example bootstrap configuration files for the Cisco Catalyst 8000V, see Cisco Catalyst 8000V Cloud Initialization Files.\n\nTroubleshooting"
    }
}