{
    "id": "dbpedia_8286_0",
    "rank": 48,
    "data": {
        "url": "https://dba.stackexchange.com/questions/3489/trying-to-use-mysql-workbench-with-tcp-ip-over-ssh-failed-to-connect",
        "read_more_link": "",
        "language": "en",
        "title": "Trying to use MySQL Workbench with TCP/IP over SSH - failed to connect",
        "top_image": "https://cdn.sstatic.net/Sites/dba/Img/apple-touch-icon@2.png?v=246e2cb2439c",
        "meta_img": "https://cdn.sstatic.net/Sites/dba/Img/apple-touch-icon@2.png?v=246e2cb2439c",
        "images": [
            "https://cdn.sstatic.net/Sites/dba/Img/logo.svg?v=d844126b2d09",
            "https://www.gravatar.com/avatar/07ad1b1aa5c1c40feb6259072e26de29?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/fc6d0d5f5aae08da0827d9e60d873c27?s=64&d=identicon&r=PG",
            "https://i.sstatic.net/Tyn6s.jpg?s=64",
            "https://www.gravatar.com/avatar/63edcce213b4c96b8b4a660e1df2da08?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/e17b95589527bae3049a9d5da1128c2b?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/c13bd6cadb22df2ab7c4a2e41c96f23d?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://www.gravatar.com/avatar/c27547c34acef67ce46c577dee734964?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/b8f109083f340572e4d2ff294d83878f?s=64&d=identicon&r=PG",
            "https://i.sstatic.net/xdJq4.jpg?s=64",
            "https://www.gravatar.com/avatar/181064252743e9b343b5fdfc6f7c4fd8?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://www.gravatar.com/avatar/efef9add043f756851612ae611f282f7?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/5616f9dfbc94117b32b3b9788f4fd8c0?s=64&d=identicon&r=PG",
            "https://i.sstatic.net/g6Pwq.jpg?s=64",
            "https://i.sstatic.net/Ne2mx.jpg?s=64",
            "https://www.gravatar.com/avatar/778b01674f3835ef091d60314fd4e88b?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://www.gravatar.com/avatar/4469b1b96938606e1c447de3da4ed534?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/904300b4d4688091ec1d05be19ed0896?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://www.gravatar.com/avatar/33bc53cb5b1c79cc7baaef00099b859a?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://www.gravatar.com/avatar/d9ead110232a741665ee03f5aeedcdcb?s=64&d=identicon&r=PG&f=y&so-version=2",
            "https://graph.facebook.com/1428668068/picture?type=large",
            "https://www.gravatar.com/avatar/4c851eb91acdd1b8e3f3f6cd722ea13c?s=64&d=identicon&r=PG",
            "https://lh3.googleusercontent.com/a-/AAuE7mAO26jGGA7malbsxZzQkscAdKu9-ftxEkocMOAc=k-s64",
            "https://dba.stackexchange.com/posts/3489/ivc/0d79?prg=d1ff622c-7dbe-43fd-ad94-621f6dc70e39"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2011-06-26T14:02:57",
        "summary": "",
        "meta_description": "I can't connect using TCP/IP over SSH connection in MySQL Workbench from a PC. What's going on?\n\nI created a MySQL 5.1 database on an Ubuntu server mysql.myhost.com. I can access it locally. MySQL",
        "meta_lang": "en",
        "meta_favicon": "https://cdn.sstatic.net/Sites/dba/Img/favicon.ico?v=fccaf00a9c8c",
        "meta_site_name": "Database Administrators Stack Exchange",
        "canonical_link": "https://dba.stackexchange.com/questions/3489/trying-to-use-mysql-workbench-with-tcp-ip-over-ssh-failed-to-connect",
        "text": "I stumbled upon this question when I myself had encountered this error. I could finally figure out the configuration.\n\nI didn't touch anything in /etc/mysql/my.cnf which already has bind_address = 127.0.0.1. So only localhost can connect.\n\nI use OpenSSH server. So in its config file /etc/ssh/sshd_config I changed from no to yes the param responsible for TCP forwarding, thus AllowTcpForwarding yes.\n\nFinally I have the following entered in MySQL WorkBench.\n\nSSH Hostname: 192.168.0.8:22 (my SSH server listens to port 22)\n\nSSH Username: sshuser\n\nSSH Key File: *C:\\Users\\windowsuser\\.ssh\\id_rsa* (should be private key, even though it says public)\n\nMySQL Hostname: 127.0.0.1 (this should not be changed, since MySQL server by default is bound to localhost only which I didn't change)\n\nMySQL Server Port: 3306 (also default)\n\nUsername: root\n\nThe only remaining thing for you is to configure correctly your SSH server to work with keys rather than passwords. Hope this will help someone.\n\nYou may need to check the users in the mysql.user table.\n\nRun this query:\n\nSELECT user,host FROM mysql.user;\n\nYou should see something like this:\n\nmysql> SELECT user,host,password FROM mysql.user; +------------------+-------------+-------------------------------------------+ | user | host | password | +------------------+-------------+-------------------------------------------+ | root | localhost | *7A670E02260CDEEFF062DD08F3A6F6DA079998CB | | ping | % | *124E1DB56CC8D6E2FEE8315BB2544BF04B980DB6 | | admin | 10.67.135.% | 1a6858054a41fede | | icorbin | 10.67.135.% | 366ed93a7396650e | +------------------+-------------+-------------------------------------------+ 4 rows in set (0.00 sec)\n\nPlease notice that\n\nroot@localhost can login from localhost only.\n\nping@'%' can login via TCP/IP\n\n[email protected].% can login via TCP/IP from that netblock only\n\n[email protected].% can login via TCP/IP from that netblock only\n\nIf you want root to connect via TCP/IP you must specify IP address or netblock for a root user.\n\nSomething like this:\n\nGRANT ALL PRIVILEGES ON *.* TO root@'%' IDENTIFIED BY 'whateverpassword';\n\nor if the root password is the same for root@localhost then\n\nGRANT ALL PRIVILEGES ON *.* TO root@'%' IDENTIFIED BY PASSWORD '*7A670E02260CDEEFF062DD08F3A6F6DA079998CB ';\n\nCAVEAT : root@'%' is normanlly not recommended. Maybe try root@'10.%' or any other netblock for root.\n\nGive it a Try !!!\n\nI think the TCP/IP over SSH approach works by establishing a \"normal\" SSH connection underlying the MySQL connection (in the same way as you would tunnel using -L with the OpenSSH command-line client).\n\nTherefore, you'd need to specify a connection to an SSH server on server via which you're establishing the tunnel. Here, you seem to be using mysql.myhost.com:3306, which would imply that you're running this SSH server (not MySQL) on port 3306.\n\nIt's possible to bind a MySQL server on 127.0.0.1:3306 and an SSH server on your external IP address for mysql.myhost.com on port 3306, but that's very unlikely. I guess your SSH server is listening on port 22 (the default).\n\nYou should probably use mysql.myhost.com:22. (Check you can connect to it via a normal SSH client such as Putty too.)\n\nOne thing that isn't mentioned in any other answer is the importance of the OpenSSH format for the key as stated on SO (https://stackoverflow.com/questions/34504232/mysql-workbench-failing-to-connect-via-ssh-due-to-key/38108623#38108623).\n\nDespite the answer there, I was able to use a password protected key with MySQL Workbench 6.3.7 (64 bit, Windows 10).\n\nI faced the same problem. I checked and tried to set AllowTcpForwarding Yes but it was missing in my sshd_config so no help. make sure the ssh hostname is NOT the same with the mysql hostname(use localhost).\n\nIn workbench, choose + to add new connection and set the following:\n\nconnection method: standard TCP/IP over SSH\n\nSSH Hostname: 192.168.0.50:22 (place remote SSH server IP and port(optional))\n\nSSH Username: sshuser\n\nYou can set password or add at the prompt\n\nMYSQL Hostname: localhost or 127.0.0.1\n\nMYSQL Server port:3306\n\nYou can set password or add at the prompt\n\nTest connection. It should be successful then hit OK.Viola!\n\nSometimes keys created by PuTTY won't work. Use ssh-keygen on the Linux box to create a key pair. Copy the contents of the new id_rsa to a text file on Windows. Make sure to add the contents of id_rsa.pub to authorized_keys on the Linux box. All other defaults in Workbench are fine including 127.0.0.1 for MySQL Hostname. Of course it has to be Standard TCP/IP over SSH.\n\nI came up with the same error. The problem is \"somewhat\" the timeout. I cranked even the value up to 120 seconds which did not help.\n\nIn my case I could solve it doing a nslookup myserver.com and using the IP address instead of the hostname. My assumption is a problem trying to connect from IPv4 to IPv6.\n\nSome people are finding it difficult to connect to the database via mysql workbench. In my case, this happened because I am using version 8.0, and this version does not seem to accept the .ppk format as an SSH key files.\n\nI had to convert the key to OpenSSH format so that the workbench could accept the connection.\n\nThe step-by-step for those who don't know the use of Putty to perform the conversion:\n\nOpen the PuTTYgen program > Conversions > Import Key > 'Select your key with the .ppk format' > Export OpenSSH> Select the directory and save the new format.\n\nUse this file into mysql workbench and it will work.\n\nJust had this same issue on Ubuntu machine connecting to a server running MySQL version 5.5.29 and MySQL Workbench 5.2.40. The SSH server requires the use of a ssh-key.\n\nI wasn't able to connect to the MySQL server using the root user, instead I had to create a separate non-root user to use for the login. After that I was able to connected just fine.\n\nHope this helps.\n\nOK, I know this is an old question, but I pulled my hair out over this for hours. I checked everything mentioned by Bruno and Eye and it all seemed good. Then I realized it really was a private/public key thing. So I fired up Pageant and added my private key, so that it create a public key which MySQL Workbench could read and voila, connected! (It was actually kind of anticlimactic when MySQL Workbench actually started working, but in a happy way.)\n\nTLDR: Use Pageant to generate a public key from your private key.\n\nRun\n\nSELECT user,host FROM mysql.user;\n\nAnd make sure that the user that you are trying to log in as through Workbench says localhost in the host column and not %.\n\nIf it says %, fix it with:\n\nUPDATE mysql.user SET host=\"localhost\" WHERE user=\"yourusername\";\n\n(Assuming that you created this user to work with Workbench over SSH, or course, as the above will stop that user from loging in via remote TCP)\n\nI stumble upon the error while connecting hosted mysql on amazon ec2 via ssh. I came to realize you have to edit the following file.\n\n/etc/ssh/sshd_config Change the following: AllowTcpForwading from no to yes\n\nAlso check if the path to your ssh is right on this file in /ect/ssh/sshd_config. AuthorizedKeysFile /home/user/.sshkey\n\nThen reboot your system and try.\n\nOnly what I found... often I'm creating users on SSH server without shell (such as /sbin/nologin) to prevent them be able to login to a server and create files and etc there... (for production systems we're doing it on firewalls).\n\nIn a regular Linux environment after that, you still can forward ports after that such as:\n\nssh -Nf -L 3306:%mysql_ip%:%mysql_port% %ssh_host%\n\nand after that connect to it from local workstation as:\n\nmysql -h localhost:3306 -u %mysql_user% -p\n\nBut workbench giving an error that it can't connect to MySQL... If you will change the shell for that user to, let say, /bin/bash - everything works fine after that.\n\nNo idea why Workbench is requiring local shell on the remote SSH server."
    }
}