{
    "id": "correct_foundationPlace_00075_2",
    "rank": 14,
    "data": {
        "url": "https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/use-sql-server-2019-polybase-to-virtualize-a-sybase-iq-database/ba-p/1218558",
        "read_more_link": "",
        "language": "en",
        "title": "Use SQL Server 2019 PolyBase to Virtualize a Sybase IQ Database",
        "top_image": "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176018i52C6F601A3A1B86B/image-size/original?v=v2&px=-1",
        "meta_img": "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176018i52C6F601A3A1B86B/image-size/original?v=v2&px=-1",
        "images": [
            "https://techcommunity.microsoft.com/html/@583B3F561C4171F565A5431E573FCDA4/assets/Content/Images/GlobalHeader/MicrosoftLogo.png",
            "https://techcommunity.microsoft.com/t5/image/serverpage/avatar-name/mytestavatar/avatar-theme/candy/avatar-collection/Microsoft/avatar-display-size/profile/version/2?xdesc=1.0",
            "https://techcommunity.microsoft.com/t5/image/serverpage/avatar-name/mytestavatar/avatar-theme/candy/avatar-collection/Microsoft/avatar-display-size/message/version/2?xdesc=1.0",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176018i52C6F601A3A1B86B/image-size/medium?v=v2&px=400",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176017i3E0B398FEEE87A5E/image-size/medium?v=v2&px=400",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176044i06431155DC8E2890/image-dimensions/667x189?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176021i633E35E3FA658710/image-dimensions/668x224?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176020i668C57F011D8DE06/image-dimensions/656x118?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176022i0FD63064C0E0AC4B/image-dimensions/714x570?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176023i2A5A5D64A95570F6/image-dimensions/714x241?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176024i6728A8377F26706B/image-dimensions/448x325?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176025i114AC8C09D3266AE/image-dimensions/667x519?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176045i115035107BA19242/image-dimensions/366x410?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176027i898E2A38B630F3A9/image-size/medium?v=v2&px=400",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176028iE5DE2799273A814B/image-dimensions/460x741?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176029i659701841032F972/image-dimensions/508x236?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176031iAE6CDBC855CF4AB8/image-dimensions/505x728?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176030iE9B38DECCEFD9DB8/image-size/medium?v=v2&px=400",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176032iBA560F81E0BA49AC/image-dimensions/453x459?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176034iD7DE6F6524768B96/image-size/medium?v=v2&px=400",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176033i65115FDD759A90FD/image-dimensions/341x281?v=v2",
            "https://techcommunity.microsoft.com/t5/image/serverpage/image-id/176035i3C686AB477BA1632/image-dimensions/647x413?v=v2",
            "https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "techcommunity.microsoft.com",
            "user-id"
        ],
        "publish_date": null,
        "summary": "",
        "meta_description": "Introduced with SQL Server 2016, the PolyBase feature enabled access to non-relational data stores, namely Hadoop and Azure Blob Storage all while using",
        "meta_lang": "en",
        "meta_favicon": "https://c.s-microsoft.com/favicon.ico?v2",
        "meta_site_name": "TECHCOMMUNITY.MICROSOFT.COM",
        "canonical_link": "https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/use-sql-server-2019-polybase-to-virtualize-a-sybase-iq-database/ba-p/1218558",
        "text": "Introduced with SQL Server 2016, the PolyBase feature enabled access to non-relational data stores, namely Hadoop and Azure Blob Storage all while using the familiar and popular Transact-SQL language.\n\nSQL Server 2019 builds upon that foundation by unlocking the ability to access many new relational and non-relational data stores such as Oracle, Teradata, MongoDB, SQL Server and any ODBC-compatible data source. These expanded capabilities enable SQL Server 2019 to act as a hub or conduit to many disparate data sources.\n\nThis article will focus specifically on leveraging PolyBase in SQL Server 2019 to virtualize a Sybase IQ data source. Let’s get started.\n\nDemo environment topology\n\nSybase IQ environment\n\nWindows Server 2019\n\nSybase IQ 16.1.030.1031 sp03\n\nDatabase: iqdemo\n\nPort: 2638\n\nSQL Server environment\n\nWindows Server 2019\n\nSQL Server 2019 Developer 15.0.2000.5\n\nDatabase: FourthCoffee\n\nPort: 1433\n\nStep One – Enable the PolyBase feature\n\nThis step assumes that the PolyBase feature (PolyBase Query Service for External Data) is installed but not yet enabled. If you are unsure whether the PolyBase feature is installed on the server, use the query below to validate.\n\nSELECT SERVERPROPERTY ('IsPolyBaseInstalled') AS IsPolyBaseInstalled;\n\nTo enable PolyBase, use the sp_configure stored procedure as shown below.\n\nEXEC sp_configure @configname = 'polybase enabled' ,@configvalue = 1; GO RECONFIGURE WITH OVERRIDE;\n\nUse SQL Server Configuration Manager to ensure the “SQL Server PolyBase Engine (<Instance Name>)” service is in a Running state.\n\nStep Two – Create a Database Master Key\n\nIf one does not already exist, we’ll need to create a Database Master Key (DBMK). The DBMK is used to protect any secrets associated with the credential we’ll be creating in the next step. Follow the example below to create a DBMK (but use a stronger password!).\n\nUSE FourthCoffee GO CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'Pass@word!!!' -- -- Validate key creation -- SELECT * FROM sys.symmetric_keys\n\nStep Three – Create a Database Scoped Credential\n\nNow that we have a DBMK, we can create a database credential. A database credential is used by the database to access an external location. In the case of this article the external location is a Sybase database. Note that a database credential is not mapped to a server login or database user and should not be considered an orphaned login.\n\nThe example below is creating a database credential called “SybaseIQreadOnly” with an identity (think of this like a username) of “SybaseReadOnly”.\n\nUSE FourthCoffee GO CREATE DATABASE SCOPED CREDENTIAL SybaseIQreadOnly WITH IDENTITY = 'SybaseReadOnly', SECRET = 'Pass@word!!!'; GO SELECT * FROM sys.database_credentials\n\nThe database master key created in the previous step will be used to encrypt and protect the secret associated with the database credential.\n\nStep Four – Create the External Data Source\n\nThe last step is to create the external data source which represents the actual connection string and associated properties. In the example below, we’re connecting to Sybase using an ODBC connection and are providing the various connection options required for successful connection. Note that the required connection options will vary based on the external data source and the full list and description of valid options can be found here.\n\nLet’s decode our Sybase external data source a bit.\n\nUSE FourthCoffee GO CREATE EXTERNAL DATA SOURCE [SybaseIQ] WITH ( LOCATION = N'odbc://WIN-4USCI1DM3AF:2638' ,CONNECTION_OPTIONS = 'DRIVER={Sybase IQ}; Host=WIN-4USCI1DM3AF:2638; Provider = ''DBODBC17''; ServerName= win-4usci1dm3af_iqdemo; DatabaseName=iqdemo;' ,PUSHDOWN = ON ,CREDENTIAL = [SybaseIQreadOnly] ) -- SELECT [name],[location],[type],[connection_options],[pushdown] FROM sys.external_data_sources\n\nNot bad at all. Four easy steps to create and connect to an external data source. Now let’s investigate what that provides.\n\nThe first thing that we need to do is create an external table for the external data source. An external table is essentially a virtual representation within SQL Server of a table in the external data source.\n\nLet’s connect to the “emp1” table in the “iqdemo” database on our Sybase IQ instance.\n\nThis is what the “emp1” table looks like in Sybase.\n\nUSE FourthCoffee GO CREATE EXTERNAL TABLE empl ( dept_id INT NULL, start_date date NULL, name nvarchar(20) NULL, salary INT NULL ) WITH ( LOCATION='emp1', DATA_SOURCE=[SybaseIQ] );\n\nHere we can see the external data source and external table in our FourthCoffee database.\n\nExample One\n\nA simple query in SQL Server Management Studio returns the same data that we see when using the Interactive SQL graphical query utility for Sybase.\n\nExample Two\n\nAnother quick example is creating an external table based on the results of a view on the source system. In this case I’ve created a view within the Sybase source system and an external table in SQL Server.\n\nView in Sybase “iqdemo” database\n\nCreate an external table in SQL Server to reference the Sybase view.\n\nExample Three\n\nThe final example is where the power and possibilities of PolyBase in SQL Server 2019 begin to really come into focus. In this scenario, we’ll join an external table in the Sybase IQ database to a table in the FourthCoffee database hosted on the SQL Server 2019 instance.\n\nJust like the previous examples, first we create an external table in the FourthCoffee database that references the “Customers” table in the Sybase IQ database. Note that for this example I’ve created a separate schema, “SybaseIQ”, for the “Customers” external table.\n\nNow that we have our external table, let’s display customer results between the FourthCoffee.dbo.Customers table and the SybaseIQ.Customers external table where customers are in the same PostalCode. Note the query below is written for illustrative purposes only.\n\nWhat we’ve accomplished in this final example is to join to disparate datasets in two disparate database systems without performing any extraction, transformation or loading (ETL) of data between systems. And we accomplished this using only a familiar and simple Transact-SQL query.\n\nTaking this a step further, we could perform the same join of disparate datasets between Hadoop, for instance, and a Sybase IQ database using a Transact-SQL query with PolyBase on SQL Server 2019 serving as the central coordinator. Again, with no ETL involved.\n\nKey points\n\nWhen using simple SELECT statements as those shown above, query results are not persisted. Data is stored in temp tables which are immediately dropped upon query completion.\n\nTo persist data into a SQL Server table from an external data source, use the SELECT INTO FROM EXTERNAL TABLE or INSERT INTO SELECT FROM Transact-SQL query syntax.\n\nFor servers hosting multiple instances of SQL Server, PolyBase can only be installed on one of those instances.\n\nPolyBase Resources"
    }
}