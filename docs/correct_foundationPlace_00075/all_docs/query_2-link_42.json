{
    "id": "correct_foundationPlace_00075_2",
    "rank": 42,
    "data": {
        "url": "https://stackoverflow.com/questions/8825866/how-to-simulate-greatest-in-sybase-ase",
        "read_more_link": "",
        "language": "en",
        "title": "How to simulate GREATEST() in Sybase ASE?",
        "top_image": "https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded",
        "meta_img": "https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded",
        "images": [
            "https://cdn.sstatic.net/Img/teams/overflowai.svg?v=d706fa76cdae",
            "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/2ca5a87d982422410d9f14aa89c0a842?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=64&d=identicon&r=PG",
            "https://www.gravatar.com/avatar/779f1fe080fea457f5ab867d34572363?s=64&d=identicon&r=PG",
            "https://stackoverflow.com/posts/8825866/ivc/2739?prg=bffcd9b8-199e-4653-abb8-fc175b43adf4"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": "2012-01-11T20:06:11",
        "summary": "",
        "meta_description": "Most databases have something like a GREATEST function, which can be useful some times. At least these databases don't have such a function:\r\nDerby\nSQL Server\nSybase ASE\nSybase SQL Anywhere\r\nFor SQL",
        "meta_lang": "en",
        "meta_favicon": "https://cdn.sstatic.net/Sites/stackoverflow/Img/favicon.ico?v=ec617d715196",
        "meta_site_name": "Stack Overflow",
        "canonical_link": "https://stackoverflow.com/questions/8825866/how-to-simulate-greatest-in-sybase-ase",
        "text": "Most databases have something like a GREATEST function, which can be useful some times. At least these databases don't have such a function:\n\nDerby\n\nSQL Server\n\nSybase ASE\n\nSybase SQL Anywhere\n\nFor SQL Server and Sybase SQL Anywhere, the function can be simulated using subqueries and UNION ALL, as can be seen in this question here. An example:\n\n-- SELECT GREATEST(field1, field2, field3) FROM my_table SELECT (SELECT MAX(c) FROM (SELECT my_table.field1 AS c UNION ALL SELECT my_table.field2 UNION ALL SELECT my_table.field3) T) AS greatest FROM my_table\n\nBut this doesn't work in Sybase ASE. Apparently, the subqueries don't have access to the outer query's my_table reference. The error I get is\n\nThe column prefix 'my_table' does not match with a table name or alias name used in the query. Either the table is not specified in the FROM clause or it has a correlation name which must be used instead\n\nNote, this problem does not appear with Sybase SQL Anywhere. Any idea what's wrong here and how I could re-write the query?\n\nI'd like to avoid\n\nStored functions, as I may not have the necessary grants to create them\n\nLengthy CASE expressions, as the expression length of the combined permutation of all comparisons needed with nested CASE expressions is at least O(n^2) when n is the number of parameters for GREATEST\n\nAs I understand it, the logic (ignoring nulls) is\n\nSELECT CASE WHEN field1 >= field2 AND field1 >= field3 THEN field1 WHEN field2 >= field3 THEN field2 ELSE field3 END AS greatest FROM my_table;\n\n...but should only return null when all values are null.\n\nI think this is more how I'd like to be able do things (although, Sybase ASE does not support common table expressions):\n\nWITH my_table AS ( SELECT * FROM ( VALUES ('A', 1, 2, 3), ('B', 2, 3, 1), ('C', 3, 1, 2), ('D', NULL, 2, 3), ('E', NULL, NULL, 3), ('F', NULL, 3, NULL), ('G', 1, NULL, 3), ('H', 1, 3, NULL), ('X', NULL, NULL, NULL) ) AS T (ID, field1, field2, field3) ), T1 AS ( SELECT ID, field1 AS field_n FROM my_table UNION SELECT ID, field2 AS field_n FROM my_table UNION SELECT ID, field3 AS field_n FROM my_table ) SELECT ID, MAX(field_n) AS greatest FROM T1 GROUP BY ID;\n\nLukas Eder\n\n218k133133 gold badges711711 silver badges1.6k1.6k bronze badges\n\nanswered Jan 12, 2012 at 12:15\n\nonedaywhenonedaywhen\n\n56.5k1212 gold badges101101 silver badges140140 bronze badges"
    }
}