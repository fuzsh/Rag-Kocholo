{
    "id": "dbpedia_3856_3",
    "rank": 20,
    "data": {
        "url": "https://groups.google.com/g/geonames/c/KgRq5K_Umuk",
        "read_more_link": "",
        "language": "en",
        "title": "I want to extract cities, towns, villages, or other agglomerations of buildings where people live and work in Europe, yet I fail to do so",
        "top_image": "https://www.gstatic.com/images/branding/product/1x/groups_32dp.png",
        "meta_img": "https://www.gstatic.com/images/branding/product/1x/groups_32dp.png",
        "images": [
            "https://fonts.gstatic.com/s/i/productlogos/groups/v9/web-48dp/logo_groups_color_1x_web_48dp.png",
            "https://lh3.googleusercontent.com/a-/ALV-UjU7PfK23TaSS2TnjGNq-FMSg1OEwCFo8TkBksjCnOAL4P_FIQ=s40-c",
            "https://lh3.googleusercontent.com/a-/ALV-UjVSGe9QgXhu3SNUqi7h5LhhEEmK7JMqYHpMqmOLKmWGMyOLe5GL=s40-c",
            "https://lh3.googleusercontent.com/a-/ALV-UjWh0XvX8fdAIJ6OIlWBsJqU-1W-Gx6DduXPNi2932Av0JUIOw=s40-c"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "",
        "meta_lang": "en",
        "meta_favicon": "//www.gstatic.com/images/branding/product/1x/groups_32dp.png",
        "meta_site_name": "",
        "canonical_link": "https://groups.google.com/g/geonames/c/KgRq5K_Umuk",
        "text": "As the title says, I'm trying to extract cities, towns, villages, or other agglomerations of buildings where people live and work in Europe, yet I fail to do so.\n\nI am using allCountries.txt available from here.\n\nThis is the code that I have in a Jupyter notebook that I use for processing the aforementioned file:\n\nimport csv\n\nimport pandas as pd\n\ncountry_city_pairs = []\n\n# http://download.geonames.org/export/dump/timeZones.txt\n\ncountry_codes = [\"NL\", \"AD\", \"RU\", \"GR\", \"RS\", \"DE\", \"SK\", \"BE\", \"RO\", \"HU\", \"MD\", \"DK\", \"IE\", \"GI\", \"GG\", \"FI\", \"IM\",\n\n\"TR\", \"JE\", \"PT\", \"SI\", \"GB\", \"LU\", \"ES\", \"MT\", \"AX\", \"BY\", \"MC\", \"NO\", \"FR\", \"ME\", \"CZ\", \"LV\", \"IT\",\n\n\"SM\", \"BA\", \"MK\", \"BG\", \"SE\", \"EE\", \"AL\", \"UA\", \"LI\", \"VA\", \"AT\", \"LT\", \"PL\", \"HR\", \"CH\"]\n\n# http://www.geonames.org/export/codes.html\n\nfeature_codes = [\"PPLC\", \"PPLS\"]\n\nfor chunk in pd.read_csv(\n\n'allCountries.txt',\n\nheader=None,\n\nengine=\"python\",\n\nsep=\"\\t\",\n\nnames=[\n\n\"geonameid\",\n\n\"name\",\n\n\"asciiname\",\n\n\"alternatenames\",\n\n\"latitude\",\n\n\"longitude\",\n\n\"feature class\",\n\n\"feature code\",\n\n\"country code\",\n\n\"cc2\",\n\n\"admin1 code\",\n\n\"admin2 code\",\n\n\"admin3 code\",\n\n\"admin4 code\",\n\n\"population\",\n\n\"elevation\",\n\n\"dem\",\n\n\"timezone\",\n\n\"modification date\",\n\n],\n\nquoting=csv.QUOTE_NONE,\n\nchunksize=1\n\n):\n\ncountry_code = str(chunk[\"country code\"].item())\n\nfeature_code = str(chunk[\"feature code\"].item())\n\nif ((country_code in country_codes) and (feature_code in feature_codes)):\n\ncity = str(chunk[\"asciiname\"].item())\n\npair = (country_code, city)\n\ncountry_city_pairs.append(pair)\n\nThe above code (after additional processing) produces the following output, which clearly doesn't contain all the cities, towns and villages in Europe:\n\n(\"AD, Andorra la Vella\", \"AD, Andorra la Vella\"),\n\n(\"AL, Tirana\", \"AL, Tirana\"),\n\n(\"AT, Vienna\", \"AT, Vienna\"),\n\n(\"AX, Mariehamn\", \"AX, Mariehamn\"),\n\n(\"BA, Sarajevo\", \"BA, Sarajevo\"),\n\n(\"BA, Jabukovacko jezero\", \"BA, Jabukovacko jezero\"),\n\n(\"BE, Brussels\", \"BE, Brussels\"),\n\n(\"BG, Sofia\", \"BG, Sofia\"),\n\n(\"BY, Minsk\", \"BY, Minsk\"),\n\n(\"CH, Bern\", \"CH, Bern\"),\n\n(\"CZ, Zasada\", \"CZ, Zasada\"),\n\n(\"CZ, Prague\", \"CZ, Prague\"),\n\n(\"DE, Kissingerhoefen\", \"DE, Kissingerhoefen\"),\n\n(\"DE, Berlin\", \"DE, Berlin\"),\n\n(\"DE, Kleinthann\", \"DE, Kleinthann\"),\n\n(\"DK, Copenhagen\", \"DK, Copenhagen\"),\n\n(\"DK, Vittrup\", \"DK, Vittrup\"),\n\n(\"DK, Langkaerparken\", \"DK, Langkaerparken\"),\n\n(\"DK, Skarrev\", \"DK, Skarrev\"),\n\n(\"EE, Tallinn\", \"EE, Tallinn\"),\n\n(\"ES, Madrid\", \"ES, Madrid\"),\n\n(\"ES, Partido Judicial de Bilbao\", \"ES, Partido Judicial de Bilbao\"),\n\n(\"ES, Fiame\", \"ES, Fiame\"),\n\n(\"ES, Urbanizacion Playa de Verdicio\", \"ES, Urbanizacion Playa de Verdicio\"),\n\n(\"ES, Ciudad Deportiva Benidorm\", \"ES, Ciudad Deportiva Benidorm\"),\n\n(\"ES, Talavera la Nueva\", \"ES, Talavera la Nueva\"),\n\n(\"ES, Buenas Noches\", \"ES, Buenas Noches\"),\n\n(\"FI, Helsinki\", \"FI, Helsinki\"),\n\n(\"FI, Koivupaeae\", \"FI, Koivupaeae\"),\n\n(\"FI, Puolimatka\", \"FI, Puolimatka\"),\n\n(\"FI, Vehkoja\", \"FI, Vehkoja\"),\n\n(\"FI, Hakala\", \"FI, Hakala\"),\n\n(\"FI, Krokby\", \"FI, Krokby\"),\n\n(\"FR, Paris\", \"FR, Paris\"),\n\n(\"FR, Bramans\", \"FR, Bramans\"),\n\n(\"FR, Hameau de Chambre-Fontaine\", \"FR, Hameau de Chambre-Fontaine\"),\n\n(\"GB, London\", \"GB, London\"),\n\n(\"GB, North Yorkshire\", \"GB, North Yorkshire\"),\n\n(\"GB, Crofton\", \"GB, Crofton\"),\n\n(\"GB, Little Germany\", \"GB, Little Germany\"),\n\n(\"GB, Castle Vale\", \"GB, Castle Vale\"),\n\n(\"GG, Saint Peter Port\", \"GG, Saint Peter Port\"),\n\n(\"GI, Gibraltar\", \"GI, Gibraltar\"),\n\n(\"GR, Loumas\", \"GR, Loumas\"),\n\n(\"GR, Elounda\", \"GR, Elounda\"),\n\n(\"GR, Doloi\", \"GR, Doloi\"),\n\n(\"GR, Athens\", \"GR, Athens\"),\n\n(\"GR, Zagorochoria\", \"GR, Zagorochoria\"),\n\n(\"GR, Askyfou\", \"GR, Askyfou\"),\n\n(\"GR, Viniani\", \"GR, Viniani\"),\n\n(\"HR, Zagreb\", \"HR, Zagreb\"),\n\n(\"HU, Budapest\", \"HU, Budapest\"),\n\n(\"IE, Dublin\", \"IE, Dublin\"),\n\n(\"IE, Ladestown\", \"IE, Ladestown\"),\n\n(\"IM, Douglas\", \"IM, Douglas\"),\n\n(\"IT, Rome\", \"IT, Rome\"),\n\n(\"IT, Fontanelle\", \"IT, Fontanelle\"),\n\n(\"IT, Castello\", \"IT, Castello\"),\n\n(\"IT, Piazza Del Popolo\", \"IT, Piazza Del Popolo\"),\n\n(\"JE, Saint Helier\", \"JE, Saint Helier\"),\n\n(\"LI, Vaduz\", \"LI, Vaduz\"),\n\n(\"LT, Vilnius\", \"LT, Vilnius\"),\n\n(\"LU, Luxembourg\", \"LU, Luxembourg\"),\n\n(\"LV, Riga\", \"LV, Riga\"),\n\n(\"MC, Monaco\", \"MC, Monaco\"),\n\n(\"MD, Chisinau\", \"MD, Chisinau\"),\n\n(\"ME, Podgorica\", \"ME, Podgorica\"),\n\n(\"MK, Skopje\", \"MK, Skopje\"),\n\n(\"MT, Valletta\", \"MT, Valletta\"),\n\n(\"NL, Amsterdam\", \"NL, Amsterdam\"),\n\n(\"NL, Kelpen-Oler\", \"NL, Kelpen-Oler\"),\n\n(\"NL, Hunnerberg\", \"NL, Hunnerberg\"),\n\n(\"NL, Oost West en Middelbeers\", \"NL, Oost West en Middelbeers\"),\n\n(\"NO, Oslo\", \"NO, Oslo\"),\n\n(\"NO, Sagvoll\", \"NO, Sagvoll\"),\n\n(\"PL, Warsaw\", \"PL, Warsaw\"),\n\n(\"PL, Plac Kosciuszki\", \"PL, Plac Kosciuszki\"),\n\n(\"PL, Twierdza Modlin\", \"PL, Twierdza Modlin\"),\n\n(\"PL, Gniewniewice Folwarczne\", \"PL, Gniewniewice Folwarczne\"),\n\n(\"PT, Lisbon\", \"PT, Lisbon\"),\n\n(\"PT, Pero Viegas\", \"PT, Pero Viegas\"),\n\n(\"PT, Bairro da Asseca\", \"PT, Bairro da Asseca\"),\n\n(\"RO, Bucharest\", \"RO, Bucharest\"),\n\n(\"RS, Belgrade\", \"RS, Belgrade\"),\n\n(\"RU, Moscow\", \"RU, Moscow\"),\n\n(\"SE, Stockholm\", \"SE, Stockholm\"),\n\n(\"SE, Stroemnaeset\", \"SE, Stroemnaeset\"),\n\n(\"SI, Ljubljana\", \"SI, Ljubljana\"),\n\n(\"SI, Piculini\", \"SI, Piculini\"),\n\n(\"SK, Bratislava\", \"SK, Bratislava\"),\n\n(\"SK, Nova Dubrava\", \"SK, Nova Dubrava\"),\n\n(\"SK, Sidlovec\", \"SK, Sidlovec\"),\n\n(\"SK, Okruhliak\", \"SK, Okruhliak\"),\n\n(\"SK, Kisvisk\", \"SK, Kisvisk\"),\n\n(\"SM, San Marino\", \"SM, San Marino\"),\n\n(\"TR, Ankara\", \"TR, Ankara\"),\n\n(\"TR, Goelet\", \"TR, Goelet\"),\n\n(\"TR, Bahcecik\", \"TR, Bahcecik\"),\n\n(\"UA, Kyiv\", \"UA, Kyiv\"),\n\n(\"VA, Vatican City\", \"VA, Vatican City\"),\n\nI have the feature codes in my feature_codes list, but let me remind you that I want only cities, towns, villages, or other agglomerations of buildings where people live and work in Europe. If I put PPL in the feature_codes list as well, I get churches, hotels and other places as well, which I don't want.\n\nCan anyone tell me what I'm doing wrong? My best guess is that I should add some feature codes, but I don't know which ones.\n\nHi John\n\nWith PPLC, PPLS you will get a very reduced result, basically the\n\ncapital of each country. I would at least include PPLA (the seats of the\n\nprovinces (ADM1), maybe also PPLA2.\n\nYou wan't get 'spots' with PPL, there must have been someting wrong when\n\nyou tried this.\n\nBest Regards\n\nMarc\n\nJohn Reese wrote:\n\n> As the title says, I'm trying to extract cities, towns, villages, or\n\n> other agglomerations of buildings where people live and work in Europe,\n\n> yet I fail to do so.\n\n>\n\n> I am using allCountries.txt available from here\n\n> <http://download.geonames.org/export/dump/>.\n\nî—“\n\n> *Can anyone tell me what I'm doing wrong?* My best guess is that I\n\n> should add some feature codes, but I don't know which ones.\n\n>\n\n> --\n\n> You received this message because you are subscribed to the Google\n\n> Groups \"GeoNames\" group.\n\n> To unsubscribe from this group and stop receiving emails from it, send\n\n> an email to geonames+u...@googlegroups.com\n\n> <mailto:geonames+u...@googlegroups.com>.\n\n> To view this discussion on the web visit\n\n> https://groups.google.com/d/msgid/geonames/d68e9809-192c-4221-be1d-1983c4f311a6n%40googlegroups.com\n\n> <https://groups.google.com/d/msgid/geonames/d68e9809-192c-4221-be1d-1983c4f311a6n%40googlegroups.com?utm_medium=email&utm_source=footer>."
    }
}