{
    "id": "dbpedia_6156_1",
    "rank": 71,
    "data": {
        "url": "https://www.l-camera-forum.com/topic/298347-reading-m10-d-rawdng-files-with-linuxpythongimp/page/2/",
        "read_more_link": "",
        "language": "en",
        "title": "reading M10-D RAW/DNG files with linux/python/gimp",
        "top_image": "https://www.l-camera-forum.com/uploads/monthly_2019_06/20190516-151600-001.c_SI.jpg.81da542de2176f2f05471b655c219975.jpg",
        "meta_img": "https://www.l-camera-forum.com/uploads/monthly_2019_06/20190516-151600-001.c_SI.jpg.81da542de2176f2f05471b655c219975.jpg",
        "images": [
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/luf-logo-v1.png.d4ef2666a71b632718817375384ebf3e.png",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/emoticons/default_smile.png",
            "https://www.l-camera-forum.com/uploads/emoticons/default_smile.png",
            "https://www.l-camera-forum.com/uploads/reactions/react_like.png",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/profile/photo-5573.png",
            "https://www.l-camera-forum.com/uploads/monthly_2020_05/DM-400TX-35-24.thumb.jpg.612f0e3eafedceecee72ea7298cd6a7a.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/profile/photo-5573.png",
            "https://www.l-camera-forum.com/uploads/monthly_2020_05/DM-400TX-35-24.thumb.jpg.612f0e3eafedceecee72ea7298cd6a7a.jpg",
            "https://www.l-camera-forum.com/uploads/profile/photo-5573.png",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2020_05/DM-400TX-35-24.thumb.jpg.612f0e3eafedceecee72ea7298cd6a7a.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2019_06/20190516-151600-001.c_SI.jpg.81da542de2176f2f05471b655c219975.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2019_06/20190516-151600-000.a_SI.jpg.7c2ee7008b1154a61a9968eaac5b1fa0.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/profile/photo-thumb-59691.jpg",
            "https://www.l-camera-forum.com/uploads/profile/photo-thumb-59691.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/emoticons/default_smile.png",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/reactions/react_like.png",
            "https://www.l-camera-forum.com/uploads/profile/photo-5573.png",
            "https://www.l-camera-forum.com/uploads/profile/photo-5573.png",
            "https://www.l-camera-forum.com/uploads/reactions/react_thanks.png",
            "https://www.l-camera-forum.com/uploads/reactions/react_thanks.png",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2020_06/Nocti.thumb.jpg.9a64dc65012d3c93d04409216cf5541a.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2020_06/Nocti.thumb.jpg.9a64dc65012d3c93d04409216cf5541a.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2020_06/Nocti.thumb.jpg.9a64dc65012d3c93d04409216cf5541a.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2020_06/Nocti.thumb.jpg.9a64dc65012d3c93d04409216cf5541a.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/monthly_2018_10/20071029-195545_IAM.Pleh_Csabaval.IMG_3888.crop_400x400.thumb.jpg.f1a9b21640294e758c51ff4bf3174a75.jpg",
            "https://www.l-camera-forum.com/uploads/set_resources_2/84c1e40ea0e759e3f1505eb1788ddf3c_default_photo.png",
            "https://www.l-camera-forum.com/uploads/profile/photo-thumb-12422.png"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "fenykepesz"
        ],
        "publish_date": "2019-06-16T00:31:52+00:00",
        "summary": "",
        "meta_description": "",
        "meta_lang": "en",
        "meta_favicon": "https://www.l-camera-forum.com/uploads/monthly_2022_08/android-chrome-36x36.png?v=1713945598",
        "meta_site_name": "Leica Forum",
        "canonical_link": "https://www.l-camera-forum.com/topic/298347-reading-m10-d-rawdng-files-with-linuxpythongimp/page/2/",
        "text": "Advertisement (gone after registration)\n\nJust found this thread and thought I could chime in.\n\nI use just one computer and OS for work and anything else,\n\nto make my life easier at work, it runs OpenBSD.\n\nStill with the M9 but most I write here should apply to the M10 anyway.\n\nDidn't do anything special with the SD card, it might already have been in FAT32,\n\njust shot with it and stuck it into the SD card slot of the laptop.\n\nhotplugd(8) cares for the import of data to a memory based file system (maybe not relevant anymore\n\nwith the speed of today SSDs but it made a difference with spinning disks)\n\ndcraw or its unmaintained floating point fork cares for demosaicing the DNG into a white balanced\n\n16 bit linear gamma tiff with a so called \"Raw color\" (unique to each camera model) colorspace\n\nas asked and will do nothing more.\n\ngraphicsmagick will assign an ICC profile and further processing such as lightness, saturation, gamma,\n\ncontrast, etc… as needed or wished.\n\nThe dcraw/graphicsmagick part is just a one-liner thanks to unix pipe and can be recalled\n\nwith a few keystroke thanks to the shell history. Compression and resizing to fit forum requirement\n\nis part of one of these one-liners. The only button I click during the whole process is on the web browser\n\nwhen I want to upload the picture.\n\nWho said lazy?\n\nAs much as I love Linux, BSD (OpenBSD particularly), Unix and Python in general (it’s what I base most of my income generating work on), it’s sad that you guys choose to convert the raw files to tiff before applying any adjustments to shadows or highlights, especially considering that the M10 files can recover tremendous amounts of shadow detail.\n\nConverting to tiff before adjusting shadows or highlights will result in a huge loss of available dynamic range and especially shadow detail (data).\n\nPhotography is a visual medium and the command line might not be the best place to process a visual medium. There is a reason why really old film scanners still provided visual previews of scans. The guys at the development lab did in fact make adjustments prior to scanning. The same was also done in the darkroom. Very few processed with blindfolds on in the darkroom. Which the command line is the equivalent of doing.\n\nThe best part of Emacs is definitely this easter egg: emacs -batch -l dunnet\n\nIts the only thing I use emacs for. Otherwise I prefer nano these days\n\nEdited July 20, 2019 by indergaard\n\nthis whole field of RAW/DNG conversion is new-land to me. i am therefore entirely open to suggestions. as you, indergaard, seem to live in a similar computing environment i am curious and keen to hear your advice regarding linux compatible solutions. i just thought that those 14bit Leica DNG files are fully represented in the 16bit TIFFs and therefore could the subsequent adjustments be done in the TIFF space. i am actually already experiencing quite some difficulty (in Gimp) correcting my flat and dark looking files, and and was wondering what color correction scheme i could apply to and perhaps extract from the DNGs. if possible i would prefer to do the data-prep step in python and thereafter switch to the next phase using Gimp for data processing. i vaguely remember reading years ago doing raw conversion in Gimp. i guess i have to go behind the books = rtfm !\n\nregarding scanning film (and darkroom), i actually scanned over 5 years all my negatives, mainly b&w which is obviously simpler, but then also color negatives and diapositives. so, at times i adjusted my settings prior to scanning where it deemed worth the time. in that sense i fully agree with your comment.\n\n2 hours ago, indergaard said:\n\nAs much as I love Linux, BSD (OpenBSD particularly), Unix and Python in general (it’s what I base most of my income generating work on), it’s sad that you guys choose to convert the raw files to tiff before applying any adjustments to shadows or highlights, especially considering that the M10 files can recover tremendous amounts of shadow detail.\n\nConverting to tiff before adjusting shadows or highlights will result in a huge loss of available dynamic range and especially shadow detail (data).\n\nPhotography is a visual medium and the command line might not be the best place to process a visual medium. There is a reason why really old film scanners still provided visual previews of scans. The guys at the development lab did in fact make adjustments prior to scanning. The same was also done in the darkroom. Very few processed with blindfolds on in the darkroom. Which the command line is the equivalent of doing.\n\nI won't comment on the \"huge loss\" as I'm still amazed at how much one can, even from the M9 which is not famous for high dynamic range, recover from the shadows even with the method I wrote in an above post. I stick with base iso, that's why the raw converter picks up a low black point which might help in this regard. If your method works even better I'm happy for you. I won't talk either about adjusting highlights after the tiff conversion as I never do it and tend to avoid blowing them at exposure as much as I can.\n\nRegarding the command line part, you are aware that it is just an input method as is a GUI? Maybe are you confusing the command line in a graphical session with the text only console session? Using command line input does not prevent one from seeing the resulting picture at the same time in an image viewing utility, I'm not sure where the blindfolds are coming from.\n\nThe dng file is pure raw data from the sensor. Any conversion to tiff, regardless of settings, will result in a noticeable loss in data. Linear conversions can probably keep most of the data from the M9, but the M10 has a whole lot more shadow detail that can be recovered. But a linear approach is probably the best way to convert to tiff.\n\nTo get optimum dng > tiff conversions, manual labor is required. Copy the files of the card, open them in Darktable or Rawtherapee, adjust and recover the data you would want to preserve, then export to tiff, and then proceed with the rest of the routine. The darktable or rawtherapee stage cannot be automated, because each image is unique, and the data recovery needed will differ from image to image, depending on the scene, light, exposure, etc.\n\nA dng > tiff file conversion will only result in the tiff file keeping what is \"visible\", but not what is -5 stops in the shadow areas of an image. In my opinion, a tiff file is the final export/output archival medium AFTER adjustments has been made, and the image has been finalized. Then base future prints, jpeg exports of various sizes, etc. on the tiff itself, but never alter the archival file. Or just keep the raw / dng file as the archival file, and apply non-destructive processing in darktable or rawtherapee.\n\n11 hours ago, indergaard said:\n\nThe dng file is pure raw data from the sensor. Any conversion to tiff, regardless of settings, will result in a noticeable loss in data. Linear conversions can probably keep most of the data from the M9, but the M10 has a whole lot more shadow detail that can be recovered. But a linear approach is probably the best way to convert to tiff.\n\nTo get optimum dng > tiff conversions, manual labor is required. Copy the files of the card, open them in Darktable or Rawtherapee, adjust and recover the data you would want to preserve, then export to tiff, and then proceed with the rest of the routine. The darktable or rawtherapee stage cannot be automated, because each image is unique, and the data recovery needed will differ from image to image, depending on the scene, light, exposure, etc.\n\nWell, I think we have to agree on the fact that we disagree, the possible quantity of detail to be recovered does not change the method. Just for fun I tried mine with a M10 sample DNG shot against the light from the Leica website and I got perfectly detailed highlights and shadows. On the \"manual labor is required\" assertion, as long as lightning condition and exposure are consistent on a session, the only uniqueness on a picture is the content and much of the processing routine can be automated, maybe that is the reason why raw converters developers implement a batch mode functionality in their product?\n\nOn a WYSIWYG workflow, you are working on interpolated data as soon as you can see your photo on the screen. For you to see the photo correctly, at least some gamma correction has already been applied and most raw converters default to some other transformation as well. Do you believe that these interpolated and gamma corrected data are still \"pure raw data from the sensor\"? Even if the software did the whole processing one more time on the unaltered raw data before exporting to tiff, it doesn't change the fact that you were visually working on already altered data. My point is that no matter what, we are all working on data that may not be exactly what the sensor recorded but are still more than adequate to yield fine results and hair splitting won't change that.\n\nmany thanks for all your inputs and at times lively discussions - i learned quite a bit in this forum.\n\ni think i got this RAW/DNG workflow business worked out for my Linux environment where i through my Python based photo manager program (fm.py) simply call RawTherapee and Gimp as needed. for me, the main learning curve - coming from film, the M10-D is in fact the first digital camera i ever bought - was in understanding that a so called photo raw data converter does a different job as compared to a picture editor. having worked in image processing for decades, it was for me hard to imagine the difference between a DNG and a TIFF file for example : data is data, 16(14)bit RGB is still 16bit RGB, right ? i understand that re-scaling of a vector can degrade information content.\n\ni still assume that converting RAW to a TIFF-A file with rawpy without any data alteration, then using RawTherapee (or LR) for the raw-adjustments in a TIFF-B file, and lastly doing the picture editing with Gimp (or PS) in a TIFF-C file can lead to the same result than doing it the usual way raw->tiff->tiff with LR & PS. there is no magic about these raw converters, right ? to me they just look like specialized picture editors. but please correct me if i am wrong here.\n\ni still don't know how much of the lens distortion, aberration and vignetting stuff gets in the M10 camera itself corrected at time of image capture... ?\n\nHaving used Linux since an early pre-alpha 1.0 kernel version I have no doubt the rough and inexpedient time of Linux is over. Once the desktop is installed and configured its pretty similar to Windows or Apple OS. If you like the concept of UNIX you will probably make use of the fabulous OS underneath the Desktop-GUI.\n\nThe ideal workflow to develop DNG files depends on your needs and preferences, sure. I do the entire post processing in RT before I post a photo in the LUF. That's all I do as I don't like to spend too much time editing photo to my taste. In my opinion there is no need to convert a DNG into TIFF first as DNG is the raw file. RT comes with a decent GUI but it's not that easy. You probably have to RTFM. If you like the command line interface - here you go: there is comman-line app called rawtherapee-cli with loads of parameter to play with. The combination with imagemagick opens up a whole new world.\n\n$ rawtherapee-cli -help is your friend:\n\nOptions:\n\nrawtherapee-cli[-o <output>|-O <output>] [-q] [-a] [-s|-S] [-p <one.pp3> [-p <two.pp3> ...] ] [-d\n\n] [ -j[1-100] -js<1-3> | -t[z] -b<8|16|16f|32> | -n -b<8|16> ] [-Y] [-f] -c <input>\n\n-c <files> Specify one or more input files or folders.\n\nWhen specifying folders, Rawtherapee will look for image file types which comply\n\nwith the selected extensions (see also '-a').\n\n-c must be the last option.\n\n-o <file>|<dir> Set output file or folder.\n\nSaves output file alongside input file if -o is not specified.\n\n-O <file>|<dir> Set output file or folder and copy pp3 file into it.\n\nSaves output file alongside input file if -O is not specified.\n\n-q Quick-start mode. Does not load cached files to speedup start time.\n\n-a Process all supported image file types when specifying a folder, even those\n\nnot currently selected in Preferences > File Browser > Parsed Extensions.\n\n-s Use the existing sidecar file to build the processing parameters,\n\ne.g. for photo.raw there should be a photo.raw.pp3 file in the same folder.\n\nIf the sidecar file does not exist, neutral values will be used.\n\n-S Like -s but skip if the sidecar file does not exist.\n\n-p <file.pp3> Specify processing profile to be used for all conversions.\n\nYou can specify as many sets of \"-p <file.pp3>\" options as you like,\n\neach will be built on top of the previous one, as explained below.\n\n-d Use the default raw or non-raw processing profile as set in\n\nPreferences > Image Processing > Default Processing Profile\n\n-j[1-100] Specify output to be JPEG (default, if -t and -n are not set).\n\nOptionally, specify compression 1-100 (default value: 92).\n\n-js<1-3> Specify the JPEG chroma subsampling parameter, where:\n\n1 = Best compression: 2x2, 1x1, 1x1 (4:2:0)\n\nChroma halved vertically and horizontally.\n\n2 = Balanced (default): 2x1, 1x1, 1x1 (4:2:2)\n\nChroma halved horizontally.\n\n3 = Best quality: 1x1, 1x1, 1x1 (4:4:4)\n\nNo chroma subsampling.\n\n-b<8|16|16f|32> Specify bit depth per channel.\n\n8 = 8-bit integer. Applies to JPEG, PNG and TIFF. Default for JPEG and PNG.\n\n16 = 16-bit integer. Applies to TIFF and PNG. Default for TIFF.\n\n16f = 16-bit float. Applies to TIFF.\n\n32 = 32-bit float. Applies to TIFF.\n\n-t[z] Specify output to be TIFF.\n\nUncompressed by default, or deflate compression with 'z'.\n\n-n Specify output to be compressed PNG.\n\nCompression is hard-coded to PNG_FILTER_PAETH, Z_RLE.\n\n-Y Overwrite output if present.\n\n-f Use the custom fast-export processing pipeline.\n\nbtw: RT uses a patched version of dcraw code to read and parse raw formats. Lensfun will do the lens correction. Unfortunately, the support for M-Lenses could be much better.\n\ndear Frank, thank you for your informative reply. first i also used rawpy but then i switched to RawTherapee & Co :\n\nsubprocess.call([ me.RawEditorCli,'-q','-o',PathImgJpeg,'-c',PathImg]) im =Image.open(PathImgJpeg)if im.mode !='RGB': im = im.convert('RGB') f = open(PathImg,'rb') tags = exifread.process_file( f)\n\ni actually don't understand why this raw2tiff/jpeg conversion cannot be done directly in Gimp/Photoshop or similar image editing software. i mean, a 16bit DNG matrix is not different from a 16bit TIFF matrix. what's the big fuss about this RAW conversion business ? there is no magic involved here. i understand that there are these profile curves, very helpful indeed - but why does this preprocessing step need to be separate ? can't it just be incorporated in the regular processing flow inside our favoured image editor ?\n\nanyway, i am more than happy with my M10D and my current image processing workflow using lnx/python3/RT/Gimp. only the b&w conversion could be better, the current c2g algorithm has its flaws, and i hope the next version of Gegl/Gimp will have these flaw ironed out."
    }
}