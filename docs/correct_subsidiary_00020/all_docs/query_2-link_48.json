{
    "id": "correct_subsidiary_00020_2",
    "rank": 48,
    "data": {
        "url": "https://www.telerik.com/forums/radgrid-runtime-columns",
        "read_more_link": "",
        "language": "en",
        "title": "RadGrid Runtime Columns in UI for ASP.NET AJAX",
        "top_image": "",
        "meta_img": "",
        "images": [
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/39919b70-532f-465f-8efd-7edb2fc108a71.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/rank-02.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/adminimages/vladimir.enchev@telerik.com.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/support-officer.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/support-officer.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/support-officer.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/support-officer.svg",
            "https://www.telerik.com/forums/images/avatarimages/cccp.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/8e36b7aa-6160-44f8-9505-1c17b6b6f527avatar.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/rank-02.svg",
            "https://www.telerik.com/forums/images/avatarimages/93d3aff7-5a66-49b4-b695-33023bd4d24achesapeakecity.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/93d3aff7-5a66-49b4-b695-33023bd4d24achesapeakecity.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/cuttingedge.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/adminimages/admin-user-817.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/support-officer.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/39919b70-532f-465f-8efd-7edb2fc108a71.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/rank-02.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/adminimages/vladimir.enchev@telerik.com.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/support-officer.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/support-officer.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/cccp.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/8e36b7aa-6160-44f8-9505-1c17b6b6f527avatar.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/rank-02.svg",
            "https://www.telerik.com/forums/images/avatarimages/93d3aff7-5a66-49b4-b695-33023bd4d24achesapeakecity.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/cuttingedge.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/avatarimages/default.gif",
            "https://www.telerik.com/forums/images/forum-gamification/rank-01.svg",
            "https://www.telerik.com/forums/images/adminimages/admin-user-817.jpg",
            "https://www.telerik.com/forums/images/forum-gamification/support-officer.svg"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "I'm working on creating an asp.net user control that contains a RadGrid.&nbsp; Within the user control I want to define the columns in the RadGrid at runtime...",
        "meta_lang": "",
        "meta_favicon": "/forums/favicon.ico?v=e5kLIm-z6JcLdQ3skdToubWbK3sGnQJD179w_r6O3lM",
        "meta_site_name": "",
        "canonical_link": "https://www.telerik.com/forums/radgrid-runtime-columns",
        "text": "Hello Desiree,\n\nThank you for the detailed explanation - I understand your concerns and agree that notes/warnings should be present in the API reference when code concerning grid dynamic creation is included. I will notify our documentation writers for that to gradually inject such comments in the RadControls for ASP.NET AJAX server API docs for the next versions of the components.\n\nIn addition, I would like to draw your attention to the following paragraphs explaining how to build the RadGrid structure at runtime (on PageLoad or PageInit respectively):\n\nCreating the grid entirely in the code behind\n\nWhen generating RadGrid instance entirely in code, you should use the Page_Init or Page_Load event handlers.\n\nCreating RadGrid on Page_Load\n\nWhen creating RadGrid on Page_Load event, the columns or detail tables should be added to the corresponding collection first and then values for the properties of this instance should be set. Remember to check the condition (Not IsPostBack) to avoid adding the same structure objects to the grid twice. This is important because no ViewState is managed for the object before it has been added to the corresponding collection.\n\nCreating RadGrid on Page_Init\n\nWhen generating a grid in the Page_Init event handler, grid columns should be added to the Controls collection of the MasterTableView after their attributes are set. No ViewState is required for grid structure to be persisted as it is recreated on each page initialization.\n\nThey summarized the main concepts that one has to conform to in order to ensure that the viewstate and column structure of the control will be consistent.\n\nKind regards,\n\nSebastian\n\nthe Telerik team\n\nBrowse the vast support resources we have to jump start your development with RadControls for ASP.NET AJAX. See how to integrate our AJAX controls seamlessly in SharePoint 2007/2010 visiting our common SharePoint portal.\n\nI also have the same problem. When I load the grid first time its fine. When I click on the columns to sort, it sorts fine but adds the columns again to the grid. I would appreciate if I can get some help. I am attaching the code below. I am using the .net 2.0 dll version Telerik.Web.UI.dll(2010.3.1317.20)\n\nRadGridFIlter.cs(code below):\n\nusing System;\n\nusing System.Collections.Generic;\n\nusing System.Text;\n\nusing Telerik.Web.UI;\n\nusing System.Web.UI;\n\nusing System.Web.UI.WebControls;\n\nusing System.Web.UI.HtmlControls;\n\nusing System.Data.SqlClient;\n\nusing System.Data;\n\nusing System.Configuration;\n\nnamespace RadWebUIControls\n\n{\n\n/// <summary>\n\n/// Summary description for RadGridFilter.\n\n/// </summary>\n\npublic class RadGridFilter:RadGrid\n\n{\n\npublic RadGridFilter()\n\n: base()\n\n{\n\n}\n\npublic void CreateDataGrid(System.Data.DataSet dsQDFields)\n\n{\n\nthis.ID = \"RadWorkItemDataGrid\";\n\n//this.Columns.Clear();\n\nthis.ShowStatusBar = true;\n\nthis.AutoGenerateColumns = false;\n\nthis.MasterTableView.PageSize = 50;\n\nthis.AllowSorting = true;\n\nthis.AllowMultiRowSelection = false;\n\nthis.AllowPaging = true;\n\n//this.EnableViewState = false;\n\n//this.AllowAutomaticDeletes = true;\n\n//this.AllowAutomaticInserts = true;\n\n//this.AllowAutomaticUpdates = true;\n\nthis.GridLines = GridLines.None;\n\nthis.PagerStyle.Mode = GridPagerMode.NumericPages;\n\nthis.MasterTableView.DataKeyNames = new string[] { \"EmployeeID\" };\n\nthis.AddTemplateColumn(this.SelectWorkItemTemplateColumn());\n\nthis.AddTemplateColumn(this.ViewImageTemplateColumn());\n\nforeach (DataRow drQRow in dsQDFields.Tables[0].Rows)\n\n{\n\nif (drQRow[\"DataTypeName\"].ToString().ToUpper().Equals(\"DATE\"))\n\n{\n\n//this.AddBoundColumn(drQRow[\"FieldName\"].ToString(), drQRow[\"FieldName\"].ToString(), drQRow[\"FieldDisplayName\"].ToString(), true, System.Web.UI.WebControls.HorizontalAlign.Left, System.Web.UI.WebControls.VerticalAlign.Middle, false, \"{0:MM/DD/YYYY}\",Convert.ToInt16(drQRow[\"GridColSize\"]));\n\nthis.AddBoundColumn(drQRow[\"FieldName\"].ToString(), drQRow[\"FieldName\"].ToString(), drQRow[\"FieldDisplayName\"].ToString(), true, System.Web.UI.WebControls.HorizontalAlign.Left, System.Web.UI.WebControls.VerticalAlign.Middle, false, \"{0:d}\",0);\n\n}\n\nelse\n\n{\n\n//this.AddBoundColumn(drQRow[\"FieldName\"].ToString(), drQRow[\"FieldName\"].ToString(), drQRow[\"FieldDisplayName\"].ToString(), true, System.Web.UI.WebControls.HorizontalAlign.Left, System.Web.UI.WebControls.VerticalAlign.Middle, false, \"\", Convert.ToInt16(drQRow[\"GridColSize\"]));\n\nthis.AddBoundColumn(drQRow[\"FieldName\"].ToString(), drQRow[\"FieldName\"].ToString(), drQRow[\"FieldDisplayName\"].ToString(), true, System.Web.UI.WebControls.HorizontalAlign.Left, System.Web.UI.WebControls.VerticalAlign.Middle, false, \"\",0);\n\n}\n\nif (!drQRow.IsNull(\"HideColumn\") && Convert.ToInt16(drQRow[\"HideColumn\"]) == 1)\n\n{\n\nHideColumn(drQRow[\"FieldDisplayName\"].ToString());\n\n}\n\n}\n\nthis.AddTemplateColumn(this.EditWorkItemTemplateColumn());\n\n//this.EnableSorting(System.Drawing.Color.White);\n\n}\n\n//public void LoadData(DataSet pData, string sFilter, string pSortOrder, string pSelectedItems, string pLastItemViewed, string pUserName, string pStepName, string pObjectStore, string pQType)\n\npublic void LoadData(DataTable pData, string sFilter, string pSortOrder)\n\n{\n\nthis.VirtualItemCount = pData.Rows.Count;\n\npData.DefaultView.Sort = pSortOrder;\n\nif (sFilter != null && !sFilter.Equals(string.Empty))\n\npData.DefaultView.RowFilter = sFilter;\n\nthis.DataSource = pData.DefaultView;\n\nthis.DataBind();\n\n}\n\n/// <summary>\n\n/// Add template column\n\n/// </summary>\n\npublic void AddTemplateColumn(GridTemplateColumn pTemplateColumn)\n\n{\n\nthis.MasterTableView.Columns.Add(pTemplateColumn);\n\n}\n\n/// <summary>\n\n/// Add bound column\n\n/// </summary>\n\npublic void AddBoundColumn(string pDataField, string pSortExpression, string pHeaderText, bool pReadOnly, HorizontalAlign pHalign, VerticalAlign pValign, bool pWrap, string pFormat, int pWidth)\n\n{\n\nGridBoundColumn column = new GridBoundColumn();\n\n//BoundColumn column = new BoundColumn();\n\ncolumn.HeaderText = pHeaderText;\n\ncolumn.DataField = pDataField;\n\ncolumn.ReadOnly = pReadOnly;\n\ncolumn.UniqueName = pDataField;\n\ncolumn.ItemStyle.Wrap = pWrap;\n\ncolumn.ItemStyle.VerticalAlign = pValign;\n\ncolumn.ItemStyle.HorizontalAlign = pHalign;\n\nif (pWidth > 0)\n\ncolumn.ItemStyle.Width = Unit.Pixel(pWidth);\n\ncolumn.SortExpression = pSortExpression;\n\nif (pFormat != String.Empty)\n\ncolumn.DataFormatString = pFormat;\n\n//this.Columns.Add(column);\n\nthis.MasterTableView.Columns.Add(column);\n\n}\n\n/// <summary>\n\n/// Hide the column.\n\n/// </summary>\n\npublic void HideColumn(string pHeaderText)\n\n{\n\nfor (int _i = 0; _i < this.MasterTableView.Columns.Count; _i++)\n\n{\n\nif (this.MasterTableView.Columns[_i].HeaderText.IndexOf(pHeaderText) >= 0)\n\n{\n\nthis.MasterTableView.Columns[_i].Visible = false;\n\nbreak;\n\n}\n\n}\n\n}\n\n/// <summary>\n\n/// Show the column.\n\n/// </summary>\n\npublic void ShowColumn(string pHeaderText)\n\n{\n\nfor (int _i = 0; _i < this.MasterTableView.Columns.Count; _i++)\n\n{\n\nif (this.MasterTableView.Columns[_i].HeaderText.IndexOf(pHeaderText) >= 0)\n\n{\n\nthis.MasterTableView.Columns[_i].Visible = true;\n\nbreak;\n\n}\n\n}\n\n}\n\n/// <summary>\n\n/// Hide the Select column.\n\n/// </summary>\n\npublic void HideSelect()\n\n{\n\nthis.HideColumn(\"Select\");\n\n}\n\n/// <summary>\n\n/// Show the Select column.\n\n/// </summary>\n\npublic void ShowSelect()\n\n{\n\nthis.ShowColumn(\"Select\");\n\n}\n\n/// <summary>\n\n/// Hide the View column.\n\n/// </summary>\n\npublic void HideViewWorkItem()\n\n{\n\nthis.HideColumn(\"View\");\n\n}\n\n/// <summary>\n\n/// Show the View column.\n\n/// </summary>\n\npublic void ShowViewWorkItem()\n\n{\n\nthis.ShowColumn(\"View\");\n\n}\n\n/// <summary>\n\n/// Show the Process column.\n\n/// </summary>\n\npublic void ShowProcessWorkItem()\n\n{\n\nthis.ShowColumn(\"Process\");\n\n}\n\n/// <summary>\n\n/// Hide the Process column.\n\n/// </summary>\n\npublic void HideProcessWorkItem()\n\n{\n\nthis.HideColumn(\"Process\");\n\n}\n\npublic int GetSelectedRowIndexForJavascript(int pItemIndex)\n\n{\n\nint _selectRow = (pItemIndex + 1);\n\nif (this.AllowPaging &&\n\nthis.PagerStyle.Visible &&\n\n(this.PagerStyle.Position == GridPagerPosition.Top || this.PagerStyle.Position == GridPagerPosition.TopAndBottom))\n\n{\n\n_selectRow = (pItemIndex + 2);\n\n}\n\nreturn _selectRow;\n\n}\n\nprotected GridTemplateColumn SelectWorkItemTemplateColumn()\n\n{\n\nGridTemplateColumn _tmpCol = new GridTemplateColumn();\n\n_tmpCol.ItemTemplate = new SelectWorkItemColumn();\n\n_tmpCol.ItemStyle.HorizontalAlign = System.Web.UI.WebControls.HorizontalAlign.Center;\n\n_tmpCol.HeaderText = \"Select\";\n\n_tmpCol.UniqueName = \"SelectWorkItem\";\n\nreturn _tmpCol;\n\n}\n\nprotected GridTemplateColumn EditWorkItemTemplateColumn()\n\n{\n\nGridTemplateColumn _tmpCol = new GridTemplateColumn();\n\n_tmpCol.ItemTemplate = new EditWorkItemColumn();\n\n_tmpCol.HeaderText = \"Process\";\n\n_tmpCol.ItemStyle.HorizontalAlign = System.Web.UI.WebControls.HorizontalAlign.Center;\n\n_tmpCol.UniqueName = \"EditWorkItem\";\n\nreturn _tmpCol;\n\n}\n\nprotected GridTemplateColumn ViewImageTemplateColumn()\n\n{\n\nGridTemplateColumn _tmpCol = new GridTemplateColumn();\n\n_tmpCol.HeaderText = \"View\";\n\n_tmpCol.HeaderStyle.HorizontalAlign = System.Web.UI.WebControls.HorizontalAlign.Center;\n\n_tmpCol.ItemTemplate = (new ViewWorkItemImageColumn());\n\n_tmpCol.ItemStyle.HorizontalAlign = System.Web.UI.WebControls.HorizontalAlign.Center;\n\n_tmpCol.UniqueName = \"ViewDocument\";\n\nreturn _tmpCol;\n\n}\n\n}\n\n/// <summary>\n\n/// Summary description for SelectWorkItemColumn\n\n/// </summary>\n\npublic class SelectWorkItemColumn : System.Web.UI.ITemplate\n\n{\n\npublic void InstantiateIn(System.Web.UI.Control container)\n\n{\n\nCheckBox _select = new CheckBox();\n\n_select.ID = \"SelectWorkItem\";\n\ncontainer.Controls.Add(_select);\n\n}\n\n}\n\n/// <summary>\n\n/// Summary description for EditWorkItemColumn\n\n/// </summary>\n\npublic class EditWorkItemColumn : System.Web.UI.ITemplate\n\n{\n\npublic void InstantiateIn(System.Web.UI.Control container)\n\n{\n\nHyperLink _edit = new HyperLink();\n\n//_edit.Target = \"_BLANK\";\n\n_edit.Text = \"Process\";\n\n_edit.Attributes.Add(\"target\", \"_blank\");\n\n_edit.ID = \"EditWorkItem\";\n\n_edit.CssClass = \"DataGridLinkButton\";\n\ncontainer.Controls.Add(_edit);\n\n}\n\n}\n\n/// <summary>\n\n/// Summary description for ViewWorkItemImageColumn\n\n/// </summary>\n\npublic class ViewWorkItemImageColumn : System.Web.UI.ITemplate\n\n{\n\npublic void InstantiateIn(System.Web.UI.Control container)\n\n{\n\nLinkButton _view = new LinkButton();\n\n_view.Text = \"View\";\n\n_view.ID = \"ViewImage\";\n\n_view.CssClass = \"DataGridLinkButton\";\n\ncontainer.Controls.Add(_view);\n\n}\n\n}\n\n}\n\nCustomRadGrid.aspx(Code below):\n\n<%@ Page Language=\"C#\" AutoEventWireup=\"true\" CodeFile=\"CustomRadGrid.aspx.cs\" Inherits=\"CustomRadGrid\" %>\n\n<%@ Register TagPrefix=\"radweb\" Namespace=\"RadWebUIControls\" Assembly=\"RadWebUIControls\" %>\n\n<%@ Register TagPrefix=\"telerik\" Namespace=\"Telerik.Web.UI\" Assembly=\"Telerik.Web.UI\" %>\n\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n\n<html xmlns=\"http://www.w3.org/1999/xhtml\" >\n\n<head runat=\"server\">\n\n<title>Untitled Page</title>\n\n</head>\n\n<body>\n\n<form id=\"form1\" runat=\"server\">\n\n<telerik:RadScriptManager ID=\"RadScriptManager1\" runat=\"server\" />\n\n<div>\n\n<radweb:RadGridFilter ID=\"WorkItemDataRadGrid\" runat=\"server\" > </radweb:RadGridFilter>\n\n<telerik:RadAjaxManager ID=\"RadAjaxManager1\" runat=\"server\">\n\n</telerik:RadAjaxManager>\n\n</div>\n\n</form>\n\n</body>\n\n</html>\n\nCustomRadGrid.aspx(Code behind below):\n\nusing System;\n\nusing System.Data;\n\nusing System.Configuration;\n\nusing System.Collections;\n\nusing System.Web;\n\nusing System.Web.Security;\n\nusing System.Web.UI;\n\nusing System.Web.UI.WebControls;\n\nusing System.Web.UI.WebControls.WebParts;\n\nusing System.Web.UI.HtmlControls;\n\nusing System.Data.SqlClient;\n\nusing Telerik.Web.UI;\n\npublic partial class CustomRadGrid : System.Web.UI.Page\n\n{\n\npublic static DataTable dtTable;\n\nprotected void Page_Load(object sender, EventArgs e)\n\n{\n\nRadAjaxManager1.AjaxSettings.AddAjaxSetting(WorkItemDataRadGrid, WorkItemDataRadGrid);\n\nif (!this.IsPostBack)\n\n{\n\nLoadData1();\n\n}\n\n}\n\nprivate void LoadData1()\n\n{\n\n//DataSet dsTemp = new DataSet();\n\nif (ViewState[\"WorkItemsList\"] == null)\n\n{\n\nSqlConnection SqlConnection = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings[\"NorthwindConnectionString\"].ToString());\n\n//Declare a global SqlDataAdapter SqlDataAdapter\n\nSqlDataAdapter SqlDataAdapter = new SqlDataAdapter();\n\n//Declare a global SqlCommand SqlCommand\n\nSqlCommand SqlCommand = new SqlCommand();\n\nSqlConnection.Open();\n\nSqlCommand.CommandText = \"Select EmployeeID,FirstName,LastName,BirthDate,City from Employees\";\n\nSqlCommand.Connection = SqlConnection;\n\nSqlDataAdapter.SelectCommand = SqlCommand;\n\ndtTable = new DataTable();\n\nSqlDataAdapter.Fill(dtTable);\n\nViewState.Add(\"WorkItemsList\", dtTable);\n\nSqlConnection.Close();\n\n}\n\nelse\n\n{\n\ndtTable = (DataTable)(ViewState[\"WorkItemsList\"]);\n\n}\n\n//dsTemp.Tables.Add(dtTable);\n\nWorkItemDataRadGrid.LoadData(dtTable, \"\", \"FirstName\");\n\n}\n\nprotected void Page_Init(object sender, EventArgs e)\n\n{\n\n//if (!this.IsPostBack)\n\n//{\n\nDataSet dsQE = new DataSet();\n\nDataTable dtQE = new DataTable(\"QDataFields\");\n\ndtQE.Columns.Add(new DataColumn(\"DataTypeName\", System.Type.GetType(\"System.String\")));\n\ndtQE.Columns.Add(new DataColumn(\"FieldName\", System.Type.GetType(\"System.String\")));\n\ndtQE.Columns.Add(new DataColumn(\"HideColumn\", System.Type.GetType(\"System.Boolean\")));\n\ndtQE.Columns.Add(new DataColumn(\"FieldDisplayName\", System.Type.GetType(\"System.String\")));\n\nDataRow drQE;\n\ndrQE = dtQE.NewRow();\n\ndrQE[dtQE.Columns.IndexOf(\"DataTypeName\")] = \"INT\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldName\")] = \"EmployeeeID\";\n\ndrQE[dtQE.Columns.IndexOf(\"HideColumn\")] = \"False\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldDisplayName\")] = \"EmployeeeID\";\n\ndtQE.Rows.Add(drQE);\n\ndrQE = dtQE.NewRow();\n\ndrQE[dtQE.Columns.IndexOf(\"DataTypeName\")] = \"STRING\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldName\")] = \"FirstName\";\n\ndrQE[dtQE.Columns.IndexOf(\"HideColumn\")] = \"False\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldDisplayName\")] = \"First Name\";\n\ndtQE.Rows.Add(drQE);\n\ndrQE = dtQE.NewRow();\n\ndrQE[dtQE.Columns.IndexOf(\"DataTypeName\")] = \"STRING\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldName\")] = \"LastName\";\n\ndrQE[dtQE.Columns.IndexOf(\"HideColumn\")] = \"False\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldDisplayName\")] = \"Last Name\";\n\ndtQE.Rows.Add(drQE);\n\ndrQE = dtQE.NewRow();\n\ndrQE[dtQE.Columns.IndexOf(\"DataTypeName\")] = \"DATE\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldName\")] = \"BirthDate\";\n\ndrQE[dtQE.Columns.IndexOf(\"HideColumn\")] = \"False\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldDisplayName\")] = \"Birth Date\";\n\ndtQE.Rows.Add(drQE);\n\ndrQE = dtQE.NewRow();\n\ndrQE[dtQE.Columns.IndexOf(\"DataTypeName\")] = \"STRING\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldName\")] = \"City\";\n\ndrQE[dtQE.Columns.IndexOf(\"HideColumn\")] = \"False\";\n\ndrQE[dtQE.Columns.IndexOf(\"FieldDisplayName\")] = \"City\";\n\ndtQE.Rows.Add(drQE);\n\ndsQE.Tables.Add(dtQE);\n\n//RadAjaxManager1.AjaxSettings.AddAjaxSetting(Grid1, Grid1);\n\nWorkItemDataRadGrid.CreateDataGrid(dsQE);\n\n//}\n\n}\n\nprotected void WorkItemDataRadGrid_ItemCommand(object source, Telerik.Web.UI.GridCommandEventArgs e)\n\n{\n\nif (e.CommandName == Telerik.Web.UI.RadGrid.RebindGridCommandName)\n\n{\n\n//LoadData();\n\n//WorkItemDataRadGrid.DataSource = dtTable;\n\n//if (RadGrid1.MasterTableView.IsItemInserted)\n\n//{\n\n// e.Canceled = true;\n\n//}\n\n}\n\n}\n\nprivate void WorkItemDataRadGrid_SortCommand(object source, GridSortCommandEventArgs e)\n\n{\n\nWorkItemDataRadGrid.AutoGenerateColumns = false;\n\nGridSortExpression sortExpr = new GridSortExpression();\n\nswitch (e.OldSortOrder)\n\n{\n\ncase GridSortOrder.None:\n\nWorkItemDataRadGrid.LoadData(dtTable, \"\", e.SortExpression + \" \" + \"ASC\");\n\nbreak;\n\ncase GridSortOrder.Ascending:\n\nWorkItemDataRadGrid.LoadData(dtTable, \"\", e.SortExpression + \" \" + \"DESC\");\n\nbreak;\n\ncase GridSortOrder.Descending:\n\nWorkItemDataRadGrid.LoadData(dtTable, \"\", e.SortExpression + \" \" + \"ASC\");\n\nbreak;\n\n}\n\n}\n\n}"
    }
}