{
    "id": "correct_subsidiary_00022_3",
    "rank": 94,
    "data": {
        "url": "https://vmpete.com/2012/09/20/multipathing-in-vsphere-with-the-dell-equallogic-multipathing-extension-module-mem/",
        "read_more_link": "",
        "language": "en",
        "title": "Multipathing in vSphere with the Dell EqualLogic Multipathing Extension Module (MEM)",
        "top_image": "https://vmpete.com/wp-content/uploads/2012/09/image_thumb.png",
        "meta_img": "https://vmpete.com/wp-content/uploads/2012/09/image_thumb.png",
        "images": [
            "https://vmpete.com/wp-content/uploads/2016/12/vmpete-1200x160-lefttjustified.png?w=1200",
            "https://vmpete.com/wp-content/uploads/2012/09/image_thumb.png?w=424&h=299",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=49&d=identicon&r=G",
            "https://2.gravatar.com/avatar/bc8d2fa6435bd1e86e6e01be42279463c9c579467d270616534d0f35e15652e7?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://1.gravatar.com/avatar/782dbff9b97a32ec3c7f0abca5713fa884264b448bdc9700dd66f9a6ab9dd186?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/8d6b0617fa3d8fdbae14996233a73aa084a066250245796ee7f79875489ee25e?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/8d6b0617fa3d8fdbae14996233a73aa084a066250245796ee7f79875489ee25e?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/8d6b0617fa3d8fdbae14996233a73aa084a066250245796ee7f79875489ee25e?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://0.gravatar.com/avatar/faa4341af7e1806c0eedb8796ecd7128adbbc1419a7464a380e5842da67d397b?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://0.gravatar.com/avatar/faa4341af7e1806c0eedb8796ecd7128adbbc1419a7464a380e5842da67d397b?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://0.gravatar.com/avatar/faa4341af7e1806c0eedb8796ecd7128adbbc1419a7464a380e5842da67d397b?s=42&d=identicon&r=G",
            "https://0.gravatar.com/avatar/faa4341af7e1806c0eedb8796ecd7128adbbc1419a7464a380e5842da67d397b?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/2beef2cf81b70da6f56545d1219bfe7b9c4ba821c152ab988b59068816e46e1d?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/2beef2cf81b70da6f56545d1219bfe7b9c4ba821c152ab988b59068816e46e1d?s=42&d=identicon&r=G",
            "https://2.gravatar.com/avatar/281f8359f876f2bcc48b1ac1ad97696fff5ae9cf281589dfb2e94b78c61aed27?s=42&d=identicon&r=G",
            "https://vmpete.com/wp-content/uploads/2016/12/blogprofile.jpg",
            "https://s2.wp.com/i/logo/wpcom-gray-white.png",
            "https://s2.wp.com/i/logo/wpcom-gray-white.png",
            "https://pixel.wp.com/b.gif?v=noscript"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "Author vmPete"
        ],
        "publish_date": "2012-09-20T00:00:00",
        "summary": "",
        "meta_description": "There is a lot to be said about the Dell EqualLogic Multipathing Extension Module (MEM) for vSphere.  One is that it is an impressive component that without a doubt will improve the performance of your vSphere environment.  The other is that it often not installed by organizations large and small.  This probably stems from a…",
        "meta_lang": "en",
        "meta_favicon": "https://s1.wp.com/i/favicon.ico",
        "meta_site_name": "",
        "canonical_link": "https://vmpete.com/2012/09/20/multipathing-in-vsphere-with-the-dell-equallogic-multipathing-extension-module-mem/",
        "text": "There is a lot to be said about the Dell EqualLogic Multipathing Extension Module (MEM) for vSphere. One is that it is an impressive component that without a doubt will improve the performance of your vSphere environment. The other is that it often not installed by organizations large and small. This probably stems from a few reasons.\n\nThe typical user is uncertain of the value it brings.\n\nvSphere Administrators might be under the assumption that VMware’s Round Robin will perform the same thing.\n\nThe assumption that if they don’t have vSphere Enterprise Plus licensing, they can’t use MEM.\n\nIt’s command line only\n\nWhat a shame, because the MEM gives you optimal performance of vSphere against your EqualLogic array, and is frankly easier to configure. Let me clarify, easier to configure correctly. iSCSI will work seemingly okay with not much effort. But that lack of effort initially can catch up with you later; resulting in no multipathing, poor performance, and possibly prone to error.\n\nThere are a number of good articles that outline the advantages of using the MEM. There is no need for me to repeat, so I’ll just stand on the shoulder’s of their posts, and provide the links at the end of my rambling.\n\nThe tool can be configured in a number of different ways to accommodate all types of scenarios; all of which is well documented in the Deployment Guide. The flexibility in deployment options might be why it seems a little intimidating to some users.\n\nI’m going to show you how to set up the MEM in a very simple, typical fashion. Let’s get started. We’ll be working under the following assumptions:\n\nvSphere 5 and the EqualLogic MEM *\n\nAn ESXi host Management IP of 192.168.199.11\n\nHost account of root with a password of mypassword\n\na standard vSwitch for iSCSI traffic will be used with two physical uplinks (vmnic4 & vmnic5) The vSwitch created will be a standard vSwitch, but it can easily be a Distributed vSwitch as well.\n\nThree IP addresses for each host; two for iSCSI vmkernels (192.168.198.11 & 192.168.198.21), and one for Storage Heartbeat. (192.168.198.31)\n\nJumbo frames (9000 bytes) have been configured on your SAN switchgear, and will be used on your ESXi hosts.\n\nA desire to accommodate VMs that used guest attached volumes.\n\nEqualLogic Group IP address of: 192.168.198.65\n\nStorage network range of 192.168.198.0 /24\n\nWhen applying to your environment, just tailor the settings to reflect your environment.\n\nDownload and preparation\n\n1. Download the MEM from the Dell EqualLogic customer web portal to a workstation that has the vSphere CLI installed\n\n2. Extract the MEM so that it resides in a C:\\MEM directory. You should see a setup.pl file in the root of C:\\MEM, along with a dell-eql-mem-esx5-[version].zip Keep this zip file, as it will be needed during the installation process.\n\nUpdate ESXi host\n\n1. Put ESXi host in Maintenance Mode\n\n2. Delete any previous vSwitch that goes into the pNICs for iSCSI. Will also need to remove any previous port bindings.\n\n3. Initiate script against first host:\n\nsetup.pl –configure –server=192.168.199.11 –username=root –password=mypassword\n\nThis will walk you through a series of variables you need to enter. It’s all pretty straightforward, but I’ve found the more practical way is to include it all as one string. This minimizes mistakes, improves documentation, and allows you to just cut and paste into the vSphere CLI. The complete string would look like this.\n\nsetup.pl –configure –server=192.168.199.11 –vswitch=vSwitchISCSI –mtu=9000 –nics=vmnic4,vmnic5 –ips=192.168.198.11,192.168.198.21 –heartbeat=192.168.198.31 –netmask=255.255.255.0 –vmkernel=iSCSI –nohwiscsi –groupip=192.168.198.65\n\nIt will prompt for a user name and password before it runs through the installation. Near the end of the installation, it will return:\n\nNo Dell EqualLogic Multipathing Extension Module found. Continue your setup by installing the module with the ‘esxcli software vib install’ command or through vCenter Update Manager\n\nThis is because the MEM VIB has not been installed yet. MEM will work but only using the default pathing policies. The MEM VIB can be installed by typing in the following:\n\nsetup.pl –install –server=192.168.199.11 –username=root –password=mypassword\n\nIf you look in vCenter, you’ll now see the vSwitch and vmkernel ports created and configured properly, with the port bindings configured correctly as well. You can verify it with the following\n\nsetup.pl –query –server=192.168.199.11 –username=root –password=mypassword\n\nBut you aren’t quite done yet. If you are using guest attached volumes, you will need to create Port Groups on that same vSwitch so that the guest volumes can connect to the array. To do it properly in which the two vNICs inside the guest OS can multipath to the volume properly, you will need to create two Port Groups. When complete, your vSwitch may look something like this:\n\nTake a look at the VMkernel ports created by MEM, you will see the NIC Teaming Switch Failover Order has been set so that one vmnic is set to “Active” while the other is set to “Unused” The other VMkernel port has the same settings, but with the vmnics reversed in their “Active” and “Unused” state.The Port Groups you create for VMs using Guest attached volumes will take a similar approach. Each Port Group will have one “Active” and one “Standby” adapter (“Standby” not “unused” like the VMkernel). Each Port Group has the vmnics reversed. When configuring a VM’s NICs for guest attached volume access, you will want to assign one vmnic to one Port Group, while the other is assigned to the other Port Group. Confused? Great. Take a look at Will Urban’s post on how to configure Port Groups for guest attached volumes correctly.\n\nAdjusting your existing environment.\n\nIf you need to rework your existing setup, simply put each host into Maintenance Mode one at a time and perform the steps above with your appropriate information.Next, take a look at your existing Datastores, and if they are using one of the built in Path Selection Policy methods (“Fixed” “Round Robin” etc.), change them over to “DELL_PSP_EQL_ROUTED”If you have VMs that leverage guest attached volumes off of a single teamed Port Group, you may wish to temporarily create this Port Group under the exact same name so the existing VMs have don’t get confused. Remove this temporary Port Group once you’ve had the opportunity to change the VM’s properties.So there you have it. A simple example of how to install and deploy Dell’s MEM for vSphere 5. Don’t leave performance and ease of management on the shelf. Get MEM installed and running in your vSphere environment.\n\nUPDATE (9/25/2012)\n\nThe instructions provided was under the assumption that vSphere 5 was being used. Under vSphere 5.1 and the latest version of MEM, the storage heartbeat is no longer needed. I have modified the post to accommodate, including the link below that references the latest Dell EqualLogic MEM documentation. I’d like to thank the Dell EqualLogic Engineering team for pointing out this important distinction.\n\nHelpful Links\n\nA great summary on the EqualLogic MEM and vStorage APIs\n\nhttp://whiteboardninja.wordpress.com/2011/02/01/equallogic-mem-and-vstorage-apis/\n\nComac Hogan’s great post on how the MEM works it’s magic.\n\nhttp://blogs.vmware.com/vsphere/2011/11/dells-multipath-extension-module-for-equallogic-now-supports-vsphere-50.html\n\nSome performance testing of the MEM\n\nhttp://www.spoonapedia.com/2010/07/dell-equallogic-multipathing-extension.html"
    }
}