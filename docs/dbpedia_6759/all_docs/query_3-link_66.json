{
    "id": "dbpedia_6759_3",
    "rank": 66,
    "data": {
        "url": "https://communities.sas.com/t5/SAS-Programming/Proc-gmap-for-longitude-latitude-data-of-a-city/td-p/445382",
        "read_more_link": "",
        "language": "en",
        "title": "Proc gmap for longitude latitude data of a city",
        "top_image": "https://communities.sas.com/t5/image/serverpage/image-id/60661iFA5D3EB77AEDF1AD?v=v2",
        "meta_img": "https://communities.sas.com/t5/image/serverpage/image-id/60661iFA5D3EB77AEDF1AD?v=v2",
        "images": [
            "https://communities.sas.com/t5/image/serverpage/avatar-name/collecting/avatar-theme/candy/avatar-collection/hobbies/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank5-calcite-1dot.png",
            "https://communities.sas.com/legacyfs/online/a61923_nz-flag-large-silver-fern-on-black1.png",
            "https://communities.sas.com/html/rank_icons/rank20-tourmaline-1dot.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/collecting/avatar-theme/candy/avatar-collection/hobbies/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank5-calcite-1dot.png",
            "https://communities.sas.com/legacyfs/online/a61923_nz-flag-large-silver-fern-on-black1.png",
            "https://communities.sas.com/html/rank_icons/rank20-tourmaline-1dot.png",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/collecting/avatar-theme/candy/avatar-collection/hobbies/avatar-display-size/message/version/2?xdesc=1.0",
            "https://communities.sas.com/html/rank_icons/rank5-calcite-1dot.png",
            "https://communities.sas.com/legacyfs/online/a61923_nz-flag-large-silver-fern-on-black1.png",
            "https://communities.sas.com/html/rank_icons/rank20-tourmaline-1dot.png",
            "https://communities.sas.com/t5/image/serverpage/image-id/63358iA71FFC93514D6B73/image-dimensions/40x40/image-coordinates/6%2C0%2C4016%2C4010?v=v2",
            "https://communities.sas.com/html/rank_icons/rank14-meteor-4dots.png",
            "https://communities.sas.com/t5/image/serverpage/image-id/18386i9FD4F7214F0D49EF/image-dimensions/40x40/image-coordinates/2%2C4%2C1182%2C667?v=v2",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://communities.sas.com/i/smilies/16x16_robot-wink.png",
            "https://communities.sas.com/t5/image/serverpage/image-id/63358iA71FFC93514D6B73/image-dimensions/40x40/image-coordinates/6%2C0%2C4016%2C4010?v=v2",
            "https://communities.sas.com/html/rank_icons/rank14-meteor-4dots.png",
            "https://communities.sas.com/t5/image/serverpage/image-id/60661iFA5D3EB77AEDF1AD/image-size/large?v=v2&px=999",
            "https://communities.sas.com/t5/image/serverpage/image-id/18386i9FD4F7214F0D49EF/image-dimensions/40x40/image-coordinates/2%2C4%2C1182%2C667?v=v2",
            "https://communities.sas.com/html/rank_icons/rank7-obsidian-3dots.png",
            "https://img.youtube.com/vi/wofLgDskv0E/0.jpg",
            "https://communities.sas.com/t5/image/serverpage/image-id/91612i245D732FF24B323D/image-size/small?v=v2&px=200",
            "https://communities.sas.com/t5/image/serverpage/image-id/63358iA71FFC93514D6B73/image-dimensions/16x16?v=v2",
            "https://communities.sas.com/legacyfs/online/a61923_nz-flag-large-silver-fern-on-black1.png",
            "https://communities.sas.com/t5/image/serverpage/image-id/18386i9FD4F7214F0D49EF/image-dimensions/16x16?v=v2",
            "https://communities.sas.com/t5/image/serverpage/avatar-name/collecting/avatar-theme/candy/avatar-collection/hobbies/avatar-display-size/favicon/version/2?xdesc=1.0",
            "https://communities.sas.com/skins/images/7D33E14921C8FEF327AA7CF0249E9155/responsive_peak/images/powered_by_khoros.svg"
        ],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [
            "communities.sas.com",
            "user-id"
        ],
        "publish_date": "2018-03-14T04:24:42.016000+00:00",
        "summary": "",
        "meta_description": "Hello Community, I am using Base SAS to analyze a crime dataset related to one of the cities of US. I have a dataset that has x-coordinate,",
        "meta_lang": "en",
        "meta_favicon": "https://communities.sas.com/html/@86D798D128D0FA03C10624935AA29945/assets/favicon.ico",
        "meta_site_name": "",
        "canonical_link": "https://communities.sas.com/t5/SAS-Programming/Proc-gmap-for-longitude-latitude-data-of-a-city/td-p/445382",
        "text": "Hello Community,\n\nI am using Base SAS to analyze a crime dataset related to one of the cities of US. I have a dataset that has x-coordinate, y-coordinate, longitude, and latitude data related to the city. Can I use Proc gmap or any other function to map these crime locations for this city?\n\nI am stuck and I could not proceed ahead with it. Again, I am aware of SAS visual analytics but that is not what I want to use. I want this to be done through Base SAS. Please provide some help.\n\nThank you in advance.\n\nI am assuming that you have imported the shapefile for the city (using Proc Mapimport), and have projected the lat/long values to get projected y/x values (using Proc Gproject).\n\nWhen you do the above, you can use Proc Gproject's parmout= option, and save the projection parameters, to use in the next step...\n\nNow you can take your crime lat/long dataset, and project it using Proc Gproject, and use the same projection parameters as you used for the city map (by using Gproject's parmin= option). And then use those projected x/y coordinates, and use them to annotate markers on the map. You could either use the annotate function='label' and annotate symbols from a font, or use the annotate function='pie' to annotate colored bubbles.\n\nHere's an example that uses the parmout and parmin, that might help get you started...\n\nhttp://robslink.com/SAS/democd95/scottish_festivals_nc_info.htm\n\n/*Here's an example from Central Texas Ya'll*/\n\n/*This example shows how to convert GPS to planar, and then gplot\n\n/*Create a sample data set a location in Central Texas - Google says this is Austin*/\n\ndata have;\n\ninput lat long POINT_ID;\n\ndatalines;\n\n30.2272 -97.7431 1\n\n;\n\nrun;\n\n/*Project Lat Long onto Central Texas Map - See Sashelp.Proj4def */\n\n/*Project your lat long onto NAD 1983 StatePlane Texas Central FIPS 4203 Feet*/\n\n/*Parameters: +proj=lcc +lat_1=30.11666666666667 +lat_2=31.88333333333333 +lat_0=29.66666666666667\n\n+lon_0=-100.3333333333333 +x_0=700000 +y_0=3000000 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 no_defs*/\n\nproc gproject latlon\n\nproject=proj4 to=\"ESRI:102739\" /*NAD 1983 StatePlane Texas Central FIPS 4203 Feet*/\n\ndata=have out=want;\n\nid POINT_ID;\n\nrun;\n\n/*Now plot using sgplot*/\n\nproc sgplot data=want;\n\nscatter x=x y=y;\n\nrun;\n\n/*But wait - there's more...*/\n\n/*You can download public maps (.gov websites usually have these) as shapefiles and convert them to your local planar coordinate system*/\n\nPROC MAPIMPORT OUT=<your filename here> DATAFILE='<public shapefile here>.shp';\n\nrun;\n\n/*Check - You must call lat long 'lat' 'long' before you can proc gproject...if not rename them*/\n\n/*Convert Shape file map to Central Texas State Plane*/\n\nproc gproject latlon\n\nproject=proj4 to=\"ESRI:102739\" /*NAD 1983 StatePlane Texas Central FIPS 4203 Feet*/\n\ndata=<your filename here> out=<file with planar coordinates>;\n\nid SHAPE_ID; /*SHAPE_ID is the field common to all the points that define a shape*/\n\nrun;\n\n/*Now concatenate the point and the shape file - Note You will need to rename the X and Y in your points file, call them XP and YP*/\n\ndata combined; set want <file with planar coordinates>; run;\n\nproc sgplot data=combined;\n\npolygon x=x y=y ID=SHAPE_ID / fill outline;\n\nscatter x=XP y=YP;\n\nrun;\n\n/*Even cooler...You can also use proc ginside to see if your point lies inside any of the shapes from your shape file...for example*/\n\nproc ginside data=want map=<your filename> out=Inside INSIDEONLY;\n\nid SHAPE_ID;\n\nrun;\n\nBread Crumbs and Circuses for All\n\n* Update...The National Oceanic and Atmospheric Administration (NOAA) has forecast data available on a Microsoft Public Blob...;\n\n* Download a specific date and forecast from the Windows DOS CMD line (or Linux);\n\n* Windows azcopy example...\n\n* azcopy cp \"https://noaahrrr.blob.core.windows.net/hrrr/hrrr.20210601/conus/hrrr.t12z.wrfsfcf00.grib2\" \"C:\\YOURFOLDER\\conus.grib2\";\n\n* or Windows curl...\n\n* curl https://noaahrrr.blob.core.windows.net/hrrr/hrrr.20210601/conus/hrrr.t12z.wrfsfcf00.grib2 --output \"C:\\YOURFOLDER\\conus.grib2\";\n\n* But this is a \"grib2\" file, so you also need to install the wgrib2.exe application from NOAA to parse it...\n\n* Get a copy of wgrib2.exe (Linux version also available) from NOAA to parse the binary weather file;\n\n* Use the NOAA link below to install wgrib2.exe in DOS;\n\n* NOAA link to wgrib2.exe install...https://ftp.cpc.ncep.noaa.gov/wd51we/wgrib2/Windows10/v3.0.2/;\n\n* You can parse-out your local data and overlay on a city map. Here's how...;\n\n* wgrib2 C:\\YOURFOLDER\\conus.grib2 -set_grib_type j -small_grib -98.2:-97.35 29.95:30.78 C:\\YOURFOLDER\\austin.grib2;\n\n* Convert the filtered grib2 file to .csv...\n\n* wgrib2 \"C:\\YOURFOLDER\\austin.grib2\" -csv \"C:\\YOURFOLDER\\austin.csv\";\n\n* Now import the file into SAS...;\n\ndata WORK.austin;\n\ninfile 'C:\\YOURFOLDER\\austin.csv' dsd truncover ;\n\nlength COL1 $30. COL2 $30. COL3 $30. COL4 $30. COL5 $30. COL6 $30. COL7 $30.;\n\ninput COL1 -- COL7 ;\n\nrun;\n\n* Assign an ID to each coordinate;\n\ndata have (KEEP = ID lat long Weather Value);\n\nset WORK.austin;\n\nformat ID 10. lat long best20.;\n\nID = _N_;\n\nlat = COL6;\n\nlong = COL5;\n\nWeather = COL3;\n\nValue = COL7;\n\nrun;\n\n* Convert weather coodinates to Texas planer XY coordinates;\n\nproc gproject latlon\n\nproject=proj4 to=\"ESRI:102739\"\n\ndata=have out=want;\n\nid ID;\n\nrun;\n\n* Now you have the lat, long, X and Y projection, and weather forecast parameters for a grid of locations over your city - pretty cool, huh?\n\nBread Crumbs and Circuses for All"
    }
}