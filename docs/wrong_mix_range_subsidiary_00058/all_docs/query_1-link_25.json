{
    "id": "wrong_mix_range_subsidiary_00058_1",
    "rank": 25,
    "data": {
        "url": "https://lore.kernel.org/linux-kernel//1D0CA16CE8BA4331BC7C995D25717BFE%40elan.corp/T/",
        "read_more_link": "",
        "language": "en",
        "title": "multitouch: add mt_resume for ELAN's production",
        "top_image": "",
        "meta_img": "",
        "images": [],
        "movies": [],
        "keywords": [],
        "meta_keywords": [
            ""
        ],
        "tags": null,
        "authors": [],
        "publish_date": null,
        "summary": "",
        "meta_description": "",
        "meta_lang": "",
        "meta_favicon": "",
        "meta_site_name": "",
        "canonical_link": null,
        "text": "linux-kernel.vger.kernel.org archive mirror help / color / mirror / Atom feed* [PATCH 1/1]hid:hid-multitouch: add mt_resume for ELAN's production @ 2012-08-03 9:00 劉嘉駿 2012-08-03 9:58 ` Jian-Jhong Ding 0 siblings, 1 reply; 4+ messages in thread From: 劉嘉駿 @ 2012-08-03 9:00 UTC (permalink / raw) To: 'benjamin.tissoires', 'Dmitry Torokhov', 'Jiri Kosina' Cc: linux-input, linux-kernel, eleghost Some of ELAN’s production need to issue set_idle when resume. Signed-off-by: Scott Liu <scott.liu@emc.com.tw> --- drivers/hid/hid-ids.h | 3 +++ drivers/hid/hid-multitouch.c | 27 +++++++++++++++++++++++++++ 2 files changed, 30 insertions(+) mode change 100644 => 100755 drivers/hid/hid-ids.h mode change 100644 => 100755 drivers/hid/hid-multitouch.c diff --git a/drivers/hid/hid-ids.h b/drivers/hid/hid-ids.h old mode 100644 new mode 100755 index 41c34f2..703aaed --- a/drivers/hid/hid-ids.h +++ b/drivers/hid/hid-ids.h @@ -829,4 +829,7 @@ #define USB_VENDOR_ID_PRIMAX 0x0461 #define USB_DEVICE_ID_PRIMAX_KEYBOARD 0x4e05 +#define USB_VENDOR_ID_ELAN 0x04f3 +#define USB_DEVICE_ID_ELAN_MOCCA 0x000a + #endif diff --git a/drivers/hid/hid-multitouch.c b/drivers/hid/hid-multitouch.c old mode 100644 new mode 100755 index 59c8b5c..2c898bb --- a/drivers/hid/hid-multitouch.c +++ b/drivers/hid/hid-multitouch.c @@ -767,6 +767,32 @@ static int mt_reset_resume(struct hid_device *hdev) mt_set_input_mode(hdev); return 0; } + +static int mt_resume(struct hid_device *hdev) +{ + struct usb_interface *intf = to_usb_interface(hdev->dev.parent); + struct usb_host_interface *interface = intf->cur_altsetting; + + struct usb_device *dev = hid_to_usb_dev(hdev); + + + if (hdev->vendor == USB_VENDOR_ID_ELAN && + hdev->product == USB_DEVICE_ID_ELAN_MOCCA) { + + usb_control_msg(dev, + usb_sndctrlpipe(dev, 0), + HID_REQ_SET_IDLE, + USB_TYPE_CLASS | USB_RECIP_INTERFACE, + 0, + interface->desc.bInterfaceNumber, + NULL, + 0, + USB_CTRL_SET_TIMEOUT); + } + + return 0; +} + #endif static void mt_remove(struct hid_device *hdev) @@ -1092,6 +1118,7 @@ static struct hid_driver mt_driver = { .event = mt_event, #ifdef CONFIG_PM .reset_resume = mt_reset_resume, + .resume=mt_resume, #endif }; -- 1.7.9.5 ^ permalink raw reply related [flat|nested] 4+ messages in thread* Re: [PATCH 1/1]hid:hid-multitouch: add mt_resume for ELAN's production 2012-08-03 9:00 [PATCH 1/1]hid:hid-multitouch: add mt_resume for ELAN's production 劉嘉駿 @ 2012-08-03 9:58 ` Jian-Jhong Ding 2012-08-06 3:14 ` 劉嘉駿 0 siblings, 1 reply; 4+ messages in thread From: Jian-Jhong Ding @ 2012-08-03 9:58 UTC (permalink / raw) To: 劉嘉駿, 'benjamin.tissoires', 'Dmitry Torokhov', 'Jiri Kosina' Cc: linux-input, linux-kernel, eleghost Hi Scott, 劉嘉駿 <scott.liu@emc.com.tw> writes: > Some of ELAN’s production need to issue set_idle when resume. > > Signed-off-by: Scott Liu <scott.liu@emc.com.tw> You might want to add a From: line at the top of mail body to make your name go along with the SoB line. > --- > drivers/hid/hid-ids.h | 3 +++ > drivers/hid/hid-multitouch.c | 27 +++++++++++++++++++++++++++ > 2 files changed, 30 insertions(+) > mode change 100644 => 100755 drivers/hid/hid-ids.h > mode change 100644 => 100755 drivers/hid/hid-multitouch.c I believe these two files are merely plain text source file. No need to make them executives. And, please consider using git send-mail to send the patches. Your MTA is still making the indent pretty ugly. Thanks, -JJ > diff --git a/drivers/hid/hid-ids.h b/drivers/hid/hid-ids.h > old mode 100644 > new mode 100755 > index 41c34f2..703aaed > --- a/drivers/hid/hid-ids.h > +++ b/drivers/hid/hid-ids.h > @@ -829,4 +829,7 @@ > #define USB_VENDOR_ID_PRIMAX 0x0461 > #define USB_DEVICE_ID_PRIMAX_KEYBOARD 0x4e05 > > +#define USB_VENDOR_ID_ELAN 0x04f3 > +#define USB_DEVICE_ID_ELAN_MOCCA 0x000a > + > #endif > diff --git a/drivers/hid/hid-multitouch.c b/drivers/hid/hid-multitouch.c > old mode 100644 > new mode 100755 > index 59c8b5c..2c898bb > --- a/drivers/hid/hid-multitouch.c > +++ b/drivers/hid/hid-multitouch.c > @@ -767,6 +767,32 @@ static int mt_reset_resume(struct hid_device *hdev) > mt_set_input_mode(hdev); > return 0; > } > + > +static int mt_resume(struct hid_device *hdev) > +{ > + struct usb_interface *intf = to_usb_interface(hdev->dev.parent); > + struct usb_host_interface *interface = intf->cur_altsetting; > + > + struct usb_device *dev = hid_to_usb_dev(hdev); > + > + > + if (hdev->vendor == USB_VENDOR_ID_ELAN && > + hdev->product == USB_DEVICE_ID_ELAN_MOCCA) { > + > + usb_control_msg(dev, > + usb_sndctrlpipe(dev, 0), > + HID_REQ_SET_IDLE, > + USB_TYPE_CLASS | USB_RECIP_INTERFACE, > + 0, > + interface->desc.bInterfaceNumber, > + NULL, > + 0, > + USB_CTRL_SET_TIMEOUT); > + } > + > + return 0; > +} > + > #endif > > static void mt_remove(struct hid_device *hdev) > @@ -1092,6 +1118,7 @@ static struct hid_driver mt_driver = { > .event = mt_event, > #ifdef CONFIG_PM > .reset_resume = mt_reset_resume, > + .resume=mt_resume, > #endif > }; > > -- > 1.7.9.5 > > -- > To unsubscribe from this list: send the line \"unsubscribe linux-kernel\" in > the body of a message to majordomo@vger.kernel.org > More majordomo info at http://vger.kernel.org/majordomo-info.html > Please read the FAQ at http://www.tux.org/lkml/ ^ permalink raw reply [flat|nested] 4+ messages in thread* RE: [PATCH 1/1]hid:hid-multitouch: add mt_resume for ELAN's production 2012-08-03 9:58 ` Jian-Jhong Ding @ 2012-08-06 3:14 ` 劉嘉駿 0 siblings, 0 replies; 4+ messages in thread From: 劉嘉駿 @ 2012-08-06 3:14 UTC (permalink / raw) To: 'Jian-Jhong Ding', 'benjamin.tissoires', 'Dmitry Torokhov', 'Jiri Kosina' Cc: linux-input, linux-kernel, eleghost Mode change to 0644. From: Scott Liu<scott.liu@emc.com.tw> Signed-off-by: Scott Liu <scott.liu@emc.com.tw> --- 0 files changed mode change 100755 => 100644 drivers/hid/hid-ids.h mode change 100755 => 100644 drivers/hid/hid-multitouch.c diff --git a/drivers/hid/hid-ids.h b/drivers/hid/hid-ids.h old mode 100755 new mode 100644 diff --git a/drivers/hid/hid-multitouch.c b/drivers/hid/hid-multitouch.c old mode 100755 new mode 100644 -- 1.7.9.5 -----Original Message----- From: linux-input-owner@vger.kernel.org [mailto:linux-input-owner@vger.kernel.org] On Behalf Of Jian-Jhong Ding Sent: Friday, August 03, 2012 5:58 PM To: 劉嘉駿; 'benjamin.tissoires'; 'Dmitry Torokhov'; 'Jiri Kosina' Cc: linux-input@vger.kernel.org; linux-kernel@vger.kernel.org; eleghost@gmail.com Subject: Re: [PATCH 1/1]hid:hid-multitouch: add mt_resume for ELAN's production Hi Scott, 劉嘉駿 <scott.liu@emc.com.tw> writes: > Some of ELAN’s production need to issue set_idle when resume. > > Signed-off-by: Scott Liu <scott.liu@emc.com.tw> You might want to add a From: line at the top of mail body to make your name go along with the SoB line. > --- > drivers/hid/hid-ids.h | 3 +++ > drivers/hid/hid-multitouch.c | 27 +++++++++++++++++++++++++++ > 2 files changed, 30 insertions(+) > mode change 100644 => 100755 drivers/hid/hid-ids.h > mode change 100644 => 100755 drivers/hid/hid-multitouch.c I believe these two files are merely plain text source file. No need to make them executives. And, please consider using git send-mail to send the patches. Your MTA is still making the indent pretty ugly. Thanks, -JJ > diff --git a/drivers/hid/hid-ids.h b/drivers/hid/hid-ids.h > old mode 100644 > new mode 100755 > index 41c34f2..703aaed > --- a/drivers/hid/hid-ids.h > +++ b/drivers/hid/hid-ids.h > @@ -829,4 +829,7 @@ > #define USB_VENDOR_ID_PRIMAX 0x0461 > #define USB_DEVICE_ID_PRIMAX_KEYBOARD 0x4e05 > > +#define USB_VENDOR_ID_ELAN 0x04f3 > +#define USB_DEVICE_ID_ELAN_MOCCA 0x000a > + > #endif > diff --git a/drivers/hid/hid-multitouch.c b/drivers/hid/hid-multitouch.c > old mode 100644 > new mode 100755 > index 59c8b5c..2c898bb > --- a/drivers/hid/hid-multitouch.c > +++ b/drivers/hid/hid-multitouch.c > @@ -767,6 +767,32 @@ static int mt_reset_resume(struct hid_device *hdev) > mt_set_input_mode(hdev); > return 0; > } > + > +static int mt_resume(struct hid_device *hdev) > +{ > + struct usb_interface *intf = to_usb_interface(hdev->dev.parent); > + struct usb_host_interface *interface = intf->cur_altsetting; > + > + struct usb_device *dev = hid_to_usb_dev(hdev); > + > + > + if (hdev->vendor == USB_VENDOR_ID_ELAN && > + hdev->product == USB_DEVICE_ID_ELAN_MOCCA) { > + > + usb_control_msg(dev, > + usb_sndctrlpipe(dev, 0), > + HID_REQ_SET_IDLE, > + USB_TYPE_CLASS | USB_RECIP_INTERFACE, > + 0, > + interface->desc.bInterfaceNumber, > + NULL, > + 0, > + USB_CTRL_SET_TIMEOUT); > + } > + > + return 0; > +} > + > #endif > > static void mt_remove(struct hid_device *hdev) > @@ -1092,6 +1118,7 @@ static struct hid_driver mt_driver = { > .event = mt_event, > #ifdef CONFIG_PM > .reset_resume = mt_reset_resume, > + .resume=mt_resume, > #endif > }; > > -- > 1.7.9.5 > > -- > To unsubscribe from this list: send the line \"unsubscribe linux-kernel\" in > the body of a message to majordomo@vger.kernel.org > More majordomo info at http://vger.kernel.org/majordomo-info.html > Please read the FAQ at http://www.tux.org/lkml/ -- To unsubscribe from this list: send the line \"unsubscribe linux-input\" in the body of a message to majordomo@vger.kernel.org More majordomo info at http://vger.kernel.org/majordomo-info.html ^ permalink raw reply [flat|nested] 4+ messages in thread* Re: [PATCH 1/1]hid:hid-multitouch: add mt_resume for ELAN's production [not found] <C8EA045ABE09420E976A1F1D4294E737@elan.corp> @ 2012-08-03 8:39 ` Jiri Kosina 0 siblings, 0 replies; 4+ messages in thread From: Jiri Kosina @ 2012-08-03 8:39 UTC (permalink / raw) To: 劉嘉駿 Cc: 'benjamin.tissoires', 'Dmitry Torokhov', linux-input, linux-kernel On Fri, 3 Aug 2012, 劉嘉駿 wrote: > Some of ELAN’s production need to issue set_idle when resume. Scott, your e-mail client broke the patch in a way that it's not only impossible to apply it using standard tools, but it's also unreadable by eyes (a lot of whitespaces, broken lines, every second line is blank, etc). Could you please fix that up and resend? -- Jiri Kosina SUSE Labs ^ permalink raw reply [flat|nested] 4+ messages in thread\n\nend of thread, other threads:[~2012-08-06 3:14 UTC | newest] Thread overview: 4+ messages (download: mbox.gz / follow: Atom feed) -- links below jump to the message on this page -- 2012-08-03 9:00 [PATCH 1/1]hid:hid-multitouch: add mt_resume for ELAN's production 劉嘉駿 2012-08-03 9:58 ` Jian-Jhong Ding 2012-08-06 3:14 ` 劉嘉駿 [not found] <C8EA045ABE09420E976A1F1D4294E737@elan.corp> 2012-08-03 8:39 ` Jiri Kosina"
    }
}